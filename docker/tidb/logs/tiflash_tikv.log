[2024/09/16 18:28:11.551 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 18:28:11.551 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 18:28:11.551 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 18:28:11.551 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 18:28:11.551 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 18:28:11.551 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 18:28:11.552 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 18:28:11.584 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:28:11.587 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 18:28:13.598 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:28:13.598 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/16 18:28:13.910 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:28:13.914 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:13.916 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:13.922 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:13.924 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 18:28:13.926 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 18:28:13.926 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 18:28:13.928 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 18:28:13.929 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 18:28:13.929 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 18:28:13.933 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 18:28:13.934 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:28:13.934 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:28:13.936 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 18:28:13.937 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 18:28:13.937 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:28:13.942 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 18:28:13.943 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 18:28:13.943 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 18:28:13.943 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:28:13.943 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:28:13.950 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 18:28:13.954 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 18:28:13.956 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=16]
[2024/09/16 18:28:13.956 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=12] [path=resource_group/settings] [thread_id=16]
[2024/09/16 18:28:13.959 +00:00] [WARN] [common.rs:210] ["failed to remove space holder on starting: No such file or directory (os error 2)"] [thread_id=1]
[2024/09/16 18:28:14.023 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 18:28:14.023 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 18:28:14.026 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 18:28:14.041 +00:00] [INFO] [raftstore_proxy.rs:223] ["get_all_stores error ClusterNotBootstrapped(7415309541240867473) after 0/60 retries"] [thread_id=1]
[2024/09/16 18:28:15.043 +00:00] [INFO] [raftstore_proxy.rs:223] ["get_all_stores error ClusterNotBootstrapped(7415309541240867473) after 1/60 retries"] [thread_id=1]
[2024/09/16 18:28:16.422 +00:00] [INFO] [raftstore_proxy.rs:223] ["get_all_stores error ClusterNotBootstrapped(7415309541240867473) after 2/60 retries"] [thread_id=1]
[2024/09/16 18:28:17.101 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:17.101 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 18:28:20.124 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:20.125 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 18:28:23.144 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:23.145 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 18:28:26.156 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:26.156 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 18:28:29.172 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:29.172 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 18:28:32.179 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:32.179 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 18:28:32.180 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 18:28:32.180 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 18:28:32.380 +00:00] [INFO] [run.rs:188] ["engine-store server is not running, make proxy exit"] [thread_id=1]
[2024/09/16 18:28:32.795 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 18:28:32.795 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 18:28:32.795 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 18:28:32.795 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 18:28:32.795 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 18:28:32.796 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 18:28:32.811 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:28:32.813 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 18:28:32.817 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:32.820 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:32.822 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:32.823 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 18:28:32.827 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 18:28:32.827 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 18:28:32.827 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 18:28:32.827 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 18:28:32.827 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 18:28:32.828 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 18:28:32.829 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:28:32.829 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:28:32.830 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 18:28:32.830 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 18:28:32.830 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:28:32.833 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 18:28:32.835 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:28:32.835 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 18:28:32.836 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 18:28:32.836 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 18:28:32.836 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 18:28:32.836 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 18:28:32.837 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:28:32.837 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:28:32.837 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 18:28:32.839 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 18:28:32.858 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=18]
[2024/09/16 18:28:32.922 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=269] [path=resource_group/settings] [thread_id=18]
[2024/09/16 18:28:32.923 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 18:28:32.923 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 18:28:32.923 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 18:28:32.948 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:32.949 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 18:28:35.962 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:35.962 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 18:28:38.985 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:38.986 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 18:28:42.000 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:42.001 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 18:28:45.011 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:45.012 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 18:28:48.026 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:48.027 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 18:28:48.027 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 18:28:48.027 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 18:28:48.227 +00:00] [INFO] [run.rs:188] ["engine-store server is not running, make proxy exit"] [thread_id=1]
[2024/09/16 18:28:48.728 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 18:28:48.730 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 18:28:48.731 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 18:28:48.734 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:28:48.736 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 18:28:48.743 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:48.747 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:48.752 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:28:48.753 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 18:28:48.769 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 18:28:48.769 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 18:28:48.769 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 18:28:48.770 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 18:28:48.770 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 18:28:48.774 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 18:28:48.778 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:28:48.778 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:28:48.780 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 18:28:48.781 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 18:28:48.781 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:28:48.794 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 18:28:48.797 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:28:48.797 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 18:28:48.797 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 18:28:48.798 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 18:28:48.798 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 18:28:48.799 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 18:28:48.800 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:28:48.800 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:28:48.801 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 18:28:48.803 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 18:28:48.806 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/16 18:28:48.806 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=278] [path=resource_group/settings] [thread_id=17]
[2024/09/16 18:28:48.844 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 18:28:48.844 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 18:28:48.844 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 18:28:48.868 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:48.869 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 18:28:51.884 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:51.885 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 18:28:54.898 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:54.899 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 18:28:57.912 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:28:57.913 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 18:29:00.925 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:00.925 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 18:29:03.942 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:03.943 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 18:29:03.943 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 18:29:03.943 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 18:29:04.144 +00:00] [INFO] [run.rs:188] ["engine-store server is not running, make proxy exit"] [thread_id=1]
[2024/09/16 18:29:04.617 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 18:29:04.618 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 18:29:04.628 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:29:04.632 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 18:29:04.654 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:29:04.656 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:29:04.659 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:29:04.659 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 18:29:04.662 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 18:29:04.662 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 18:29:04.662 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 18:29:04.662 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 18:29:04.662 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 18:29:04.663 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 18:29:04.664 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:29:04.664 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:29:04.665 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 18:29:04.666 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 18:29:04.666 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:29:04.669 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 18:29:04.670 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:29:04.670 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 18:29:04.670 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 18:29:04.671 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 18:29:04.671 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 18:29:04.671 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 18:29:04.672 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:29:04.672 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:29:04.672 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 18:29:04.673 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 18:29:04.676 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/16 18:29:04.678 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=284] [path=resource_group/settings] [thread_id=17]
[2024/09/16 18:29:04.717 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 18:29:04.717 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 18:29:04.717 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 18:29:04.730 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:04.731 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 18:29:07.754 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:07.754 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 18:29:10.782 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:10.782 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 18:29:13.796 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:13.797 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 18:29:16.821 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:16.822 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 18:29:19.828 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:19.829 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 18:29:19.829 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 18:29:19.829 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 18:29:20.030 +00:00] [INFO] [run.rs:188] ["engine-store server is not running, make proxy exit"] [thread_id=1]
[2024/09/16 18:29:20.562 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 18:29:20.562 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 18:29:20.563 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 18:29:20.570 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:29:20.574 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 18:29:20.580 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:29:20.583 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:29:20.586 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:29:20.587 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 18:29:20.607 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 18:29:20.607 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 18:29:20.607 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 18:29:20.607 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 18:29:20.607 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 18:29:20.609 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 18:29:20.610 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:29:20.610 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:29:20.612 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 18:29:20.613 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 18:29:20.613 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:29:20.615 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 18:29:20.617 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:29:20.617 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 18:29:20.617 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 18:29:20.618 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 18:29:20.618 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 18:29:20.618 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 18:29:20.619 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:29:20.620 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:29:20.620 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 18:29:20.621 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 18:29:20.622 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/16 18:29:20.623 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=296] [path=resource_group/settings] [thread_id=17]
[2024/09/16 18:29:20.653 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 18:29:20.653 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 18:29:20.653 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 18:29:20.676 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:20.677 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 18:29:23.689 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:23.689 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 18:29:26.699 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:26.699 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 18:29:29.707 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:29.707 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 18:29:32.727 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:32.728 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 18:29:35.739 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:29:35.740 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 18:29:35.740 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 18:29:35.740 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 18:29:35.946 +00:00] [INFO] [run.rs:188] ["engine-store server is not running, make proxy exit"] [thread_id=1]
[2024/09/16 18:32:41.001 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 18:32:41.002 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 18:32:41.002 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 18:32:41.002 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 18:32:41.003 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 18:32:41.003 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 18:32:41.003 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 18:32:41.003 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 18:32:41.003 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 18:32:41.008 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 18:32:41.009 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 18:32:41.009 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 18:32:41.009 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 18:32:41.010 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 18:32:41.010 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 18:32:41.010 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 18:32:41.037 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:32:41.042 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=1]
[2024/09/16 18:32:43.044 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:32:43.044 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/16 18:32:43.354 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:32:45.369 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:32:45.670 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:32:45.978 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:32:45.987 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:32:45.997 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:32:46.006 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:32:46.007 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 18:32:46.007 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 18:32:46.007 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 18:32:46.007 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 18:32:46.008 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 18:32:46.008 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 18:32:46.009 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 18:32:46.009 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:32:46.010 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:32:46.011 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 18:32:46.012 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 18:32:46.012 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:32:46.015 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 18:32:46.017 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:32:46.018 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 18:32:46.018 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 18:32:46.019 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 18:32:46.019 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 18:32:46.019 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 18:32:46.019 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:32:46.019 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:32:46.020 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 18:32:46.024 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 18:32:46.028 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=16]
[2024/09/16 18:32:46.028 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=317] [path=resource_group/settings] [thread_id=16]
[2024/09/16 18:32:46.074 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 18:32:46.074 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 18:32:46.251 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 18:32:48.117 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:32:48.118 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 18:32:51.133 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:32:51.133 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 18:32:54.146 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:32:54.147 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 18:32:57.155 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:32:57.156 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 18:33:00.172 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:33:00.173 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 18:33:03.187 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:33:03.187 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 18:33:03.187 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 18:33:03.188 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 18:33:03.989 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/16 18:33:03.990 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/16 18:33:03.996 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 3.080459ms"] [thread_id=1]
[2024/09/16 18:33:04.044 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/16 18:33:04.118 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/16 18:33:04.125 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/16 18:33:04.126 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/16 18:33:04.134 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/16 18:33:04.136 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726511584 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/16 18:33:04.139 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/16 18:33:04.140 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/16 18:33:04.140 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/16 18:33:04.140 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/16 18:33:04.142 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/16 18:33:04.166 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/16 18:33:04.167 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=111.125Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/16 18:33:04.167 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=10.916Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/16 18:33:04.178 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/16 18:33:04.213 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/16 18:33:04.229 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/16 18:33:14.181 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=94]
[2024/09/16 18:42:46.033 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 18:48:41.855 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/16 18:48:41.862 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/16 18:48:41.864 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/16 18:48:41.864 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/16 18:48:41.865 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/16 18:48:41.865 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/16 18:48:41.865 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/16 18:48:41.866 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/16 18:48:41.866 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/16 18:48:41.867 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/16 18:48:41.868 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/16 18:48:41.877 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/16 18:48:42.128 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/16 18:48:42.128 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/16 18:48:42.611 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=173]
[2024/09/16 18:48:44.325 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdStoreHeartbeat] [thread_id=173]
[2024/09/16 18:48:44.544 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/16 18:48:52.015 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 18:48:52.017 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 18:48:52.017 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 18:48:52.017 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 18:48:52.018 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 18:48:52.026 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:48:52.030 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 18:48:54.032 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:48:54.032 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/16 18:48:54.338 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:48:56.608 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 18:48:56.615 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:48:56.625 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:48:56.632 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 18:48:56.634 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 18:48:56.635 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 18:48:56.635 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 18:48:56.635 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 18:48:56.635 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 18:48:56.635 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 18:48:56.639 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 18:48:56.640 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:48:56.640 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 18:48:56.643 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 18:48:56.644 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 18:48:56.644 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:48:56.648 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 18:48:56.650 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 18:48:56.650 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 18:48:56.650 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 18:48:56.651 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 18:48:56.652 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 18:48:56.652 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 18:48:56.652 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:48:56.652 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 18:48:56.654 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 18:48:56.659 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 18:48:56.661 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=16]
[2024/09/16 18:48:56.661 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=847] [path=resource_group/settings] [thread_id=16]
[2024/09/16 18:48:58.863 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 18:48:58.863 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 18:48:58.863 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 18:48:59.019 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:48:59.021 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 18:49:02.031 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:49:02.032 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 18:49:05.050 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:49:05.050 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 18:49:08.072 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:49:08.073 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 18:49:11.084 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:49:11.084 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 18:49:14.094 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 18:49:14.094 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 18:49:14.095 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 18:49:14.095 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 18:49:14.698 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/16 18:49:14.698 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/16 18:49:14.700 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 1.689958ms"] [thread_id=1]
[2024/09/16 18:49:14.743 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/16 18:49:14.825 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/16 18:49:14.835 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/16 18:49:14.835 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/16 18:49:14.845 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/16 18:49:14.847 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726512554 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/16 18:49:14.849 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/16 18:49:14.850 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/16 18:49:14.850 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/16 18:49:14.850 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/16 18:49:14.850 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/16 18:49:14.854 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/16 18:49:14.854 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=127.291Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/16 18:49:14.854 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=34.916Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/16 18:49:14.860 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/16 18:49:14.890 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/16 18:49:14.917 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/16 18:49:24.868 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=96]
[2024/09/16 18:58:56.654 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 19:03:21.571 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/16 19:03:21.576 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/16 19:03:21.577 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/16 19:03:21.577 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/16 19:03:21.577 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/16 19:03:21.578 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/16 19:03:21.578 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/16 19:03:21.578 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/16 19:03:21.578 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/16 19:03:21.578 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/16 19:03:21.578 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/16 19:03:21.581 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/16 19:03:21.758 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/16 19:03:21.758 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/16 19:03:22.039 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/16 19:03:25.008 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdStoreHeartbeat] [thread_id=175]
[2024/09/16 19:03:25.377 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/16 19:03:30.477 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 19:03:30.478 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 19:03:30.478 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 19:03:30.478 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 19:03:30.479 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 19:03:30.479 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 19:03:30.479 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 19:03:30.479 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 19:03:30.479 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 19:03:30.480 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 19:03:30.480 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 19:03:30.480 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 19:03:30.480 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 19:03:30.480 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 19:03:30.480 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 19:03:30.480 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 19:03:30.529 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:03:30.532 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 19:03:32.550 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:03:32.551 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/16 19:03:32.863 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:03:33.630 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:03:33.633 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 19:03:33.637 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 19:03:33.641 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 19:03:33.641 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 19:03:33.641 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 19:03:33.642 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 19:03:33.642 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 19:03:33.642 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 19:03:33.642 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 19:03:33.643 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 19:03:33.645 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 19:03:33.645 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 19:03:33.657 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 19:03:33.658 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 19:03:33.658 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 19:03:33.662 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 19:03:33.664 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 19:03:33.664 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 19:03:33.664 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 19:03:33.665 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 19:03:33.665 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 19:03:33.665 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 19:03:33.665 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 19:03:33.666 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 19:03:33.666 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 19:03:33.672 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 19:03:33.691 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/16 19:03:33.711 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=1330] [path=resource_group/settings] [thread_id=17]
[2024/09/16 19:03:33.897 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 19:03:35.798 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 19:03:35.801 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 19:03:35.815 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 19:03:35.817 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 19:03:38.827 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 19:03:38.828 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 19:03:41.837 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 19:03:41.837 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 19:59:08.809 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 19:59:08.809 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 19:59:08.809 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 19:59:08.809 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 19:59:08.809 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 19:59:08.810 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 19:59:08.823 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:59:08.827 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/16 19:59:10.828 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:59:10.829 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/16 19:59:11.138 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:59:13.148 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:59:13.449 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:59:14.229 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 19:59:14.234 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 19:59:14.237 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 19:59:14.239 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 19:59:14.241 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 19:59:14.242 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 19:59:14.242 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 19:59:14.244 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 19:59:14.244 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 19:59:14.244 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 19:59:14.246 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 19:59:14.247 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 19:59:14.247 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 19:59:14.252 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 19:59:14.254 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 19:59:14.254 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 19:59:14.265 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 19:59:14.266 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 19:59:14.266 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 19:59:14.267 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 19:59:14.269 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 19:59:14.269 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 19:59:14.269 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 19:59:14.269 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 19:59:14.269 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 19:59:14.273 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 19:59:14.281 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 19:59:14.288 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/16 19:59:14.407 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=1367] [path=resource_group/settings] [thread_id=17]
[2024/09/16 19:59:16.777 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 19:59:16.777 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 19:59:16.778 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 19:59:16.877 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 19:59:16.878 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 19:59:19.891 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 19:59:19.893 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 19:59:22.906 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 19:59:22.907 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 19:59:25.917 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 19:59:25.918 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 20:03:57.508 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/16 20:03:57.508 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/16 20:03:57.509 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/16 20:03:57.510 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/16 20:03:57.510 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/16 20:03:57.510 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/16 20:03:57.510 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/16 20:03:57.510 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/16 20:03:57.557 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 20:03:57.560 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=10]
[2024/09/16 20:03:59.559 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 20:03:59.559 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/16 20:03:59.862 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 20:04:01.668 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/16 20:04:01.693 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 20:04:03.422 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 20:04:03.423 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/16 20:04:03.424 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/16 20:04:03.424 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/16 20:04:03.424 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/16 20:04:03.424 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/16 20:04:03.425 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/16 20:04:03.425 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/16 20:04:03.425 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/16 20:04:03.426 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 20:04:03.426 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/16 20:04:03.427 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/16 20:04:03.428 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/16 20:04:03.428 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 20:04:03.431 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/16 20:04:03.436 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/16 20:04:03.437 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/16 20:04:03.437 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/16 20:04:03.438 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/16 20:04:03.438 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/16 20:04:03.438 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/16 20:04:03.439 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/16 20:04:03.439 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/16 20:04:03.440 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/16 20:04:03.441 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/16 20:04:03.446 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=16]
[2024/09/16 20:04:03.475 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=1407] [path=resource_group/settings] [thread_id=16]
[2024/09/16 20:04:03.480 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/16 20:04:03.481 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/16 20:04:03.481 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/16 20:04:03.530 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 20:04:03.531 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/16 20:04:06.538 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 20:04:06.538 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/16 20:04:09.553 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 20:04:09.554 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/16 20:04:12.559 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 20:04:12.559 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/16 20:04:15.565 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 20:04:15.566 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/16 20:04:18.572 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/16 20:04:18.573 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/16 20:04:18.573 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/16 20:04:18.573 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/16 20:04:18.974 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/16 20:04:18.975 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/16 20:04:18.979 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 2.482583ms"] [thread_id=1]
[2024/09/16 20:04:19.017 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/16 20:04:19.059 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/16 20:04:19.062 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/16 20:04:19.064 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/16 20:04:19.068 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/16 20:04:19.071 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726517059 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/16 20:04:19.072 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/16 20:04:19.073 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/16 20:04:19.073 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/16 20:04:19.073 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/16 20:04:19.074 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/16 20:04:19.081 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/16 20:04:19.081 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=191.5Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/16 20:04:19.082 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=52.208Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/16 20:04:19.088 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/16 20:04:19.112 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/16 20:04:19.127 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/16 20:04:29.093 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=96]
[2024/09/16 20:14:01.687 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 20:24:01.685 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 20:34:01.692 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 20:44:01.669 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 21:37:35.112 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 21:47:35.111 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 21:57:35.094 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 22:07:35.099 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 22:17:35.101 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 22:27:35.101 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 22:37:35.103 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 22:47:35.081 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 22:57:35.157 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 23:07:35.161 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 23:17:35.159 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 23:27:35.172 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 23:37:35.177 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 23:47:35.153 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/16 23:57:35.170 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 00:07:35.174 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 00:17:35.195 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 00:27:35.131 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 00:37:35.134 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 00:47:35.218 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 00:57:35.177 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 01:07:35.177 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 01:29:45.503 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 06:08:59.947 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 07:36:06.605 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 07:46:06.603 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 07:56:06.604 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 08:06:06.580 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 08:16:06.612 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 08:26:06.613 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 08:36:06.633 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 08:46:06.654 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 08:56:06.655 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 09:06:06.727 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 09:16:06.726 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 09:26:06.737 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 09:36:06.753 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 09:46:06.761 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 09:56:06.770 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 10:06:06.726 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 10:16:06.808 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 10:26:06.821 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 10:36:06.893 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 10:46:06.935 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 10:56:06.967 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 11:06:07.015 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 11:16:07.048 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 11:26:07.071 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 11:36:07.094 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 11:37:30.528 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/17 11:37:30.560 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 11:37:30.560 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/17 11:37:30.560 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 11:37:30.563 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/17 11:37:30.563 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/17 11:37:30.563 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 11:37:30.564 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/17 11:37:30.564 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/17 11:37:30.564 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 11:37:30.566 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 11:37:30.576 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/17 11:37:30.626 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdStoreHeartbeat] [thread_id=175]
[2024/09/17 11:37:30.784 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/17 11:37:30.784 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/17 11:37:30.990 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/17 11:37:33.796 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/17 11:37:41.273 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/17 11:37:41.274 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/17 11:37:41.312 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:37:41.321 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/17 11:37:43.320 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:37:43.320 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 11:37:43.629 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:37:45.305 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:37:45.322 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 11:37:45.341 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 11:37:45.343 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 11:37:45.344 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/17 11:37:45.345 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/17 11:37:45.345 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/17 11:37:45.346 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/17 11:37:45.346 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/17 11:37:45.346 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/17 11:37:45.348 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/17 11:37:45.349 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 11:37:45.349 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 11:37:45.351 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/17 11:37:45.352 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/17 11:37:45.352 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 11:37:45.360 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/17 11:37:45.362 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 11:37:45.362 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/17 11:37:45.363 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/17 11:37:45.365 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/17 11:37:45.366 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/17 11:37:45.366 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/17 11:37:45.366 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/17 11:37:45.366 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/17 11:37:45.372 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/17 11:37:45.388 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/17 11:37:45.516 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/17 11:37:48.251 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=21126] [path=resource_group/settings] [thread_id=17]
[2024/09/17 11:37:48.308 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/17 11:37:48.308 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/17 11:37:48.308 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/17 11:37:48.566 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:37:48.575 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/17 11:37:51.585 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:37:51.585 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/17 11:37:54.600 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:37:54.608 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/17 11:37:57.615 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:37:57.615 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/17 11:38:00.622 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:00.625 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/17 11:38:03.638 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:03.639 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/17 11:38:03.639 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/17 11:38:03.640 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/17 11:38:04.242 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/17 11:38:04.245 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/17 11:38:04.252 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 4.712792ms"] [thread_id=1]
[2024/09/17 11:38:04.359 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/17 11:38:04.454 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/17 11:38:04.458 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/17 11:38:04.462 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/17 11:38:04.471 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:04.473 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726573084 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/17 11:38:04.475 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/17 11:38:04.476 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/17 11:38:04.477 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:04.477 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:04.483 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/17 11:38:04.537 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/17 11:38:04.539 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=1.050958ms] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:04.539 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=29.208Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:04.567 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/17 11:38:04.584 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/17 11:38:04.617 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/17 11:38:11.057 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/17 11:38:11.068 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:11.068 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/17 11:38:11.068 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 11:38:11.069 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/17 11:38:11.069 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/17 11:38:11.069 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 11:38:11.069 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/17 11:38:11.069 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/17 11:38:11.069 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:11.070 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:11.073 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/17 11:38:11.337 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/17 11:38:11.337 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/17 11:38:11.576 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/17 11:38:13.753 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/17 11:38:21.013 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/17 11:38:21.014 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/17 11:38:21.015 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/17 11:38:21.015 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/17 11:38:21.015 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/17 11:38:21.015 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/17 11:38:21.015 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/17 11:38:21.015 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/17 11:38:21.015 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/17 11:38:21.045 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:38:21.049 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/17 11:38:23.048 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:38:23.048 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 11:38:23.353 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:38:23.690 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 11:38:23.696 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 11:38:23.708 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 11:38:23.818 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 11:38:23.821 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/17 11:38:23.824 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/17 11:38:23.825 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/17 11:38:23.829 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/17 11:38:23.829 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/17 11:38:23.829 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/17 11:38:23.829 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/17 11:38:23.831 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 11:38:23.831 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 11:38:23.832 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/17 11:38:23.833 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/17 11:38:23.833 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 11:38:23.839 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/17 11:38:23.842 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 11:38:23.842 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/17 11:38:23.842 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/17 11:38:23.844 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/17 11:38:23.844 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/17 11:38:23.844 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/17 11:38:23.845 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/17 11:38:23.848 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/17 11:38:23.848 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/17 11:38:23.852 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/17 11:38:23.871 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/17 11:38:23.898 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=21172] [path=resource_group/settings] [thread_id=17]
[2024/09/17 11:38:23.900 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/17 11:38:23.900 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/17 11:38:23.900 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/17 11:38:26.607 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:26.625 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/17 11:38:29.627 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:29.628 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/17 11:38:32.646 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:32.647 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/17 11:38:35.660 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:35.660 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/17 11:38:38.681 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:38.682 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/17 11:38:41.707 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 11:38:41.707 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/17 11:38:41.707 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/17 11:38:41.708 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/17 11:38:42.714 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/17 11:38:42.715 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/17 11:38:42.718 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 2.826791ms"] [thread_id=1]
[2024/09/17 11:38:42.771 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/17 11:38:42.839 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/17 11:38:42.841 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/17 11:38:42.842 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/17 11:38:42.849 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:42.850 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726573122 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/17 11:38:42.852 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/17 11:38:42.853 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/17 11:38:42.853 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:42.853 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:42.861 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/17 11:38:42.870 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/17 11:38:42.870 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=70Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:42.871 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=26.792Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:42.880 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/17 11:38:42.911 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/17 11:38:42.928 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/17 11:38:43.531 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/17 11:38:43.533 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:43.533 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/17 11:38:43.533 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 11:38:43.534 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/17 11:38:43.534 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/17 11:38:43.534 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 11:38:43.534 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/17 11:38:43.534 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/17 11:38:43.534 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:43.534 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 11:38:43.538 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/17 11:38:43.777 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/17 11:38:43.777 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/17 11:38:43.875 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/17 18:40:45.110 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/17 18:40:45.113 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/17 18:40:45.114 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/17 18:40:45.114 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/17 18:40:45.114 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/17 18:40:45.114 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/17 18:40:45.114 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/17 18:40:45.114 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/17 18:40:45.137 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 18:40:45.141 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/17 18:40:47.147 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 18:40:47.151 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 18:40:47.452 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 18:40:48.881 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 18:40:48.888 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 18:40:48.893 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 18:40:48.897 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 18:40:48.898 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/17 18:40:48.899 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/17 18:40:48.899 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/17 18:40:48.900 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/17 18:40:48.900 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/17 18:40:48.901 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/17 18:40:48.904 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/17 18:40:48.907 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 18:40:48.907 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 18:40:48.915 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/17 18:40:48.918 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/17 18:40:48.918 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 18:40:48.928 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/17 18:40:48.932 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 18:40:48.932 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/17 18:40:48.932 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/17 18:40:48.935 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/17 18:40:48.935 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/17 18:40:48.935 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/17 18:40:48.936 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/17 18:40:48.936 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/17 18:40:48.945 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/17 18:40:48.955 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/17 18:40:48.969 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/17 18:40:49.097 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=21215] [path=resource_group/settings] [thread_id=17]
[2024/09/17 18:40:51.460 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/17 18:40:51.462 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/17 18:40:51.462 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/17 18:40:51.563 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 18:40:51.564 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/17 18:40:54.591 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 18:40:54.592 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/17 18:40:57.602 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 18:40:57.603 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/17 18:41:00.614 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 18:41:00.614 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/17 18:41:03.638 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 18:41:03.644 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/17 18:41:06.657 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 18:41:06.658 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/17 18:41:06.658 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/17 18:41:06.659 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/17 18:41:07.261 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/17 18:41:07.263 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/17 18:41:07.267 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 3.344333ms"] [thread_id=1]
[2024/09/17 18:41:07.311 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/17 18:41:07.362 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/17 18:41:07.366 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/17 18:41:07.367 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/17 18:41:07.374 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/17 18:41:07.376 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726598467 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/17 18:41:07.378 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/17 18:41:07.379 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/17 18:41:07.379 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/17 18:41:07.379 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 18:41:07.381 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/17 18:41:07.388 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/17 18:41:07.388 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=114.417Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/17 18:41:07.388 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=20.625Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/17 18:41:07.396 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/17 18:41:07.422 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/17 18:41:07.429 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/17 18:41:17.423 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=96]
[2024/09/17 18:50:48.970 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:00:48.977 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:10:48.950 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:20:48.915 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:01.852 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=21215] [path=resource_group/settings] [thread_id=16]
[2024/09/17 19:29:01.873 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=21215] [path=resource_group/settings] [thread_id=17]
[2024/09/17 19:29:01.876 +00:00] [ERROR] [service.rs:97] ["failed to watch resource groups"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"not leader\", details: [] }))"] [thread_id=18]
[2024/09/17 19:29:01.911 +00:00] [INFO] [client.rs:153] ["TSO stream is closed, reconnect to PD"] [thread_id=12]
[2024/09/17 19:29:01.939 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:01.939 +00:00] [INFO] [tso.rs:162] ["TSO worker terminated"] [receiver_cause=None] [sender_cause="Some(Grpc(RpcFinished(Some(RpcStatus { code: 14-UNAVAILABLE, message: \"Socket closed\", details: [] }))))"] [thread_id=14]
[2024/09/17 19:29:01.939 +00:00] [INFO] [<unknown>] ["subchannel 0xfffc80320000 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: connect failed: {\"created\":\"@1726601341.913264925\",\"description\":\"Failed to connect to remote host: Connection refused\",\"errno\":111,\"file\":\"/workspace/.cargo/registry/src/mirrors.tuna.tsinghua.edu.cn-df7c3c540f42cdbd/grpcio-sys-0.10.3+1.44.0-patched/grpc/src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":200,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:172.19.0.2:2379\"}"] [thread_id=219]
[2024/09/17 19:29:01.940 +00:00] [INFO] [<unknown>] ["subchannel 0xfffc80320000 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: Retry in 998 milliseconds"] [thread_id=219]
[2024/09/17 19:29:01.940 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"failed to connect to all addresses\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:01.943 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/17 19:29:02.217 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:02.519 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:02.878 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=21215] [path=resource_group/settings] [thread_id=18]
[2024/09/17 19:29:04.386 +00:00] [WARN] [pd.rs:1773] ["report min resolved_ts failed"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [thread_id=96]
[2024/09/17 19:29:04.413 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/17 19:29:04.422 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 19:29:04.422 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/17 19:29:04.422 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 19:29:04.423 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/17 19:29:04.423 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/17 19:29:04.423 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 19:29:04.423 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/17 19:29:04.423 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/17 19:29:04.423 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 19:29:04.424 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 19:29:04.428 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/17 19:29:04.521 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:04.522 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/17 19:29:04.639 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/17 19:29:04.639 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/17 19:29:04.823 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:04.828 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:04.828 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/17 19:29:05.132 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:05.389 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/17 19:29:05.410 +00:00] [INFO] [<unknown>] ["subchannel 0xfff8a05d0400 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: connect failed: {\"created\":\"@1726601345.410517177\",\"description\":\"Failed to connect to remote host: Connection timed out\",\"errno\":110,\"file\":\"/workspace/.cargo/registry/src/mirrors.tuna.tsinghua.edu.cn-df7c3c540f42cdbd/grpcio-sys-0.10.3+1.44.0-patched/grpc/src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":205,\"os_error\":\"Connection timed out\",\"syscall\":\"getsockopt(SO_ERROR)\",\"target_address\":\"ipv4:172.19.0.2:2379\"}"] [thread_id=219]
[2024/09/17 19:29:05.410 +00:00] [INFO] [<unknown>] ["subchannel 0xfff8a05d0400 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: Retry immediately"] [thread_id=219]
[2024/09/17 19:29:05.410 +00:00] [INFO] [<unknown>] ["subchannel 0xfff8a05d0400 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: failed to connect to channel, retrying"] [thread_id=219]
[2024/09/17 19:29:05.433 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:05.739 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:06.040 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:06.341 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:06.642 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:06.943 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:07.244 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:07.251 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 19:29:07.252 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/17 19:29:07.552 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:07.605 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=SnapGc] [thread_id=175]
[2024/09/17 19:29:07.857 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 19:29:08.001 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdStoreHeartbeat] [thread_id=175]
[2024/09/17 19:29:08.172 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/17 21:52:39.807 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/17 21:52:39.808 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/17 21:52:39.809 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/17 21:52:39.809 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/17 21:52:39.809 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/17 21:52:39.821 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:39.950 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:39.952 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 21:52:40.253 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:40.257 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:40.559 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:40.565 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:40.867 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:40.876 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:41.178 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:41.183 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:41.484 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:41.488 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:41.790 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:41.793 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:42.097 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:42.101 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:42.406 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:42.411 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:42.715 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:42.721 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.027 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.032 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.032 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 21:52:43.339 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.343 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.646 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.652 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.955 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:43.958 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:44.265 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:44.273 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:44.579 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:44.588 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:44.890 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:44.898 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:45.200 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:45.205 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:45.507 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:45.510 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:45.812 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:45.816 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:46.118 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:46.122 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:46.122 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 21:52:46.424 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:46.427 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:46.732 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:46.736 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.042 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.046 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.348 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.352 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.658 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.663 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.968 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:47.973 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:48.276 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:48.281 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:48.583 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:48.591 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:48.898 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:48.902 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:49.204 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:49.207 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:49.207 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 21:52:49.510 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:49.514 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:49.816 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:49.819 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:50.121 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:50.126 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:50.429 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:50.434 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:50.737 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:50.740 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.042 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.046 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.348 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.353 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.655 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.658 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.961 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:51.964 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:52.266 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:52.270 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:52.270 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 21:52:52.572 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:52.576 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:52.880 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:52.887 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:53.194 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:53.198 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:53.505 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:53.509 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:53.812 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:53.818 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:54.125 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:54.128 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:54.432 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:54.435 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:54.738 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:54.746 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.053 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.057 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.362 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.366 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.366 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 21:52:55.671 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.676 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.984 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:55.990 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:56.294 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:56.299 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:56.602 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:52:56.610 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:53:13.057 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/17 21:53:13.057 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/17 21:53:13.057 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/17 21:53:13.057 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/17 21:53:13.057 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/17 21:53:13.057 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/17 21:53:13.057 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/17 21:53:13.058 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/17 21:53:13.066 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:53:13.068 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=9]
[2024/09/17 21:53:15.068 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:53:15.068 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 21:53:15.371 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:53:17.374 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:53:17.676 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:53:18.245 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 21:53:18.251 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 21:53:18.256 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 21:53:18.258 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 21:53:18.260 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/17 21:53:18.261 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/17 21:53:18.261 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/17 21:53:18.262 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/17 21:53:18.262 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/17 21:53:18.263 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/17 21:53:18.265 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/17 21:53:18.266 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 21:53:18.266 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 21:53:18.272 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/17 21:53:18.274 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/17 21:53:18.275 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 21:53:18.284 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/17 21:53:18.286 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 21:53:18.286 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/17 21:53:18.287 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/17 21:53:18.288 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/17 21:53:18.288 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/17 21:53:18.288 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/17 21:53:18.289 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/17 21:53:18.289 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/17 21:53:18.292 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/17 21:53:18.298 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/17 21:53:18.306 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=19]
[2024/09/17 21:53:18.419 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=22740] [path=resource_group/settings] [thread_id=19]
[2024/09/17 21:53:20.760 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/17 21:53:20.760 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/17 21:53:20.762 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/17 21:53:20.877 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 21:53:20.878 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/17 21:53:23.905 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 21:53:23.907 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/17 21:53:26.914 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 21:53:26.914 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/17 21:53:29.928 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 21:53:29.928 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/17 21:53:32.941 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 21:53:32.941 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/17 21:53:35.954 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 21:53:35.955 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/17 21:53:35.955 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/17 21:53:35.956 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/17 21:53:36.355 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/17 21:53:36.359 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/17 21:53:36.367 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 4.459375ms"] [thread_id=1]
[2024/09/17 21:53:36.437 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/17 21:53:36.474 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/17 21:53:36.478 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/17 21:53:36.479 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/17 21:53:36.486 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/17 21:53:36.492 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726610016 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/17 21:53:36.495 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/17 21:53:36.496 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/17 21:53:36.498 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/17 21:53:36.498 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 21:53:36.499 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/17 21:53:36.507 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/17 21:53:36.507 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=159.416Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/17 21:53:36.507 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=15.708Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/17 21:53:36.511 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/17 21:53:36.530 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/17 21:53:36.538 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/17 21:53:46.517 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=96]
[2024/09/17 22:03:18.302 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 22:13:18.309 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 22:23:18.315 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 22:33:18.294 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 22:43:18.303 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 22:53:18.306 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 23:03:18.268 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 23:13:18.240 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/17 23:16:59.208 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/17 23:16:59.223 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 23:16:59.223 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/17 23:16:59.223 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 23:16:59.225 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/17 23:16:59.225 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/17 23:16:59.225 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 23:16:59.225 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/17 23:16:59.225 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/17 23:16:59.227 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 23:16:59.227 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 23:16:59.235 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/17 23:16:59.841 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/17 23:16:59.842 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/17 23:17:00.168 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/17 23:17:03.472 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/17 23:17:11.500 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/17 23:17:11.500 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/17 23:17:11.500 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/17 23:17:11.501 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/17 23:17:11.501 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/17 23:17:11.501 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/17 23:17:11.502 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/17 23:17:11.531 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 23:17:11.536 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/17 23:17:13.533 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 23:17:13.533 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/17 23:17:13.845 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 23:17:15.257 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/17 23:17:15.271 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 23:17:15.283 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 23:17:15.297 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/17 23:17:15.297 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/17 23:17:15.298 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/17 23:17:15.298 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/17 23:17:15.299 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/17 23:17:15.299 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/17 23:17:15.299 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/17 23:17:15.304 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/17 23:17:15.305 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 23:17:15.305 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/17 23:17:15.307 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/17 23:17:15.308 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/17 23:17:15.308 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 23:17:15.319 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/17 23:17:15.321 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/17 23:17:15.321 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/17 23:17:15.322 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/17 23:17:15.323 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/17 23:17:15.323 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/17 23:17:15.323 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/17 23:17:15.324 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/17 23:17:15.324 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/17 23:17:15.327 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/17 23:17:15.330 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/17 23:17:15.397 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/17 23:17:15.432 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=25358] [path=resource_group/settings] [thread_id=17]
[2024/09/17 23:17:18.316 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/17 23:17:18.317 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/17 23:17:18.317 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/17 23:17:18.383 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 23:17:18.405 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/17 23:17:21.392 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 23:17:21.392 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/17 23:17:24.409 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 23:17:24.410 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/17 23:17:27.419 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 23:17:27.419 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/17 23:17:30.427 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 23:17:30.428 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/17 23:17:33.434 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/17 23:17:33.434 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/17 23:17:33.434 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/17 23:17:33.434 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/17 23:17:33.835 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/17 23:17:33.835 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/17 23:17:33.839 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 3.8115ms"] [thread_id=1]
[2024/09/17 23:17:33.880 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/17 23:17:33.979 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/17 23:17:33.981 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/17 23:17:33.981 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/17 23:17:33.989 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/17 23:17:33.991 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726615053 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/17 23:17:33.992 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/17 23:17:33.992 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/17 23:17:33.992 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/17 23:17:33.992 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 23:17:33.995 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/17 23:17:34.001 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/17 23:17:34.001 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=116.083Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/17 23:17:34.003 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=9.625Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/17 23:17:34.006 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/17 23:17:34.033 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/17 23:17:34.040 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/17 23:17:44.013 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=96]
[2024/09/17 23:25:50.549 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/17 23:25:50.562 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/17 23:25:50.566 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 23:25:50.567 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/17 23:25:50.572 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/17 23:25:50.647 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/17 23:25:51.416 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/17 23:25:51.416 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/17 23:25:54.062 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdStoreHeartbeat] [thread_id=175]
[2024/09/17 23:25:54.240 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/18 00:02:01.484 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/18 00:02:01.484 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/18 00:02:01.484 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/18 00:02:01.484 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/18 00:02:01.484 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/18 00:02:01.484 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/18 00:02:01.484 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/18 00:02:01.485 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/18 00:02:01.501 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:02:01.504 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=9]
[2024/09/18 00:02:03.504 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:02:03.504 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/18 00:02:03.815 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:02:05.315 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:02:05.318 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 00:02:05.321 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 00:02:05.334 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 00:02:05.335 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/18 00:02:05.336 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/18 00:02:05.336 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/18 00:02:05.336 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/18 00:02:05.337 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/18 00:02:05.337 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/18 00:02:05.338 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/18 00:02:05.338 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/18 00:02:05.339 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/18 00:02:05.341 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/18 00:02:05.343 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/18 00:02:05.343 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/18 00:02:05.355 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/18 00:02:05.358 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/18 00:02:05.361 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/18 00:02:05.361 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/18 00:02:05.362 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/18 00:02:05.362 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/18 00:02:05.362 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/18 00:02:05.362 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/18 00:02:05.362 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/18 00:02:05.366 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/18 00:02:05.368 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/18 00:02:05.415 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/18 00:02:05.415 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/18 00:02:05.415 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/18 00:02:05.497 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=16]
[2024/09/18 00:02:05.653 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=25663] [path=resource_group/settings] [thread_id=16]
[2024/09/18 00:02:08.397 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:02:08.400 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/18 00:02:08.864 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:02:08.868 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/18 00:02:11.876 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:02:11.890 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/18 00:02:14.891 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:02:14.891 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/18 00:02:17.904 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:02:17.904 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/18 00:02:20.915 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:02:20.915 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/18 00:02:20.915 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/18 00:02:20.916 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/18 00:02:21.316 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/18 00:02:21.316 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/18 00:02:21.320 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 2.647ms"] [thread_id=1]
[2024/09/18 00:02:21.381 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/18 00:02:21.476 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/18 00:02:21.478 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/18 00:02:21.479 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/18 00:02:21.482 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:21.483 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726617741 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/18 00:02:21.485 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/18 00:02:21.485 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/18 00:02:21.486 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:21.486 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:21.486 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/18 00:02:21.490 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/18 00:02:21.491 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=124.916Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:21.491 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=9.041Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:21.495 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/18 00:02:21.544 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/18 00:02:21.578 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/18 00:02:31.500 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=95]
[2024/09/18 00:02:36.864 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/18 00:02:36.867 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:36.867 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:36.868 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/18 00:02:36.870 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/18 00:02:37.397 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/18 00:02:37.397 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/18 00:02:37.512 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/18 00:02:41.225 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/18 00:07:55.259 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/18 00:07:55.262 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/18 00:07:55.262 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/18 00:07:55.262 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/18 00:07:55.264 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/18 00:07:55.264 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/18 00:07:55.265 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/18 00:07:55.265 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/18 00:07:55.266 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/18 00:07:55.266 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/18 00:07:55.267 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/18 00:07:55.267 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/18 00:07:55.267 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/18 00:07:55.267 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/18 00:07:55.267 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/18 00:07:55.268 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/18 00:07:55.321 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:07:55.324 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/18 00:07:57.325 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:07:57.325 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/18 00:07:57.632 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:07:59.580 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 00:08:01.886 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 00:08:01.889 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 00:08:01.889 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 00:08:01.889 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/18 00:08:01.889 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/18 00:08:01.889 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/18 00:08:01.890 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/18 00:08:01.891 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/18 00:08:01.891 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/18 00:08:01.891 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/18 00:08:01.892 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/18 00:08:01.892 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/18 00:08:01.893 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/18 00:08:01.895 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/18 00:08:01.897 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/18 00:08:01.906 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/18 00:08:01.909 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/18 00:08:01.909 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/18 00:08:01.911 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/18 00:08:01.912 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/18 00:08:01.912 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/18 00:08:01.912 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/18 00:08:01.913 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/18 00:08:01.913 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/18 00:08:01.913 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/18 00:08:01.927 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/18 00:08:01.929 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=16]
[2024/09/18 00:08:01.934 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=25716] [path=resource_group/settings] [thread_id=16]
[2024/09/18 00:08:02.035 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/18 00:08:02.036 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/18 00:08:02.036 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/18 00:08:02.077 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:08:02.111 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/18 00:08:05.086 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:08:05.091 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/18 00:08:08.104 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:08:08.106 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/18 00:08:11.114 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:08:11.118 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/18 00:08:14.132 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:08:14.133 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/18 00:08:17.141 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 00:08:17.142 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/18 00:08:17.142 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/18 00:08:17.142 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/18 00:08:17.543 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/18 00:08:17.547 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/18 00:08:17.554 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 5.17225ms"] [thread_id=1]
[2024/09/18 00:08:17.654 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/18 00:08:17.675 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/18 00:08:17.685 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/18 00:08:17.687 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/18 00:08:17.696 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/18 00:08:17.702 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726618097 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/18 00:08:17.709 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/18 00:08:17.711 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/18 00:08:17.711 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/18 00:08:17.711 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/18 00:08:17.711 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/18 00:08:17.713 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/18 00:08:17.714 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=94.916Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/18 00:08:17.714 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=7.375Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/18 00:08:17.718 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/18 00:08:17.738 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/18 00:08:17.744 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/18 00:08:27.725 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=96]
[2024/09/18 00:17:59.568 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 00:27:59.547 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 00:37:59.548 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 00:47:59.654 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 01:15:09.045 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 05:37:22.231 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 05:47:22.229 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 05:57:22.232 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 06:07:22.269 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 06:17:22.278 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 06:27:22.279 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 06:37:22.318 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 06:47:22.334 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 06:57:22.323 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:07:22.328 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:31.075 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=25716] [path=resource_group/settings] [thread_id=16]
[2024/09/18 07:12:31.082 +00:00] [ERROR] [service.rs:97] ["failed to watch resource groups"] [err="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"not leader\", details: [] }))"] [thread_id=17]
[2024/09/18 07:12:31.099 +00:00] [INFO] [client.rs:153] ["TSO stream is closed, reconnect to PD"] [thread_id=12]
[2024/09/18 07:12:31.100 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:31.101 +00:00] [INFO] [tso.rs:162] ["TSO worker terminated"] [receiver_cause=None] [sender_cause="Some(Grpc(RpcFinished(Some(RpcStatus { code: 14-UNAVAILABLE, message: \"Socket closed\", details: [] }))))"] [thread_id=14]
[2024/09/18 07:12:31.106 +00:00] [INFO] [<unknown>] ["subchannel 0xfffd80350400 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: connect failed: {\"created\":\"@1726643551.103792637\",\"description\":\"Failed to connect to remote host: Connection refused\",\"errno\":111,\"file\":\"/workspace/.cargo/registry/src/mirrors.tuna.tsinghua.edu.cn-df7c3c540f42cdbd/grpcio-sys-0.10.3+1.44.0-patched/grpc/src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":200,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:172.19.0.2:2379\"}"] [thread_id=219]
[2024/09/18 07:12:31.114 +00:00] [INFO] [<unknown>] ["subchannel 0xfffd80350400 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: Retry in 996 milliseconds"] [thread_id=219]
[2024/09/18 07:12:31.116 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"failed to connect to all addresses\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:31.116 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/18 07:12:31.413 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:31.714 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:31.823 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:31.823 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/18 07:12:32.084 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=25716] [path=resource_group/settings] [thread_id=18]
[2024/09/18 07:12:32.124 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:32.425 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:32.726 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:33.029 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:33.036 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:33.036 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/18 07:12:33.338 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:33.420 +00:00] [INFO] [run.rs:252] ["found engine-store server status is Stopping, start to stop all services"] [thread_id=1]
[2024/09/18 07:12:33.436 +00:00] [INFO] [raft_server.rs:505] ["stop raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/18 07:12:33.453 +00:00] [INFO] [batch.rs:586] ["shutdown batch system apply"] [thread_id=1]
[2024/09/18 07:12:33.454 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/18 07:12:33.454 +00:00] [INFO] [batch.rs:599] ["batch system apply is stopped."] [thread_id=1]
[2024/09/18 07:12:33.454 +00:00] [INFO] [batch.rs:586] ["shutdown batch system raftstore-1001"] [thread_id=1]
[2024/09/18 07:12:33.455 +00:00] [INFO] [router.rs:267] ["broadcasting shutdown"] [thread_id=1]
[2024/09/18 07:12:33.455 +00:00] [INFO] [batch.rs:599] ["batch system raftstore-1001 is stopped."] [thread_id=1]
[2024/09/18 07:12:33.455 +00:00] [INFO] [write.rs:984] ["stopping store writer 0"] [thread_id=1]
[2024/09/18 07:12:33.455 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/18 07:12:33.455 +00:00] [INFO] [forwarder.rs:126] ["shutdown tiflash observer"] [store_id=1001] [thread_id=1]
[2024/09/18 07:12:33.455 +00:00] [INFO] [store.rs:692] ["failed to schedule store tick, are we shutting down?"] [err="\"SendError(..)\""] [tick=PdReportMinResolvedTs] [thread_id=175]
[2024/09/18 07:12:33.455 +00:00] [INFO] [mod.rs:258] ["Storage stopped."] [thread_id=1]
[2024/09/18 07:12:33.639 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:33.944 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:33.970 +00:00] [INFO] [run.rs:266] ["all services in raft-store proxy are stopped"] [thread_id=1]
[2024/09/18 07:12:33.970 +00:00] [INFO] [run.rs:268] ["wait for engine-store server to stop"] [thread_id=1]
[2024/09/18 07:12:34.247 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:34.456 +00:00] [INFO] [<unknown>] ["subchannel 0xfff920400800 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: connect failed: {\"created\":\"@1726643554.456678097\",\"description\":\"Failed to connect to remote host: Connection timed out\",\"errno\":110,\"file\":\"/workspace/.cargo/registry/src/mirrors.tuna.tsinghua.edu.cn-df7c3c540f42cdbd/grpcio-sys-0.10.3+1.44.0-patched/grpc/src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":205,\"os_error\":\"Connection timed out\",\"syscall\":\"getsockopt(SO_ERROR)\",\"target_address\":\"ipv4:172.19.0.2:2379\"}"] [thread_id=219]
[2024/09/18 07:12:34.457 +00:00] [INFO] [<unknown>] ["subchannel 0xfff920400800 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: Retry immediately"] [thread_id=219]
[2024/09/18 07:12:34.457 +00:00] [INFO] [<unknown>] ["subchannel 0xfff920400800 {address=ipv4:172.19.0.2:2379, args=grpc.client_channel_factory=0xffff001a0450, grpc.default_authority=pd0:2379, grpc.initial_reconnect_backoff_ms=1000, grpc.internal.subchannel_pool=0xffff00140c60, grpc.keepalive_time_ms=10000, grpc.keepalive_timeout_ms=3000, grpc.max_receive_message_length=-1, grpc.max_reconnect_backoff_ms=5000, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-rust/0.10.4, grpc.resource_quota=0xffff00141080, grpc.server_uri=dns:///pd0:2379}: failed to connect to channel, retrying"] [thread_id=219]
[2024/09/18 07:12:34.548 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:34.850 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:35.152 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:35.456 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:35.465 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=A name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:35.465 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/18 07:12:35.768 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:36.069 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:36.376 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:36.679 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:36.981 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:37.282 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:37.584 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:37.887 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:38.035 +00:00] [INFO] [run.rs:274] ["engine-store server is stopped"] [thread_id=1]
[2024/09/18 07:12:38.190 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:12:38.494 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:38.503 +00:00] [ERROR] [util.rs:721] ["connect failed"] [error="Grpc(RpcFailure(RpcStatus { code: 14-UNAVAILABLE, message: \"DNS resolution failed for pd0:2379: C-ares status is not ARES_SUCCESS qtype=AAAA name=pd0 is_balancer=0: Domain name not found\", details: [] }))"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 07:12:38.503 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:727]: failed to connect to [name: \\\"pd0\\\" member_id: 16382016976602811638 peer_urls: \\\"http://pd0:2380\\\" client_urls: \\\"http://pd0:2379\\\"]\")"] [thread_id=12]
[2024/09/18 07:12:38.809 +00:00] [WARN] [client.rs:155] ["failed to update PD client"] [error="Other(\"[components/pd_client/src/util.rs:377]: cancel reconnection due to too small interval\")"] [thread_id=12]
[2024/09/18 07:47:02.122 +00:00] [INFO] [lib.rs:56] ["Welcome To RaftStore Proxy"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["Git Commit Hash:   f2e5fb8878eb51492c54f1094a847e0b958c6bb8"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["Git Commit Branch: HEAD"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["UTC Build Time:    \"\"   "] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["Rust Version:      rustc 1.77.0-nightly (89e2160c4 2023-12-27)"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["Storage Engine:    tiflash"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["Prometheus Prefix: tiflash_proxy_"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["Profile:           release"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [lib.rs:58] ["Enable Features:   external-jemalloc pprof-fp portable test-engine-kv-rocksdb test-engine-raft-raft-engine openssl-vendored pprof-fp"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [mod.rs:118] ["cgroup quota: memory=None, cpu=None, cores={}"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [mod.rs:125] ["memory limit in bytes: 16750510080, cpu cores quota: 10"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [WARN] [lib.rs:525] ["environment variable `TZ` is missing, using `/etc/localtime`"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.core.somaxconn got 4096, expect 32768"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters net.ipv4.tcp_syncookies got 1, expect 0"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [WARN] [run.rs:1701] ["check: kernel"] [err="kernel parameters vm.swappiness got 60, expect 0"] [thread_id=1]
[2024/09/18 07:47:02.123 +00:00] [INFO] [run.rs:392] ["bootstrap with tikv-raft-engine"] [thread_id=1]
[2024/09/18 07:47:02.132 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 07:47:02.134 +00:00] [INFO] [<unknown>] ["TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter"] [thread_id=7]
[2024/09/18 07:47:04.134 +00:00] [INFO] [util.rs:601] ["PD failed to respond"] [err="Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \"Deadline Exceeded\", details: [] }))"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 07:47:04.135 +00:00] [WARN] [client.rs:169] ["validate PD endpoints failed"] [err="Other(\"[components/pd_client/src/util.rs:634]: PD cluster failed to respond\")"] [thread_id=1]
[2024/09/18 07:47:04.438 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 07:47:05.187 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=pd0:2379] [thread_id=1]
[2024/09/18 07:47:05.191 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 07:47:05.197 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 07:47:05.202 +00:00] [INFO] [util.rs:808] ["connected to PD member"] [endpoints=http://pd0:2379] [thread_id=1]
[2024/09/18 07:47:05.207 +00:00] [INFO] [util.rs:631] ["all PD endpoints are consistent"] [endpoints="[\"pd0:2379\"]"] [thread_id=1]
[2024/09/18 07:47:05.210 +00:00] [INFO] [common.rs:333] ["connect to PD cluster"] [cluster_id=7415309541240867473] [thread_id=1]
[2024/09/18 07:47:05.210 +00:00] [INFO] [run.rs:633] ["linked with external jemalloc"] [thread_id=1]
[2024/09/18 07:47:05.211 +00:00] [INFO] [run.rs:638] ["using proxy config"] [config="ProxyConfig { server: ServerConfig { engine_addr: \"tiflash:4030\", engine_store_version: \"v8.4.0-alpha-36-g9e3ba660e\", engine_store_git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\", addr: \"0.0.0.0:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", advertise_addr: \"tiflash:20280\", background_thread_count: 4, status_thread_pool_size: 2, reject_messages_on_memory_ratio: 0.05 }, raft_store: RaftstoreConfig { snap_handle_pool_size: 7, region_worker_tick_interval: ReadableDuration(500ms), apply_low_priority_pool_size: 10, evict_cache_on_memory_ratio: 0.1, enable_v2_compatible_learner: true }, rocksdb: RocksDbConfig { lockcf: LockCfConfig { block_cache_size: None }, writecf: WriteCfConfig { block_cache_size: None }, defaultcf: DefaultCfConfig { block_cache_size: None } }, raftdb: RaftDbConfig { defaultcf: DefaultCfConfig { block_cache_size: None } }, storage: StorageConfig { reserve_space: ReadableSize(1073741824) }, enable_io_snoop: false, memory_usage_high_water: 0.1, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { max_thread_count: 4 } }, import: ImportConfig { num_threads: 20 }, engine_store: EngineStoreConfig { enable_fast_add_peer: false, enable_unips: false }, memory: MemoryConfig { enable_heap_profiling: false } }"] [thread_id=1]
[2024/09/18 07:47:05.211 +00:00] [INFO] [config.rs:392] ["quota: cpu 10 mem in bytes 16750510080"] [thread_id=1]
[2024/09/18 07:47:05.211 +00:00] [INFO] [config.rs:403] ["config.server.labels after address: {\"engine\": \"tiflash\"}"] [thread_id=1]
[2024/09/18 07:47:05.215 +00:00] [INFO] [run.rs:640] ["after address config"] [config="TikvConfig { cfg_path: \"/tiflash-learner.toml\", log_level: LogLevel(Info), log_file: \"\", log_format: Text, log_rotation_timespan: ReadableDuration(0ns), log_rotation_size: ReadableSize(314572800), slow_log_file: \"\", slow_log_threshold: ReadableDuration(1s), panic_when_unexpected_key_or_data: false, enable_io_snoop: false, abort_on_panic: false, memory_usage_limit: None, memory_usage_high_water: 0.1, log: LogConfig { level: LogLevel(Info), format: Text, enable_timestamp: true, file: File { filename: \"/logs/tiflash_tikv.log\", max_size: 300, max_days: 0, max_backups: 0 } }, memory: MemoryConfig { enable_heap_profiling: false, profiling_sample_per_bytes: ReadableSize(524288), enable_thread_exclusive_arena: true }, quota: QuotaConfig { foreground_cpu_time: 0, foreground_write_bandwidth: ReadableSize(0), foreground_read_bandwidth: ReadableSize(0), max_delay_duration: ReadableDuration(500ms), background_cpu_time: 0, background_write_bandwidth: ReadableSize(0), background_read_bandwidth: ReadableSize(0), enable_auto_tune: false }, readpool: ReadPoolConfig { unified: UnifiedReadPoolConfig { min_thread_count: 1, max_thread_count: 4, stack_size: ReadableSize(10485760), max_tasks_per_worker: 2000, auto_adjust_pool_size: false }, storage: StorageReadPoolConfig { use_unified_pool: None, high_concurrency: 5, normal_concurrency: 5, low_concurrency: 5, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) }, coprocessor: CoprReadPoolConfig { use_unified_pool: None, high_concurrency: 8, normal_concurrency: 8, low_concurrency: 8, max_tasks_per_worker_high: 2000, max_tasks_per_worker_normal: 2000, max_tasks_per_worker_low: 2000, stack_size: ReadableSize(10485760) } }, server: Config { cluster_id: 7415309541240867473, addr: \"0.0.0.0:20280\", advertise_addr: \"tiflash:20280\", status_addr: \"127.0.0.1:20292\", advertise_status_addr: \"\", status_thread_pool_size: 2, max_grpc_send_msg_len: 10485760, raft_client_grpc_send_msg_buffer: 524288, raft_client_queue_size: 8192, raft_client_max_backoff: ReadableDuration(5s), raft_client_initial_reconnect_backoff: ReadableDuration(1s), raft_msg_max_batch_size: 128, grpc_compression_type: None, grpc_gzip_compression_level: 2, grpc_min_message_size_to_compress: 4096, grpc_concurrency: 5, grpc_concurrent_stream: 1024, grpc_raft_conn_num: 1, grpc_memory_pool_quota: ReadableSize(9223372036854775807), grpc_stream_initial_window_size: ReadableSize(2097152), grpc_keepalive_time: ReadableDuration(10s), grpc_keepalive_timeout: ReadableDuration(3s), concurrent_send_snap_limit: 32, concurrent_recv_snap_limit: 32, end_point_recursion_limit: 1000, end_point_stream_channel_size: 8, end_point_batch_row_limit: 64, end_point_stream_batch_row_limit: 128, end_point_enable_batch_if_possible: true, end_point_request_max_handle_duration: None, end_point_max_concurrency: 10, end_point_perf_level: Uninitialized, end_point_memory_quota: ReadableSize(2093813760), snap_io_max_bytes_per_sec: ReadableSize(104857600), snap_max_total_size: ReadableSize(0), stats_concurrency: 1, heavy_load_threshold: 75, heavy_load_wait_duration: None, enable_request_batch: true, background_thread_count: 4, end_point_slow_log_threshold: ReadableDuration(1s), forward_max_connections_per_address: 4, reject_messages_on_memory_ratio: 0.05, simplify_metrics: false, health_feedback_interval: ReadableDuration(1s), labels: {\"engine\": \"tiflash\"}, end_point_concurrency: None, end_point_stack_size: None, end_point_max_tasks: None }, storage: Config { data_dir: \"/data/flash\", engine: RaftKv, gc_ratio_threshold: 1.1, max_key_size: 8192, scheduler_concurrency: 524288, scheduler_worker_pool_size: 4, scheduler_pending_write_threshold: ReadableSize(104857600), reserve_space: ReadableSize(1073741824), reserve_raft_space: ReadableSize(1073741824), enable_async_apply_prewrite: false, api_version: 1, enable_ttl: false, background_error_recovery_window: ReadableDuration(3600s), ttl_check_poll_interval: ReadableDuration(43200s), txn_status_cache_capacity: 5120000, memory_quota: ReadableSize(268435456), flow_control: FlowControlConfig { enable: true, soft_pending_compaction_bytes_limit: ReadableSize(206158430208), hard_pending_compaction_bytes_limit: ReadableSize(1099511627776), memtables_threshold: 5, l0_files_threshold: 20 }, block_cache: BlockCacheConfig { shared: None, capacity: None, num_shard_bits: 6, strict_capacity_limit: false, high_pri_pool_ratio: 0.8, low_pri_pool_ratio: 0.2, memory_allocator: Some(\"nodump\") }, io_rate_limit: IoRateLimitConfig { max_bytes_per_sec: ReadableSize(0), mode: WriteOnly, strict: false, foreground_read_priority: High, foreground_write_priority: High, flush_priority: High, level_zero_compaction_priority: Medium, compaction_priority: Low, replication_priority: High, load_balance_priority: High, gc_priority: High, import_priority: Medium, export_priority: Medium, other_priority: High } }, pd: Config { endpoints: [\"pd0:2379\"], retry_interval: ReadableDuration(300ms), retry_max_count: 9223372036854775807, retry_log_every: 10, update_interval: ReadableDuration(600s), enable_forwarding: false }, metric: MetricConfig { job: \"tikv\", interval: ReadableDuration(15s), address: \"\" }, raft_store: Config { prevote: true, raftdb_path: \"\", capacity: ReadableSize(10737418240), raft_base_tick_interval: ReadableDuration(1s), raft_heartbeat_ticks: 2, raft_election_timeout_ticks: 10, raft_min_election_timeout_ticks: 0, raft_max_election_timeout_ticks: 0, raft_max_size_per_msg: ReadableSize(1048576), raft_max_inflight_msgs: 256, raft_entry_max_size: ReadableSize(8388608), raft_log_compact_sync_interval: ReadableDuration(2s), raft_log_gc_tick_interval: ReadableDuration(3s), request_voter_replicated_index_interval: ReadableDuration(300s), raft_log_gc_threshold: 50, raft_log_gc_count_limit: None, raft_log_gc_size_limit: None, max_apply_unpersisted_log_limit: 1024, follower_read_max_log_gap: 100, raft_log_reserve_max_ticks: 6, raft_engine_purge_interval: ReadableDuration(10s), max_manual_flush_rate: 3.0, raft_entry_cache_life_time: ReadableDuration(30s), raft_reject_transfer_leader_duration: ReadableDuration(3s), unsafe_disable_check_quorum: false, split_region_check_tick_interval: ReadableDuration(10s), region_split_check_diff: None, region_compact_check_interval: ReadableDuration(300s), region_compact_check_step: None, region_compact_min_tombstones: 10000, region_compact_tombstones_percent: 30, region_compact_min_redundant_rows: 50000, region_compact_redundant_rows_percent: Some(20), pd_heartbeat_tick_interval: ReadableDuration(60s), pd_store_heartbeat_tick_interval: ReadableDuration(10s), pd_report_min_resolved_ts_interval: ReadableDuration(1s), snap_mgr_gc_tick_interval: ReadableDuration(60s), snap_gc_timeout: ReadableDuration(14400s), snap_wait_split_duration: ReadableDuration(34s), lock_cf_compact_interval: ReadableDuration(600s), lock_cf_compact_bytes_threshold: ReadableSize(268435456), periodic_full_compact_start_times: ReadableSchedule([]), periodic_full_compact_start_max_cpu: 0.1, notify_capacity: 40960, messages_per_tick: 4096, max_peer_down_duration: ReadableDuration(600s), max_leader_missing_duration: ReadableDuration(7200s), abnormal_leader_missing_duration: ReadableDuration(600s), peer_stale_state_check_interval: ReadableDuration(300s), gc_peer_check_interval: ReadableDuration(60s), leader_transfer_max_log_lag: 128, snap_apply_batch_size: ReadableSize(10485760), snap_apply_copy_symlink: false, region_worker_tick_interval: ReadableDuration(500ms), clean_stale_ranges_tick: 20, consistency_check_interval: ReadableDuration(0ns), report_region_flow_interval: ReadableDuration(60s), raft_store_max_leader_lease: ReadableDuration(9s), check_leader_lease_interval: ReadableDuration(0ns), renew_leader_lease_advance_duration: ReadableDuration(0ns), allow_unsafe_vote_after_start: false, right_derive_when_split: true, merge_max_log_gap: 10, merge_check_tick_interval: ReadableDuration(2s), use_delete_range: false, snap_generator_pool_size: 2, cleanup_import_sst_interval: ReadableDuration(600s), local_read_batch_size: 1024, apply_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 10 }, store_batch_system: Config { max_batch_size: None, pool_size: 2, reschedule_duration: ReadableDuration(5s), low_priority_pool_size: 1 }, store_io_pool_size: 1, store_io_notify_capacity: 40960, future_poll_size: 1, hibernate_regions: true, dev_assert: false, apply_yield_duration: ReadableDuration(500ms), apply_yield_write_size: ReadableSize(32768), perf_level: Uninitialized, evict_cache_on_memory_ratio: 0.1, cmd_batch: true, cmd_batch_concurrent_ready_max_count: 1, raft_write_size_limit: ReadableSize(1048576), waterfall_metrics: true, io_reschedule_concurrent_max_count: 4, io_reschedule_hotpot_duration: ReadableDuration(5s), raft_msg_flush_interval: ReadableDuration(250Âµs), region_max_size: ReadableSize(0), region_split_size: ReadableSize(0), clean_stale_peer_delay: ReadableDuration(0ns), inspect_interval: ReadableDuration(100ms), inspect_cpu_util_thd: 0.4, slow_trend_unsensitive_cause: 10.0, slow_trend_unsensitive_result: 0.5, slow_trend_network_io_factor: 0.0, reactive_memory_lock_tick_interval: ReadableDuration(2s), reactive_memory_lock_timeout_tick: 5, report_region_buckets_tick_interval: ReadableDuration(10s), check_long_uncommitted_interval: ReadableDuration(10s), long_uncommitted_base_threshold: ReadableDuration(20s), max_entry_cache_warmup_duration: ReadableDuration(1s), max_snapshot_file_raw_size: ReadableSize(104857600), unreachable_backoff: ReadableDuration(10s), check_peers_availability_interval: ReadableDuration(30s), check_request_snapshot_interval: ReadableDuration(60s), enable_v2_compatible_learner: true, min_pending_apply_region_count: 10, skip_manual_compaction_in_clean_up_worker: false }, coprocessor: Config { split_region_on_table: false, batch_split_limit: 10, region_max_size: None, region_split_size: None, region_max_keys: None, region_split_keys: None, consistency_check_method: Mvcc, perf_level: Uninitialized, enable_region_bucket: None, region_bucket_size: ReadableSize(52428800), region_size_threshold_for_approximate: ReadableSize(786432000), prefer_approximate_bucket: true, region_bucket_merge_size_ratio: 0.33 }, coprocessor_v2: Config { coprocessor_plugin_directory: None }, rocksdb: DbConfig { info_log_level: Info, wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: None, max_background_jobs: 0, max_background_flushes: 0, max_manifest_file_size: ReadableSize(134217728), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: None, compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", rate_bytes_per_sec: ReadableSize(10737418240), rate_limiter_refill_period: ReadableDuration(100ms), rate_limiter_mode: WriteOnly, auto_tuned: None, rate_limiter_auto_tuned: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), max_sub_compactions: 0, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: false, enable_multi_batch_write: None, enable_unordered_write: false, allow_concurrent_memtable_write: None, write_buffer_limit: None, write_buffer_stall_ratio: 0.0, write_buffer_flush_oldest_first: true, track_and_verify_wals_in_manifest: true, paranoid_checks: None, defaultcf: DefaultCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, writecf: WriteCfConfig { block_size: ReadableSize(32768), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: false, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: MinOverlappingRatio, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Zstd, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, lockcf: LockCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: false, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: None, write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, raftcf: RaftCfConfig { block_size: ReadableSize(16384), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: true, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, No, No, No, No, No], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(134217728), target_file_size_base: None, level0_file_num_compaction_trigger: 1, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: None, checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: ReadOnly, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: None, dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raftdb: RaftDbConfig { wal_recovery_mode: PointInTime, wal_dir: \"\", wal_ttl_seconds: 0, wal_size_limit: ReadableSize(0), max_total_wal_size: ReadableSize(4294967296), max_background_jobs: 4, max_background_flushes: 1, max_manifest_file_size: ReadableSize(20971520), create_if_missing: true, max_open_files: 40960, enable_statistics: true, stats_dump_period: ReadableDuration(600s), compaction_readahead_size: ReadableSize(0), info_log_max_size: ReadableSize(1073741824), info_log_roll_time: ReadableDuration(0ns), info_log_keep_log_file_num: 10, info_log_dir: \"\", info_log_level: Info, max_sub_compactions: 2, writable_file_max_buffer_size: ReadableSize(1048576), use_direct_io_for_flush_and_compaction: false, enable_pipelined_write: true, enable_unordered_write: false, allow_concurrent_memtable_write: true, bytes_per_sync: ReadableSize(1048576), wal_bytes_per_sync: ReadableSize(524288), defaultcf: RaftDefaultCfConfig { block_size: ReadableSize(65536), block_cache_size: None, disable_block_cache: false, cache_index_and_filter_blocks: true, pin_l0_filter_and_index_blocks: true, use_bloom_filter: false, optimize_filters_for_hits: true, optimize_filters_for_memory: false, whole_key_filtering: true, bloom_filter_bits_per_key: 10, block_based_bloom_filter: false, ribbon_filter_above_level: None, read_amp_bytes_per_bit: 0, compression_per_level: [No, No, Lz4, Lz4, Lz4, Zstd, Zstd], write_buffer_size: Some(ReadableSize(134217728)), write_buffer_limit: None, max_write_buffer_number: 5, min_write_buffer_number_to_merge: 1, max_bytes_for_level_base: ReadableSize(536870912), target_file_size_base: None, level0_file_num_compaction_trigger: 4, level0_slowdown_writes_trigger: None, level0_stop_writes_trigger: None, max_compaction_bytes: ReadableSize(2147483648), compaction_pri: ByCompensatedSize, dynamic_level_bytes: true, num_levels: 7, max_bytes_for_level_multiplier: 10, compaction_style: Level, disable_auto_compactions: false, disable_write_stall: false, soft_pending_compaction_bytes_limit: None, hard_pending_compaction_bytes_limit: None, force_consistency_checks: false, prop_size_index_distance: 4194304, prop_keys_index_distance: 40960, enable_doubly_skiplist: true, enable_compaction_guard: None, compaction_guard_min_output_file_size: ReadableSize(8388608), compaction_guard_max_output_file_size: ReadableSize(134217728), bottommost_level_compression: Disable, bottommost_zstd_compression_dict_size: 0, bottommost_zstd_compression_sample_size: 0, prepopulate_block_cache: Disabled, format_version: Some(2), checksum: CRC32c, max_compactions: None, ttl: None, periodic_compaction_seconds: None, titan: TitanCfConfig { min_blob_size: None, blob_file_compression: Zstd, zstd_dict_size: ReadableSize(0), shared_blob_cache: true, blob_cache_size: ReadableSize(0), min_gc_batch_size: ReadableSize(16777216), max_gc_batch_size: ReadableSize(67108864), discardable_ratio: 0.5, merge_small_file_threshold: ReadableSize(8388608), blob_run_mode: Normal, level_merge: false, range_merge: true, max_sorted_runs: 20, gc_merge_rewrite: false, sample_ratio: None } }, titan: TitanDbConfig { enabled: Some(false), dirname: \"\", disable_gc: false, max_background_gc: 1, purge_obsolete_files_period: ReadableDuration(10s) } }, raft_engine: RaftEngineConfig { enable: true, config: Config { dir: \"\", spill_dir: None, recovery_mode: TolerateTailCorruption, recovery_read_block_size: ReadableSize(16384), recovery_threads: 4, batch_compression_threshold: ReadableSize(8192), compression_level: None, bytes_per_sync: None, format_version: V2, target_file_size: ReadableSize(134217728), purge_threshold: ReadableSize(10737418240), purge_rewrite_threshold: None, purge_rewrite_garbage_ratio: 0.6, memory_limit: None, enable_log_recycle: true, prefill_for_recycle: false, prefill_limit: None } }, security: SecurityConfig { ca_path: \"\", cert_path: \"\", key_path: \"\", override_ssl_target: \"\", cert_allowed_cn: {}, redact_info_log: Flag(false), encryption: EncryptionConfig { data_encryption_method: Plaintext, data_key_rotation_period: ReadableDuration(604800s), enable_file_dictionary_log: true, file_dictionary_rewrite_threshold: 1000000, master_key: Plaintext, previous_master_key: Plaintext } }, import: Config { num_threads: 20, stream_channel_window: 128, import_mode_timeout: ReadableDuration(600s), memory_use_ratio: 0.3 }, backup: BackupConfig { num_threads: 5, batch_size: 8, sst_max_size: ReadableSize(150994944), enable_auto_tune: true, auto_tune_remain_threads: 2, auto_tune_refresh_interval: ReadableDuration(60s), io_thread_size: 2, s3_multi_part_size: ReadableSize(5242880), hadoop: HadoopConfig { home: \"\", linux_user: \"\" } }, log_backup: BackupStreamConfig { min_ts_interval: ReadableDuration(10s), max_flush_interval: ReadableDuration(180s), num_threads: 5, enable: true, temp_path: \"\", file_size_limit: ReadableSize(268435456), temp_file_memory_quota: ReadableSize(536870912), initial_scan_pending_memory_quota: ReadableSize(536870912), initial_scan_rate_limit: ReadableSize(62914560), initial_scan_concurrency: 6 }, pessimistic_txn: Config { wait_for_lock_timeout: ReadableDuration(1s), wake_up_delay_duration: ReadableDuration(20ms), pipelined: true, in_memory: true }, gc: GcConfig { ratio_threshold: 1.1, batch_keys: 512, max_write_bytes_per_sec: ReadableSize(0), enable_compaction_filter: true, compaction_filter_skip_version_check: false, num_threads: 1 }, split: SplitConfig { qps_threshold: None, split_balance_score: 0.25, split_contained_score: 0.5, detect_times: 10, sample_num: 20, sample_threshold: 100, byte_threshold: None, grpc_thread_cpu_overload_threshold_ratio: 0.5, unified_read_pool_thread_cpu_overload_threshold_ratio: 0.8, region_cpu_overload_threshold_ratio: None, size_threshold: None, key_threshold: None }, cdc: CdcConfig { min_ts_interval: ReadableDuration(1s), hibernate_regions_compatible: true, incremental_scan_threads: 4, incremental_scan_concurrency: 6, incremental_scan_concurrency_limit: 10000, incremental_scan_speed_limit: ReadableSize(134217728), incremental_fetch_speed_limit: ReadableSize(536870912), incremental_scan_ts_filter_ratio: 0.2, tso_worker_threads: 1, sink_memory_quota: ReadableSize(536870912), old_value_cache_memory_quota: ReadableSize(536870912), old_value_cache_size: 0 }, resolved_ts: ResolvedTsConfig { enable: true, advance_ts_interval: ReadableDuration(20s), scan_lock_pool_size: 2, memory_quota: ReadableSize(268435456), incremental_scan_concurrency: 6 }, resource_metering: Config { receiver_address: \"\", report_receiver_interval: ReadableDuration(60s), max_resource_groups: 100, precision: ReadableDuration(1s) }, causal_ts: Config { renew_interval: ReadableDuration(100ms), renew_batch_min_size: 100, renew_batch_max_size: 8192, alloc_ahead_buffer: ReadableDuration(3s) }, resource_control: Config { enabled: true }, range_cache_engine: RangeCacheEngineConfig { enabled: false, gc_interval: ReadableDuration(180s), load_evict_interval: ReadableDuration(300s), soft_limit_threshold: None, hard_limit_threshold: None, expected_region_size: None } }"] [thread_id=1]
[2024/09/18 07:47:05.216 +00:00] [INFO] [mod.rs:2606] ["readpool.storage.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/18 07:47:05.216 +00:00] [INFO] [mod.rs:2629] ["readpool.coprocessor.use-unified-pool is not set, set to true by default"] [thread_id=1]
[2024/09/18 07:47:05.221 +00:00] [WARN] [mod.rs:2028] ["raft-engine.batch-compression-threshold 8KiB should be adpative to the size of async-io. Set it to 4KiB instead."] [thread_id=1]
[2024/09/18 07:47:05.223 +00:00] [INFO] [config.rs:343] ["no advertise-status-addr is specified, falling back to status-addr"] [status-addr=127.0.0.1:20292] [thread_id=1]
[2024/09/18 07:47:05.223 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/18 07:47:05.233 +00:00] [INFO] [config.rs:480] ["check_critical_config finished compatible_adjust"] [thread_id=1]
[2024/09/18 07:47:05.235 +00:00] [INFO] [config.rs:395] ["using default coprocessor quota"] [quota=ReadableSize(2093813760)] [thread_id=1]
[2024/09/18 07:47:05.235 +00:00] [INFO] [config.rs:485] ["check_critical_config finished validate"] [thread_id=1]
[2024/09/18 07:47:05.236 +00:00] [INFO] [config.rs:487] ["check_critical_config finished check_critical_cfg_with"] [thread_id=1]
[2024/09/18 07:47:05.238 +00:00] [INFO] [common.rs:453] ["beginning system configuration check"] [thread_id=1]
[2024/09/18 07:47:05.238 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash] [thread_id=1]
[2024/09/18 07:47:05.238 +00:00] [WARN] [common.rs:469] ["check: rocksdb-data-dir"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash] [thread_id=1]
[2024/09/18 07:47:05.239 +00:00] [INFO] [config.rs:1094] ["data dir"] [mount_fs="FsInfo { tp: \"fakeowner\", opts: \"rw,nosuid,nodev,relatime,fakeowner\", mnt_dir: \"/data\", fsname: \"/run/host_mark/Users\" }"] [data_path=/data/flash/raft] [thread_id=1]
[2024/09/18 07:47:05.239 +00:00] [WARN] [common.rs:477] ["check: raftdb-path"] [err="config fs: data-dir.rotation.get: \"/run/host_mark/Users\" no device find in block"] [path=/data/flash/raft] [thread_id=1]
[2024/09/18 07:47:05.243 +00:00] [INFO] [run.rs:795] ["using config"] [config="{\"slow-log-file\":\"\",\"slow-log-threshold\":\"1s\",\"panic-when-unexpected-key-or-data\":false,\"abort-on-panic\":false,\"memory-usage-limit\":\"12268440KiB\",\"memory-usage-high-water\":0.1,\"log\":{\"level\":\"info\",\"format\":\"text\",\"enable-timestamp\":true,\"file\":{\"filename\":\"/logs/tiflash_tikv.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0}},\"memory\":{\"enable-heap-profiling\":false,\"profiling-sample-per-bytes\":\"512KiB\",\"enable-thread-exclusive-arena\":true},\"quota\":{\"foreground-cpu-time\":0,\"foreground-write-bandwidth\":\"0KiB\",\"foreground-read-bandwidth\":\"0KiB\",\"max-delay-duration\":\"500ms\",\"background-cpu-time\":0,\"background-write-bandwidth\":\"0KiB\",\"background-read-bandwidth\":\"0KiB\",\"enable-auto-tune\":false},\"readpool\":{\"unified\":{\"min-thread-count\":1,\"max-thread-count\":4,\"stack-size\":\"10MiB\",\"max-tasks-per-worker\":2000,\"auto-adjust-pool-size\":false},\"storage\":{\"use-unified-pool\":true,\"high-concurrency\":5,\"normal-concurrency\":5,\"low-concurrency\":5,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"},\"coprocessor\":{\"use-unified-pool\":true,\"high-concurrency\":8,\"normal-concurrency\":8,\"low-concurrency\":8,\"max-tasks-per-worker-high\":2000,\"max-tasks-per-worker-normal\":2000,\"max-tasks-per-worker-low\":2000,\"stack-size\":\"10MiB\"}},\"server\":{\"addr\":\"0.0.0.0:20280\",\"advertise-addr\":\"tiflash:20280\",\"status-addr\":\"127.0.0.1:20292\",\"advertise-status-addr\":\"127.0.0.1:20292\",\"status-thread-pool-size\":2,\"max-grpc-send-msg-len\":10485760,\"raft-client-grpc-send-msg-buffer\":524288,\"raft-client-queue-size\":8192,\"raft-msg-max-batch-size\":128,\"grpc-compression-type\":\"none\",\"grpc-gzip-compression-level\":2,\"grpc-min-message-size-to-compress\":4096,\"grpc-concurrency\":5,\"grpc-concurrent-stream\":1024,\"grpc-raft-conn-num\":1,\"grpc-memory-pool-quota\":\"9223372036854775807B\",\"grpc-stream-initial-window-size\":\"2MiB\",\"grpc-keepalive-time\":\"10s\",\"grpc-keepalive-timeout\":\"3s\",\"concurrent-send-snap-limit\":32,\"concurrent-recv-snap-limit\":32,\"end-point-recursion-limit\":1000,\"end-point-stream-channel-size\":8,\"end-point-batch-row-limit\":64,\"end-point-stream-batch-row-limit\":128,\"end-point-enable-batch-if-possible\":true,\"end-point-request-max-handle-duration\":\"1m\",\"end-point-max-concurrency\":10,\"end-point-perf-level\":0,\"end-point-memory-quota\":\"2044740KiB\",\"snap-io-max-bytes-per-sec\":\"100MiB\",\"snap-max-total-size\":\"0KiB\",\"stats-concurrency\":1,\"heavy-load-threshold\":75,\"heavy-load-wait-duration\":null,\"enable-request-batch\":true,\"background-thread-count\":4,\"end-point-slow-log-threshold\":\"1s\",\"forward-max-connections-per-address\":4,\"reject-messages-on-memory-ratio\":0.05,\"simplify-metrics\":false,\"health-feedback-interval\":\"1s\",\"labels\":{\"engine\":\"tiflash\"}},\"storage\":{\"data-dir\":\"/data/flash\",\"engine\":\"raft-kv\",\"gc-ratio-threshold\":1.1,\"max-key-size\":8192,\"scheduler-concurrency\":524288,\"scheduler-worker-pool-size\":4,\"scheduler-pending-write-threshold\":\"100MiB\",\"reserve-space\":\"1GiB\",\"reserve-raft-space\":\"1GiB\",\"enable-async-apply-prewrite\":false,\"api-version\":1,\"enable-ttl\":false,\"background-error-recovery-window\":\"1h\",\"ttl-check-poll-interval\":\"12h\",\"txn-status-cache-capacity\":5120000,\"memory-quota\":\"256MiB\",\"flow-control\":{\"enable\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"memtables-threshold\":5,\"l0-files-threshold\":20},\"block-cache\":{\"shared\":null,\"capacity\":\"7361064KiB\",\"num-shard-bits\":6,\"strict-capacity-limit\":false,\"high-pri-pool-ratio\":0.8,\"low-pri-pool-ratio\":0.2,\"memory-allocator\":\"nodump\"},\"io-rate-limit\":{\"max-bytes-per-sec\":\"0KiB\",\"mode\":\"write-only\",\"strict\":false,\"foreground-read-priority\":\"high\",\"foreground-write-priority\":\"high\",\"flush-priority\":\"high\",\"level-zero-compaction-priority\":\"medium\",\"compaction-priority\":\"low\",\"replication-priority\":\"high\",\"load-balance-priority\":\"high\",\"gc-priority\":\"high\",\"import-priority\":\"medium\",\"export-priority\":\"medium\",\"other-priority\":\"high\"}},\"pd\":{\"endpoints\":[\"pd0:2379\"],\"retry-interval\":\"300ms\",\"retry-max-count\":9223372036854775807,\"retry-log-every\":10,\"update-interval\":\"10m\",\"enable-forwarding\":false},\"metric\":{\"job\":\"tikv\"},\"raftstore\":{\"prevote\":true,\"raftdb-path\":\"/data/flash/raft\",\"capacity\":\"10GiB\",\"raft-base-tick-interval\":\"1s\",\"raft-heartbeat-ticks\":2,\"raft-election-timeout-ticks\":10,\"raft-min-election-timeout-ticks\":10,\"raft-max-election-timeout-ticks\":20,\"raft-max-size-per-msg\":\"1MiB\",\"raft-max-inflight-msgs\":256,\"raft-entry-max-size\":\"8MiB\",\"raft-log-compact-sync-interval\":\"2s\",\"raft-log-gc-tick-interval\":\"3s\",\"request-voter-replicated-index-interval\":\"5m\",\"raft-log-gc-threshold\":50,\"raft-log-gc-count-limit\":73728,\"raft-log-gc-size-limit\":\"72MiB\",\"max-apply-unpersisted-log-limit\":1024,\"follower-read-max-log-gap\":100,\"raft-log-reserve-max-ticks\":6,\"raft-engine-purge-interval\":\"10s\",\"max-manual-flush-rate\":3.0,\"raft-entry-cache-life-time\":\"30s\",\"split-region-check-tick-interval\":\"10s\",\"region-split-check-diff\":\"6MiB\",\"region-compact-check-interval\":\"5m\",\"region-compact-check-step\":100,\"region-compact-min-tombstones\":10000,\"region-compact-tombstones-percent\":30,\"region-compact-min-redundant-rows\":50000,\"region-compact-redundant-rows-percent\":20,\"pd-heartbeat-tick-interval\":\"1m\",\"pd-store-heartbeat-tick-interval\":\"10s\",\"pd-report-min-resolved-ts-interval\":\"1s\",\"snap-mgr-gc-tick-interval\":\"1m\",\"snap-gc-timeout\":\"4h\",\"snap-wait-split-duration\":\"34s\",\"lock-cf-compact-interval\":\"10m\",\"lock-cf-compact-bytes-threshold\":\"256MiB\",\"periodic-full-compact-start-times\":[],\"periodic-full-compact-start-max-cpu\":0.1,\"notify-capacity\":40960,\"messages-per-tick\":4096,\"max-peer-down-duration\":\"10m\",\"max-leader-missing-duration\":\"2h\",\"abnormal-leader-missing-duration\":\"10m\",\"peer-stale-state-check-interval\":\"5m\",\"gc-peer-check-interval\":\"1m\",\"leader-transfer-max-log-lag\":128,\"snap-apply-batch-size\":\"10MiB\",\"snap-apply-copy-symlink\":false,\"region-worker-tick-interval\":\"500ms\",\"clean-stale-ranges-tick\":20,\"consistency-check-interval\":\"0s\",\"report-region-flow-interval\":\"1m\",\"raft-store-max-leader-lease\":\"9s\",\"check-leader-lease-interval\":\"2s250ms\",\"renew-leader-lease-advance-duration\":\"2s250ms\",\"right-derive-when-split\":true,\"merge-max-log-gap\":10,\"merge-check-tick-interval\":\"2s\",\"use-delete-range\":false,\"snap-generator-pool-size\":2,\"cleanup-import-sst-interval\":\"10m\",\"local-read-batch-size\":1024,\"apply-max-batch-size\":256,\"apply-pool-size\":2,\"apply-reschedule-duration\":\"5s\",\"apply-low-priority-pool-size\":10,\"store-max-batch-size\":256,\"store-pool-size\":2,\"store-reschedule-duration\":\"5s\",\"store-low-priority-pool-size\":0,\"store-io-pool-size\":1,\"store-io-notify-capacity\":40960,\"future-poll-size\":1,\"hibernate-regions\":true,\"dev-assert\":false,\"apply-yield-duration\":\"500ms\",\"apply-yield-write-size\":\"32KiB\",\"perf-level\":0,\"evict-cache-on-memory-ratio\":0.1,\"cmd-batch\":true,\"cmd-batch-concurrent-ready-max-count\":1,\"raft-write-size-limit\":\"1MiB\",\"waterfall-metrics\":true,\"io-reschedule-concurrent-max-count\":4,\"io-reschedule-hotpot-duration\":\"5s\",\"inspect-interval\":\"100ms\",\"inspect-cpu-util-thd\":0.4,\"slow-trend-unsensitive-cause\":10.0,\"slow-trend-unsensitive-result\":0.5,\"slow-trend-network-io-factor\":0.0,\"reactive-memory-lock-tick-interval\":\"2s\",\"reactive-memory-lock-timeout-tick\":5,\"report-region-buckets-tick-interval\":\"10s\",\"check-long-uncommitted-interval\":\"10s\",\"long-uncommitted-base-threshold\":\"20s\",\"max-entry-cache-warmup-duration\":\"1s\",\"max-snapshot-file-raw-size\":\"100MiB\",\"unreachable-backoff\":\"10s\",\"enable-v2-compatible-learner\":true,\"min-pending-apply-region-count\":10,\"skip-manual-compaction-in-clean-up-worker\":false},\"coprocessor\":{\"split-region-on-table\":false,\"batch-split-limit\":10,\"region-max-size\":\"144MiB\",\"region-split-size\":\"96MiB\",\"region-max-keys\":1440000,\"region-split-keys\":960000,\"consistency-check-method\":\"mvcc\",\"enable-region-bucket\":null,\"region-bucket-size\":\"50MiB\",\"region-size-threshold-for-approximate\":\"750MiB\",\"prefer-approximate-bucket\":true,\"region-bucket-merge-size-ratio\":0.33},\"coprocessor-v2\":{\"coprocessor-plugin-directory\":null},\"rocksdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":9,\"max-background-flushes\":3,\"max-manifest-file-size\":\"128MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"rate-bytes-per-sec\":\"10GiB\",\"rate-limiter-refill-period\":\"100ms\",\"rate-limiter-mode\":2,\"rate-limiter-auto-tuned\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"max-sub-compactions\":3,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":false,\"enable-multi-batch-write\":null,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"write-buffer-limit\":null,\"track-and-verify-wals-in-manifest\":true,\"defaultcf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"writecf\":{\"block-size\":\"32KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":false,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":3,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":true,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"zstd\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"lockcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":false,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"32MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"raftcf\":{\"block-size\":\"16KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":true,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"no\",\"no\",\"no\",\"no\",\"no\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"128MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":1,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":true,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":null,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"read-only\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":null,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raftdb\":{\"wal-recovery-mode\":2,\"wal-dir\":\"\",\"wal-ttl-seconds\":0,\"wal-size-limit\":\"0KiB\",\"max-total-wal-size\":\"4GiB\",\"max-background-jobs\":4,\"max-background-flushes\":1,\"max-manifest-file-size\":\"20MiB\",\"create-if-missing\":true,\"max-open-files\":40960,\"stats-dump-period\":\"10m\",\"compaction-readahead-size\":\"0KiB\",\"info-log-dir\":\"\",\"max-sub-compactions\":2,\"writable-file-max-buffer-size\":\"1MiB\",\"use-direct-io-for-flush-and-compaction\":false,\"enable-pipelined-write\":true,\"enable-unordered-write\":false,\"allow-concurrent-memtable-write\":true,\"bytes-per-sync\":\"1MiB\",\"wal-bytes-per-sync\":\"512KiB\",\"defaultcf\":{\"block-size\":\"64KiB\",\"block-cache-size\":null,\"disable-block-cache\":false,\"cache-index-and-filter-blocks\":true,\"pin-l0-filter-and-index-blocks\":true,\"use-bloom-filter\":false,\"optimize-filters-for-hits\":true,\"optimize-filters-for-memory\":false,\"whole-key-filtering\":true,\"bloom-filter-bits-per-key\":10,\"block-based-bloom-filter\":false,\"ribbon-filter-above-level\":null,\"read-amp-bytes-per-bit\":0,\"compression-per-level\":[\"no\",\"no\",\"lz4\",\"lz4\",\"lz4\",\"zstd\",\"zstd\"],\"write-buffer-size\":\"128MiB\",\"write-buffer-limit\":null,\"max-write-buffer-number\":5,\"min-write-buffer-number-to-merge\":1,\"max-bytes-for-level-base\":\"512MiB\",\"target-file-size-base\":null,\"level0-file-num-compaction-trigger\":4,\"level0-slowdown-writes-trigger\":20,\"level0-stop-writes-trigger\":20,\"max-compaction-bytes\":\"2GiB\",\"compaction-pri\":0,\"dynamic-level-bytes\":true,\"num-levels\":7,\"max-bytes-for-level-multiplier\":10,\"compaction-style\":0,\"disable-auto-compactions\":false,\"disable-write-stall\":false,\"soft-pending-compaction-bytes-limit\":\"192GiB\",\"hard-pending-compaction-bytes-limit\":\"1TiB\",\"force-consistency-checks\":false,\"prop-size-index-distance\":4194304,\"prop-keys-index-distance\":40960,\"enable-doubly-skiplist\":true,\"enable-compaction-guard\":null,\"compaction-guard-min-output-file-size\":\"8MiB\",\"compaction-guard-max-output-file-size\":\"128MiB\",\"bottommost-level-compression\":\"disable\",\"bottommost-zstd-compression-dict-size\":0,\"bottommost-zstd-compression-sample-size\":0,\"prepopulate-block-cache\":\"disabled\",\"format-version\":2,\"checksum\":\"crc32c\",\"max-compactions\":null,\"ttl\":null,\"periodic-compaction-seconds\":null,\"titan\":{\"min-blob-size\":null,\"blob-file-compression\":\"zstd\",\"zstd-dict-size\":\"0KiB\",\"shared-blob-cache\":true,\"blob-cache-size\":\"0KiB\",\"min-gc-batch-size\":\"16MiB\",\"max-gc-batch-size\":\"64MiB\",\"discardable-ratio\":0.5,\"merge-small-file-threshold\":\"8MiB\",\"blob-run-mode\":\"normal\",\"level-merge\":false,\"range-merge\":true,\"max-sorted-runs\":20}},\"titan\":{\"enabled\":false,\"dirname\":\"\",\"disable-gc\":false,\"max-background-gc\":1,\"purge-obsolete-files-period\":\"10s\"}},\"raft-engine\":{\"enable\":true,\"dir\":\"/data/flash/raft-engine\",\"spill-dir\":null,\"recovery-mode\":\"tolerate-corrupted-tail-records\",\"recovery-read-block-size\":\"16KiB\",\"recovery-threads\":4,\"batch-compression-threshold\":\"4KiB\",\"compression-level\":null,\"bytes-per-sync\":null,\"format-version\":2,\"target-file-size\":\"128MiB\",\"purge-threshold\":\"10GiB\",\"purge-rewrite-threshold\":\"1GiB\",\"purge-rewrite-garbage-ratio\":0.6,\"memory-limit\":\"2453688KiB\",\"enable-log-recycle\":true,\"prefill-for-recycle\":false,\"prefill-limit\":null},\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":[],\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"7d\",\"enable-file-dictionary-log\":true,\"file-dictionary-rewrite-threshold\":1000000,\"master-key\":{\"type\":\"plaintext\"},\"previous-master-key\":{\"type\":\"plaintext\"}}},\"import\":{\"num-threads\":20,\"stream-channel-window\":128,\"import-mode-timeout\":\"10m\",\"memory-use-ratio\":0.3},\"backup\":{\"num-threads\":5,\"batch-size\":8,\"sst-max-size\":\"144MiB\",\"enable-auto-tune\":true,\"auto-tune-remain-threads\":2,\"auto-tune-refresh-interval\":\"1m\",\"io-thread-size\":2,\"s3-multi-part-size\":\"5MiB\",\"hadoop\":{\"home\":\"\",\"linux-user\":\"\"}},\"log-backup\":{\"min-ts-interval\":\"10s\",\"max-flush-interval\":\"3m\",\"num-threads\":5,\"enable\":true,\"temp-path\":\"/data/flash/log-backup-temp\",\"file-size-limit\":\"256MiB\",\"initial-scan-pending-memory-quota\":\"512MiB\",\"initial-scan-rate-limit\":\"60MiB\",\"initial-scan-concurrency\":6},\"pessimistic-txn\":{\"wait-for-lock-timeout\":\"1s\",\"wake-up-delay-duration\":\"20ms\",\"pipelined\":true,\"in-memory\":true},\"gc\":{\"ratio-threshold\":1.1,\"batch-keys\":512,\"max-write-bytes-per-sec\":\"0KiB\",\"enable-compaction-filter\":true,\"compaction-filter-skip-version-check\":false,\"num-threads\":1},\"split\":{\"qps-threshold\":3000,\"split-balance-score\":0.25,\"split-contained-score\":0.5,\"detect-times\":10,\"sample-num\":20,\"sample-threshold\":100,\"byte-threshold\":31457280,\"grpc-thread-cpu-overload-threshold-ratio\":0.5,\"unified-read-pool-thread-cpu-overload-threshold-ratio\":0.8,\"region-cpu-overload-threshold-ratio\":0.25},\"cdc\":{\"min-ts-interval\":\"1s\",\"hibernate-regions-compatible\":true,\"incremental-scan-threads\":4,\"incremental-scan-concurrency\":6,\"incremental-scan-concurrency-limit\":10000,\"incremental-scan-speed-limit\":\"128MiB\",\"incremental-fetch-speed-limit\":\"512MiB\",\"incremental-scan-ts-filter-ratio\":0.2,\"tso-worker-threads\":1,\"sink-memory-quota\":\"512MiB\",\"old-value-cache-memory-quota\":\"512MiB\"},\"resolved-ts\":{\"enable\":true,\"advance-ts-interval\":\"20s\",\"scan-lock-pool-size\":2,\"memory-quota\":\"256MiB\",\"incremental-scan-concurrency\":6},\"resource-metering\":{\"receiver-address\":\"\",\"report-receiver-interval\":\"1m\",\"max-resource-groups\":100,\"precision\":\"1s\"},\"causal-ts\":{\"renew-interval\":\"100ms\",\"renew-batch-min-size\":100,\"renew-batch-max-size\":8192,\"alloc-ahead-buffer\":\"3s\"},\"resource-control\":{\"enabled\":true},\"range-cache-engine\":{\"enabled\":false,\"gc-interval\":\"3m\",\"load-evict-interval\":\"5m\",\"soft-limit-threshold\":null,\"hard-limit-threshold\":null,\"expected-region-size\":null}}"] [thread_id=1]
[2024/09/18 07:47:05.249 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=1]
[2024/09/18 07:47:05.269 +00:00] [INFO] [resource_group.rs:145] ["add resource group"] [ru=2147483647] [name=default] [thread_id=17]
[2024/09/18 07:47:05.397 +00:00] [INFO] [service.rs:70] ["pd meta client creating watch stream."] [rev=30559] [path=resource_group/settings] [thread_id=17]
[2024/09/18 07:47:07.476 +00:00] [INFO] [mod.rs:130] ["encryption: none of key dictionary and file dictionary are found."] [thread_id=1]
[2024/09/18 07:47:07.476 +00:00] [INFO] [mod.rs:549] ["encryption is disabled."] [thread_id=1]
[2024/09/18 07:47:07.477 +00:00] [INFO] [run.rs:159] ["start probing cluster's raftstore version"] [thread_id=1]
[2024/09/18 07:47:07.579 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 07:47:07.580 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 1/5"] [thread_id=1]
[2024/09/18 07:47:10.590 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 07:47:10.590 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 2/5"] [thread_id=1]
[2024/09/18 07:47:13.607 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 07:47:13.607 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 3/5"] [thread_id=1]
[2024/09/18 07:47:16.618 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 07:47:16.619 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 4/5"] [thread_id=1]
[2024/09/18 07:47:19.634 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 07:47:19.635 +00:00] [INFO] [raftstore_proxy.rs:296] ["retry due to status server network error from 5/5"] [thread_id=1]
[2024/09/18 07:47:22.644 +00:00] [ERROR] [raftstore_proxy.rs:147] ["get_engine_type respond error reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"tikv\")), port: Some(20180), path: \"/engine_type\", query: None, fragment: None }, source: hyper::Error(Connect, ConnectError(\"tcp connect error\", Os { code: 111, kind: ConnectionRefused, message: \"Connection refused\" })) }"] [thread_id=1]
[2024/09/18 07:47:22.645 +00:00] [INFO] [run.rs:162] ["cluster's raftstore version is Uncertain"] [thread_id=1]
[2024/09/18 07:47:22.645 +00:00] [INFO] [run.rs:174] ["set raft-store proxy helper"] [thread_id=1]
[2024/09/18 07:47:22.645 +00:00] [INFO] [run.rs:178] ["wait for engine-store server to start"] [thread_id=1]
[2024/09/18 07:47:23.248 +00:00] [INFO] [run.rs:192] ["engine-store server is started"] [thread_id=1]
[2024/09/18 07:47:23.249 +00:00] [WARN] [config.rs:356] ["Memory allocator nodump is not supported, continue with default allocator"] [thread_id=1]
[2024/09/18 07:47:23.254 +00:00] [INFO] [engine.rs:93] ["Recovering raft logs takes 3.499916ms"] [thread_id=1]
[2024/09/18 07:47:23.296 +00:00] [INFO] [engine.rs:80] ["disabled pagestorage"] [thread_id=1]
[2024/09/18 07:47:23.342 +00:00] [INFO] [mod.rs:298] ["Storage started."] [thread_id=1]
[2024/09/18 07:47:23.348 +00:00] [INFO] [run.rs:1191] ["set store 1001 to engine-store"] [thread_id=1]
[2024/09/18 07:47:23.350 +00:00] [INFO] [sst_importer.rs:187] ["sst importer memory limit when apply"] [size=5025153024] [ratio=0.3] [thread_id=1]
[2024/09/18 07:47:23.355 +00:00] [INFO] [forwarder.rs:107] ["created tiflash forwarder"] [store_id=1001] [thread_id=1]
[2024/09/18 07:47:23.357 +00:00] [INFO] [raft_server.rs:196] ["put store to PD"] [store="id: 1001 address: \"tiflash:4030\" labels { key: \"engine\" value: \"tiflash\" } version: \"v8.4.0-alpha-36-g9e3ba660e\" peer_address: \"tiflash:20280\" status_address: \"127.0.0.1:20292\" git_hash: \"9e3ba660eee20253548d26fdf5bb9f2fa5731e4e\" start_timestamp: 1726645643 deploy_path: \"/tiflash\""] [thread_id=1]
[2024/09/18 07:47:23.359 +00:00] [INFO] [raft_server.rs:335] ["initializing replication mode"] [store_id=1001] [status=Some()] [thread_id=1]
[2024/09/18 07:47:23.360 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[]"] [store_id=1] [thread_id=1]
[2024/09/18 07:47:23.360 +00:00] [INFO] [replication_mode.rs:55] ["associated store labels"] [labels="[key: \"engine\" value: \"tiflash\"]"] [store_id=1001] [thread_id=1]
[2024/09/18 07:47:23.360 +00:00] [INFO] [raft_server.rs:469] ["start raft store thread"] [store_id=1001] [thread_id=1]
[2024/09/18 07:47:23.361 +00:00] [INFO] [snap.rs:1462] ["Initializing SnapManager, encryption is enabled: false"] [thread_id=1]
[2024/09/18 07:47:23.367 +00:00] [INFO] [write.rs:1041] ["starting store writer 0"] [thread_id=1]
[2024/09/18 07:47:23.367 +00:00] [INFO] [store.rs:1393] ["start store"] [takes=118.75Âµs] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=0] [store_id=1001] [thread_id=1]
[2024/09/18 07:47:23.367 +00:00] [INFO] [store.rs:1449] ["cleans up garbage data"] [takes=14.25Âµs] [garbage_range_count=1] [store_id=1001] [thread_id=1]
[2024/09/18 07:47:23.376 +00:00] [WARN] [store.rs:1918] ["set thread priority for raftstore failed"] [error="Os { code: 13, kind: PermissionDenied, message: \"Permission denied\" }"] [thread_id=1]
[2024/09/18 07:47:23.402 +00:00] [INFO] [server.rs:310] ["listening on addr"] [addr=0.0.0.0:20280] [thread_id=1]
[2024/09/18 07:47:23.415 +00:00] [INFO] [server.rs:390] ["TiKV is ready to serve"] [thread_id=1]
[2024/09/18 07:47:33.383 +00:00] [INFO] [client.rs:799] ["set cluster version to 8.4.0-alpha"] [thread_id=96]
[2024/09/18 07:57:05.206 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
[2024/09/18 08:07:05.208 +00:00] [INFO] [util.rs:639] ["connecting to PD endpoint"] [endpoints=http://pd0:2379] [thread_id=12]
