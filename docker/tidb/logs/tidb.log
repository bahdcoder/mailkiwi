[2024/09/16 18:17:07.004 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:17:07.005 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:17:07.005 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:17:07.006 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:17:07.006 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:17:07.006 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:17:07.006 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:17:07.006 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:17:07.007 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:17:07.007 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:17:07.017 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:08.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:09.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:10.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:11.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:12.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:13.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:14.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:15.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:16.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:17.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:18.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:19.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:20.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:21.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:22.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:23.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:24.057 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:25.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:26.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:27.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:28.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:29.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:30.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:31.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:32.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:33.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:34.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:35.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:36.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:37.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:38.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:39.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:40.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:41.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:42.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:43.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:44.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:45.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:46.015 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:47.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:48.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:49.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:50.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:51.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:52.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:53.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:54.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:55.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:56.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:57.013 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:58.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:17:59.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:00.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:01.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:02.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:03.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:04.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:05.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:06.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:07.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:08.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:09.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:10.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:11.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:12.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:13.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:14.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:15.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:16.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:17.008 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:18.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:19.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:20.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:21.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:22.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:23.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:24.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:25.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:26.011 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:27.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:28.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:29.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:30.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:31.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:32.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:33.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:34.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:35.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:36.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:37.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:38.010 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:39.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:40.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:41.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:42.011 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:43.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:44.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:45.012 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:46.009 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:47.010 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:18:47.010 +00:00] [WARN] [store.go:84] ["new store with retry failed"] [error="[pd] failed to get cluster id"]
[2024/09/16 18:18:47.011 +00:00] [FATAL] [terror.go:309] ["unexpected error"] [error="[pd] failed to get cluster id"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"]
[2024/09/16 18:18:47.330 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:18:47.331 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:18:47.331 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:18:47.331 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:18:47.331 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:18:47.332 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:18:47.332 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:18:47.332 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:18:47.332 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:18:47.332 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:18:47.337 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:48.354 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:49.333 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:50.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:51.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:52.333 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:53.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:54.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:55.333 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:56.333 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:57.333 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:58.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:18:59.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:00.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:01.336 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:02.334 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:03.338 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:04.333 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:05.338 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:06.333 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:07.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:08.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:09.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:10.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:11.341 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:12.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:13.341 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:14.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:15.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:16.341 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:17.344 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:18.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:19.341 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:20.341 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:21.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:22.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:23.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:24.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:25.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:26.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:27.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:28.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:29.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:30.344 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:31.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:32.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:33.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:34.342 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:35.343 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:36.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:37.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:38.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:39.350 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:40.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:41.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:42.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:43.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:44.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:45.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:46.352 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:47.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:48.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:49.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:50.352 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:51.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:52.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:53.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:54.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:55.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:56.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:57.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:58.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:19:59.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:00.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:01.349 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:02.350 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:03.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:04.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:05.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:06.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:07.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:08.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:09.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:10.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:11.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:12.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:13.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:14.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:15.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:16.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:17.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:18.348 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:19.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:20.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:21.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:22.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:23.348 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:24.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:25.347 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:26.346 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:27.346 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:20:27.347 +00:00] [WARN] [store.go:84] ["new store with retry failed"] [error="[pd] failed to get cluster id"]
[2024/09/16 18:20:27.348 +00:00] [FATAL] [terror.go:309] ["unexpected error"] [error="[pd] failed to get cluster id"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"]
[2024/09/16 18:20:27.681 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:20:27.681 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:20:27.681 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:20:27.681 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:20:27.681 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:20:27.682 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:20:27.682 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:20:27.682 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:20:27.682 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:20:27.682 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:20:27.687 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:28.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:29.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:30.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:31.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:32.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:33.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:34.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:35.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:36.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:37.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:38.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:39.688 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:40.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:41.687 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:42.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:43.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:44.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:45.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:46.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:47.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:48.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:49.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:50.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:51.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:52.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:53.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:54.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:55.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:56.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:57.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:58.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:20:59.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:00.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:01.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:02.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:03.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:04.687 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:05.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:06.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:07.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:08.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:09.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:10.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:11.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:12.688 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:13.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:14.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:15.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:16.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:17.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:18.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:19.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:20.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:21.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:22.687 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:23.687 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:24.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:25.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:26.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:27.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:28.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:29.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:30.690 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:31.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:32.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:33.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:34.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:35.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:36.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:37.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:38.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:39.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:40.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:41.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:42.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:43.688 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:44.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:45.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:46.687 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:47.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:48.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:49.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:50.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:51.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:52.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:53.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:54.690 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:55.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:56.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:57.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:58.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:21:59.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:00.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:01.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:02.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:03.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:04.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:05.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:06.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:07.686 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:22:07.687 +00:00] [WARN] [store.go:84] ["new store with retry failed"] [error="[pd] failed to get cluster id"]
[2024/09/16 18:22:07.688 +00:00] [FATAL] [terror.go:309] ["unexpected error"] [error="[pd] failed to get cluster id"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"]
[2024/09/16 18:22:08.021 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:22:08.022 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:22:08.022 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:22:08.022 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:22:08.023 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:22:08.023 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:22:08.023 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:22:08.022 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:22:08.024 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:22:08.023 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:22:08.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:09.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:10.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:11.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:12.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:13.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:14.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:15.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:16.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:17.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:18.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:19.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:20.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:21.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:22.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:23.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:24.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:25.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:26.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:27.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:28.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:29.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:30.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:31.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:32.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:33.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:34.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:35.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:36.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:37.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:38.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:39.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:40.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:41.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:42.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:43.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:44.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:45.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:46.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:47.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:48.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:49.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:50.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:51.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:52.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:53.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:54.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:55.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:56.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:57.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:58.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:22:59.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:00.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:01.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:02.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:03.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:04.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:05.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:06.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:07.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:08.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:09.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:10.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:11.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:12.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:13.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:14.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:15.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:16.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:17.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:18.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:19.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:20.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:21.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:22.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:23.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:24.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:25.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:26.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:27.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:28.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:29.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:30.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:31.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:32.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:33.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:34.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:35.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:36.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:37.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:38.027 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:39.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:40.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:41.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:42.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:43.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:44.026 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:45.024 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:46.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:47.025 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:48.024 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:23:48.025 +00:00] [WARN] [store.go:84] ["new store with retry failed"] [error="[pd] failed to get cluster id"]
[2024/09/16 18:23:48.026 +00:00] [FATAL] [terror.go:309] ["unexpected error"] [error="[pd] failed to get cluster id"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"]
[2024/09/16 18:23:48.323 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:23:48.323 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:23:48.324 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:23:48.324 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:23:48.324 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:23:48.324 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:23:48.324 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:23:48.324 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:23:48.324 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:23:48.325 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:23:48.329 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:49.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:50.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:51.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:52.325 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:53.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:54.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:55.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:56.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:57.325 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:58.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:23:59.325 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:00.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:01.325 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:02.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:03.325 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:04.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:05.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:06.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:07.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:08.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:09.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:10.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:11.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:12.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:13.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:14.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:15.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:16.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:17.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:18.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:19.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:20.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:21.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:22.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:23.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:24.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:25.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:26.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:27.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:28.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:29.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:30.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:31.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:32.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:33.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:34.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:35.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:36.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:37.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:38.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:39.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:40.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:41.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:42.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:43.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:44.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:45.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:46.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:47.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:48.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:49.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:50.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:51.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:52.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:53.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:54.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:55.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:56.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:57.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:58.332 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:24:59.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:00.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:01.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:02.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:03.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:04.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:05.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:06.326 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:07.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:08.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:09.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:10.329 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:11.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:12.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:13.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:14.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:15.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:16.329 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:17.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:18.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:19.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:20.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:21.332 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:22.329 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:23.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:24.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:25.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:26.327 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:27.328 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:28.327 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:25:28.328 +00:00] [WARN] [store.go:84] ["new store with retry failed"] [error="[pd] failed to get cluster id"]
[2024/09/16 18:25:28.329 +00:00] [FATAL] [terror.go:309] ["unexpected error"] [error="[pd] failed to get cluster id"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"]
[2024/09/16 18:25:28.680 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:25:28.680 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:25:28.681 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:25:28.681 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:25:28.681 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:25:28.682 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:25:28.682 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:25:28.682 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:25:28.682 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:25:28.682 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:25:28.688 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:29.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:30.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:31.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:32.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:33.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:34.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:35.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:36.694 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:37.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:38.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:39.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:40.682 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:41.682 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:42.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:43.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:44.682 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:45.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:46.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:47.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:48.682 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:49.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:50.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:51.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:52.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:53.682 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:54.682 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:55.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:56.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:57.682 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:58.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:25:59.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:00.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:01.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:02.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:03.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:04.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:05.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:06.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:07.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:08.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:09.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:10.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:11.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:12.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:13.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:14.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:15.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:16.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:17.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:18.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:19.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:20.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:21.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:22.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:23.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:24.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:25.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:26.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:27.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:28.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:29.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:30.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:31.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:32.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:33.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:34.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:35.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:36.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:37.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:38.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:39.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:40.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:41.686 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:42.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:43.688 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:44.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:45.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:46.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:47.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:48.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:49.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:50.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:51.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:52.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:53.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:54.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:55.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:56.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:57.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:58.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:26:59.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:00.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:01.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:02.683 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:03.687 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:04.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:05.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:06.684 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:07.685 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:08.684 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:27:08.686 +00:00] [WARN] [store.go:84] ["new store with retry failed"] [error="[pd] failed to get cluster id"]
[2024/09/16 18:27:08.687 +00:00] [FATAL] [terror.go:309] ["unexpected error"] [error="[pd] failed to get cluster id"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"] [stack="github.com/pingcap/tidb/pkg/parser/terror.MustNil\n\t/workspace/source/tidb/pkg/parser/terror/terror.go:309\nmain.createStoreAndDomain\n\t/workspace/source/tidb/cmd/tidb-server/main.go:416\nmain.main\n\t/workspace/source/tidb/cmd/tidb-server/main.go:326\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:267"]
[2024/09/16 18:27:09.101 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:27:09.102 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:27:09.102 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:27:09.102 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:27:09.103 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:27:09.103 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:27:09.103 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:27:09.103 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:27:09.104 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:27:09.104 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:27:09.110 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:10.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:11.103 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:12.106 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:13.104 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:14.106 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:15.104 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:16.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:17.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:18.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:19.104 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:20.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:21.104 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:22.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:23.104 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:24.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:25.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:26.105 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:27:27.104 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup pd0 on 127.0.0.11:53: no such host\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:28:11.281 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:28:11.282 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:28:11.282 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:28:11.282 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:28:11.283 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:28:11.283 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:28:11.283 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:28:11.283 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:28:11.283 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:28:11.283 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:28:12.286 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:40498->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:40498->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:28:12.287 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:40498->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:40498->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:28:13.285 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:40498->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:40498->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:28:14.288 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 18:28:16.422 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 18:28:16.425 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:28:16.425 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 18:28:16.426 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:28:16.426 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 18:28:16.426 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 18:28:16.426 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 18:28:16.428 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:28:16.432 +00:00] [INFO] [tikv_driver.go:197] ["using API V1."]
[2024/09/16 18:28:16.434 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 18:28:16.810 +00:00] [INFO] [store_cache.go:532] ["change store resolve state"] [store=1] [addr=tikv:20160] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2024/09/16 18:28:16.904 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=2] ["first split key"=748000fffffffffffe]
[2024/09/16 18:28:16.914 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=2] ["first at"=748000fffffffffffe] ["first new region left"="{Id:4 StartKey: EndKey:748000fffffffffffffe00000000000000f8 RegionEpoch:{ConfVer:1 Version:2} Peers:[id:5 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:16.915 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[4]"]
[2024/09/16 18:28:16.915 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=2] ["first split key"=748000fffffffffffd]
[2024/09/16 18:28:16.925 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=4] ["first at"=748000fffffffffffd] ["first new region left"="{Id:6 StartKey: EndKey:748000fffffffffffffd00000000000000f8 RegionEpoch:{ConfVer:1 Version:3} Peers:[id:7 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:16.925 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[6]"]
[2024/09/16 18:28:16.925 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=4] ["first split key"=748000fffffffffffc]
[2024/09/16 18:28:16.931 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=6] ["first at"=748000fffffffffffc] ["first new region left"="{Id:8 StartKey: EndKey:748000fffffffffffffc00000000000000f8 RegionEpoch:{ConfVer:1 Version:4} Peers:[id:9 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:16.932 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[8]"]
[2024/09/16 18:28:16.935 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:16.935 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:16.942 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:16.943 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:16.954 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=8] ["first split key"=748000fffffffffffb]
[2024/09/16 18:28:16.955 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=8] ["first at"=748000fffffffffffb] ["first new region left"="{Id:10 StartKey: EndKey:748000fffffffffffffb00000000000000f8 RegionEpoch:{ConfVer:1 Version:5} Peers:[id:11 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:16.956 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[10]"]
[2024/09/16 18:28:16.957 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:16.975 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=10] ["first split key"=748000fffffffffffa]
[2024/09/16 18:28:16.977 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=10] ["first at"=748000fffffffffffa] ["first new region left"="{Id:12 StartKey: EndKey:748000fffffffffffffa00000000000000f8 RegionEpoch:{ConfVer:1 Version:6} Peers:[id:13 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:16.977 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[12]"]
[2024/09/16 18:28:16.977 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=10] ["first split key"=748000fffffffffff9]
[2024/09/16 18:28:16.981 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=12] ["first at"=748000fffffffffff9] ["first new region left"="{Id:14 StartKey: EndKey:748000fffffffffffff900000000000000f8 RegionEpoch:{ConfVer:1 Version:7} Peers:[id:15 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:16.981 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[14]"]
[2024/09/16 18:28:16.990 +00:00] [INFO] [tidb.go:85] ["new domain"] [store=tikv-7415309541240867473] ["ddl lease"=45s] ["stats lease"=3s]
[2024/09/16 18:28:17.000 +00:00] [WARN] [info.go:328] ["init TiFlashReplicaManager"]
[2024/09/16 18:28:17.030 +00:00] [INFO] [domain.go:2933] [acquireServerID] [serverID=1020] ["lease id"=4cf691fc1799b852]
[2024/09/16 18:28:17.033 +00:00] [INFO] [controller.go:198] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/16 18:28:17.037 +00:00] [WARN] [domain.go:298] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [version=0]
[2024/09/16 18:28:17.050 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=0] ["elapsed time"=12.767416ms]
[2024/09/16 18:28:17.050 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 18:28:17.051 +00:00] [INFO] [ddl.go:737] ["start DDL"] [category=ddl] [ID=63775615-605e-4e1d-ad8e-e9f13446a8c9] [runWorker=true] [jobVersion=v1]
[2024/09/16 18:28:17.051 +00:00] [INFO] [ddl.go:714] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=false]
[2024/09/16 18:28:17.053 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[ddl] /tidb/ddl/fg/owner"]
[2024/09/16 18:28:17.055 +00:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/16 18:28:17.055 +00:00] [INFO] [env.go:81] ["init global ingest backend environment finished"] [category=ddl-ingest] ["memory limitation"=8375255040] ["disk usage info"="disk usage: 52069363712/275273396224, backend usage: 0"] ["max open file number"=1048576] ["lightning is initialized"=true]
[2024/09/16 18:28:17.055 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 18:28:17.055 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 18:28:17.055 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 18:28:17.055 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 18:28:17.056 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 18:28:17.056 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:28:17.056 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 18:28:17.056 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 18:28:17.056 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 18:28:17.056 +00:00] [INFO] [owner_daemon.go:70] ["begin advancer daemon"] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:28:17.056 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[log-backup] /tidb/br-stream/owner"]
[2024/09/16 18:28:17.056 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc1799b85d] [ownerID=63775615-605e-4e1d-ad8e-e9f13446a8c9] [op=none]
[2024/09/16 18:28:17.056 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"]
[2024/09/16 18:28:17.056 +00:00] [INFO] [runaway.go:68] ["try to start runaway manager loop"]
[2024/09/16 18:28:17.057 +00:00] [INFO] [job_scheduler.go:359] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/16 18:28:17.058 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc1799b85d] [ownerID=63775615-605e-4e1d-ad8e-e9f13446a8c9] [op=none]
[2024/09/16 18:28:17.058 +00:00] [INFO] [manager.go:408] ["set owner op is the same as the original, so do nothing."] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"] [op=none]
[2024/09/16 18:28:17.058 +00:00] [INFO] [job_scheduler.go:371] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/16 18:28:17.058 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"] ["owner key"=/tidb/br-stream/owner/4cf691fc1799b862] [ownerID=6d75d4ba-0d3e-4206-b436-276e4776d120] [op=none]
[2024/09/16 18:28:17.059 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"]
[2024/09/16 18:28:17.060 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 18:28:17.060 +00:00] [INFO] [owner_daemon.go:81] ["begin running daemon"] [id=6d75d4ba-0d3e-4206-b436-276e4776d120] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:28:17.061 +00:00] [WARN] [domain.go:298] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [version=0]
[2024/09/16 18:28:17.070 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2024/09/16 18:28:17.104 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 18:28:17.049 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.104 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 18:28:17.049 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2024/09/16 18:28:17.107 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=3] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.049 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.126 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=1] ["elapsed time"=8.593208ms]
[2024/09/16 18:28:17.127 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 18:28:17.131 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.131 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=3] [version=1]
[2024/09/16 18:28:17.132 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=16.316792ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 18:28:17.049 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.139 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=3] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.049 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.150 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=3]
[2024/09/16 18:28:17.150 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2024/09/16 18:28:17.152 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2024/09/16 18:28:17.162 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.149 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.162 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.149 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2024/09/16 18:28:17.165 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=5] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.149 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.179 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1] [neededSchemaVersion=2] ["elapsed time"=1.081333ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.182 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.182 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=5] [version=2]
[2024/09/16 18:28:17.183 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=6.474834ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.149 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.191 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=5] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.149 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.208 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=5]
[2024/09/16 18:28:17.208 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2024/09/16 18:28:17.208 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000004]
[2024/09/16 18:28:17.210 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000004] ["first new region left"="{Id:16 StartKey: EndKey:7480000000000000ff0400000000000000f8 RegionEpoch:{ConfVer:1 Version:8} Peers:[id:17 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.210 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[16]"]
[2024/09/16 18:28:17.213 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.214 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2024/09/16 18:28:17.215 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=7] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.223 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=2] [neededSchemaVersion=3] ["elapsed time"=553s] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.225 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.225 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=7] [version=3]
[2024/09/16 18:28:17.225 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=5.153208ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.229 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=7] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.234 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=7]
[2024/09/16 18:28:17.234 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2024/09/16 18:28:17.234 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000006]
[2024/09/16 18:28:17.236 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000006] ["first new region left"="{Id:18 StartKey:7480000000000000ff0400000000000000f8 EndKey:7480000000000000ff0600000000000000f8 RegionEpoch:{ConfVer:1 Version:9} Peers:[id:19 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.236 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[18]"]
[2024/09/16 18:28:17.239 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.239 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2024/09/16 18:28:17.240 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=9] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.247 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=3] [neededSchemaVersion=4] ["elapsed time"=560.792s] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.249 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.249 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=9] [version=4]
[2024/09/16 18:28:17.250 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=3.910041ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.255 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=9] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.259 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=9]
[2024/09/16 18:28:17.260 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2024/09/16 18:28:17.260 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000008]
[2024/09/16 18:28:17.279 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000008] ["first new region left"="{Id:20 StartKey:7480000000000000ff0600000000000000f8 EndKey:7480000000000000ff0800000000000000f8 RegionEpoch:{ConfVer:1 Version:10} Peers:[id:21 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.280 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[20]"]
[2024/09/16 18:28:17.281 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.249 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.281 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.249 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2024/09/16 18:28:17.287 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=11] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.249 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.296 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=4] [neededSchemaVersion=5] ["elapsed time"=732.917s] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.298 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.298 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=11] [version=5]
[2024/09/16 18:28:17.299 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=4.379583ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.249 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.304 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=11] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.249 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.310 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=11]
[2024/09/16 18:28:17.311 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2024/09/16 18:28:17.311 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000000a]
[2024/09/16 18:28:17.316 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000000a] ["first new region left"="{Id:22 StartKey:7480000000000000ff0800000000000000f8 EndKey:7480000000000000ff0a00000000000000f8 RegionEpoch:{ConfVer:1 Version:11} Peers:[id:23 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.316 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[22]"]
[2024/09/16 18:28:17.319 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.319 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2024/09/16 18:28:17.323 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=13] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.332 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=5] [neededSchemaVersion=6] ["elapsed time"=490.959s] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.334 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.334 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=13] [version=6]
[2024/09/16 18:28:17.334 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=4.461792ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.338 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=13] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.343 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=13]
[2024/09/16 18:28:17.343 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2024/09/16 18:28:17.343 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000000c]
[2024/09/16 18:28:17.347 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.347 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2024/09/16 18:28:17.348 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000000c] ["first new region left"="{Id:24 StartKey:7480000000000000ff0a00000000000000f8 EndKey:7480000000000000ff0c00000000000000f8 RegionEpoch:{ConfVer:1 Version:12} Peers:[id:25 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.348 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[24]"]
[2024/09/16 18:28:17.349 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=15] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.362 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=6] [neededSchemaVersion=7] ["elapsed time"=801.416s] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.365 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.365 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=15] [version=7]
[2024/09/16 18:28:17.377 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=15.955625ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.381 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=15] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.386 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=15]
[2024/09/16 18:28:17.386 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(16383) DEFAULT NULL);"] [user=]
[2024/09/16 18:28:17.386 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000000e]
[2024/09/16 18:28:17.390 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.390 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(16383) DEFAULT NULL);"]
[2024/09/16 18:28:17.391 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000000e] ["first new region left"="{Id:26 StartKey:7480000000000000ff0c00000000000000f8 EndKey:7480000000000000ff0e00000000000000f8 RegionEpoch:{ConfVer:1 Version:13} Peers:[id:27 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.391 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[26]"]
[2024/09/16 18:28:17.392 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=17] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.398 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=7] [neededSchemaVersion=8] ["elapsed time"=518.375s] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.400 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.400 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=17] [version=8]
[2024/09/16 18:28:17.401 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=3.679667ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.404 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=17] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.408 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=17]
[2024/09/16 18:28:17.408 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2024/09/16 18:28:17.408 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000010]
[2024/09/16 18:28:17.413 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.413 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2024/09/16 18:28:17.414 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000010] ["first new region left"="{Id:28 StartKey:7480000000000000ff0e00000000000000f8 EndKey:7480000000000000ff1000000000000000f8 RegionEpoch:{ConfVer:1 Version:14} Peers:[id:29 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.414 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[28]"]
[2024/09/16 18:28:17.415 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=19] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.422 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=8] [neededSchemaVersion=9] ["elapsed time"=465.916s] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.423 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.423 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=19] [version=9]
[2024/09/16 18:28:17.424 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=3.446292ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.427 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=19] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.431 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=19]
[2024/09/16 18:28:17.432 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2024/09/16 18:28:17.432 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000012]
[2024/09/16 18:28:17.437 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000012] ["first new region left"="{Id:30 StartKey:7480000000000000ff1000000000000000f8 EndKey:7480000000000000ff1200000000000000f8 RegionEpoch:{ConfVer:1 Version:15} Peers:[id:31 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.437 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[30]"]
[2024/09/16 18:28:17.448 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.448 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2024/09/16 18:28:17.449 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=21] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.457 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=9] [neededSchemaVersion=10] ["elapsed time"=529.667s] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.458 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.458 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=21] [version=10]
[2024/09/16 18:28:17.459 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=3.598375ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.466 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=21] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.399 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.470 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=21]
[2024/09/16 18:28:17.470 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2024/09/16 18:28:17.471 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000014]
[2024/09/16 18:28:17.475 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000014] ["first new region left"="{Id:32 StartKey:7480000000000000ff1200000000000000f8 EndKey:7480000000000000ff1400000000000000f8 RegionEpoch:{ConfVer:1 Version:16} Peers:[id:33 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.475 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[32]"]
[2024/09/16 18:28:17.476 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.476 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2024/09/16 18:28:17.477 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=23] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.484 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=10] [neededSchemaVersion=11] ["elapsed time"=502.875s] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.486 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.486 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=23] [version=11]
[2024/09/16 18:28:17.486 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=3.414708ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.489 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=23] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.494 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=23]
[2024/09/16 18:28:17.494 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/16 18:28:17.494 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000016]
[2024/09/16 18:28:17.495 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:17.500 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000016] ["first new region left"="{Id:34 StartKey:7480000000000000ff1400000000000000f8 EndKey:7480000000000000ff1600000000000000f8 RegionEpoch:{ConfVer:1 Version:17} Peers:[id:35 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.500 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[34]"]
[2024/09/16 18:28:17.502 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.502 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2024/09/16 18:28:17.503 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=25] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.527 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=11] [neededSchemaVersion=12] ["elapsed time"=716.208s] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.529 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.529 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=25] [version=12]
[2024/09/16 18:28:17.530 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=3.970875ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.533 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=25] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.537 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=25]
[2024/09/16 18:28:17.538 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2024/09/16 18:28:17.538 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000018]
[2024/09/16 18:28:17.542 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000018] ["first new region left"="{Id:36 StartKey:7480000000000000ff1600000000000000f8 EndKey:7480000000000000ff1800000000000000f8 RegionEpoch:{ConfVer:1 Version:18} Peers:[id:37 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.542 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[36]"]
[2024/09/16 18:28:17.542 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.542 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2024/09/16 18:28:17.544 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=27] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.552 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=12] [neededSchemaVersion=13] ["elapsed time"=664.042s] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.554 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.554 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=27] [version=13]
[2024/09/16 18:28:17.555 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=4.175916ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.559 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=27] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.565 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=27]
[2024/09/16 18:28:17.565 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2024/09/16 18:28:17.565 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000001a]
[2024/09/16 18:28:17.570 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000001a] ["first new region left"="{Id:38 StartKey:7480000000000000ff1800000000000000f8 EndKey:7480000000000000ff1a00000000000000f8 RegionEpoch:{ConfVer:1 Version:19} Peers:[id:39 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.570 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[38]"]
[2024/09/16 18:28:17.576 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.576 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2024/09/16 18:28:17.577 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=29] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.585 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=13] [neededSchemaVersion=14] ["elapsed time"=529.542s] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.586 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.586 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=29] [version=14]
[2024/09/16 18:28:17.587 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=3.5765ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.590 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=29] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.594 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=29]
[2024/09/16 18:28:17.594 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2024/09/16 18:28:17.595 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000001c]
[2024/09/16 18:28:17.600 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000001c] ["first new region left"="{Id:40 StartKey:7480000000000000ff1a00000000000000f8 EndKey:7480000000000000ff1c00000000000000f8 RegionEpoch:{ConfVer:1 Version:20} Peers:[id:41 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.600 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[40]"]
[2024/09/16 18:28:17.601 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.601 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2024/09/16 18:28:17.603 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=31] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.609 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=14] [neededSchemaVersion=15] ["elapsed time"=428.708s] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.611 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.611 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=31] [version=15]
[2024/09/16 18:28:17.612 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=3.393917ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.614 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=31] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.549 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.618 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=31]
[2024/09/16 18:28:17.618 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/16 18:28:17.619 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000001e]
[2024/09/16 18:28:17.622 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.622 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2024/09/16 18:28:17.623 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000001e] ["first new region left"="{Id:42 StartKey:7480000000000000ff1c00000000000000f8 EndKey:7480000000000000ff1e00000000000000f8 RegionEpoch:{ConfVer:1 Version:21} Peers:[id:43 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.623 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[42]"]
[2024/09/16 18:28:17.623 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=33] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.631 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=15] [neededSchemaVersion=16] ["elapsed time"=498.875s] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.632 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.632 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=33] [version=16]
[2024/09/16 18:28:17.633 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=3.816583ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.637 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=33] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.644 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=33]
[2024/09/16 18:28:17.645 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2024/09/16 18:28:17.645 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000020]
[2024/09/16 18:28:17.651 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000020] ["first new region left"="{Id:44 StartKey:7480000000000000ff1e00000000000000f8 EndKey:7480000000000000ff2000000000000000f8 RegionEpoch:{ConfVer:1 Version:22} Peers:[id:45 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.651 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[44]"]
[2024/09/16 18:28:17.653 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.653 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2024/09/16 18:28:17.654 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=35] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.661 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=16] [neededSchemaVersion=17] ["elapsed time"=567.917s] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.663 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.663 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=35] [version=17]
[2024/09/16 18:28:17.664 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=3.925625ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.668 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=35] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.598 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.672 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=35]
[2024/09/16 18:28:17.672 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2024/09/16 18:28:17.672 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000022]
[2024/09/16 18:28:17.676 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.677 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2024/09/16 18:28:17.677 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000022] ["first new region left"="{Id:46 StartKey:7480000000000000ff2000000000000000f8 EndKey:7480000000000000ff2200000000000000f8 RegionEpoch:{ConfVer:1 Version:23} Peers:[id:47 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.677 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[46]"]
[2024/09/16 18:28:17.679 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=37] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.686 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=17] [neededSchemaVersion=18] ["elapsed time"=548.625s] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.687 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.687 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=37] [version=18]
[2024/09/16 18:28:17.688 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=3.923542ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.692 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=37] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.696 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=37]
[2024/09/16 18:28:17.696 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/16 18:28:17.696 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000024]
[2024/09/16 18:28:17.700 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.700 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/16 18:28:17.701 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000024] ["first new region left"="{Id:48 StartKey:7480000000000000ff2200000000000000f8 EndKey:7480000000000000ff2400000000000000f8 RegionEpoch:{ConfVer:1 Version:24} Peers:[id:49 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.701 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[48]"]
[2024/09/16 18:28:17.702 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=39] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.710 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=18] [neededSchemaVersion=19] ["elapsed time"=483s] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.712 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.712 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=39] [version=19]
[2024/09/16 18:28:17.712 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=3.463917ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.716 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=39] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.648 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.721 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=39]
[2024/09/16 18:28:17.721 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000026]
[2024/09/16 18:28:17.724 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/16 18:28:17.725 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000026] ["first new region left"="{Id:50 StartKey:7480000000000000ff2400000000000000f8 EndKey:7480000000000000ff2600000000000000f8 RegionEpoch:{ConfVer:1 Version:25} Peers:[id:51 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.725 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[50]"]
[2024/09/16 18:28:17.729 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.729 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2024/09/16 18:28:17.730 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=41] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.736 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=19] [neededSchemaVersion=20] ["elapsed time"=410s] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.737 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.737 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=41] [version=20]
[2024/09/16 18:28:17.738 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=3.590875ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.742 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=41] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.746 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=41]
[2024/09/16 18:28:17.746 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2024/09/16 18:28:17.746 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000028]
[2024/09/16 18:28:17.749 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.749 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2024/09/16 18:28:17.750 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000028] ["first new region left"="{Id:52 StartKey:7480000000000000ff2600000000000000f8 EndKey:7480000000000000ff2800000000000000f8 RegionEpoch:{ConfVer:1 Version:26} Peers:[id:53 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.750 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[52]"]
[2024/09/16 18:28:17.751 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=43] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.758 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=20] [neededSchemaVersion=21] ["elapsed time"=591.625s] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.760 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.760 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=43] [version=21]
[2024/09/16 18:28:17.761 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=4.17375ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.764 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=43] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.699 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.770 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=43]
[2024/09/16 18:28:17.770 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2024/09/16 18:28:17.771 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000002a]
[2024/09/16 18:28:17.775 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000002a] ["first new region left"="{Id:54 StartKey:7480000000000000ff2800000000000000f8 EndKey:7480000000000000ff2a00000000000000f8 RegionEpoch:{ConfVer:1 Version:27} Peers:[id:55 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.776 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[54]"]
[2024/09/16 18:28:17.777 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.749 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.777 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.749 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2024/09/16 18:28:17.779 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=45] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.749 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.791 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=21] [neededSchemaVersion=22] ["elapsed time"=507.208s] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.793 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.793 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=45] [version=22]
[2024/09/16 18:28:17.793 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=3.86175ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.749 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.797 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=45] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.749 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.801 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=45]
[2024/09/16 18:28:17.802 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2024/09/16 18:28:17.802 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000002c]
[2024/09/16 18:28:17.806 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.806 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2024/09/16 18:28:17.806 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000002c] ["first new region left"="{Id:56 StartKey:7480000000000000ff2a00000000000000f8 EndKey:7480000000000000ff2c00000000000000f8 RegionEpoch:{ConfVer:1 Version:28} Peers:[id:57 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.806 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[56]"]
[2024/09/16 18:28:17.807 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=47] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.814 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=22] [neededSchemaVersion=23] ["elapsed time"=600.583s] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.816 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.816 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=47] [version=23]
[2024/09/16 18:28:17.817 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=3.699583ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.820 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=47] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.825 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=47]
[2024/09/16 18:28:17.825 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/16 18:28:17.825 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000002e]
[2024/09/16 18:28:17.829 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.829 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2024/09/16 18:28:17.829 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000002e] ["first new region left"="{Id:58 StartKey:7480000000000000ff2c00000000000000f8 EndKey:7480000000000000ff2e00000000000000f8 RegionEpoch:{ConfVer:1 Version:29} Peers:[id:59 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.830 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[58]"]
[2024/09/16 18:28:17.831 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=49] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.838 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=23] [neededSchemaVersion=24] ["elapsed time"=532.375s] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.839 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.839 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=49] [version=24]
[2024/09/16 18:28:17.840 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=3.554041ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.843 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=49] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.798 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.847 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=49]
[2024/09/16 18:28:17.847 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2024/09/16 18:28:17.847 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000030]
[2024/09/16 18:28:17.853 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000030] ["first new region left"="{Id:60 StartKey:7480000000000000ff2e00000000000000f8 EndKey:7480000000000000ff3000000000000000f8 RegionEpoch:{ConfVer:1 Version:30} Peers:[id:61 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.853 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[60]"]
[2024/09/16 18:28:17.854 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.854 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2024/09/16 18:28:17.855 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=51] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.862 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=24] [neededSchemaVersion=25] ["elapsed time"=541.875s] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.863 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.863 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=51] [version=25]
[2024/09/16 18:28:17.864 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=3.381042ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.868 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=51] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.873 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=51]
[2024/09/16 18:28:17.873 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2024/09/16 18:28:17.873 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000032]
[2024/09/16 18:28:17.877 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000032] ["first new region left"="{Id:62 StartKey:7480000000000000ff3000000000000000f8 EndKey:7480000000000000ff3200000000000000f8 RegionEpoch:{ConfVer:1 Version:31} Peers:[id:63 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.877 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[62]"]
[2024/09/16 18:28:17.878 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.878 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2024/09/16 18:28:17.879 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=53] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.886 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=25] [neededSchemaVersion=26] ["elapsed time"=514.542s] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.888 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.888 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=53] [version=26]
[2024/09/16 18:28:17.889 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=3.94325ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.892 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=53] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.895 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=53]
[2024/09/16 18:28:17.896 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2024/09/16 18:28:17.896 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000034]
[2024/09/16 18:28:17.900 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000034] ["first new region left"="{Id:64 StartKey:7480000000000000ff3200000000000000f8 EndKey:7480000000000000ff3400000000000000f8 RegionEpoch:{ConfVer:1 Version:32} Peers:[id:65 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.900 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[64]"]
[2024/09/16 18:28:17.900 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.900 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2024/09/16 18:28:17.901 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=55] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.910 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=26] [neededSchemaVersion=27] ["elapsed time"=552.292s] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.911 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.911 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=55] [version=27]
[2024/09/16 18:28:17.912 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=3.65775ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.915 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=55] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.848 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.919 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=55]
[2024/09/16 18:28:17.920 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2024/09/16 18:28:17.920 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000036]
[2024/09/16 18:28:17.923 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.899 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.923 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.899 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2024/09/16 18:28:17.924 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000036] ["first new region left"="{Id:66 StartKey:7480000000000000ff3400000000000000f8 EndKey:7480000000000000ff3600000000000000f8 RegionEpoch:{ConfVer:1 Version:33} Peers:[id:67 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.924 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[66]"]
[2024/09/16 18:28:17.925 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=57] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.899 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.932 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=27] [neededSchemaVersion=28] ["elapsed time"=543.541s] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.935 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.935 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=57] [version=28]
[2024/09/16 18:28:17.936 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=5.614542ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.899 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.943 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=57] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.899 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.949 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=57]
[2024/09/16 18:28:17.949 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2024/09/16 18:28:17.949 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000038]
[2024/09/16 18:28:17.950 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(19372) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:17.957 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000038] ["first new region left"="{Id:68 StartKey:7480000000000000ff3600000000000000f8 EndKey:7480000000000000ff3800000000000000f8 RegionEpoch:{ConfVer:1 Version:34} Peers:[id:69 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.957 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[68]"]
[2024/09/16 18:28:17.957 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.957 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2024/09/16 18:28:17.958 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=59] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.965 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=28] [neededSchemaVersion=29] ["elapsed time"=555.583s] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.966 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.966 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=59] [version=29]
[2024/09/16 18:28:17.967 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=3.365709ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.970 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=59] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.975 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=59]
[2024/09/16 18:28:17.975 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2024/09/16 18:28:17.975 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000003a]
[2024/09/16 18:28:17.979 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000003a] ["first new region left"="{Id:70 StartKey:7480000000000000ff3800000000000000f8 EndKey:7480000000000000ff3a00000000000000f8 RegionEpoch:{ConfVer:1 Version:35} Peers:[id:71 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:17.979 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[70]"]
[2024/09/16 18:28:17.979 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:17.979 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2024/09/16 18:28:17.981 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=61] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.988 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=29] [neededSchemaVersion=30] ["elapsed time"=486.083s] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:17.989 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:17.989 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=61] [version=30]
[2024/09/16 18:28:17.990 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=3.339041ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:17.993 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=61] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.948 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.002 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=61]
[2024/09/16 18:28:18.003 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2024/09/16 18:28:18.003 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000003c]
[2024/09/16 18:28:18.007 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000003c] ["first new region left"="{Id:72 StartKey:7480000000000000ff3a00000000000000f8 EndKey:7480000000000000ff3c00000000000000f8 RegionEpoch:{ConfVer:1 Version:36} Peers:[id:73 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.007 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[72]"]
[2024/09/16 18:28:18.008 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.008 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2024/09/16 18:28:18.009 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=63] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.017 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=30] [neededSchemaVersion=31] ["elapsed time"=763.25s] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.019 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.019 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=63] [version=31]
[2024/09/16 18:28:18.020 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.897625ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.027 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=63] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.032 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=63]
[2024/09/16 18:28:18.033 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2024/09/16 18:28:18.033 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000003e]
[2024/09/16 18:28:18.037 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000003e] ["first new region left"="{Id:74 StartKey:7480000000000000ff3c00000000000000f8 EndKey:7480000000000000ff3e00000000000000f8 RegionEpoch:{ConfVer:1 Version:37} Peers:[id:75 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.037 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[74]"]
[2024/09/16 18:28:18.037 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.037 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2024/09/16 18:28:18.039 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=65] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.046 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=31] [neededSchemaVersion=32] ["elapsed time"=612s] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.048 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.048 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=65] [version=32]
[2024/09/16 18:28:18.049 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=3.758958ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.052 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=65] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:17.998 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.057 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=65]
[2024/09/16 18:28:18.057 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2024/09/16 18:28:18.057 +00:00] [WARN] [runaway.go:85] ["failed to start runaway manager loop, please check whether the bootstrap or update is finished"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"]
[2024/09/16 18:28:18.057 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000040]
[2024/09/16 18:28:18.061 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.061 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2024/09/16 18:28:18.061 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000040] ["first new region left"="{Id:76 StartKey:7480000000000000ff3e00000000000000f8 EndKey:7480000000000000ff4000000000000000f8 RegionEpoch:{ConfVer:1 Version:38} Peers:[id:77 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.061 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[76]"]
[2024/09/16 18:28:18.063 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=67] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.071 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=32] [neededSchemaVersion=33] ["elapsed time"=612.833s] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.073 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.073 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=67] [version=33]
[2024/09/16 18:28:18.074 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=4.71825ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.077 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=67] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.081 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=67]
[2024/09/16 18:28:18.082 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000042]
[2024/09/16 18:28:18.086 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000042] ["first new region left"="{Id:78 StartKey:7480000000000000ff4000000000000000f8 EndKey:7480000000000000ff4200000000000000f8 RegionEpoch:{ConfVer:1 Version:39} Peers:[id:79 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.086 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[78]"]
[2024/09/16 18:28:18.087 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:3, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.087 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:69, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:3, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE OR REPLACE SQL SECURITY INVOKER VIEW mysql.tidb_mdl_view as (\n\t\tSELECT tidb_mdl_info.job_id,\n\t\t\tJSON_UNQUOTE(JSON_EXTRACT(cast(cast(job_meta as char) as json), \"$.schema_name\")) as db_name,\n\t\t\tJSON_UNQUOTE(JSON_EXTRACT(cast(cast(job_meta as char) as json), \"$.table_name\")) as table_name,\n\t\t\tJSON_UNQUOTE(JSON_EXTRACT(cast(cast(job_meta as char) as json), \"$.query\")) as query,\n\t\t\tsession_id,\n\t\t\tcluster_tidb_trx.start_time,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM mysql.tidb_ddl_job,\n\t\t\tmysql.tidb_mdl_info,\n\t\t\tinformation_schema.cluster_tidb_trx\n\t\tWHERE tidb_ddl_job.job_id=tidb_mdl_info.job_id\n\t\t\tAND CONCAT(',', tidb_mdl_info.table_ids, ',') REGEXP CONCAT(',(', REPLACE(cluster_tidb_trx.related_table_ids, ',', '|'), '),') != 0\n\t);"]
[2024/09/16 18:28:18.088 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=69] [category=ddl] [job="ID:69, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.096 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=33] [neededSchemaVersion=34] ["elapsed time"=536.125s] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[21]"] [diffTypes="[\"create view\"]"]
[2024/09/16 18:28:18.097 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.097 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=69] [version=34]
[2024/09/16 18:28:18.098 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=3.6355ms] [job="ID:69, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:3, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.101 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=69] [job="ID:69, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.048 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.106 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=69]
[2024/09/16 18:28:18.106 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=34] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2024/09/16 18:28:18.106 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000044]
[2024/09/16 18:28:18.110 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000044] ["first new region left"="{Id:80 StartKey:7480000000000000ff4200000000000000f8 EndKey:7480000000000000ff4400000000000000f8 RegionEpoch:{ConfVer:1 Version:40} Peers:[id:81 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.110 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[80]"]
[2024/09/16 18:28:18.111 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.099 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.111 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:71, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.099 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2024/09/16 18:28:18.112 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=71] [category=ddl] [job="ID:71, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.099 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.123 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=34] [neededSchemaVersion=35] ["elapsed time"=610.625s] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.134 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.134 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=71] [version=35]
[2024/09/16 18:28:18.135 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=13.644041ms] [job="ID:71, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.099 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.143 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=71] [job="ID:71, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.099 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.151 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=71]
[2024/09/16 18:28:18.151 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2024/09/16 18:28:18.151 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000046]
[2024/09/16 18:28:18.155 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000046] ["first new region left"="{Id:82 StartKey:7480000000000000ff4400000000000000f8 EndKey:7480000000000000ff4600000000000000f8 RegionEpoch:{ConfVer:1 Version:41} Peers:[id:83 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.155 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[82]"]
[2024/09/16 18:28:18.155 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.156 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2024/09/16 18:28:18.157 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=73] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.164 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=35] [neededSchemaVersion=36] ["elapsed time"=415.958s] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.165 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.165 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=73] [version=36]
[2024/09/16 18:28:18.165 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=3.188583ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.168 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=73] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.172 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=73]
[2024/09/16 18:28:18.173 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2024/09/16 18:28:18.173 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000048]
[2024/09/16 18:28:18.176 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.176 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2024/09/16 18:28:18.177 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000048] ["first new region left"="{Id:84 StartKey:7480000000000000ff4600000000000000f8 EndKey:7480000000000000ff4800000000000000f8 RegionEpoch:{ConfVer:1 Version:42} Peers:[id:85 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.177 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[84]"]
[2024/09/16 18:28:18.178 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=75] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.184 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=36] [neededSchemaVersion=37] ["elapsed time"=447.959s] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.186 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.186 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=75] [version=37]
[2024/09/16 18:28:18.186 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=3.560958ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.189 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=75] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.193 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=75]
[2024/09/16 18:28:18.193 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2024/09/16 18:28:18.193 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000004a]
[2024/09/16 18:28:18.197 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000004a] ["first new region left"="{Id:86 StartKey:7480000000000000ff4800000000000000f8 EndKey:7480000000000000ff4a00000000000000f8 RegionEpoch:{ConfVer:1 Version:43} Peers:[id:87 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.197 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[86]"]
[2024/09/16 18:28:18.198 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.198 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2024/09/16 18:28:18.200 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=77] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.207 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=37] [neededSchemaVersion=38] ["elapsed time"=615.458s] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.209 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.209 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=77] [version=38]
[2024/09/16 18:28:18.209 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=3.505666ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.212 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=77] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.148 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.216 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=77]
[2024/09/16 18:28:18.217 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2024/09/16 18:28:18.217 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000004c]
[2024/09/16 18:28:18.221 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000004c] ["first new region left"="{Id:88 StartKey:7480000000000000ff4a00000000000000f8 EndKey:7480000000000000ff4c00000000000000f8 RegionEpoch:{ConfVer:1 Version:44} Peers:[id:89 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.221 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[88]"]
[2024/09/16 18:28:18.221 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.221 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2024/09/16 18:28:18.223 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=79] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.231 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=38] [neededSchemaVersion=39] ["elapsed time"=682.875s] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.233 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.233 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=79] [version=39]
[2024/09/16 18:28:18.234 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=5.187708ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.242 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=79] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.199 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.256 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=79]
[2024/09/16 18:28:18.256 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2024/09/16 18:28:18.256 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000004e]
[2024/09/16 18:28:18.262 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000004e] ["first new region left"="{Id:90 StartKey:7480000000000000ff4c00000000000000f8 EndKey:7480000000000000ff4e00000000000000f8 RegionEpoch:{ConfVer:1 Version:45} Peers:[id:91 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.262 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[90]"]
[2024/09/16 18:28:18.262 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.262 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2024/09/16 18:28:18.263 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=81] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.272 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=39] [neededSchemaVersion=40] ["elapsed time"=820.75s] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.275 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.275 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=81] [version=40]
[2024/09/16 18:28:18.275 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=5.275084ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.279 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=81] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.283 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=81]
[2024/09/16 18:28:18.284 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2024/09/16 18:28:18.284 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000050]
[2024/09/16 18:28:18.288 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.288 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2024/09/16 18:28:18.289 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000050] ["first new region left"="{Id:92 StartKey:7480000000000000ff4e00000000000000f8 EndKey:7480000000000000ff5000000000000000f8 RegionEpoch:{ConfVer:1 Version:46} Peers:[id:93 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.289 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[92]"]
[2024/09/16 18:28:18.290 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=83] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.298 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=40] [neededSchemaVersion=41] ["elapsed time"=510.916s] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.299 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.299 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=83] [version=41]
[2024/09/16 18:28:18.300 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=3.711125ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.304 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=83] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.252 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.310 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=83]
[2024/09/16 18:28:18.310 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task_history (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2024/09/16 18:28:18.310 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000052]
[2024/09/16 18:28:18.315 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000052] ["first new region left"="{Id:94 StartKey:7480000000000000ff5000000000000000f8 EndKey:7480000000000000ff5200000000000000f8 RegionEpoch:{ConfVer:1 Version:47} Peers:[id:95 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.315 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[94]"]
[2024/09/16 18:28:18.317 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.317 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task_history (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2024/09/16 18:28:18.319 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=85] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.328 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=41] [neededSchemaVersion=42] ["elapsed time"=676.792s] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.329 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.329 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=85] [version=42]
[2024/09/16 18:28:18.330 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=3.861542ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.333 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=85] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.338 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=85]
[2024/09/16 18:28:18.338 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2024/09/16 18:28:18.338 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000054]
[2024/09/16 18:28:18.342 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000054] ["first new region left"="{Id:96 StartKey:7480000000000000ff5200000000000000f8 EndKey:7480000000000000ff5400000000000000f8 RegionEpoch:{ConfVer:1 Version:48} Peers:[id:97 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.342 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[96]"]
[2024/09/16 18:28:18.343 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.343 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2024/09/16 18:28:18.345 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=87] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.353 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=42] [neededSchemaVersion=43] ["elapsed time"=845.417s] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.355 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.356 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=87] [version=43]
[2024/09/16 18:28:18.356 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=5.027584ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.362 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=87] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.298 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.372 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=87]
[2024/09/16 18:28:18.372 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tswitch_group_name VARCHAR(32) DEFAULT '',\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/16 18:28:18.372 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000056]
[2024/09/16 18:28:18.377 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000056] ["first new region left"="{Id:98 StartKey:7480000000000000ff5400000000000000f8 EndKey:7480000000000000ff5600000000000000f8 RegionEpoch:{ConfVer:1 Version:49} Peers:[id:99 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.377 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[98]"]
[2024/09/16 18:28:18.378 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.378 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tswitch_group_name VARCHAR(32) DEFAULT '',\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/16 18:28:18.379 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=89] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.389 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=43] [neededSchemaVersion=44] ["elapsed time"=713.625s] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.390 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.391 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=89] [version=44]
[2024/09/16 18:28:18.391 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=4.897125ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.394 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=89] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.349 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.398 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=89]
[2024/09/16 18:28:18.399 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time TIMESTAMP NOT NULL,\n\t\trepeats int default 1,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\tsample_sql TEXT NOT NULL,\n\t\tsql_digest varchar(64) NOT NULL,\n\t\tplan_digest varchar(64) NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(start_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/16 18:28:18.399 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000058]
[2024/09/16 18:28:18.403 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000058] ["first new region left"="{Id:100 StartKey:7480000000000000ff5600000000000000f8 EndKey:7480000000000000ff5800000000000000f8 RegionEpoch:{ConfVer:1 Version:50} Peers:[id:101 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.403 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[100]"]
[2024/09/16 18:28:18.405 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.405 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time TIMESTAMP NOT NULL,\n\t\trepeats int default 1,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\tsample_sql TEXT NOT NULL,\n\t\tsql_digest varchar(64) NOT NULL,\n\t\tplan_digest varchar(64) NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(start_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/16 18:28:18.406 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=91] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.414 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=44] [neededSchemaVersion=45] ["elapsed time"=530.875s] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.415 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.415 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=91] [version=45]
[2024/09/16 18:28:18.416 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=3.410208ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.419 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=91] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.423 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=91]
[2024/09/16 18:28:18.424 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2024/09/16 18:28:18.424 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000005a]
[2024/09/16 18:28:18.430 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000005a] ["first new region left"="{Id:102 StartKey:7480000000000000ff5800000000000000f8 EndKey:7480000000000000ff5a00000000000000f8 RegionEpoch:{ConfVer:1 Version:51} Peers:[id:103 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.430 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[102]"]
[2024/09/16 18:28:18.430 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.430 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2024/09/16 18:28:18.433 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=93] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.447 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=45] [neededSchemaVersion=46] ["elapsed time"=607.958s] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.449 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.449 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=93] [version=46]
[2024/09/16 18:28:18.449 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=3.705292ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.452 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=93] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.398 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.457 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=93]
[2024/09/16 18:28:18.457 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tswitch_group_name VARCHAR(32) DEFAULT '',\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/16 18:28:18.457 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000005c]
[2024/09/16 18:28:18.462 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000005c] ["first new region left"="{Id:104 StartKey:7480000000000000ff5a00000000000000f8 EndKey:7480000000000000ff5c00000000000000f8 RegionEpoch:{ConfVer:1 Version:52} Peers:[id:105 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.462 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[104]"]
[2024/09/16 18:28:18.462 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.462 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tswitch_group_name VARCHAR(32) DEFAULT '',\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/16 18:28:18.463 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=95] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.470 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=46] [neededSchemaVersion=47] ["elapsed time"=543.125s] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.472 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.472 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=95] [version=47]
[2024/09/16 18:28:18.473 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=4.185416ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.477 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=95] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.481 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=95]
[2024/09/16 18:28:18.481 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(261) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        cpu_count int default 0,\n        keyspace_id bigint(8) NOT NULL DEFAULT -1\n    );"] [user=]
[2024/09/16 18:28:18.482 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000005e]
[2024/09/16 18:28:18.486 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000005e] ["first new region left"="{Id:106 StartKey:7480000000000000ff5c00000000000000f8 EndKey:7480000000000000ff5e00000000000000f8 RegionEpoch:{ConfVer:1 Version:53} Peers:[id:107 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.486 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[106]"]
[2024/09/16 18:28:18.489 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.489 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(261) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        cpu_count int default 0,\n        keyspace_id bigint(8) NOT NULL DEFAULT -1\n    );"]
[2024/09/16 18:28:18.491 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=97] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.501 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=47] [neededSchemaVersion=48] ["elapsed time"=1.743958ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.504 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.504 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=97] [version=48]
[2024/09/16 18:28:18.507 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=8.4275ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.511 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=97] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.448 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.517 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=97]
[2024/09/16 18:28:18.518 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=48] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.request_unit_by_group (\n\t\tstart_time TIMESTAMP(6) NOT NULL,\n\t\tend_time TIMESTAMP(6) NOT NULL,\n\t\tresource_group VARCHAR(32) NOT null,\n\t\ttotal_ru bigint(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (start_time, end_time, resource_group),\n\t\tKEY (resource_group)\n\t);"] [user=]
[2024/09/16 18:28:18.518 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000060]
[2024/09/16 18:28:18.522 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000060] ["first new region left"="{Id:108 StartKey:7480000000000000ff5e00000000000000f8 EndKey:7480000000000000ff6000000000000000f8 RegionEpoch:{ConfVer:1 Version:54} Peers:[id:109 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.523 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[108]"]
[2024/09/16 18:28:18.523 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.523 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.request_unit_by_group (\n\t\tstart_time TIMESTAMP(6) NOT NULL,\n\t\tend_time TIMESTAMP(6) NOT NULL,\n\t\tresource_group VARCHAR(32) NOT null,\n\t\ttotal_ru bigint(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (start_time, end_time, resource_group),\n\t\tKEY (resource_group)\n\t);"]
[2024/09/16 18:28:18.525 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=99] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.534 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=48] [neededSchemaVersion=49] ["elapsed time"=565.875s] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.535 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.535 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=99] [version=49]
[2024/09/16 18:28:18.536 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=49] ["take time"=4.019625ms] [job="ID:99, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.540 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=99] [job="ID:99, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.498 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.547 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=99]
[2024/09/16 18:28:18.548 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=49] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_pitr_id_map (\n\t\trestored_ts BIGINT NOT NULL,\n\t\tupstream_cluster_id BIGINT NOT NULL,\n\t\tsegment_id BIGINT NOT NULL,\n\t\tid_map BLOB(524288) NOT NULL,\n\t\tupdate_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (restored_ts, upstream_cluster_id, segment_id));"] [user=]
[2024/09/16 18:28:18.548 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000062]
[2024/09/16 18:28:18.548 +00:00] [INFO] [add_column.go:1281] ["Automatically convert BLOB(524288) to MEDIUMBLOB"] [category=ddl]
[2024/09/16 18:28:18.555 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000062] ["first new region left"="{Id:110 StartKey:7480000000000000ff6000000000000000f8 EndKey:7480000000000000ff6200000000000000f8 RegionEpoch:{ConfVer:1 Version:55} Peers:[id:111 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.555 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[110]"]
[2024/09/16 18:28:18.560 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:101, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:100, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.560 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:101, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:100, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_pitr_id_map (\n\t\trestored_ts BIGINT NOT NULL,\n\t\tupstream_cluster_id BIGINT NOT NULL,\n\t\tsegment_id BIGINT NOT NULL,\n\t\tid_map BLOB(524288) NOT NULL,\n\t\tupdate_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (restored_ts, upstream_cluster_id, segment_id));"]
[2024/09/16 18:28:18.562 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=101] [category=ddl] [job="ID:101, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:100, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.572 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=49] [neededSchemaVersion=50] ["elapsed time"=526.292s] [gotSchemaVersion=50] [phyTblIDs="[100]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 18:28:18.574 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.575 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=101] [version=50]
[2024/09/16 18:28:18.580 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=50] ["take time"=9.663291ms] [job="ID:101, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:100, RowCount:0, ArgLen:2, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.584 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=101] [job="ID:101, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:100, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.588 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=101]
[2024/09/16 18:28:18.588 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=50] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS sys;"] [user=]
[2024/09/16 18:28:18.588 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000064]
[2024/09/16 18:28:18.592 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000064] ["first new region left"="{Id:112 StartKey:7480000000000000ff6200000000000000f8 EndKey:7480000000000000ff6400000000000000f8 RegionEpoch:{ConfVer:1 Version:56} Peers:[id:113 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.592 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[112]"]
[2024/09/16 18:28:18.592 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:103, Type:create schema, State:queueing, SchemaState:none, SchemaID:102, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE DATABASE IF NOT EXISTS sys;"]
[2024/09/16 18:28:18.592 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:103, Type:create schema, State:queueing, SchemaState:none, SchemaID:102, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.594 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=103] [category=ddl] [job="ID:103, Type:create schema, State:queueing, SchemaState:none, SchemaID:102, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.600 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=50] [neededSchemaVersion=51] ["elapsed time"=182.833s] [gotSchemaVersion=51] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"create schema\"]"]
[2024/09/16 18:28:18.602 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.602 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=103] [version=51]
[2024/09/16 18:28:18.602 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=51] ["take time"=3.399833ms] [job="ID:103, Type:create schema, State:done, SchemaState:public, SchemaID:102, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.605 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=103] [job="ID:103, Type:create schema, State:synced, SchemaState:public, SchemaID:102, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.548 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.609 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=103]
[2024/09/16 18:28:18.614 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:105, Type:create view, State:queueing, SchemaState:none, SchemaID:102, TableID:104, RowCount:0, ArgLen:3, start time: 2024-09-16 18:28:18.599 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 18:28:18.614 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:105, Type:create view, State:queueing, SchemaState:none, SchemaID:102, TableID:104, RowCount:0, ArgLen:3, start time: 2024-09-16 18:28:18.599 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE OR REPLACE VIEW sys.schema_unused_indexes AS\n\t\tSELECT\n\t\t\ttable_schema as object_schema,\n\t\t\ttable_name as object_name,\n\t\t\tindex_name\n\t\tFROM information_schema.cluster_tidb_index_usage\n\t\tWHERE\n\t\t\ttable_schema not in ('sys', 'mysql', 'INFORMATION_SCHEMA', 'PERFORMANCE_SCHEMA') and\n\t\t\tindex_name != 'PRIMARY'\n\t\tGROUP BY table_schema, table_name, index_name\n\t\tHAVING\n\t\t\tsum(last_access_time) is null;"]
[2024/09/16 18:28:18.615 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=105] [category=ddl] [job="ID:105, Type:create view, State:queueing, SchemaState:none, SchemaID:102, TableID:104, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.599 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.625 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=51] [neededSchemaVersion=52] ["elapsed time"=691.291s] [gotSchemaVersion=52] [phyTblIDs="[104]"] [actionTypes="[21]"] [diffTypes="[\"create view\"]"]
[2024/09/16 18:28:18.628 +00:00] [INFO] [domain.go:1043] ["session manager is nil"]
[2024/09/16 18:28:18.628 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=105] [version=52]
[2024/09/16 18:28:18.629 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=52] ["take time"=5.248625ms] [job="ID:105, Type:create view, State:done, SchemaState:public, SchemaID:102, TableID:104, RowCount:0, ArgLen:3, start time: 2024-09-16 18:28:18.599 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.633 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=105] [job="ID:105, Type:create view, State:synced, SchemaState:public, SchemaID:102, TableID:104, RowCount:0, ArgLen:0, start time: 2024-09-16 18:28:18.599 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 18:28:18.639 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=105]
[2024/09/16 18:28:18.639 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000068]
[2024/09/16 18:28:18.643 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000068] ["first new region left"="{Id:114 StartKey:7480000000000000ff6400000000000000f8 EndKey:7480000000000000ff6800000000000000f8 RegionEpoch:{ConfVer:1 Version:57} Peers:[id:115 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 18:28:18.643 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[114]"]
[2024/09/16 18:28:18.672 +00:00] [INFO] [bootstrap.go:758] ["bootstrap successful"] ["take time"=1.612403834s]
[2024/09/16 18:28:18.675 +00:00] [INFO] [syncer.go:441] ["schema version sync loop interrupted, retrying..."] [category=ddl]
[2024/09/16 18:28:18.675 +00:00] [INFO] [job_scheduler.go:269] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/16 18:28:18.675 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"] []
[2024/09/16 18:28:18.675 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"]
[2024/09/16 18:28:18.675 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 18:28:18.675 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 18:28:18.675 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 3, tp general"] [category=ddl] ["take time"=1.209s]
[2024/09/16 18:28:18.675 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 4, tp general"] [category=ddl] ["take time"=2.542s]
[2024/09/16 18:28:18.675 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 5, tp general"] [category=ddl] ["take time"=1.083s]
[2024/09/16 18:28:18.675 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 6, tp general"] [category=ddl] ["take time"=1.5s]
[2024/09/16 18:28:18.676 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 7, tp general"] [category=ddl] ["take time"=1.958s]
[2024/09/16 18:28:18.676 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 8, tp general"] [category=ddl] ["take time"=1.208s]
[2024/09/16 18:28:18.676 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 9, tp general"] [category=ddl] ["take time"=1s]
[2024/09/16 18:28:18.676 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 10, tp general"] [category=ddl] ["take time"=1s]
[2024/09/16 18:28:18.676 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 1, tp general"] [category=ddl] ["take time"=1.167s]
[2024/09/16 18:28:18.676 +00:00] [INFO] [job_worker.go:216] ["DDL worker closed"] [worker="worker 2, tp general"] [category=ddl] ["take time"=958ns]
[2024/09/16 18:28:18.676 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"]
[2024/09/16 18:28:18.676 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"]
[2024/09/16 18:28:18.678 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 63775615-605e-4e1d-ad8e-e9f13446a8c9"] []
[2024/09/16 18:28:18.678 +00:00] [INFO] [delete_range.go:163] ["closing delRange"] [category=ddl]
[2024/09/16 18:28:18.678 +00:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/16 18:28:18.679 +00:00] [INFO] [ddl.go:871] ["DDL closed"] [category=ddl] [ID=63775615-605e-4e1d-ad8e-e9f13446a8c9] ["take time"=4.244584ms]
[2024/09/16 18:28:18.679 +00:00] [INFO] [ddl.go:706] ["stop DDL"] [category=ddl] [ID=63775615-605e-4e1d-ad8e-e9f13446a8c9]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:2954] ["releaseServerID succeed"] [serverID=1020]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:3018] ["serverIDKeeper exited."]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:1082] ["loadSchemaInLoop exited."]
[2024/09/16 18:28:18.680 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 18:28:18.680 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:915] ["topologySyncerKeeper exited."]
[2024/09/16 18:28:18.681 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 18:28:18.680 +00:00] [INFO] [manager.go:470] ["watcher is closed, no owner"] ["owner info"="[log-backup] ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120 watch owner key /tidb/br-stream/owner/4cf691fc1799b862"]
[2024/09/16 18:28:18.681 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"] [error="watcher is closed, key: /tidb/br-stream/owner/4cf691fc1799b862"]
[2024/09/16 18:28:18.681 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"]
[2024/09/16 18:28:18.681 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"]
[2024/09/16 18:28:18.681 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"]
[2024/09/16 18:28:18.681 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"] [error="context canceled"]
[2024/09/16 18:28:18.680 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:28:18.680 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:865] ["infoSyncerKeeper exited."]
[2024/09/16 18:28:18.681 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:891] ["globalConfigSyncerKeeper exited."]
[2024/09/16 18:28:18.681 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 18:28:18.680 +00:00] [INFO] [advancer.go:398] ["Meet task event"] [category="log backup advancer"] [event="Err(, err = EOF)"]
[2024/09/16 18:28:18.681 +00:00] [ERROR] [advancer.go:401] ["listen task meet error, would reopen."] [error=EOF]
[2024/09/16 18:28:18.681 +00:00] [INFO] [advancer.go:404] ["Task watcher exits due to some error."] [category="log backup advancer"] [error=EOF]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:837] ["topNSlowQueryLoop exited."]
[2024/09/16 18:28:18.682 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 18:28:18.680 +00:00] [INFO] [owner_daemon.go:87] ["daemon loop exits"] [id=6d75d4ba-0d3e-4206-b436-276e4776d120] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:28:18.682 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 18:28:18.680 +00:00] [INFO] [domain.go:1569] ["closestReplicaReadCheckLoop exited."]
[2024/09/16 18:28:18.682 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 18:28:18.682 +00:00] [INFO] [domain.go:1254] ["domain closed"] ["take time"=7.212334ms]
[2024/09/16 18:28:18.682 +00:00] [INFO] [tidb.go:85] ["new domain"] [store=tikv-7415309541240867473] ["ddl lease"=45s] ["stats lease"=3s]
[2024/09/16 18:28:18.686 +00:00] [WARN] [info.go:328] ["init TiFlashReplicaManager"]
[2024/09/16 18:28:18.710 +00:00] [INFO] [domain.go:2933] [acquireServerID] [serverID=935] ["lease id"=4cf691fc1799b9ef]
[2024/09/16 18:28:18.710 +00:00] [INFO] [controller.go:198] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/16 18:28:18.727 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=52] ["elapsed time"=15.312208ms]
[2024/09/16 18:28:18.727 +00:00] [INFO] [domain.go:403] ["infoschema v1/v2 switch"]
[2024/09/16 18:28:18.728 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 18:28:18.731 +00:00] [INFO] [ddl.go:737] ["start DDL"] [category=ddl] [ID=9ce572d4-c30f-46f6-b35f-95f4036caca7] [runWorker=true] [jobVersion=v1]
[2024/09/16 18:28:18.732 +00:00] [INFO] [ddl.go:714] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=false]
[2024/09/16 18:28:18.733 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[ddl] /tidb/ddl/fg/owner"]
[2024/09/16 18:28:18.733 +00:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/16 18:28:18.733 +00:00] [INFO] [env.go:81] ["init global ingest backend environment finished"] [category=ddl-ingest] ["memory limitation"=8375255040] ["disk usage info"="disk usage: 52069363712/275273396224, backend usage: 0"] ["max open file number"=1048576] ["lightning is initialized"=true]
[2024/09/16 18:28:18.733 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 18:28:18.734 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 18:28:18.734 +00:00] [INFO] [runaway.go:68] ["try to start runaway manager loop"]
[2024/09/16 18:28:18.734 +00:00] [INFO] [owner_daemon.go:70] ["begin advancer daemon"] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:28:18.734 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[log-backup] /tidb/br-stream/owner"]
[2024/09/16 18:28:18.735 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc1799b9fc] [ownerID=9ce572d4-c30f-46f6-b35f-95f4036caca7] [op=none]
[2024/09/16 18:28:18.735 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:28:18.736 +00:00] [INFO] [job_scheduler.go:359] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/16 18:28:18.736 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 18:28:18.736 +00:00] [INFO] [owner_daemon.go:81] ["begin running daemon"] [id=f867597a-6dfd-4172-b3d6-ac391eee1539] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:28:18.737 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc1799b9fc] [ownerID=9ce572d4-c30f-46f6-b35f-95f4036caca7] [op=none]
[2024/09/16 18:28:18.737 +00:00] [INFO] [manager.go:408] ["set owner op is the same as the original, so do nothing."] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] [op=none]
[2024/09/16 18:28:18.737 +00:00] [INFO] [job_scheduler.go:371] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/16 18:28:18.738 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[bindinfo] /tidb/bindinfo/owner"]
[2024/09/16 18:28:18.739 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 18:28:18.739 +00:00] [WARN] [sysvar_cache.go:49] ["sysvar cache is empty, triggering rebuild"]
[2024/09/16 18:28:18.740 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] ["owner key"=/tidb/bindinfo/owner/4cf691fc1799ba09] [ownerID=9ce572d4-c30f-46f6-b35f-95f4036caca7] [op=none]
[2024/09/16 18:28:18.740 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:28:18.741 +00:00] [INFO] [sysvar.go:2881] ["set resource control"] [enable=true]
[2024/09/16 18:28:18.743 +00:00] [INFO] [controller.go:496] ["[resource group controller] create resource group cost controller"] [name=default]
[2024/09/16 18:28:18.754 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 18:28:18.756 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 18:28:18.759 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 18:28:18.759 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 18:28:18.759 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 18:28:18.759 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 18:28:18.760 +00:00] [INFO] [domain.go:2150] ["PlanReplayerTaskCollectHandle started"]
[2024/09/16 18:28:18.760 +00:00] [INFO] [domain.go:2172] ["PlanReplayerTaskDumpHandle started"]
[2024/09/16 18:28:18.760 +00:00] [INFO] [plan_replayer.go:409] ["planReplayerTaskDumpWorker started."]
[2024/09/16 18:28:18.760 +00:00] [INFO] [domain.go:2204] ["dumpFileGcChecker started"]
[2024/09/16 18:28:18.760 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadStatsWorker]
[2024/09/16 18:28:18.760 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[stats] /tidb/stats/owner"]
[2024/09/16 18:28:18.760 +00:00] [INFO] [domain.go:2237] ["HistoricalStatsWorker started"]
[2024/09/16 18:28:18.761 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=indexUsageWorker]
[2024/09/16 18:28:18.761 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=updateStatsWorker]
[2024/09/16 18:28:18.761 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=handleDDLEvent]
[2024/09/16 18:28:18.761 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 18:28:18.761 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 18:28:18.762 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 18:28:18.762 +00:00] [INFO] [domain.go:2395] ["start load stats sub workers"] ["worker count"=6]
[2024/09/16 18:28:18.762 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 18:28:18.762 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 18:28:18.762 +00:00] [INFO] [domain.go:2541] ["updateStatsWorker started."]
[2024/09/16 18:28:18.762 +00:00] [INFO] [domain.go:2522] ["handleDDLEvent started."]
[2024/09/16 18:28:18.762 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 18:28:18.762 +00:00] [INFO] [gc_worker.go:196] [start] [category="gc worker"] [uuid=647f05ee2f4000a]
[2024/09/16 18:28:18.763 +00:00] [INFO] [notifier.go:225] ["etcd notify loop to watch timer events started"] [EtcdKey=/tidb/timer/cluster/1/notify/f92f9f5b-4b22-46bd-bb79-c543526b385f]
[2024/09/16 18:28:18.763 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] ["owner key"=/tidb/stats/owner/4cf691fc1799ba0e] [ownerID=9ce572d4-c30f-46f6-b35f-95f4036caca7] [op=none]
[2024/09/16 18:28:18.763 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 18:28:18.763 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 18:28:18.763 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:28:18.763 +00:00] [INFO] [bootstrap.go:774] ["complete to load the meta in the lite mode"] [category=stats]
[2024/09/16 18:28:18.766 +00:00] [INFO] [bootstrap.go:780] ["complete to load the histogram in the lite mode"] [category=stats]
[2024/09/16 18:28:18.769 +00:00] [INFO] [domain.go:2436] ["init stats info time"] [lite=true] ["take time"=8.505083ms]
[2024/09/16 18:28:18.769 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 18:28:18.793 +00:00] [INFO] [gc_worker.go:410] ["another gc job has just finished, skipped."] [category="gc worker"] ["leaderTick on "=647f05ee2f4000a]
[2024/09/16 18:28:18.793 +00:00] [INFO] [manager.go:108] ["adjust memory limit for cgroup v2"] [before=15.6GiB] [after=15.6GiB]
[2024/09/16 18:28:18.793 +00:00] [INFO] [manager.go:113] ["build task executor manager"] [total-cpu=10] [total-mem=15.6GiB]
[2024/09/16 18:28:18.798 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 18:28:18.799 +00:00] [WARN] [misc.go:468] ["Automatic TLS Certificate creation is disabled"] []
[2024/09/16 18:28:18.799 +00:00] [INFO] [manager.go:146] ["task executor manager start"]
[2024/09/16 18:28:18.799 +00:00] [INFO] [domain.go:1735] ["dist task executor manager started"]
[2024/09/16 18:28:18.799 +00:00] [INFO] [cpu.go:97] ["sql cpu collector started"]
[2024/09/16 18:28:18.799 +00:00] [INFO] [http_status.go:102] ["for status and metrics report"] ["listening on addr"=0.0.0.0:10080]
[2024/09/16 18:28:18.800 +00:00] [INFO] [server.go:311] ["server is running MySQL protocol"] [addr=0.0.0.0:4000]
[2024/09/16 18:28:18.800 +00:00] [INFO] [server.go:325] ["server is running MySQL protocol"] [socket=/tmp/tidb-4000.sock]
[2024/09/16 18:28:18.801 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:28:18.803 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 18:28:18.803 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 18:28:18.804 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:28:18.804 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 18:28:18.804 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:28:18.804 +00:00] [WARN] [resource_manager_client.go:308] ["[resource_manager] get token stream error"] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:28:18.804 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 18:28:18.804 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 18:28:18.804 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 18:28:18.804 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 18:28:18.805 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 18:28:18.805 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:28:18.805 +00:00] [ERROR] [tso_client.go:366] ["[tso] update connection contexts failed"] [dc=global] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:28:18.804 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [pd_service_discovery.go:913] ["[pd] cannot update member from this url"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Canceled desc = context canceled target:pd0:2379 status:READY: error:rpc error: code = Canceled desc = context canceled target:pd0:2379 status:READY"]
[2024/09/16 18:28:18.805 +00:00] [ERROR] [pd_service_discovery.go:560] ["[pd] failed to update member"] [urls="[http://pd0:2379]"] [error="context canceled"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:28:18.805 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 18:28:18.806 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[autoid] tidb/autoid/leader"]
[2024/09/16 18:28:18.811 +00:00] [INFO] [http_status.go:510] ["register auto service at"] [addr=tidb:10080]
[2024/09/16 18:28:18.812 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] ["owner key"=tidb/autoid/leader/4cf691fc1799ba19] [ownerID=tidb:10080] [op=none]
[2024/09/16 18:28:18.812 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:28:18.812 +00:00] [INFO] [autoid.go:602] ["leader change of autoid service, this node become owner"] [addr=tidb:10080] [category="autoid service"]
[2024/09/16 18:28:19.744 +00:00] [INFO] [runaway.go:77] ["preparations for the runaway manager are finished and start runaway manager loop"]
[2024/09/16 18:28:19.744 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 18:28:19.744 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 18:28:19.744 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:28:19.765 +00:00] [INFO] [runtime.go:160] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2024/09/16 18:28:19.765 +00:00] [INFO] [runtime.go:402] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2024/09/16 18:28:19.766 +00:00] [INFO] [notifier.go:140] ["new etcd watcher created to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/f92f9f5b-4b22-46bd-bb79-c543526b385f] [watcherID=d855c344-3ca2-4a71-bb81-49cf9f5f3831]
[2024/09/16 18:28:19.800 +00:00] [INFO] [slots.go:205] ["initialize slot capacity"] [capacity=10]
[2024/09/16 18:28:19.802 +00:00] [INFO] [scheduler_manager.go:200] ["schedule task loop start"]
[2024/09/16 18:28:19.802 +00:00] [INFO] [scheduler_manager.go:453] ["collect loop start"]
[2024/09/16 18:28:19.802 +00:00] [INFO] [scheduler_manager.go:373] ["cleanup loop start"]
[2024/09/16 18:28:19.802 +00:00] [INFO] [scheduler_manager.go:312] ["subtask table gc loop start"]
[2024/09/16 18:28:20.735 +00:00] [INFO] [info.go:1164] [SetTiFlashGroupConfig]
[2024/09/16 18:28:20.736 +00:00] [WARN] [info.go:518] ["response not 200"] [method=GET] [host=pd0:2379] [url=/pd/api/v1/config/rule_group/tiflash] ["http status"=404]
[2024/09/16 18:28:21.262 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 6d75d4ba-0d3e-4206-b436-276e4776d120"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 18:28:21.779 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 18:29:17.947 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539"] ["owner key"=/tidb/br-stream/owner/4cf691fc1799ba00] [ownerID=f867597a-6dfd-4172-b3d6-ac391eee1539] [op=none]
[2024/09/16 18:29:17.948 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539"]
[2024/09/16 18:29:18.738 +00:00] [INFO] [owner_daemon.go:56] ["daemon became owner"] [id=f867597a-6dfd-4172-b3d6-ac391eee1539] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:29:18.741 +00:00] [INFO] [advancer.go:524] ["Subscription handler spawned."] [category="log backup subscription manager"]
[2024/09/16 18:29:36.169 +00:00] [INFO] [signal_posix.go:54] ["got signal to exit"] [signal=terminated]
[2024/09/16 18:29:36.170 +00:00] [INFO] [server.go:587] ["setting tidb-server to report unhealthy (shutting-down)"]
[2024/09/16 18:29:36.171 +00:00] [ERROR] [http_status.go:532] ["start status/rpc server error"] [error="accept tcp [::]:10080: use of closed network connection"]
[2024/09/16 18:29:36.171 +00:00] [ERROR] [http_status.go:527] ["http server error"] [error="http: Server closed"]
[2024/09/16 18:29:36.171 +00:00] [ERROR] [http_status.go:522] ["grpc server error"] [error="mux: server closed"]
[2024/09/16 18:29:36.172 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 18:29:36.172 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:29:36.172 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:29:36.172 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:29:36.173 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 18:29:36.173 +00:00] [INFO] [server.go:1006] ["start drain clients"]
[2024/09/16 18:29:36.173 +00:00] [INFO] [server.go:1036] ["all sessions quit in drain wait time"]
[2024/09/16 18:29:36.173 +00:00] [INFO] [server.go:987] ["kill all connections."] [category=server]
[2024/09/16 18:29:36.174 +00:00] [INFO] [job_scheduler.go:269] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/16 18:29:36.174 +00:00] [INFO] [syncer.go:441] ["schema version sync loop interrupted, retrying..."] [category=ddl]
[2024/09/16 18:29:36.174 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] []
[2024/09/16 18:29:36.174 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.174 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 18:29:36.174 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 18:29:36.174 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.174 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.175 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] []
[2024/09/16 18:29:36.176 +00:00] [INFO] [delete_range.go:163] ["closing delRange"] [category=ddl]
[2024/09/16 18:29:36.176 +00:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/16 18:29:36.176 +00:00] [INFO] [ddl.go:871] ["DDL closed"] [category=ddl] [ID=9ce572d4-c30f-46f6-b35f-95f4036caca7] ["take time"=2.972958ms]
[2024/09/16 18:29:36.176 +00:00] [INFO] [ddl.go:706] ["stop DDL"] [category=ddl] [ID=9ce572d4-c30f-46f6-b35f-95f4036caca7]
[2024/09/16 18:29:36.177 +00:00] [INFO] [domain.go:1205] ["stopping ttlJobManager"]
[2024/09/16 18:29:36.177 +00:00] [INFO] [notifier.go:142] ["etcd watcher exited to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/f92f9f5b-4b22-46bd-bb79-c543526b385f] [watcherID=d855c344-3ca2-4a71-bb81-49cf9f5f3831]
[2024/09/16 18:29:36.177 +00:00] [INFO] [runtime.go:190] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2024/09/16 18:29:36.178 +00:00] [INFO] [notifier.go:227] ["etcd notify loop to watch timer events stopped"] [EtcdKey=/tidb/timer/cluster/1/notify/f92f9f5b-4b22-46bd-bb79-c543526b385f]
[2024/09/16 18:29:36.178 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 18:29:36.178 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:29:36.178 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:29:36.178 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:29:36.178 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:29:36.178 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 18:29:36.178 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:29:36.178 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:29:36.178 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:29:36.178 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:29:36.179 +00:00] [INFO] [job_manager.go:175] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2024/09/16 18:29:36.179 +00:00] [INFO] [domain.go:1216] ["ttlJobManager exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2954] ["releaseServerID succeed"] [serverID=935]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:865] ["infoSyncerKeeper exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=handleDDLEvent]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:1834] ["loadPrivilegeInLoop exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:470] ["watcher is closed, no owner"] ["owner info"="[log-backup] ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539 watch owner key /tidb/br-stream/owner/4cf691fc1799ba00"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539"] [error="watcher is closed, key: /tidb/br-stream/owner/4cf691fc1799ba00"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539"]
[2024/09/16 18:29:36.180 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:179] ["handle tasks loop done"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:1752] ["stopping dist task scheduler manager because the current node is not DDL owner anymore"] [id=9ce572d4-c30f-46f6-b35f-95f4036caca7]
[2024/09/16 18:29:36.181 +00:00] [INFO] [scheduler_manager.go:379] ["cleanup loop exits"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [owner_daemon.go:87] ["daemon loop exits"] [id=f867597a-6dfd-4172-b3d6-ac391eee1539] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:29:36.181 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2154] ["PlanReplayerTaskCollectHandle exited."]
[2024/09/16 18:29:36.181 +00:00] [INFO] [flush_subscriber.go:109] [Clearing.] [category="log backup flush subscriber"] [timeout=1m0s]
[2024/09/16 18:29:36.181 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 18:29:36.180 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2239] ["HistoricalStatsWorker exited."]
[2024/09/16 18:29:36.181 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2597] ["autoAnalyzeWorker exited."]
[2024/09/16 18:29:36.181 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:3018] ["serverIDKeeper exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2639] ["analyzeJobsCleanupWorker exited."]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2451] ["loadStatsWorker exited."]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadStatsWorker]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:1082] ["loadSchemaInLoop exited."]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:3132] ["planCacheMetricsAndVars exited."]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2208] ["dumpFileGcChecker exited."]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:1884] ["LoadSysVarCacheLoop exited."]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:3163] ["planCacheEvictTrigger exited."]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2505] ["updateStatsWorker is going to exit, start to flush stats"]
[2024/09/16 18:29:36.182 +00:00] [INFO] [domain.go:2507] ["updateStatsWorker ready to release owner"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:915] ["topologySyncerKeeper exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:891] ["globalConfigSyncerKeeper exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2174] ["PlanReplayerTaskDumpHandle exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [plan_replayer.go:413] ["planReplayerTaskDumpWorker exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] []
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:470] ["watcher is closed, no owner"] ["owner info"="[stats] ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7 watch owner key /tidb/stats/owner/4cf691fc1799ba0e"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [advancer.go:398] ["Meet task event"] [category="log backup advancer"] [event="Err(, err = EOF)"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [manager.go:280] ["recoverMetaLoop done"]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:837] ["topNSlowQueryLoop exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:1569] ["closestReplicaReadCheckLoop exited."]
[2024/09/16 18:29:36.180 +00:00] [INFO] [domain.go:2486] ["indexUsageWorker exited."]
[2024/09/16 18:29:36.181 +00:00] [INFO] [scheduler_manager.go:206] ["schedule task loop exits"]
[2024/09/16 18:29:36.181 +00:00] [INFO] [scheduler_manager.go:459] ["collect loop exits"]
[2024/09/16 18:29:36.181 +00:00] [INFO] [scheduler_manager.go:318] ["subtask history table gc loop exits"]
[2024/09/16 18:29:36.182 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 18:29:36.183 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 18:29:36.183 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 18:29:36.183 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.183 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.183 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.183 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[stats] /tidb/stats/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] [error="watcher is closed, key: /tidb/stats/owner/4cf691fc1799ba0e"]
[2024/09/16 18:29:36.184 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.184 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.184 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[stats] /tidb/stats/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"]
[2024/09/16 18:29:36.183 +00:00] [ERROR] [advancer.go:401] ["listen task meet error, would reopen."] [error=EOF]
[2024/09/16 18:29:36.184 +00:00] [INFO] [advancer.go:404] ["Task watcher exits due to some error."] [category="log backup advancer"] [error=EOF]
[2024/09/16 18:29:36.183 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 18:29:36.183 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 18:29:36.183 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=indexUsageWorker]
[2024/09/16 18:29:36.183 +00:00] [INFO] [domain.go:1754] ["dist task scheduler manager stopped"] [id=9ce572d4-c30f-46f6-b35f-95f4036caca7]
[2024/09/16 18:29:36.184 +00:00] [INFO] [domain.go:1737] ["stopping dist task executor manager"]
[2024/09/16 18:29:36.184 +00:00] [INFO] [domain.go:1739] ["dist task executor manager stopped"]
[2024/09/16 18:29:36.184 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 18:29:38.789 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 18:29:38.790 +00:00] [INFO] [domain.go:2023] ["globalBindHandleWorkerLoop exited."]
[2024/09/16 18:29:38.790 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 18:29:38.813 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[stats] /tidb/stats/owner ownerManager 9ce572d4-c30f-46f6-b35f-95f4036caca7"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 18:29:38.814 +00:00] [INFO] [domain.go:2513] ["updateStatsWorker exit preprocessing finished"]
[2024/09/16 18:29:38.814 +00:00] [INFO] [domain.go:2556] ["updateStatsWorker exited."]
[2024/09/16 18:29:38.814 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=updateStatsWorker]
[2024/09/16 18:29:38.820 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f867597a-6dfd-4172-b3d6-ac391eee1539"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 18:29:38.823 +00:00] [INFO] [domain.go:1254] ["domain closed"] ["take time"=2.649584417s]
[2024/09/16 18:29:38.824 +00:00] [INFO] [gc_worker.go:224] [quit] [category="gc worker"] [uuid=647f05ee2f4000a]
[2024/09/16 18:29:38.824 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 18:29:38.824 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 18:29:38.825 +00:00] [INFO] [tso_dispatcher.go:242] ["[tso] stop fetching the pending tso requests due to context canceled"] [dc-location=global]
[2024/09/16 18:29:38.825 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:29:38.825 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 18:29:38.825 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 18:29:38.825 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 18:29:38.826 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 18:29:38.826 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 18:29:38.825 +00:00] [INFO] [tso_stream.go:352] ["tsoStream.recvLoop ended"] [stream=pd0:2379-1] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:29:38.826 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 18:29:38.827 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:29:38.828 +00:00] [INFO] [client.go:347] ["[pd] http client closed"] [source=tikv-driver]
[2024/09/16 18:29:38.829 +00:00] [INFO] [cpu.go:112] ["sql cpu collector stopped"]
[2024/09/16 18:29:38.830 +00:00] [INFO] [cgmon.go:77] ["cgroup monitor stopped"]
[2024/09/16 18:29:38.831 +00:00] [INFO] [cpuprofile.go:130] ["parallel cpu profiler stopped"]
[2024/09/16 18:32:40.587 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:32:40.587 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:32:40.588 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:32:40.588 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:32:40.590 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:32:40.590 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:32:40.588 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:32:40.590 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:32:40.591 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:32:40.592 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:32:41.630 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:32:41.642 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:32:42.594 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:32:43.596 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:53864->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:32:44.592 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:38388->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:38388->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:32:45.594 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:38388->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:38388->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:32:46.604 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 18:32:48.097 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 18:32:48.099 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:32:48.099 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 18:32:48.102 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:32:48.102 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 18:32:48.102 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 18:32:48.103 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:32:48.102 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 18:32:48.105 +00:00] [INFO] [tikv_driver.go:197] ["using API V1."]
[2024/09/16 18:32:48.108 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 18:32:48.112 +00:00] [INFO] [store_cache.go:532] ["change store resolve state"] [store=1] [addr=tikv:20160] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2024/09/16 18:32:48.689 +00:00] [INFO] [tidb.go:85] ["new domain"] [store=tikv-7415309541240867473] ["ddl lease"=45s] ["stats lease"=3s]
[2024/09/16 18:32:48.704 +00:00] [WARN] [info.go:328] ["init TiFlashReplicaManager"]
[2024/09/16 18:32:48.741 +00:00] [INFO] [domain.go:2933] [acquireServerID] [serverID=223] ["lease id"=4cf691fc1bb5c441]
[2024/09/16 18:32:48.743 +00:00] [INFO] [controller.go:198] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/16 18:32:48.770 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=52] ["elapsed time"=21.031333ms]
[2024/09/16 18:32:48.771 +00:00] [INFO] [domain.go:403] ["infoschema v1/v2 switch"]
[2024/09/16 18:32:48.772 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 18:32:48.780 +00:00] [INFO] [ddl.go:737] ["start DDL"] [category=ddl] [ID=02c86689-9e2a-429f-abbe-728eea24631c] [runWorker=true] [jobVersion=v1]
[2024/09/16 18:32:48.780 +00:00] [INFO] [ddl.go:714] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=false]
[2024/09/16 18:32:48.783 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[ddl] /tidb/ddl/fg/owner"]
[2024/09/16 18:32:48.787 +00:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/16 18:32:48.788 +00:00] [INFO] [env.go:81] ["init global ingest backend environment finished"] [category=ddl-ingest] ["memory limitation"=8375255040] ["disk usage info"="disk usage: 52055953408/275273396224, backend usage: 0"] ["max open file number"=1048576] ["lightning is initialized"=true]
[2024/09/16 18:32:48.789 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 18:32:48.790 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 18:32:48.790 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 18:32:48.790 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 18:32:48.791 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 18:32:48.791 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:32:48.791 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc1bb5c455] [ownerID=02c86689-9e2a-429f-abbe-728eea24631c] [op=none]
[2024/09/16 18:32:48.791 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:32:48.791 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 18:32:48.792 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 18:32:48.792 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 18:32:48.792 +00:00] [INFO] [owner_daemon.go:70] ["begin advancer daemon"] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:32:48.792 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[log-backup] /tidb/br-stream/owner"]
[2024/09/16 18:32:48.791 +00:00] [INFO] [runaway.go:68] ["try to start runaway manager loop"]
[2024/09/16 18:32:48.793 +00:00] [INFO] [job_scheduler.go:359] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/16 18:32:48.794 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 18:32:48.796 +00:00] [INFO] [owner_daemon.go:81] ["begin running daemon"] [id=ce307fb6-1fac-4f4a-abe8-61c68e63f003] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:32:48.796 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc1bb5c455] [ownerID=02c86689-9e2a-429f-abbe-728eea24631c] [op=none]
[2024/09/16 18:32:48.796 +00:00] [INFO] [manager.go:408] ["set owner op is the same as the original, so do nothing."] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] [op=none]
[2024/09/16 18:32:48.796 +00:00] [INFO] [job_scheduler.go:371] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/16 18:32:48.802 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[bindinfo] /tidb/bindinfo/owner"]
[2024/09/16 18:32:48.803 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 18:32:48.804 +00:00] [WARN] [sysvar_cache.go:49] ["sysvar cache is empty, triggering rebuild"]
[2024/09/16 18:32:48.811 +00:00] [INFO] [sysvar.go:2881] ["set resource control"] [enable=true]
[2024/09/16 18:32:48.813 +00:00] [INFO] [controller.go:496] ["[resource group controller] create resource group cost controller"] [name=default]
[2024/09/16 18:32:48.821 +00:00] [INFO] [ru_stats.go:97] ["[ru_stats] finish write ru historical data"] [end_time="2024-09-16 00:00:00"] [interval=24h0m0s] [cost=29.014083ms] []
[2024/09/16 18:32:48.831 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 18:32:48.833 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 18:32:48.838 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 18:32:48.838 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 18:32:48.838 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 18:32:48.838 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 18:32:48.839 +00:00] [INFO] [domain.go:2172] ["PlanReplayerTaskDumpHandle started"]
[2024/09/16 18:32:48.839 +00:00] [INFO] [plan_replayer.go:409] ["planReplayerTaskDumpWorker started."]
[2024/09/16 18:32:48.839 +00:00] [INFO] [domain.go:2150] ["PlanReplayerTaskCollectHandle started"]
[2024/09/16 18:32:48.839 +00:00] [INFO] [domain.go:2204] ["dumpFileGcChecker started"]
[2024/09/16 18:32:48.839 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadStatsWorker]
[2024/09/16 18:32:48.839 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[stats] /tidb/stats/owner"]
[2024/09/16 18:32:48.839 +00:00] [INFO] [domain.go:2237] ["HistoricalStatsWorker started"]
[2024/09/16 18:32:48.840 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=indexUsageWorker]
[2024/09/16 18:32:48.840 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=updateStatsWorker]
[2024/09/16 18:32:48.841 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=handleDDLEvent]
[2024/09/16 18:32:48.841 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 18:32:48.841 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 18:32:48.842 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 18:32:48.842 +00:00] [INFO] [domain.go:2395] ["start load stats sub workers"] ["worker count"=6]
[2024/09/16 18:32:48.842 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 18:32:48.842 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 18:32:48.842 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 18:32:48.841 +00:00] [INFO] [domain.go:2541] ["updateStatsWorker started."]
[2024/09/16 18:32:48.841 +00:00] [INFO] [domain.go:2522] ["handleDDLEvent started."]
[2024/09/16 18:32:48.842 +00:00] [INFO] [gc_worker.go:196] [start] [category="gc worker"] [uuid=647f06f5e680018]
[2024/09/16 18:32:48.843 +00:00] [INFO] [notifier.go:225] ["etcd notify loop to watch timer events started"] [EtcdKey=/tidb/timer/cluster/1/notify/6c602ac9-1db3-4934-b07c-574339848038]
[2024/09/16 18:32:48.844 +00:00] [INFO] [bootstrap.go:774] ["complete to load the meta in the lite mode"] [category=stats]
[2024/09/16 18:32:48.845 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 18:32:48.845 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 18:32:48.846 +00:00] [INFO] [bootstrap.go:780] ["complete to load the histogram in the lite mode"] [category=stats]
[2024/09/16 18:32:48.848 +00:00] [INFO] [domain.go:2436] ["init stats info time"] [lite=true] ["take time"=8.414542ms]
[2024/09/16 18:32:48.848 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 18:32:48.869 +00:00] [INFO] [manager.go:108] ["adjust memory limit for cgroup v2"] [before=15.6GiB] [after=15.6GiB]
[2024/09/16 18:32:48.869 +00:00] [INFO] [manager.go:113] ["build task executor manager"] [total-cpu=10] [total-mem=15.6GiB]
[2024/09/16 18:32:48.872 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 18:32:48.872 +00:00] [INFO] [manager.go:146] ["task executor manager start"]
[2024/09/16 18:32:48.872 +00:00] [INFO] [domain.go:1735] ["dist task executor manager started"]
[2024/09/16 18:32:48.872 +00:00] [WARN] [misc.go:468] ["Automatic TLS Certificate creation is disabled"] []
[2024/09/16 18:32:48.873 +00:00] [INFO] [cpu.go:97] ["sql cpu collector started"]
[2024/09/16 18:32:48.873 +00:00] [INFO] [http_status.go:102] ["for status and metrics report"] ["listening on addr"=0.0.0.0:10080]
[2024/09/16 18:32:48.876 +00:00] [INFO] [server.go:311] ["server is running MySQL protocol"] [addr=0.0.0.0:4000]
[2024/09/16 18:32:48.876 +00:00] [INFO] [server.go:325] ["server is running MySQL protocol"] [socket=/tmp/tidb-4000.sock]
[2024/09/16 18:32:48.877 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:32:48.879 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 18:32:48.879 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 18:32:48.879 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:32:48.879 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 18:32:48.880 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:32:48.880 +00:00] [WARN] [resource_manager_client.go:308] ["[resource_manager] get token stream error"] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:32:48.880 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 18:32:48.880 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 18:32:48.880 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 18:32:48.880 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 18:32:48.880 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 18:32:48.880 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 18:32:48.881 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 18:32:48.880 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 18:32:48.881 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 18:32:48.880 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:32:48.881 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 18:32:48.881 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 18:32:48.881 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:32:48.881 +00:00] [ERROR] [tso_client.go:366] ["[tso] update connection contexts failed"] [dc=global] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:32:48.881 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:32:48.881 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 18:32:48.882 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[autoid] tidb/autoid/leader"]
[2024/09/16 18:32:48.884 +00:00] [INFO] [http_status.go:510] ["register auto service at"] [addr=tidb:10080]
[2024/09/16 18:32:48.886 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] ["owner key"=tidb/autoid/leader/4cf691fc1bb5c46b] [ownerID=tidb:10080] [op=none]
[2024/09/16 18:32:48.886 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:32:48.886 +00:00] [INFO] [autoid.go:602] ["leader change of autoid service, this node become owner"] [addr=tidb:10080] [category="autoid service"]
[2024/09/16 18:32:49.800 +00:00] [INFO] [runaway.go:77] ["preparations for the runaway manager are finished and start runaway manager loop"]
[2024/09/16 18:32:49.800 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 18:32:49.800 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 18:32:49.801 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:32:49.845 +00:00] [INFO] [runtime.go:160] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2024/09/16 18:32:49.845 +00:00] [INFO] [runtime.go:402] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2024/09/16 18:32:49.845 +00:00] [INFO] [notifier.go:140] ["new etcd watcher created to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/6c602ac9-1db3-4934-b07c-574339848038] [watcherID=23737545-0e75-4a15-a97d-735889f37eec]
[2024/09/16 18:32:49.874 +00:00] [INFO] [slots.go:205] ["initialize slot capacity"] [capacity=10]
[2024/09/16 18:32:49.876 +00:00] [INFO] [scheduler_manager.go:200] ["schedule task loop start"]
[2024/09/16 18:32:49.876 +00:00] [INFO] [scheduler_manager.go:453] ["collect loop start"]
[2024/09/16 18:32:49.876 +00:00] [INFO] [scheduler_manager.go:312] ["subtask table gc loop start"]
[2024/09/16 18:32:49.876 +00:00] [INFO] [scheduler_manager.go:373] ["cleanup loop start"]
[2024/09/16 18:32:50.789 +00:00] [INFO] [info.go:1164] [SetTiFlashGroupConfig]
[2024/09/16 18:33:48.788 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] ["owner key"=/tidb/bindinfo/owner/4cf691fc1bb5c462] [ownerID=02c86689-9e2a-429f-abbe-728eea24631c] [op=none]
[2024/09/16 18:33:48.790 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:33:48.788 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] ["owner key"=/tidb/stats/owner/4cf691fc1bb5c466] [ownerID=02c86689-9e2a-429f-abbe-728eea24631c] [op=none]
[2024/09/16 18:33:48.792 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:33:48.788 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003"] ["owner key"=/tidb/br-stream/owner/4cf691fc1bb5c45b] [ownerID=ce307fb6-1fac-4f4a-abe8-61c68e63f003] [op=none]
[2024/09/16 18:33:48.792 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003"]
[2024/09/16 18:33:48.796 +00:00] [INFO] [owner_daemon.go:56] ["daemon became owner"] [id=ce307fb6-1fac-4f4a-abe8-61c68e63f003] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:33:48.798 +00:00] [INFO] [advancer.go:524] ["Subscription handler spawned."] [category="log backup subscription manager"]
[2024/09/16 18:33:48.857 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 18:37:48.803 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=223] ["lease id"=4cf691fc1bb5c441]
[2024/09/16 18:38:48.874 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 18:38:48.925 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f06f5e680018] [safePoint=452594585793462272] [concurrency=1]
[2024/09/16 18:38:48.926 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f06f5e680018] [safePoint=452594585793462272] [concurrency=1]
[2024/09/16 18:38:48.926 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 18:38:48.952 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=24.716084ms] ["completed regions"=61]
[2024/09/16 18:38:48.952 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f06f5e680018] [safePoint=452594585793462272] [regions=61]
[2024/09/16 18:39:48.902 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f06f5e680018]
[2024/09/16 18:40:28.989 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f06f5e680018] [ranges=0]
[2024/09/16 18:40:28.989 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f06f5e680018] ["num of ranges"=0] ["cost time"=1.542s]
[2024/09/16 18:40:28.992 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f06f5e680018] ["num of ranges"=0]
[2024/09/16 18:40:28.992 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f06f5e680018] ["num of ranges"=0] ["cost time"=2.417s]
[2024/09/16 18:40:28.998 +00:00] [WARN] [gc_worker.go:1190] ["distributed mode will be used"] [category="gc worker"] ["invalid gc mode"=]
[2024/09/16 18:40:29.000 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f06f5e680018] ["safe point"=452594585793462272]
[2024/09/16 18:42:29.073 +00:00] [INFO] [executor.go:1460] ["limit executor close takes a long time"] [elapsed=2.196375ms]
[2024/09/16 18:42:48.807 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=223] ["lease id"=4cf691fc1bb5c441]
[2024/09/16 18:42:56.323 +00:00] [INFO] [cache.go:119] ["reset the old infoschema after v1 v2 switch, using the stale object will panic"]
[2024/09/16 18:43:48.874 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 18:47:48.812 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=223] ["lease id"=4cf691fc1bb5c441]
[2024/09/16 18:48:44.734 +00:00] [INFO] [signal_posix.go:54] ["got signal to exit"] [signal=terminated]
[2024/09/16 18:48:44.735 +00:00] [INFO] [server.go:587] ["setting tidb-server to report unhealthy (shutting-down)"]
[2024/09/16 18:48:44.735 +00:00] [ERROR] [http_status.go:532] ["start status/rpc server error"] [error="accept tcp [::]:10080: use of closed network connection"]
[2024/09/16 18:48:44.736 +00:00] [ERROR] [http_status.go:522] ["grpc server error"] [error="mux: server closed"]
[2024/09/16 18:48:44.736 +00:00] [ERROR] [http_status.go:527] ["http server error"] [error="http: Server closed"]
[2024/09/16 18:48:44.736 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 18:48:44.736 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:48:44.736 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:48:44.736 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:48:44.736 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] [error="context canceled"]
[2024/09/16 18:48:44.738 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 18:48:44.739 +00:00] [INFO] [server.go:1006] ["start drain clients"]
[2024/09/16 18:48:44.739 +00:00] [INFO] [server.go:1036] ["all sessions quit in drain wait time"]
[2024/09/16 18:48:44.739 +00:00] [INFO] [server.go:987] ["kill all connections."] [category=server]
[2024/09/16 18:48:44.739 +00:00] [INFO] [job_scheduler.go:269] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/16 18:48:44.739 +00:00] [INFO] [syncer.go:441] ["schema version sync loop interrupted, retrying..."] [category=ddl]
[2024/09/16 18:48:44.739 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] []
[2024/09/16 18:48:44.739 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.739 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 18:48:44.739 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 18:48:44.740 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.740 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.740 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] [error="context canceled"]
[2024/09/16 18:48:44.741 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] []
[2024/09/16 18:48:44.742 +00:00] [INFO] [delete_range.go:163] ["closing delRange"] [category=ddl]
[2024/09/16 18:48:44.742 +00:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/16 18:48:44.753 +00:00] [INFO] [ddl.go:871] ["DDL closed"] [category=ddl] [ID=02c86689-9e2a-429f-abbe-728eea24631c] ["take time"=14.334459ms]
[2024/09/16 18:48:44.753 +00:00] [INFO] [ddl.go:706] ["stop DDL"] [category=ddl] [ID=02c86689-9e2a-429f-abbe-728eea24631c]
[2024/09/16 18:48:44.755 +00:00] [INFO] [domain.go:1205] ["stopping ttlJobManager"]
[2024/09/16 18:48:44.755 +00:00] [INFO] [runtime.go:190] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2024/09/16 18:48:44.756 +00:00] [INFO] [notifier.go:142] ["etcd watcher exited to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/6c602ac9-1db3-4934-b07c-574339848038] [watcherID=23737545-0e75-4a15-a97d-735889f37eec]
[2024/09/16 18:48:44.757 +00:00] [INFO] [notifier.go:227] ["etcd notify loop to watch timer events stopped"] [EtcdKey=/tidb/timer/cluster/1/notify/6c602ac9-1db3-4934-b07c-574339848038]
[2024/09/16 18:48:44.759 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 18:48:44.759 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:48:44.759 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:48:44.759 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:48:44.759 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 18:48:44.761 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 18:48:44.761 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:48:44.762 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:48:44.762 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:48:44.762 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 18:48:44.767 +00:00] [INFO] [job_manager.go:175] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2024/09/16 18:48:44.767 +00:00] [INFO] [domain.go:1216] ["ttlJobManager exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2954] ["releaseServerID succeed"] [serverID=223]
[2024/09/16 18:48:44.768 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2505] ["updateStatsWorker is going to exit, start to flush stats"]
[2024/09/16 18:48:44.768 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:1884] ["LoadSysVarCacheLoop exited."]
[2024/09/16 18:48:44.769 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 18:48:44.768 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:1082] ["loadSchemaInLoop exited."]
[2024/09/16 18:48:44.769 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 18:48:44.768 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:3018] ["serverIDKeeper exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2597] ["autoAnalyzeWorker exited."]
[2024/09/16 18:48:44.769 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:1752] ["stopping dist task scheduler manager because the current node is not DDL owner anymore"] [id=02c86689-9e2a-429f-abbe-728eea24631c]
[2024/09/16 18:48:44.769 +00:00] [INFO] [scheduler_manager.go:318] ["subtask history table gc loop exits"]
[2024/09/16 18:48:44.768 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 18:48:44.768 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] []
[2024/09/16 18:48:44.769 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.770 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.770 +00:00] [INFO] [manager.go:280] ["recoverMetaLoop done"]
[2024/09/16 18:48:44.770 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2208] ["dumpFileGcChecker exited."]
[2024/09/16 18:48:44.770 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:3132] ["planCacheMetricsAndVars exited."]
[2024/09/16 18:48:44.770 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:915] ["topologySyncerKeeper exited."]
[2024/09/16 18:48:44.770 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:3163] ["planCacheEvictTrigger exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2486] ["indexUsageWorker exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:865] ["infoSyncerKeeper exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2639] ["analyzeJobsCleanupWorker exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:1834] ["loadPrivilegeInLoop exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:891] ["globalConfigSyncerKeeper exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2174] ["PlanReplayerTaskDumpHandle exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2507] ["updateStatsWorker ready to release owner"]
[2024/09/16 18:48:44.768 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [plan_replayer.go:413] ["planReplayerTaskDumpWorker exited."]
[2024/09/16 18:48:44.769 +00:00] [INFO] [manager.go:470] ["watcher is closed, no owner"] ["owner info"="[log-backup] ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003 watch owner key /tidb/br-stream/owner/4cf691fc1bb5c45b"]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2154] ["PlanReplayerTaskCollectHandle exited."]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2239] ["HistoricalStatsWorker exited."]
[2024/09/16 18:48:44.769 +00:00] [INFO] [manager.go:470] ["watcher is closed, no owner"] ["owner info"="[stats] ownerManager 02c86689-9e2a-429f-abbe-728eea24631c watch owner key /tidb/stats/owner/4cf691fc1bb5c466"]
[2024/09/16 18:48:44.768 +00:00] [INFO] [domain.go:2451] ["loadStatsWorker exited."]
[2024/09/16 18:48:44.769 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 18:48:44.769 +00:00] [INFO] [advancer.go:398] ["Meet task event"] [category="log backup advancer"] [event="Err(, err = EOF)"]
[2024/09/16 18:48:44.768 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=handleDDLEvent]
[2024/09/16 18:48:44.770 +00:00] [INFO] [scheduler_manager.go:206] ["schedule task loop exits"]
[2024/09/16 18:48:44.770 +00:00] [INFO] [scheduler_manager.go:459] ["collect loop exits"]
[2024/09/16 18:48:44.770 +00:00] [INFO] [scheduler_manager.go:379] ["cleanup loop exits"]
[2024/09/16 18:48:44.770 +00:00] [INFO] [domain.go:837] ["topNSlowQueryLoop exited."]
[2024/09/16 18:48:44.770 +00:00] [INFO] [owner_daemon.go:87] ["daemon loop exits"] [id=ce307fb6-1fac-4f4a-abe8-61c68e63f003] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:48:44.770 +00:00] [INFO] [domain.go:1569] ["closestReplicaReadCheckLoop exited."]
[2024/09/16 18:48:44.770 +00:00] [INFO] [flush_subscriber.go:109] [Clearing.] [category="log backup flush subscriber"] [timeout=1m0s]
[2024/09/16 18:48:44.770 +00:00] [INFO] [manager.go:179] ["handle tasks loop done"]
[2024/09/16 18:48:44.770 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 18:48:44.770 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=indexUsageWorker]
[2024/09/16 18:48:44.770 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 18:48:44.771 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 18:48:44.771 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 18:48:44.771 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 18:48:44.771 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 18:48:44.771 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003"] [error="watcher is closed, key: /tidb/br-stream/owner/4cf691fc1bb5c45b"]
[2024/09/16 18:48:44.772 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 18:48:44.772 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003"]
[2024/09/16 18:48:44.772 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003"]
[2024/09/16 18:48:44.772 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003"]
[2024/09/16 18:48:44.772 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager ce307fb6-1fac-4f4a-abe8-61c68e63f003"] [error="context canceled"]
[2024/09/16 18:48:44.771 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 18:48:44.771 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[stats] /tidb/stats/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] [error="watcher is closed, key: /tidb/stats/owner/4cf691fc1bb5c466"]
[2024/09/16 18:48:44.773 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.773 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.773 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[stats] /tidb/stats/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"]
[2024/09/16 18:48:44.771 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadStatsWorker]
[2024/09/16 18:48:44.771 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 18:48:44.772 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 18:48:44.772 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 18:48:44.772 +00:00] [ERROR] [advancer.go:401] ["listen task meet error, would reopen."] [error=EOF]
[2024/09/16 18:48:44.773 +00:00] [INFO] [advancer.go:404] ["Task watcher exits due to some error."] [category="log backup advancer"] [error=EOF]
[2024/09/16 18:48:44.772 +00:00] [INFO] [domain.go:1754] ["dist task scheduler manager stopped"] [id=02c86689-9e2a-429f-abbe-728eea24631c]
[2024/09/16 18:48:44.773 +00:00] [INFO] [domain.go:1737] ["stopping dist task executor manager"]
[2024/09/16 18:48:44.773 +00:00] [INFO] [domain.go:1739] ["dist task executor manager stopped"]
[2024/09/16 18:48:44.773 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 18:48:47.408 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 18:48:47.409 +00:00] [INFO] [domain.go:2023] ["globalBindHandleWorkerLoop exited."]
[2024/09/16 18:48:47.410 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 18:48:47.414 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[stats] /tidb/stats/owner ownerManager 02c86689-9e2a-429f-abbe-728eea24631c"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 18:48:47.414 +00:00] [INFO] [domain.go:2513] ["updateStatsWorker exit preprocessing finished"]
[2024/09/16 18:48:47.414 +00:00] [INFO] [domain.go:2556] ["updateStatsWorker exited."]
[2024/09/16 18:48:47.415 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=updateStatsWorker]
[2024/09/16 18:48:47.423 +00:00] [INFO] [domain.go:1254] ["domain closed"] ["take time"=2.684254543s]
[2024/09/16 18:48:47.424 +00:00] [INFO] [gc_worker.go:224] [quit] [category="gc worker"] [uuid=647f06f5e680018]
[2024/09/16 18:48:47.424 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 18:48:47.424 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 18:48:47.424 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 18:48:47.425 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:48:47.425 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 18:48:47.425 +00:00] [INFO] [tso_stream.go:352] ["tsoStream.recvLoop ended"] [stream=pd0:2379-1] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:48:47.424 +00:00] [INFO] [tso_dispatcher.go:242] ["[tso] stop fetching the pending tso requests due to context canceled"] [dc-location=global]
[2024/09/16 18:48:47.426 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 18:48:47.425 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 18:48:47.426 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 18:48:47.426 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 18:48:47.427 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:48:47.428 +00:00] [INFO] [client.go:347] ["[pd] http client closed"] [source=tikv-driver]
[2024/09/16 18:48:47.430 +00:00] [INFO] [cpu.go:112] ["sql cpu collector stopped"]
[2024/09/16 18:48:47.431 +00:00] [INFO] [cgmon.go:77] ["cgroup monitor stopped"]
[2024/09/16 18:48:47.431 +00:00] [INFO] [cpuprofile.go:130] ["parallel cpu profiler stopped"]
[2024/09/16 18:48:51.425 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 18:48:51.426 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 18:48:51.426 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 18:48:51.426 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 18:48:51.427 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 18:48:51.427 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 18:48:51.427 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 18:48:51.428 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 18:48:51.428 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:48:51.428 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 18:48:52.431 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:48:52.431 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:48:53.429 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:48:54.430 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:57564->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:48:55.431 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:54362->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:54362->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:48:56.429 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:54362->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:54362->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 18:48:57.438 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 18:48:58.806 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 18:48:58.856 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:48:58.862 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 18:48:58.863 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:48:58.863 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 18:48:58.864 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 18:48:58.863 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 18:48:58.864 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:48:58.866 +00:00] [INFO] [tikv_driver.go:197] ["using API V1."]
[2024/09/16 18:48:58.868 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 18:48:58.891 +00:00] [INFO] [store_cache.go:532] ["change store resolve state"] [store=1] [addr=tikv:20160] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2024/09/16 18:48:59.506 +00:00] [INFO] [tidb.go:85] ["new domain"] [store=tikv-7415309541240867473] ["ddl lease"=45s] ["stats lease"=3s]
[2024/09/16 18:48:59.532 +00:00] [WARN] [info.go:328] ["init TiFlashReplicaManager"]
[2024/09/16 18:48:59.543 +00:00] [INFO] [domain.go:2933] [acquireServerID] [serverID=1495] ["lease id"=4cf691fc2a854b4a]
[2024/09/16 18:48:59.545 +00:00] [INFO] [controller.go:198] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/16 18:48:59.572 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=52] ["elapsed time"=14.445209ms]
[2024/09/16 18:48:59.572 +00:00] [INFO] [domain.go:403] ["infoschema v1/v2 switch"]
[2024/09/16 18:48:59.573 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 18:48:59.581 +00:00] [INFO] [ddl.go:737] ["start DDL"] [category=ddl] [ID=1620b240-98ec-4588-b2f7-d54faa44f003] [runWorker=true] [jobVersion=v1]
[2024/09/16 18:48:59.582 +00:00] [INFO] [ddl.go:714] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=false]
[2024/09/16 18:48:59.584 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[ddl] /tidb/ddl/fg/owner"]
[2024/09/16 18:48:59.587 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc2a854b57] [ownerID=1620b240-98ec-4588-b2f7-d54faa44f003] [op=none]
[2024/09/16 18:48:59.587 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 18:48:59.585 +00:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/16 18:48:59.588 +00:00] [INFO] [job_scheduler.go:359] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/16 18:48:59.588 +00:00] [INFO] [env.go:81] ["init global ingest backend environment finished"] [category=ddl-ingest] ["memory limitation"=8375255040] ["disk usage info"="disk usage: 52078292992/275273396224, backend usage: 0"] ["max open file number"=1048576] ["lightning is initialized"=true]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 18:48:59.589 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 18:48:59.589 +00:00] [INFO] [runaway.go:68] ["try to start runaway manager loop"]
[2024/09/16 18:48:59.589 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc2a854b57] [ownerID=1620b240-98ec-4588-b2f7-d54faa44f003] [op=none]
[2024/09/16 18:48:59.590 +00:00] [INFO] [manager.go:408] ["set owner op is the same as the original, so do nothing."] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] [op=none]
[2024/09/16 18:48:59.590 +00:00] [INFO] [job_scheduler.go:371] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/16 18:48:59.590 +00:00] [INFO] [owner_daemon.go:70] ["begin advancer daemon"] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:48:59.590 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[log-backup] /tidb/br-stream/owner"]
[2024/09/16 18:48:59.593 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 18:48:59.595 +00:00] [INFO] [owner_daemon.go:81] ["begin running daemon"] [id=d5b4a068-0e74-4fa9-a431-3741ca4c6c61] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:48:59.599 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[bindinfo] /tidb/bindinfo/owner"]
[2024/09/16 18:48:59.599 +00:00] [INFO] [ru_stats.go:147] ["[ru_stats] ru data is already inserted, skip"] [end_time="2024-09-16 00:00:00 +0000 UTC"]
[2024/09/16 18:48:59.600 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 18:48:59.600 +00:00] [WARN] [sysvar_cache.go:49] ["sysvar cache is empty, triggering rebuild"]
[2024/09/16 18:48:59.602 +00:00] [INFO] [ru_stats.go:97] ["[ru_stats] finish write ru historical data"] [end_time="2024-09-16 00:00:00"] [interval=24h0m0s] [cost=12.5265ms] []
[2024/09/16 18:48:59.604 +00:00] [INFO] [sysvar.go:2881] ["set resource control"] [enable=true]
[2024/09/16 18:48:59.606 +00:00] [INFO] [controller.go:496] ["[resource group controller] create resource group cost controller"] [name=default]
[2024/09/16 18:48:59.627 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 18:48:59.632 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 18:48:59.636 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 18:48:59.638 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 18:48:59.638 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 18:48:59.638 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 18:48:59.638 +00:00] [INFO] [domain.go:2150] ["PlanReplayerTaskCollectHandle started"]
[2024/09/16 18:48:59.638 +00:00] [INFO] [domain.go:2172] ["PlanReplayerTaskDumpHandle started"]
[2024/09/16 18:48:59.638 +00:00] [INFO] [domain.go:2237] ["HistoricalStatsWorker started"]
[2024/09/16 18:48:59.638 +00:00] [INFO] [domain.go:2204] ["dumpFileGcChecker started"]
[2024/09/16 18:48:59.638 +00:00] [INFO] [plan_replayer.go:409] ["planReplayerTaskDumpWorker started."]
[2024/09/16 18:48:59.649 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadStatsWorker]
[2024/09/16 18:48:59.649 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[stats] /tidb/stats/owner"]
[2024/09/16 18:48:59.652 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=indexUsageWorker]
[2024/09/16 18:48:59.652 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=updateStatsWorker]
[2024/09/16 18:48:59.652 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=handleDDLEvent]
[2024/09/16 18:48:59.652 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 18:48:59.652 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 18:48:59.652 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 18:48:59.652 +00:00] [INFO] [domain.go:2395] ["start load stats sub workers"] ["worker count"=6]
[2024/09/16 18:48:59.653 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 18:48:59.653 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 18:48:59.653 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 18:48:59.652 +00:00] [INFO] [domain.go:2541] ["updateStatsWorker started."]
[2024/09/16 18:48:59.652 +00:00] [INFO] [domain.go:2522] ["handleDDLEvent started."]
[2024/09/16 18:48:59.653 +00:00] [INFO] [gc_worker.go:196] [start] [category="gc worker"] [uuid=647f0aa9f840009]
[2024/09/16 18:48:59.654 +00:00] [INFO] [notifier.go:225] ["etcd notify loop to watch timer events started"] [EtcdKey=/tidb/timer/cluster/1/notify/98c6c892-cbd7-4bc1-9294-67ef733f0087]
[2024/09/16 18:48:59.654 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 18:48:59.654 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 18:48:59.657 +00:00] [INFO] [bootstrap.go:774] ["complete to load the meta in the lite mode"] [category=stats]
[2024/09/16 18:48:59.660 +00:00] [INFO] [bootstrap.go:780] ["complete to load the histogram in the lite mode"] [category=stats]
[2024/09/16 18:48:59.660 +00:00] [INFO] [manager.go:108] ["adjust memory limit for cgroup v2"] [before=15.6GiB] [after=15.6GiB]
[2024/09/16 18:48:59.661 +00:00] [INFO] [manager.go:113] ["build task executor manager"] [total-cpu=10] [total-mem=15.6GiB]
[2024/09/16 18:48:59.663 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 18:48:59.664 +00:00] [WARN] [misc.go:468] ["Automatic TLS Certificate creation is disabled"] []
[2024/09/16 18:48:59.664 +00:00] [INFO] [manager.go:146] ["task executor manager start"]
[2024/09/16 18:48:59.664 +00:00] [INFO] [domain.go:1735] ["dist task executor manager started"]
[2024/09/16 18:48:59.664 +00:00] [INFO] [cpu.go:97] ["sql cpu collector started"]
[2024/09/16 18:48:59.664 +00:00] [INFO] [http_status.go:102] ["for status and metrics report"] ["listening on addr"=0.0.0.0:10080]
[2024/09/16 18:48:59.665 +00:00] [INFO] [domain.go:2436] ["init stats info time"] [lite=true] ["take time"=15.734917ms]
[2024/09/16 18:48:59.666 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 18:48:59.666 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 18:48:59.666 +00:00] [INFO] [server.go:311] ["server is running MySQL protocol"] [addr=0.0.0.0:4000]
[2024/09/16 18:48:59.666 +00:00] [INFO] [server.go:325] ["server is running MySQL protocol"] [socket=/tmp/tidb-4000.sock]
[2024/09/16 18:48:59.669 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 18:48:59.669 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 18:48:59.669 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 18:48:59.670 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 18:48:59.670 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:48:59.671 +00:00] [ERROR] [tso_client.go:366] ["[tso] update connection contexts failed"] [dc=global] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:48:59.671 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 18:48:59.670 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 18:48:59.670 +00:00] [WARN] [resource_manager_client.go:308] ["[resource_manager] get token stream error"] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 18:48:59.671 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 18:48:59.671 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 18:48:59.671 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 18:48:59.671 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 18:48:59.671 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 18:48:59.671 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 18:48:59.672 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[autoid] tidb/autoid/leader"]
[2024/09/16 18:48:59.673 +00:00] [INFO] [http_status.go:510] ["register auto service at"] [addr=tidb:10080]
[2024/09/16 18:48:59.674 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] ["owner key"=tidb/autoid/leader/4cf691fc2a854b6d] [ownerID=tidb:10080] [op=none]
[2024/09/16 18:48:59.674 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 18:48:59.674 +00:00] [INFO] [autoid.go:602] ["leader change of autoid service, this node become owner"] [addr=tidb:10080] [category="autoid service"]
[2024/09/16 18:49:00.595 +00:00] [INFO] [runaway.go:77] ["preparations for the runaway manager are finished and start runaway manager loop"]
[2024/09/16 18:49:00.595 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 18:49:00.595 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 18:49:00.595 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/16 18:49:00.655 +00:00] [INFO] [runtime.go:160] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2024/09/16 18:49:00.655 +00:00] [INFO] [runtime.go:402] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2024/09/16 18:49:00.656 +00:00] [INFO] [notifier.go:140] ["new etcd watcher created to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/98c6c892-cbd7-4bc1-9294-67ef733f0087] [watcherID=b9560546-80ca-4978-a62d-e1354f477c1e]
[2024/09/16 18:49:00.665 +00:00] [INFO] [slots.go:205] ["initialize slot capacity"] [capacity=10]
[2024/09/16 18:49:00.668 +00:00] [INFO] [scheduler_manager.go:200] ["schedule task loop start"]
[2024/09/16 18:49:00.668 +00:00] [INFO] [scheduler_manager.go:312] ["subtask table gc loop start"]
[2024/09/16 18:49:00.668 +00:00] [INFO] [scheduler_manager.go:373] ["cleanup loop start"]
[2024/09/16 18:49:00.668 +00:00] [INFO] [scheduler_manager.go:453] ["collect loop start"]
[2024/09/16 18:49:01.586 +00:00] [INFO] [info.go:1164] [SetTiFlashGroupConfig]
[2024/09/16 18:49:59.413 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] ["owner key"=/tidb/stats/owner/4cf691fc2a854b68] [ownerID=1620b240-98ec-4588-b2f7-d54faa44f003] [op=none]
[2024/09/16 18:49:59.413 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 18:49:59.413 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61"] ["owner key"=/tidb/br-stream/owner/4cf691fc2a854b5f] [ownerID=d5b4a068-0e74-4fa9-a431-3741ca4c6c61] [op=none]
[2024/09/16 18:49:59.414 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61"]
[2024/09/16 18:49:59.413 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] ["owner key"=/tidb/bindinfo/owner/4cf691fc2a854b64] [ownerID=1620b240-98ec-4588-b2f7-d54faa44f003] [op=none]
[2024/09/16 18:49:59.414 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 18:49:59.602 +00:00] [INFO] [owner_daemon.go:56] ["daemon became owner"] [id=d5b4a068-0e74-4fa9-a431-3741ca4c6c61] [daemon-id=LogBackup::Advancer]
[2024/09/16 18:49:59.602 +00:00] [INFO] [advancer.go:524] ["Subscription handler spawned."] [category="log backup subscription manager"]
[2024/09/16 18:49:59.684 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 18:49:59.717 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f0aa9f840009] [safePoint=452594761642803200] [concurrency=1]
[2024/09/16 18:49:59.717 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f0aa9f840009] [safePoint=452594761642803200] [concurrency=1]
[2024/09/16 18:49:59.717 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 18:49:59.731 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=13.598416ms] ["completed regions"=61]
[2024/09/16 18:49:59.731 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f0aa9f840009] [safePoint=452594761642803200] [regions=61]
[2024/09/16 18:50:59.683 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f0aa9f840009]
[2024/09/16 18:51:39.755 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] [ranges=0]
[2024/09/16 18:51:39.755 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] ["num of ranges"=0] ["cost time"=1.75s]
[2024/09/16 18:51:39.759 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] ["num of ranges"=0]
[2024/09/16 18:51:39.759 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] ["num of ranges"=0] ["cost time"=1.667s]
[2024/09/16 18:51:39.764 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f0aa9f840009] ["safe point"=452594761642803200]
[2024/09/16 18:53:59.597 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=1495] ["lease id"=4cf691fc2a854b4a]
[2024/09/16 18:55:02.684 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 18:58:59.602 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=1495] ["lease id"=4cf691fc2a854b4a]
[2024/09/16 18:59:07.109 +00:00] [INFO] [cache.go:119] ["reset the old infoschema after v1 v2 switch, using the stale object will panic"]
[2024/09/16 18:59:59.722 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f0aa9f840009] [safePoint=452594918931824640] [concurrency=1]
[2024/09/16 18:59:59.723 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f0aa9f840009] [safePoint=452594918931824640] [concurrency=1]
[2024/09/16 18:59:59.723 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 18:59:59.738 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=14.918333ms] ["completed regions"=61]
[2024/09/16 18:59:59.738 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f0aa9f840009] [safePoint=452594918931824640] [regions=61]
[2024/09/16 19:00:02.692 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 19:00:59.761 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f0aa9f840009]
[2024/09/16 19:01:39.766 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] [ranges=0]
[2024/09/16 19:01:39.767 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] ["num of ranges"=0] ["cost time"=7.25s]
[2024/09/16 19:01:39.769 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] ["num of ranges"=0]
[2024/09/16 19:01:39.770 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f0aa9f840009] ["num of ranges"=0] ["cost time"=1.708s]
[2024/09/16 19:01:39.775 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f0aa9f840009] ["safe point"=452594918931824640]
[2024/09/16 19:03:25.529 +00:00] [INFO] [signal_posix.go:54] ["got signal to exit"] [signal=terminated]
[2024/09/16 19:03:25.529 +00:00] [INFO] [server.go:587] ["setting tidb-server to report unhealthy (shutting-down)"]
[2024/09/16 19:03:25.530 +00:00] [ERROR] [http_status.go:532] ["start status/rpc server error"] [error="accept tcp [::]:10080: use of closed network connection"]
[2024/09/16 19:03:25.530 +00:00] [ERROR] [http_status.go:522] ["grpc server error"] [error="mux: server closed"]
[2024/09/16 19:03:25.530 +00:00] [ERROR] [http_status.go:527] ["http server error"] [error="http: Server closed"]
[2024/09/16 19:03:25.531 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 19:03:25.531 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:03:25.531 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:03:25.531 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:03:25.531 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] [error="context canceled"]
[2024/09/16 19:03:25.533 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 19:03:25.533 +00:00] [INFO] [server.go:1006] ["start drain clients"]
[2024/09/16 19:03:25.533 +00:00] [INFO] [server.go:1036] ["all sessions quit in drain wait time"]
[2024/09/16 19:03:25.533 +00:00] [INFO] [server.go:987] ["kill all connections."] [category=server]
[2024/09/16 19:03:25.533 +00:00] [INFO] [job_scheduler.go:269] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/16 19:03:25.533 +00:00] [INFO] [syncer.go:441] ["schema version sync loop interrupted, retrying..."] [category=ddl]
[2024/09/16 19:03:25.533 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] []
[2024/09/16 19:03:25.533 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.533 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 19:03:25.533 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 19:03:25.533 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.533 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.533 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] [error="context canceled"]
[2024/09/16 19:03:25.534 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] []
[2024/09/16 19:03:25.535 +00:00] [INFO] [delete_range.go:163] ["closing delRange"] [category=ddl]
[2024/09/16 19:03:25.535 +00:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/16 19:03:25.539 +00:00] [INFO] [ddl.go:871] ["DDL closed"] [category=ddl] [ID=1620b240-98ec-4588-b2f7-d54faa44f003] ["take time"=6.530167ms]
[2024/09/16 19:03:25.539 +00:00] [INFO] [ddl.go:706] ["stop DDL"] [category=ddl] [ID=1620b240-98ec-4588-b2f7-d54faa44f003]
[2024/09/16 19:03:25.540 +00:00] [INFO] [domain.go:1205] ["stopping ttlJobManager"]
[2024/09/16 19:03:25.540 +00:00] [INFO] [runtime.go:190] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2024/09/16 19:03:25.541 +00:00] [INFO] [notifier.go:227] ["etcd notify loop to watch timer events stopped"] [EtcdKey=/tidb/timer/cluster/1/notify/98c6c892-cbd7-4bc1-9294-67ef733f0087]
[2024/09/16 19:03:25.541 +00:00] [INFO] [notifier.go:142] ["etcd watcher exited to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/98c6c892-cbd7-4bc1-9294-67ef733f0087] [watcherID=b9560546-80ca-4978-a62d-e1354f477c1e]
[2024/09/16 19:03:25.541 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 19:03:25.541 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:25.541 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:25.541 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:25.541 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:25.541 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 19:03:25.541 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:25.541 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:25.541 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:25.541 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:25.542 +00:00] [INFO] [job_manager.go:175] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2024/09/16 19:03:25.542 +00:00] [INFO] [domain.go:1216] ["ttlJobManager exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2954] ["releaseServerID succeed"] [serverID=1495]
[2024/09/16 19:03:25.543 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2239] ["HistoricalStatsWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 19:03:25.543 +00:00] [INFO] [advancer.go:398] ["Meet task event"] [category="log backup advancer"] [event="Err(, err = EOF)"]
[2024/09/16 19:03:25.545 +00:00] [INFO] [manager.go:179] ["handle tasks loop done"]
[2024/09/16 19:03:25.544 +00:00] [INFO] [owner_daemon.go:87] ["daemon loop exits"] [id=d5b4a068-0e74-4fa9-a431-3741ca4c6c61] [daemon-id=LogBackup::Advancer]
[2024/09/16 19:03:25.545 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 19:03:25.545 +00:00] [ERROR] [advancer.go:401] ["listen task meet error, would reopen."] [error=EOF]
[2024/09/16 19:03:25.545 +00:00] [INFO] [flush_subscriber.go:109] [Clearing.] [category="log backup flush subscriber"] [timeout=1m0s]
[2024/09/16 19:03:25.543 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=handleDDLEvent]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:3018] ["serverIDKeeper exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2486] ["indexUsageWorker exited."]
[2024/09/16 19:03:25.546 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=indexUsageWorker]
[2024/09/16 19:03:25.543 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2597] ["autoAnalyzeWorker exited."]
[2024/09/16 19:03:25.546 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2154] ["PlanReplayerTaskCollectHandle exited."]
[2024/09/16 19:03:25.546 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 19:03:25.543 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] []
[2024/09/16 19:03:25.546 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.543 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:1752] ["stopping dist task scheduler manager because the current node is not DDL owner anymore"] [id=1620b240-98ec-4588-b2f7-d54faa44f003]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:3132] ["planCacheMetricsAndVars exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2451] ["loadStatsWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2639] ["analyzeJobsCleanupWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:891] ["globalConfigSyncerKeeper exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:865] ["infoSyncerKeeper exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2174] ["PlanReplayerTaskDumpHandle exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:1884] ["LoadSysVarCacheLoop exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:3163] ["planCacheEvictTrigger exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:1082] ["loadSchemaInLoop exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2505] ["updateStatsWorker is going to exit, start to flush stats"]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:2208] ["dumpFileGcChecker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:915] ["topologySyncerKeeper exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [plan_replayer.go:413] ["planReplayerTaskDumpWorker exited."]
[2024/09/16 19:03:25.543 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 19:03:25.543 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 19:03:25.543 +00:00] [INFO] [manager.go:470] ["watcher is closed, no owner"] ["owner info"="[log-backup] ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61 watch owner key /tidb/br-stream/owner/4cf691fc2a854b5f"]
[2024/09/16 19:03:25.543 +00:00] [INFO] [manager.go:470] ["watcher is closed, no owner"] ["owner info"="[stats] ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003 watch owner key /tidb/stats/owner/4cf691fc2a854b68"]
[2024/09/16 19:03:25.543 +00:00] [INFO] [domain.go:1834] ["loadPrivilegeInLoop exited."]
[2024/09/16 19:03:25.544 +00:00] [INFO] [manager.go:280] ["recoverMetaLoop done"]
[2024/09/16 19:03:25.544 +00:00] [INFO] [domain.go:837] ["topNSlowQueryLoop exited."]
[2024/09/16 19:03:25.545 +00:00] [INFO] [domain.go:1569] ["closestReplicaReadCheckLoop exited."]
[2024/09/16 19:03:25.545 +00:00] [INFO] [advancer.go:404] ["Task watcher exits due to some error."] [category="log backup advancer"] [error=EOF]
[2024/09/16 19:03:25.547 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 19:03:25.547 +00:00] [INFO] [scheduler_manager.go:459] ["collect loop exits"]
[2024/09/16 19:03:25.547 +00:00] [INFO] [scheduler_manager.go:206] ["schedule task loop exits"]
[2024/09/16 19:03:25.547 +00:00] [INFO] [scheduler_manager.go:318] ["subtask history table gc loop exits"]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadStatsWorker]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 19:03:25.547 +00:00] [INFO] [scheduler_manager.go:379] ["cleanup loop exits"]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 19:03:25.547 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 19:03:25.548 +00:00] [INFO] [domain.go:2507] ["updateStatsWorker ready to release owner"]
[2024/09/16 19:03:25.548 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61"] [error="watcher is closed, key: /tidb/br-stream/owner/4cf691fc2a854b5f"]
[2024/09/16 19:03:25.548 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] [error="watcher is closed, key: /tidb/stats/owner/4cf691fc2a854b68"]
[2024/09/16 19:03:25.548 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 19:03:25.548 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 19:03:25.548 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 19:03:25.548 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.549 +00:00] [INFO] [domain.go:1754] ["dist task scheduler manager stopped"] [id=1620b240-98ec-4588-b2f7-d54faa44f003]
[2024/09/16 19:03:25.550 +00:00] [INFO] [domain.go:1737] ["stopping dist task executor manager"]
[2024/09/16 19:03:25.550 +00:00] [INFO] [domain.go:1739] ["dist task executor manager stopped"]
[2024/09/16 19:03:25.550 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 19:03:25.549 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61"]
[2024/09/16 19:03:25.550 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61"]
[2024/09/16 19:03:25.550 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61"]
[2024/09/16 19:03:25.549 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.550 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:25.550 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"]
[2024/09/16 19:03:28.148 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:03:28.148 +00:00] [INFO] [domain.go:2023] ["globalBindHandleWorkerLoop exited."]
[2024/09/16 19:03:28.149 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 19:03:28.156 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1620b240-98ec-4588-b2f7-d54faa44f003"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:03:28.156 +00:00] [INFO] [domain.go:2513] ["updateStatsWorker exit preprocessing finished"]
[2024/09/16 19:03:28.156 +00:00] [INFO] [domain.go:2556] ["updateStatsWorker exited."]
[2024/09/16 19:03:28.157 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=updateStatsWorker]
[2024/09/16 19:03:28.159 +00:00] [INFO] [domain.go:1254] ["domain closed"] ["take time"=2.626020085s]
[2024/09/16 19:03:28.159 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager d5b4a068-0e74-4fa9-a431-3741ca4c6c61"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:03:28.159 +00:00] [INFO] [gc_worker.go:224] [quit] [category="gc worker"] [uuid=647f0aa9f840009]
[2024/09/16 19:03:28.160 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 19:03:28.160 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 19:03:28.160 +00:00] [INFO] [tso_dispatcher.go:242] ["[tso] stop fetching the pending tso requests due to context canceled"] [dc-location=global]
[2024/09/16 19:03:28.160 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 19:03:28.160 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 19:03:28.160 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 19:03:28.160 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 19:03:28.161 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 19:03:28.161 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 19:03:28.161 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 19:03:28.160 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:03:28.160 +00:00] [INFO] [tso_stream.go:352] ["tsoStream.recvLoop ended"] [stream=pd0:2379-1] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:03:28.162 +00:00] [INFO] [client.go:347] ["[pd] http client closed"] [source=tikv-driver]
[2024/09/16 19:03:28.162 +00:00] [INFO] [cpu.go:112] ["sql cpu collector stopped"]
[2024/09/16 19:03:28.163 +00:00] [INFO] [cgmon.go:77] ["cgroup monitor stopped"]
[2024/09/16 19:03:28.163 +00:00] [INFO] [cpuprofile.go:130] ["parallel cpu profiler stopped"]
[2024/09/16 19:03:30.115 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 19:03:30.116 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 19:03:30.116 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 19:03:30.116 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 19:03:30.117 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 19:03:30.117 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 19:03:30.117 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 19:03:30.117 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 19:03:30.118 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 19:03:30.118 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 19:03:31.119 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:03:31.119 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:03:32.118 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:03:33.119 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:35320->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:03:34.127 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 19:03:35.798 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 19:03:35.802 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:03:35.803 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 19:03:35.807 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:03:35.807 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 19:03:35.807 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 19:03:35.807 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 19:03:35.810 +00:00] [INFO] [tikv_driver.go:197] ["using API V1."]
[2024/09/16 19:03:35.812 +00:00] [INFO] [tso_dispatcher.go:273] ["[tso] tso stream is not ready"] [dc=global]
[2024/09/16 19:03:35.811 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:03:35.814 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 19:03:35.821 +00:00] [INFO] [store_cache.go:532] ["change store resolve state"] [store=1] [addr=tikv:20160] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2024/09/16 19:03:36.138 +00:00] [INFO] [tidb.go:85] ["new domain"] [store=tikv-7415309541240867473] ["ddl lease"=45s] ["stats lease"=3s]
[2024/09/16 19:03:36.155 +00:00] [WARN] [info.go:328] ["init TiFlashReplicaManager"]
[2024/09/16 19:03:36.175 +00:00] [INFO] [domain.go:2933] [acquireServerID] [serverID=1851] ["lease id"=4cf691fc37ef0d41]
[2024/09/16 19:03:36.177 +00:00] [INFO] [controller.go:198] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/16 19:03:36.207 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=52] ["elapsed time"=15.828625ms]
[2024/09/16 19:03:36.207 +00:00] [INFO] [domain.go:403] ["infoschema v1/v2 switch"]
[2024/09/16 19:03:36.208 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 19:03:36.214 +00:00] [INFO] [ddl.go:737] ["start DDL"] [category=ddl] [ID=700653c2-4816-4338-8228-5aa1ef2efd41] [runWorker=true] [jobVersion=v1]
[2024/09/16 19:03:36.215 +00:00] [INFO] [ddl.go:714] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=false]
[2024/09/16 19:03:36.218 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[ddl] /tidb/ddl/fg/owner"]
[2024/09/16 19:03:36.219 +00:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/16 19:03:36.219 +00:00] [INFO] [env.go:81] ["init global ingest backend environment finished"] [category=ddl-ingest] ["memory limitation"=8375255040] ["disk usage info"="disk usage: 52067524608/275273396224, backend usage: 0"] ["max open file number"=1048576] ["lightning is initialized"=true]
[2024/09/16 19:03:36.219 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 19:03:36.219 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 19:03:36.219 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 19:03:36.220 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 19:03:36.220 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 19:03:36.220 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/16 19:03:36.220 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 19:03:36.220 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 19:03:36.220 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc37ef0d4e] [ownerID=700653c2-4816-4338-8228-5aa1ef2efd41] [op=none]
[2024/09/16 19:03:36.220 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"]
[2024/09/16 19:03:36.220 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 19:03:36.220 +00:00] [INFO] [owner_daemon.go:70] ["begin advancer daemon"] [daemon-id=LogBackup::Advancer]
[2024/09/16 19:03:36.220 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[log-backup] /tidb/br-stream/owner"]
[2024/09/16 19:03:36.220 +00:00] [INFO] [runaway.go:68] ["try to start runaway manager loop"]
[2024/09/16 19:03:36.221 +00:00] [INFO] [job_scheduler.go:359] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/16 19:03:36.222 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc37ef0d4e] [ownerID=700653c2-4816-4338-8228-5aa1ef2efd41] [op=none]
[2024/09/16 19:03:36.222 +00:00] [INFO] [manager.go:408] ["set owner op is the same as the original, so do nothing."] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] [op=none]
[2024/09/16 19:03:36.222 +00:00] [INFO] [job_scheduler.go:371] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/16 19:03:36.222 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 19:03:36.222 +00:00] [INFO] [owner_daemon.go:81] ["begin running daemon"] [id=672d7de4-7645-4c65-94bb-0441730ea578] [daemon-id=LogBackup::Advancer]
[2024/09/16 19:03:36.225 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[bindinfo] /tidb/bindinfo/owner"]
[2024/09/16 19:03:36.225 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 19:03:36.225 +00:00] [WARN] [sysvar_cache.go:49] ["sysvar cache is empty, triggering rebuild"]
[2024/09/16 19:03:36.229 +00:00] [INFO] [sysvar.go:2881] ["set resource control"] [enable=true]
[2024/09/16 19:03:36.230 +00:00] [INFO] [controller.go:496] ["[resource group controller] create resource group cost controller"] [name=default]
[2024/09/16 19:03:36.248 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 19:03:36.250 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 19:03:36.254 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 19:03:36.254 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 19:03:36.254 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 19:03:36.254 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 19:03:36.254 +00:00] [INFO] [domain.go:2150] ["PlanReplayerTaskCollectHandle started"]
[2024/09/16 19:03:36.254 +00:00] [INFO] [domain.go:2172] ["PlanReplayerTaskDumpHandle started"]
[2024/09/16 19:03:36.255 +00:00] [INFO] [plan_replayer.go:409] ["planReplayerTaskDumpWorker started."]
[2024/09/16 19:03:36.254 +00:00] [INFO] [domain.go:2204] ["dumpFileGcChecker started"]
[2024/09/16 19:03:36.256 +00:00] [INFO] [domain.go:2237] ["HistoricalStatsWorker started"]
[2024/09/16 19:03:36.257 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadStatsWorker]
[2024/09/16 19:03:36.257 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[stats] /tidb/stats/owner"]
[2024/09/16 19:03:36.258 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=indexUsageWorker]
[2024/09/16 19:03:36.258 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=updateStatsWorker]
[2024/09/16 19:03:36.258 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=handleDDLEvent]
[2024/09/16 19:03:36.259 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 19:03:36.259 +00:00] [INFO] [domain.go:2541] ["updateStatsWorker started."]
[2024/09/16 19:03:36.259 +00:00] [INFO] [domain.go:2522] ["handleDDLEvent started."]
[2024/09/16 19:03:36.259 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 19:03:36.259 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 19:03:36.260 +00:00] [INFO] [domain.go:2395] ["start load stats sub workers"] ["worker count"=6]
[2024/09/16 19:03:36.260 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 19:03:36.260 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 19:03:36.261 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 19:03:36.270 +00:00] [INFO] [gc_worker.go:196] [start] [category="gc worker"] [uuid=647f0e020d40006]
[2024/09/16 19:03:36.270 +00:00] [INFO] [notifier.go:225] ["etcd notify loop to watch timer events started"] [EtcdKey=/tidb/timer/cluster/1/notify/206a9a8d-3266-46c1-b936-acdc1210da18]
[2024/09/16 19:03:36.270 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 19:03:36.271 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 19:03:36.272 +00:00] [INFO] [bootstrap.go:774] ["complete to load the meta in the lite mode"] [category=stats]
[2024/09/16 19:03:36.275 +00:00] [INFO] [bootstrap.go:780] ["complete to load the histogram in the lite mode"] [category=stats]
[2024/09/16 19:03:36.275 +00:00] [INFO] [manager.go:108] ["adjust memory limit for cgroup v2"] [before=15.6GiB] [after=15.6GiB]
[2024/09/16 19:03:36.276 +00:00] [INFO] [manager.go:113] ["build task executor manager"] [total-cpu=10] [total-mem=15.6GiB]
[2024/09/16 19:03:36.279 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 19:03:36.279 +00:00] [WARN] [misc.go:468] ["Automatic TLS Certificate creation is disabled"] []
[2024/09/16 19:03:36.279 +00:00] [INFO] [manager.go:146] ["task executor manager start"]
[2024/09/16 19:03:36.280 +00:00] [INFO] [domain.go:1735] ["dist task executor manager started"]
[2024/09/16 19:03:36.280 +00:00] [INFO] [domain.go:2436] ["init stats info time"] [lite=true] ["take time"=22.534875ms]
[2024/09/16 19:03:36.280 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 19:03:36.280 +00:00] [INFO] [cpu.go:97] ["sql cpu collector started"]
[2024/09/16 19:03:36.280 +00:00] [INFO] [http_status.go:102] ["for status and metrics report"] ["listening on addr"=0.0.0.0:10080]
[2024/09/16 19:03:36.281 +00:00] [INFO] [server.go:311] ["server is running MySQL protocol"] [addr=0.0.0.0:4000]
[2024/09/16 19:03:36.281 +00:00] [INFO] [server.go:325] ["server is running MySQL protocol"] [socket=/tmp/tidb-4000.sock]
[2024/09/16 19:03:36.282 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 19:03:36.284 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 19:03:36.284 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 19:03:36.285 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:03:36.285 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 19:03:36.285 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:03:36.285 +00:00] [WARN] [resource_manager_client.go:308] ["[resource_manager] get token stream error"] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:03:36.286 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 19:03:36.285 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 19:03:36.286 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 19:03:36.285 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 19:03:36.286 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 19:03:36.286 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:03:36.286 +00:00] [ERROR] [tso_client.go:366] ["[tso] update connection contexts failed"] [dc=global] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:03:36.286 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:03:36.285 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 19:03:36.286 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 19:03:36.285 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 19:03:36.287 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 19:03:36.287 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 19:03:36.287 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 19:03:36.287 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 19:03:36.287 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 19:03:36.289 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[autoid] tidb/autoid/leader"]
[2024/09/16 19:03:36.290 +00:00] [INFO] [http_status.go:510] ["register auto service at"] [addr=tidb:10080]
[2024/09/16 19:03:36.291 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] ["owner key"=tidb/autoid/leader/4cf691fc37ef0d64] [ownerID=tidb:10080] [op=none]
[2024/09/16 19:03:36.291 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:03:36.291 +00:00] [INFO] [autoid.go:602] ["leader change of autoid service, this node become owner"] [addr=tidb:10080] [category="autoid service"]
[2024/09/16 19:03:37.229 +00:00] [INFO] [runaway.go:77] ["preparations for the runaway manager are finished and start runaway manager loop"]
[2024/09/16 19:03:37.229 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 19:03:37.229 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 19:03:37.229 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/16 19:03:37.271 +00:00] [INFO] [runtime.go:160] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2024/09/16 19:03:37.271 +00:00] [INFO] [runtime.go:402] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2024/09/16 19:03:37.272 +00:00] [INFO] [notifier.go:140] ["new etcd watcher created to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/206a9a8d-3266-46c1-b936-acdc1210da18] [watcherID=e11a14fb-ab8b-46d1-a7a6-e9e0a3c93de2]
[2024/09/16 19:03:37.280 +00:00] [INFO] [slots.go:205] ["initialize slot capacity"] [capacity=10]
[2024/09/16 19:03:37.284 +00:00] [INFO] [scheduler_manager.go:200] ["schedule task loop start"]
[2024/09/16 19:03:37.284 +00:00] [INFO] [scheduler_manager.go:312] ["subtask table gc loop start"]
[2024/09/16 19:03:37.284 +00:00] [INFO] [scheduler_manager.go:373] ["cleanup loop start"]
[2024/09/16 19:03:37.284 +00:00] [INFO] [scheduler_manager.go:453] ["collect loop start"]
[2024/09/16 19:03:38.220 +00:00] [INFO] [info.go:1164] [SetTiFlashGroupConfig]
[2024/09/16 19:03:44.612 +00:00] [INFO] [signal_posix.go:54] ["got signal to exit"] [signal=terminated]
[2024/09/16 19:03:44.612 +00:00] [INFO] [server.go:587] ["setting tidb-server to report unhealthy (shutting-down)"]
[2024/09/16 19:03:44.613 +00:00] [ERROR] [http_status.go:532] ["start status/rpc server error"] [error="accept tcp [::]:10080: use of closed network connection"]
[2024/09/16 19:03:44.613 +00:00] [ERROR] [http_status.go:527] ["http server error"] [error="http: Server closed"]
[2024/09/16 19:03:44.613 +00:00] [ERROR] [http_status.go:522] ["grpc server error"] [error="mux: server closed"]
[2024/09/16 19:03:44.613 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 19:03:44.613 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:03:44.613 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:03:44.613 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:03:44.616 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 19:03:44.616 +00:00] [INFO] [server.go:1006] ["start drain clients"]
[2024/09/16 19:03:44.616 +00:00] [INFO] [server.go:1036] ["all sessions quit in drain wait time"]
[2024/09/16 19:03:44.616 +00:00] [INFO] [server.go:987] ["kill all connections."] [category=server]
[2024/09/16 19:03:44.617 +00:00] [INFO] [job_scheduler.go:269] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/16 19:03:44.617 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] []
[2024/09/16 19:03:44.617 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"]
[2024/09/16 19:03:44.617 +00:00] [INFO] [syncer.go:441] ["schema version sync loop interrupted, retrying..."] [category=ddl]
[2024/09/16 19:03:44.617 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 19:03:44.617 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 19:03:44.617 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"]
[2024/09/16 19:03:44.617 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"]
[2024/09/16 19:03:44.618 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] []
[2024/09/16 19:03:44.618 +00:00] [INFO] [delete_range.go:163] ["closing delRange"] [category=ddl]
[2024/09/16 19:03:44.618 +00:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/16 19:03:44.619 +00:00] [INFO] [ddl.go:871] ["DDL closed"] [category=ddl] [ID=700653c2-4816-4338-8228-5aa1ef2efd41] ["take time"=2.052208ms]
[2024/09/16 19:03:44.619 +00:00] [INFO] [ddl.go:706] ["stop DDL"] [category=ddl] [ID=700653c2-4816-4338-8228-5aa1ef2efd41]
[2024/09/16 19:03:44.619 +00:00] [INFO] [domain.go:1205] ["stopping ttlJobManager"]
[2024/09/16 19:03:44.619 +00:00] [INFO] [runtime.go:190] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2024/09/16 19:03:44.619 +00:00] [INFO] [notifier.go:142] ["etcd watcher exited to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/206a9a8d-3266-46c1-b936-acdc1210da18] [watcherID=e11a14fb-ab8b-46d1-a7a6-e9e0a3c93de2]
[2024/09/16 19:03:44.620 +00:00] [INFO] [notifier.go:227] ["etcd notify loop to watch timer events stopped"] [EtcdKey=/tidb/timer/cluster/1/notify/206a9a8d-3266-46c1-b936-acdc1210da18]
[2024/09/16 19:03:44.620 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 19:03:44.620 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:44.620 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:44.620 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:44.620 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:03:44.620 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 19:03:44.620 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:44.620 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:44.620 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:44.620 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:03:44.621 +00:00] [INFO] [job_manager.go:175] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2024/09/16 19:03:44.621 +00:00] [INFO] [domain.go:1216] ["ttlJobManager exited."]
[2024/09/16 19:03:44.621 +00:00] [INFO] [domain.go:2954] ["releaseServerID succeed"] [serverID=1851]
[2024/09/16 19:03:44.621 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 19:03:44.621 +00:00] [INFO] [domain.go:2505] ["updateStatsWorker is going to exit, start to flush stats"]
[2024/09/16 19:03:44.621 +00:00] [INFO] [domain.go:2507] ["updateStatsWorker ready to release owner"]
[2024/09/16 19:03:44.621 +00:00] [INFO] [domain.go:1752] ["stopping dist task scheduler manager because the current node is not DDL owner anymore"] [id=700653c2-4816-4338-8228-5aa1ef2efd41]
[2024/09/16 19:03:44.622 +00:00] [INFO] [scheduler_manager.go:318] ["subtask history table gc loop exits"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2597] ["autoAnalyzeWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2451] ["loadStatsWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadStatsWorker]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2639] ["analyzeJobsCleanupWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 19:03:44.622 +00:00] [INFO] [manager.go:301] ["failed to campaign"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 672d7de4-7645-4c65-94bb-0441730ea578"] [error="lost watcher waiting for delete"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 672d7de4-7645-4c65-94bb-0441730ea578"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:1082] ["loadSchemaInLoop exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:3132] ["planCacheMetricsAndVars exited."]
[2024/09/16 19:03:44.623 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:3018] ["serverIDKeeper exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:3163] ["planCacheEvictTrigger exited."]
[2024/09/16 19:03:44.623 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 19:03:44.622 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2174] ["PlanReplayerTaskDumpHandle exited."]
[2024/09/16 19:03:44.623 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 19:03:44.622 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=handleDDLEvent]
[2024/09/16 19:03:44.622 +00:00] [INFO] [plan_replayer.go:413] ["planReplayerTaskDumpWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2154] ["PlanReplayerTaskCollectHandle exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2486] ["indexUsageWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:1884] ["LoadSysVarCacheLoop exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2239] ["HistoricalStatsWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:1834] ["loadPrivilegeInLoop exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:891] ["globalConfigSyncerKeeper exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:915] ["topologySyncerKeeper exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:2208] ["dumpFileGcChecker exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [scheduler_manager.go:206] ["schedule task loop exits"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [scheduler_manager.go:459] ["collect loop exits"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [scheduler_manager.go:379] ["cleanup loop exits"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [advancer.go:398] ["Meet task event"] [category="log backup advancer"] [event="Err(, err = EOF)"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [manager.go:301] ["failed to campaign"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] [error="context canceled"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:865] ["infoSyncerKeeper exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [manager.go:301] ["failed to campaign"] ["owner info"="[stats] /tidb/stats/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] [error="context canceled"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [manager.go:280] ["recoverMetaLoop done"]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:837] ["topNSlowQueryLoop exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [owner_daemon.go:87] ["daemon loop exits"] [id=672d7de4-7645-4c65-94bb-0441730ea578] [daemon-id=LogBackup::Advancer]
[2024/09/16 19:03:44.622 +00:00] [INFO] [domain.go:1569] ["closestReplicaReadCheckLoop exited."]
[2024/09/16 19:03:44.622 +00:00] [INFO] [manager.go:179] ["handle tasks loop done"]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=indexUsageWorker]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 19:03:44.624 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 19:03:44.625 +00:00] [INFO] [domain.go:1754] ["dist task scheduler manager stopped"] [id=700653c2-4816-4338-8228-5aa1ef2efd41]
[2024/09/16 19:03:44.625 +00:00] [INFO] [domain.go:1737] ["stopping dist task executor manager"]
[2024/09/16 19:03:44.625 +00:00] [INFO] [domain.go:1739] ["dist task executor manager stopped"]
[2024/09/16 19:03:44.625 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 19:03:44.625 +00:00] [ERROR] [advancer.go:401] ["listen task meet error, would reopen."] [error=EOF]
[2024/09/16 19:03:44.626 +00:00] [INFO] [advancer.go:404] ["Task watcher exits due to some error."] [category="log backup advancer"] [error=EOF]
[2024/09/16 19:03:44.625 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"]
[2024/09/16 19:03:44.626 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] [error="context canceled"]
[2024/09/16 19:03:44.625 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 19:03:44.625 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[stats] /tidb/stats/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"]
[2024/09/16 19:03:44.626 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[stats] /tidb/stats/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] [error="context canceled"]
[2024/09/16 19:03:44.625 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 19:03:44.625 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 19:03:44.625 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 19:03:47.234 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[stats] /tidb/stats/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:03:47.239 +00:00] [INFO] [domain.go:2513] ["updateStatsWorker exit preprocessing finished"]
[2024/09/16 19:03:47.241 +00:00] [INFO] [domain.go:2556] ["updateStatsWorker exited."]
[2024/09/16 19:03:47.244 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=updateStatsWorker]
[2024/09/16 19:03:47.243 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 700653c2-4816-4338-8228-5aa1ef2efd41"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:03:47.245 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 672d7de4-7645-4c65-94bb-0441730ea578"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:03:47.256 +00:00] [INFO] [domain.go:2023] ["globalBindHandleWorkerLoop exited."]
[2024/09/16 19:03:47.257 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 19:03:47.270 +00:00] [INFO] [domain.go:1254] ["domain closed"] ["take time"=2.653746418s]
[2024/09/16 19:03:47.272 +00:00] [INFO] [tso_dispatcher.go:242] ["[tso] stop fetching the pending tso requests due to context canceled"] [dc-location=global]
[2024/09/16 19:03:47.273 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 19:03:47.272 +00:00] [INFO] [gc_worker.go:224] [quit] [category="gc worker"] [uuid=647f0e020d40006]
[2024/09/16 19:03:47.272 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 19:03:47.273 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 19:03:47.273 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 19:03:47.276 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 19:03:47.273 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:03:47.273 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 19:03:47.273 +00:00] [INFO] [tso_stream.go:352] ["tsoStream.recvLoop ended"] [stream=pd0:2379-1] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:03:47.273 +00:00] [INFO] [tso_stream.go:352] ["tsoStream.recvLoop ended"] [stream=pd0:2379-2] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:03:47.276 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 19:03:47.279 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 19:03:47.279 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 19:03:47.280 +00:00] [INFO] [client.go:347] ["[pd] http client closed"] [source=tikv-driver]
[2024/09/16 19:03:47.281 +00:00] [INFO] [cpu.go:112] ["sql cpu collector stopped"]
[2024/09/16 19:03:47.281 +00:00] [INFO] [cgmon.go:77] ["cgroup monitor stopped"]
[2024/09/16 19:03:47.281 +00:00] [INFO] [cpuprofile.go:130] ["parallel cpu profiler stopped"]
[2024/09/16 19:59:08.785 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 19:59:08.787 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 19:59:08.788 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 19:59:08.789 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 19:59:08.791 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 19:59:08.792 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 19:59:08.791 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 19:59:08.796 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 19:59:08.794 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 19:59:08.798 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 19:59:09.806 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:59:09.807 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:59:10.801 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:59:11.801 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37088->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:59:12.800 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37092->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37092->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:59:13.801 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37092->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:37092->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 19:59:14.807 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 19:59:16.720 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 19:59:16.722 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:59:16.763 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 19:59:16.764 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:59:16.765 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 19:59:16.765 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 19:59:16.765 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 19:59:16.766 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:59:16.778 +00:00] [INFO] [tikv_driver.go:197] ["using API V1."]
[2024/09/16 19:59:16.785 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 19:59:16.802 +00:00] [INFO] [store_cache.go:532] ["change store resolve state"] [store=1] [addr=tikv:20160] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2024/09/16 19:59:17.393 +00:00] [INFO] [tidb.go:85] ["new domain"] [store=tikv-7415309541240867473] ["ddl lease"=45s] ["stats lease"=3s]
[2024/09/16 19:59:17.425 +00:00] [WARN] [info.go:328] ["init TiFlashReplicaManager"]
[2024/09/16 19:59:17.440 +00:00] [INFO] [domain.go:2933] [acquireServerID] [serverID=266] ["lease id"=4cf691fc6ae05744]
[2024/09/16 19:59:17.444 +00:00] [INFO] [controller.go:198] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/16 19:59:17.476 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=52] ["elapsed time"=17.058584ms]
[2024/09/16 19:59:17.476 +00:00] [INFO] [domain.go:403] ["infoschema v1/v2 switch"]
[2024/09/16 19:59:17.477 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 19:59:17.488 +00:00] [INFO] [ddl.go:737] ["start DDL"] [category=ddl] [ID=1293eeaa-7e75-4ef6-b229-4a98060066f6] [runWorker=true] [jobVersion=v1]
[2024/09/16 19:59:17.488 +00:00] [INFO] [ddl.go:714] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=false]
[2024/09/16 19:59:17.489 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[ddl] /tidb/ddl/fg/owner"]
[2024/09/16 19:59:17.491 +00:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/16 19:59:17.493 +00:00] [INFO] [env.go:81] ["init global ingest backend environment finished"] [category=ddl-ingest] ["memory limitation"=8375255040] ["disk usage info"="disk usage: 52041179136/275273396224, backend usage: 0"] ["max open file number"=1048576] ["lightning is initialized"=true]
[2024/09/16 19:59:17.493 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc6ae05751] [ownerID=1293eeaa-7e75-4ef6-b229-4a98060066f6] [op=none]
[2024/09/16 19:59:17.494 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"]
[2024/09/16 19:59:17.493 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 19:59:17.494 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 19:59:17.494 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 19:59:17.495 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 19:59:17.495 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 19:59:17.495 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/16 19:59:17.495 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 19:59:17.495 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 19:59:17.495 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 19:59:17.495 +00:00] [INFO] [job_scheduler.go:359] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/16 19:59:17.495 +00:00] [INFO] [owner_daemon.go:70] ["begin advancer daemon"] [daemon-id=LogBackup::Advancer]
[2024/09/16 19:59:17.495 +00:00] [INFO] [runaway.go:68] ["try to start runaway manager loop"]
[2024/09/16 19:59:17.496 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[log-backup] /tidb/br-stream/owner"]
[2024/09/16 19:59:17.497 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc6ae05751] [ownerID=1293eeaa-7e75-4ef6-b229-4a98060066f6] [op=none]
[2024/09/16 19:59:17.497 +00:00] [INFO] [manager.go:408] ["set owner op is the same as the original, so do nothing."] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] [op=none]
[2024/09/16 19:59:17.497 +00:00] [INFO] [job_scheduler.go:371] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/16 19:59:17.500 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 19:59:17.501 +00:00] [INFO] [owner_daemon.go:81] ["begin running daemon"] [id=f7754938-b26d-46b6-a752-9957f04137f2] [daemon-id=LogBackup::Advancer]
[2024/09/16 19:59:17.517 +00:00] [INFO] [ru_stats.go:147] ["[ru_stats] ru data is already inserted, skip"] [end_time="2024-09-16 00:00:00 +0000 UTC"]
[2024/09/16 19:59:17.517 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[bindinfo] /tidb/bindinfo/owner"]
[2024/09/16 19:59:17.518 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 19:59:17.519 +00:00] [WARN] [sysvar_cache.go:49] ["sysvar cache is empty, triggering rebuild"]
[2024/09/16 19:59:17.522 +00:00] [INFO] [ru_stats.go:97] ["[ru_stats] finish write ru historical data"] [end_time="2024-09-16 00:00:00"] [interval=24h0m0s] [cost=25.793375ms] []
[2024/09/16 19:59:17.526 +00:00] [INFO] [sysvar.go:2881] ["set resource control"] [enable=true]
[2024/09/16 19:59:17.544 +00:00] [INFO] [controller.go:496] ["[resource group controller] create resource group cost controller"] [name=default]
[2024/09/16 19:59:17.563 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 19:59:17.567 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 19:59:17.572 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 19:59:17.573 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 19:59:17.573 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 19:59:17.573 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 19:59:17.573 +00:00] [INFO] [domain.go:2172] ["PlanReplayerTaskDumpHandle started"]
[2024/09/16 19:59:17.573 +00:00] [INFO] [plan_replayer.go:409] ["planReplayerTaskDumpWorker started."]
[2024/09/16 19:59:17.573 +00:00] [INFO] [domain.go:2204] ["dumpFileGcChecker started"]
[2024/09/16 19:59:17.573 +00:00] [INFO] [domain.go:2150] ["PlanReplayerTaskCollectHandle started"]
[2024/09/16 19:59:17.575 +00:00] [INFO] [domain.go:2237] ["HistoricalStatsWorker started"]
[2024/09/16 19:59:17.575 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadStatsWorker]
[2024/09/16 19:59:17.575 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[stats] /tidb/stats/owner"]
[2024/09/16 19:59:17.576 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=indexUsageWorker]
[2024/09/16 19:59:17.576 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=updateStatsWorker]
[2024/09/16 19:59:17.576 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=handleDDLEvent]
[2024/09/16 19:59:17.576 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 19:59:17.576 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 19:59:17.576 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 19:59:17.577 +00:00] [INFO] [domain.go:2395] ["start load stats sub workers"] ["worker count"=6]
[2024/09/16 19:59:17.577 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 19:59:17.577 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 19:59:17.577 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 19:59:17.576 +00:00] [INFO] [domain.go:2541] ["updateStatsWorker started."]
[2024/09/16 19:59:17.576 +00:00] [INFO] [domain.go:2522] ["handleDDLEvent started."]
[2024/09/16 19:59:17.583 +00:00] [INFO] [gc_worker.go:196] [start] [category="gc worker"] [uuid=647f1ac1090000d]
[2024/09/16 19:59:17.584 +00:00] [INFO] [notifier.go:225] ["etcd notify loop to watch timer events started"] [EtcdKey=/tidb/timer/cluster/1/notify/a9305252-9693-46a1-82e7-fa937261f758]
[2024/09/16 19:59:17.584 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 19:59:17.584 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 19:59:17.586 +00:00] [INFO] [bootstrap.go:774] ["complete to load the meta in the lite mode"] [category=stats]
[2024/09/16 19:59:17.592 +00:00] [INFO] [bootstrap.go:780] ["complete to load the histogram in the lite mode"] [category=stats]
[2024/09/16 19:59:17.596 +00:00] [INFO] [domain.go:2436] ["init stats info time"] [lite=true] ["take time"=20.639708ms]
[2024/09/16 19:59:17.596 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 19:59:17.639 +00:00] [INFO] [gc_worker.go:410] ["another gc job has just finished, skipped."] [category="gc worker"] ["leaderTick on "=647f1ac1090000d]
[2024/09/16 19:59:17.639 +00:00] [INFO] [manager.go:108] ["adjust memory limit for cgroup v2"] [before=15.6GiB] [after=15.6GiB]
[2024/09/16 19:59:17.640 +00:00] [INFO] [manager.go:113] ["build task executor manager"] [total-cpu=10] [total-mem=15.6GiB]
[2024/09/16 19:59:17.642 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 19:59:17.643 +00:00] [WARN] [misc.go:468] ["Automatic TLS Certificate creation is disabled"] []
[2024/09/16 19:59:17.643 +00:00] [INFO] [manager.go:146] ["task executor manager start"]
[2024/09/16 19:59:17.643 +00:00] [INFO] [domain.go:1735] ["dist task executor manager started"]
[2024/09/16 19:59:17.644 +00:00] [INFO] [cpu.go:97] ["sql cpu collector started"]
[2024/09/16 19:59:17.644 +00:00] [INFO] [http_status.go:102] ["for status and metrics report"] ["listening on addr"=0.0.0.0:10080]
[2024/09/16 19:59:17.645 +00:00] [INFO] [server.go:311] ["server is running MySQL protocol"] [addr=0.0.0.0:4000]
[2024/09/16 19:59:17.645 +00:00] [INFO] [server.go:325] ["server is running MySQL protocol"] [socket=/tmp/tidb-4000.sock]
[2024/09/16 19:59:17.646 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 19:59:17.648 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 19:59:17.649 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 19:59:17.649 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:59:17.649 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 19:59:17.649 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 19:59:17.649 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 19:59:17.649 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 19:59:17.649 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 19:59:17.650 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 19:59:17.649 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 19:59:17.649 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 19:59:17.650 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 19:59:17.649 +00:00] [WARN] [resource_manager_client.go:308] ["[resource_manager] get token stream error"] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:59:17.650 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 19:59:17.650 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 19:59:17.650 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 19:59:17.650 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 19:59:17.650 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 19:59:17.650 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:59:17.650 +00:00] [ERROR] [tso_client.go:366] ["[tso] update connection contexts failed"] [dc=global] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:59:17.651 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:59:17.651 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 19:59:17.651 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[autoid] tidb/autoid/leader"]
[2024/09/16 19:59:17.652 +00:00] [INFO] [http_status.go:510] ["register auto service at"] [addr=tidb:10080]
[2024/09/16 19:59:17.655 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] ["owner key"=tidb/autoid/leader/4cf691fc6ae0576b] [ownerID=tidb:10080] [op=none]
[2024/09/16 19:59:17.655 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:59:17.655 +00:00] [INFO] [autoid.go:602] ["leader change of autoid service, this node become owner"] [addr=tidb:10080] [category="autoid service"]
[2024/09/16 19:59:18.501 +00:00] [INFO] [runaway.go:77] ["preparations for the runaway manager are finished and start runaway manager loop"]
[2024/09/16 19:59:18.502 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 19:59:18.502 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 19:59:18.502 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/16 19:59:18.584 +00:00] [INFO] [runtime.go:160] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2024/09/16 19:59:18.585 +00:00] [INFO] [runtime.go:402] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2024/09/16 19:59:18.585 +00:00] [INFO] [notifier.go:140] ["new etcd watcher created to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/a9305252-9693-46a1-82e7-fa937261f758] [watcherID=06a99885-fa4c-4a43-b21b-4d5c316947b1]
[2024/09/16 19:59:18.646 +00:00] [INFO] [slots.go:205] ["initialize slot capacity"] [capacity=10]
[2024/09/16 19:59:18.649 +00:00] [INFO] [scheduler_manager.go:200] ["schedule task loop start"]
[2024/09/16 19:59:18.649 +00:00] [INFO] [scheduler_manager.go:453] ["collect loop start"]
[2024/09/16 19:59:18.649 +00:00] [INFO] [scheduler_manager.go:312] ["subtask table gc loop start"]
[2024/09/16 19:59:18.649 +00:00] [INFO] [scheduler_manager.go:373] ["cleanup loop start"]
[2024/09/16 19:59:19.494 +00:00] [INFO] [info.go:1164] [SetTiFlashGroupConfig]
[2024/09/16 19:59:27.912 +00:00] [INFO] [signal_posix.go:54] ["got signal to exit"] [signal=terminated]
[2024/09/16 19:59:27.912 +00:00] [INFO] [server.go:587] ["setting tidb-server to report unhealthy (shutting-down)"]
[2024/09/16 19:59:27.913 +00:00] [ERROR] [http_status.go:532] ["start status/rpc server error"] [error="accept tcp [::]:10080: use of closed network connection"]
[2024/09/16 19:59:27.913 +00:00] [ERROR] [http_status.go:522] ["grpc server error"] [error="mux: server closed"]
[2024/09/16 19:59:27.913 +00:00] [ERROR] [http_status.go:527] ["http server error"] [error="http: Server closed"]
[2024/09/16 19:59:27.913 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 19:59:27.914 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:59:27.914 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:59:27.914 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 19:59:27.914 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] [error="context canceled"]
[2024/09/16 19:59:27.915 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] []
[2024/09/16 19:59:27.915 +00:00] [INFO] [server.go:1006] ["start drain clients"]
[2024/09/16 19:59:27.916 +00:00] [INFO] [server.go:1036] ["all sessions quit in drain wait time"]
[2024/09/16 19:59:27.916 +00:00] [INFO] [server.go:987] ["kill all connections."] [category=server]
[2024/09/16 19:59:27.916 +00:00] [INFO] [manager.go:312] ["watch owner finished"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] []
[2024/09/16 19:59:27.916 +00:00] [INFO] [manager.go:232] ["retire owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"]
[2024/09/16 19:59:27.916 +00:00] [INFO] [syncer.go:441] ["schema version sync loop interrupted, retrying..."] [category=ddl]
[2024/09/16 19:59:27.916 +00:00] [INFO] [job_scheduler.go:269] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/16 19:59:27.916 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 19:59:27.916 +00:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/16 19:59:27.916 +00:00] [WARN] [manager.go:316] ["is not the owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"]
[2024/09/16 19:59:27.916 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"]
[2024/09/16 19:59:27.917 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] []
[2024/09/16 19:59:27.918 +00:00] [INFO] [delete_range.go:163] ["closing delRange"] [category=ddl]
[2024/09/16 19:59:27.918 +00:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/16 19:59:27.919 +00:00] [INFO] [ddl.go:871] ["DDL closed"] [category=ddl] [ID=1293eeaa-7e75-4ef6-b229-4a98060066f6] ["take time"=2.907291ms]
[2024/09/16 19:59:27.919 +00:00] [INFO] [ddl.go:706] ["stop DDL"] [category=ddl] [ID=1293eeaa-7e75-4ef6-b229-4a98060066f6]
[2024/09/16 19:59:27.919 +00:00] [INFO] [domain.go:1205] ["stopping ttlJobManager"]
[2024/09/16 19:59:27.920 +00:00] [INFO] [runtime.go:190] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2024/09/16 19:59:27.920 +00:00] [INFO] [notifier.go:142] ["etcd watcher exited to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/a9305252-9693-46a1-82e7-fa937261f758] [watcherID=06a99885-fa4c-4a43-b21b-4d5c316947b1]
[2024/09/16 19:59:27.920 +00:00] [INFO] [notifier.go:227] ["etcd notify loop to watch timer events stopped"] [EtcdKey=/tidb/timer/cluster/1/notify/a9305252-9693-46a1-82e7-fa937261f758]
[2024/09/16 19:59:27.920 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 19:59:27.920 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:59:27.920 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:59:27.920 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:59:27.920 +00:00] [INFO] [scan.go:311] ["ttlScanWorker loop exited."]
[2024/09/16 19:59:27.920 +00:00] [INFO] [task_manager.go:199] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/16 19:59:27.920 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:59:27.920 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:59:27.920 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:59:27.920 +00:00] [INFO] [del.go:280] ["ttlDeleteWorker loop exited."]
[2024/09/16 19:59:27.921 +00:00] [INFO] [job_manager.go:175] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2024/09/16 19:59:27.921 +00:00] [INFO] [domain.go:1216] ["ttlJobManager exited."]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:2954] ["releaseServerID succeed"] [serverID=266]
[2024/09/16 19:59:27.922 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:2505] ["updateStatsWorker is going to exit, start to flush stats"]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:2507] ["updateStatsWorker ready to release owner"]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:1752] ["stopping dist task scheduler manager because the current node is not DDL owner anymore"] [id=1293eeaa-7e75-4ef6-b229-4a98060066f6]
[2024/09/16 19:59:27.922 +00:00] [INFO] [scheduler_manager.go:318] ["subtask history table gc loop exits"]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:2154] ["PlanReplayerTaskCollectHandle exited."]
[2024/09/16 19:59:27.922 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 19:59:27.922 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:3018] ["serverIDKeeper exited."]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:2597] ["autoAnalyzeWorker exited."]
[2024/09/16 19:59:27.922 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 19:59:27.922 +00:00] [INFO] [domain.go:2451] ["loadStatsWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadStatsWorker]
[2024/09/16 19:59:27.923 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 19:59:27.923 +00:00] [INFO] [scheduler_manager.go:379] ["cleanup loop exits"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:865] ["infoSyncerKeeper exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 19:59:27.923 +00:00] [INFO] [manager.go:280] ["recoverMetaLoop done"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [owner_daemon.go:87] ["daemon loop exits"] [id=f7754938-b26d-46b6-a752-9957f04137f2] [daemon-id=LogBackup::Advancer]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:3163] ["planCacheEvictTrigger exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:1569] ["closestReplicaReadCheckLoop exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:2639] ["analyzeJobsCleanupWorker exited."]
[2024/09/16 19:59:27.924 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 19:59:27.923 +00:00] [INFO] [scheduler_manager.go:206] ["schedule task loop exits"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:2486] ["indexUsageWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:2239] ["HistoricalStatsWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [scheduler_manager.go:459] ["collect loop exits"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:1082] ["loadSchemaInLoop exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:915] ["topologySyncerKeeper exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:1884] ["LoadSysVarCacheLoop exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:2174] ["PlanReplayerTaskDumpHandle exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [plan_replayer.go:413] ["planReplayerTaskDumpWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:1834] ["loadPrivilegeInLoop exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [manager.go:301] ["failed to campaign"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f7754938-b26d-46b6-a752-9957f04137f2"] [error="lost watcher waiting for delete"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [manager.go:301] ["failed to campaign"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] [error="context canceled"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 19:59:27.923 +00:00] [INFO] [manager.go:301] ["failed to campaign"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] [error="context canceled"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:3132] ["planCacheMetricsAndVars exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [stats_syncload.go:221] ["SubLoadWorker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [advancer.go:398] ["Meet task event"] [category="log backup advancer"] [event="Err(, err = EOF)"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:2208] ["dumpFileGcChecker exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:837] ["topNSlowQueryLoop exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [domain.go:891] ["globalConfigSyncerKeeper exited."]
[2024/09/16 19:59:27.923 +00:00] [INFO] [manager.go:179] ["handle tasks loop done"]
[2024/09/16 19:59:27.923 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=handleDDLEvent]
[2024/09/16 19:59:27.924 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=indexUsageWorker]
[2024/09/16 19:59:27.924 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 19:59:27.924 +00:00] [INFO] [domain.go:1754] ["dist task scheduler manager stopped"] [id=1293eeaa-7e75-4ef6-b229-4a98060066f6]
[2024/09/16 19:59:27.924 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 19:59:27.924 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 19:59:27.924 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 19:59:27.924 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 19:59:27.925 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 19:59:27.925 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f7754938-b26d-46b6-a752-9957f04137f2"]
[2024/09/16 19:59:27.925 +00:00] [INFO] [manager.go:282] ["break campaign loop, context is done"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"]
[2024/09/16 19:59:27.925 +00:00] [INFO] [manager.go:266] ["etcd session is done, creates a new one"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"]
[2024/09/16 19:59:27.925 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 19:59:27.925 +00:00] [ERROR] [advancer.go:401] ["listen task meet error, would reopen."] [error=EOF]
[2024/09/16 19:59:27.926 +00:00] [INFO] [advancer.go:404] ["Task watcher exits due to some error."] [category="log backup advancer"] [error=EOF]
[2024/09/16 19:59:27.925 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 19:59:27.925 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 19:59:27.925 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 19:59:27.925 +00:00] [INFO] [domain.go:1737] ["stopping dist task executor manager"]
[2024/09/16 19:59:27.926 +00:00] [INFO] [domain.go:1739] ["dist task executor manager stopped"]
[2024/09/16 19:59:27.926 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 19:59:27.926 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f7754938-b26d-46b6-a752-9957f04137f2"] [error="context canceled"]
[2024/09/16 19:59:27.926 +00:00] [INFO] [manager.go:270] ["break campaign loop, NewSession failed"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] [error="context canceled"]
[2024/09/16 19:59:30.527 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:59:30.528 +00:00] [INFO] [domain.go:2023] ["globalBindHandleWorkerLoop exited."]
[2024/09/16 19:59:30.528 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 19:59:30.536 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager f7754938-b26d-46b6-a752-9957f04137f2"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:59:30.540 +00:00] [INFO] [manager.go:327] ["revoke session"] ["owner info"="[stats] /tidb/stats/owner ownerManager 1293eeaa-7e75-4ef6-b229-4a98060066f6"] [error="rpc error: code = Canceled desc = grpc: the client connection is closing"]
[2024/09/16 19:59:30.540 +00:00] [INFO] [domain.go:2513] ["updateStatsWorker exit preprocessing finished"]
[2024/09/16 19:59:30.540 +00:00] [INFO] [domain.go:2556] ["updateStatsWorker exited."]
[2024/09/16 19:59:30.540 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=updateStatsWorker]
[2024/09/16 19:59:30.544 +00:00] [INFO] [domain.go:1254] ["domain closed"] ["take time"=2.628581627s]
[2024/09/16 19:59:30.545 +00:00] [INFO] [gc_worker.go:224] [quit] [category="gc worker"] [uuid=647f1ac1090000d]
[2024/09/16 19:59:30.545 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 19:59:30.545 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 19:59:30.545 +00:00] [INFO] [tso_dispatcher.go:242] ["[tso] stop fetching the pending tso requests due to context canceled"] [dc-location=global]
[2024/09/16 19:59:30.545 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 19:59:30.545 +00:00] [INFO] [tso_stream.go:352] ["tsoStream.recvLoop ended"] [stream=pd0:2379-1] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 19:59:30.545 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 19:59:30.546 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 19:59:30.546 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 19:59:30.546 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 19:59:30.546 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 19:59:30.545 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 19:59:30.545 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 19:59:30.547 +00:00] [INFO] [client.go:347] ["[pd] http client closed"] [source=tikv-driver]
[2024/09/16 19:59:30.548 +00:00] [INFO] [cpu.go:112] ["sql cpu collector stopped"]
[2024/09/16 19:59:30.548 +00:00] [INFO] [cgmon.go:77] ["cgroup monitor stopped"]
[2024/09/16 19:59:30.548 +00:00] [INFO] [cpuprofile.go:130] ["parallel cpu profiler stopped"]
[2024/09/16 20:03:57.178 +00:00] [INFO] [meminfo.go:179] ["use cgroup memory hook because TiDB is in the container"]
[2024/09/16 20:03:57.179 +00:00] [INFO] [cpuprofile.go:113] ["parallel cpu profiler started"]
[2024/09/16 20:03:57.181 +00:00] [INFO] [cgmon.go:60] ["cgroup monitor started"]
[2024/09/16 20:03:57.181 +00:00] [INFO] [printer.go:52] ["Welcome to TiDB."] ["Release Version"=v8.4.0-alpha-185-g26443da] [Edition=Community] ["Git Commit Hash"=26443dab89ba5b1a866de3c3e44e2f51468bc435] ["Git Branch"=HEAD] ["UTC Build Time"="2024-09-14 16:15:53"] [GoVersion=go1.21.13] ["Race Enabled"=false] ["Check Table Before Drop"=false]
[2024/09/16 20:03:57.186 +00:00] [INFO] [printer.go:57] ["loaded config"] [config="{\"host\":\"0.0.0.0\",\"advertise-address\":\"tidb\",\"port\":4000,\"cors\":\"\",\"store\":\"tikv\",\"path\":\"pd0:2379\",\"socket\":\"/tmp/tidb-4000.sock\",\"lease\":\"45s\",\"split-table\":true,\"token-limit\":1000,\"temp-dir\":\"/tmp/tidb\",\"tmp-storage-path\":\"/tmp/0_tidb/MC4wLjAuMDo0MDAwLzAuMC4wLjA6MTAwODA=/tmp-storage\",\"tmp-storage-quota\":-1,\"server-version\":\"\",\"version-comment\":\"\",\"tidb-edition\":\"\",\"tidb-release-version\":\"\",\"keyspace-name\":\"\",\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":null,\"enable-timestamp\":null,\"disable-error-stack\":null,\"enable-error-stack\":null,\"file\":{\"filename\":\"/logs/tidb.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0,\"compression\":\"\"},\"slow-query-file\":\"tidb-slow.log\",\"expensive-threshold\":10000,\"general-log-file\":\"\",\"query-log-max-len\":4096,\"enable-slow-log\":true,\"slow-threshold\":300,\"record-plan-in-slow-log\":1,\"timeout\":0},\"instance\":{\"tidb_general_log\":false,\"tidb_pprof_sql_cpu\":false,\"ddl_slow_threshold\":300,\"tidb_expensive_query_time_threshold\":60,\"tidb_expensive_txn_time_threshold\":600,\"tidb_stmt_summary_enable_persistent\":false,\"tidb_stmt_summary_filename\":\"tidb-statements.log\",\"tidb_stmt_summary_file_max_days\":3,\"tidb_stmt_summary_file_max_size\":64,\"tidb_stmt_summary_file_max_backups\":0,\"tidb_enable_slow_log\":true,\"tidb_slow_log_threshold\":300,\"tidb_record_plan_in_slow_log\":1,\"tidb_check_mb4_value_in_utf8\":true,\"tidb_force_priority\":\"NO_PRIORITY\",\"tidb_memory_usage_alarm_ratio\":0.8,\"tidb_enable_collect_execution_info\":true,\"plugin_dir\":\"/data/deploy/plugin\",\"plugin_load\":\"\",\"max_connections\":0,\"tidb_enable_ddl\":true,\"tidb_rc_read_check_ts\":false,\"tidb_service_scope\":\"\"},\"security\":{\"skip-grant-table\":false,\"ssl-ca\":\"\",\"ssl-cert\":\"\",\"ssl-key\":\"\",\"cluster-ssl-ca\":\"\",\"cluster-ssl-cert\":\"\",\"cluster-ssl-key\":\"\",\"cluster-verify-cn\":null,\"session-token-signing-cert\":\"\",\"session-token-signing-key\":\"\",\"spilled-file-encryption-method\":\"plaintext\",\"enable-sem\":false,\"auto-tls\":false,\"tls-version\":\"\",\"rsa-key-size\":4096,\"secure-bootstrap\":false,\"auth-token-jwks\":\"\",\"auth-token-refresh-interval\":\"1h0m0s\",\"disconnect-on-expired-password\":true},\"status\":{\"status-host\":\"0.0.0.0\",\"metrics-addr\":\"\",\"status-port\":10080,\"metrics-interval\":15,\"report-status\":true,\"record-db-qps\":false,\"record-db-label\":false,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-concurrent-streams\":1024,\"grpc-initial-window-size\":2097152,\"grpc-max-send-msg-size\":2147483647},\"performance\":{\"max-procs\":0,\"max-memory\":0,\"server-memory-quota\":0,\"stats-lease\":\"3s\",\"stmt-count-limit\":5000,\"pseudo-estimate-ratio\":0.8,\"bind-info-lease\":\"3s\",\"txn-entry-size-limit\":6291456,\"txn-total-size-limit\":104857600,\"tcp-keep-alive\":true,\"tcp-no-delay\":true,\"cross-join\":true,\"distinct-agg-push-down\":false,\"max-txn-ttl\":3600000,\"index-usage-sync-lease\":\"\",\"plan-replayer-gc-lease\":\"10m\",\"gogc\":100,\"enforce-mpp\":false,\"stats-load-concurrency\":0,\"stats-load-queue-size\":1000,\"analyze-partition-concurrency-quota\":16,\"plan-replayer-dump-worker-concurrency\":1,\"enable-stats-cache-mem-quota\":true,\"committer-concurrency\":128,\"run-auto-analyze\":true,\"force-priority\":\"NO_PRIORITY\",\"memory-usage-alarm-ratio\":0.8,\"enable-load-fmsketch\":false,\"lite-init-stats\":true,\"force-init-stats\":true,\"concurrently-init-stats\":true,\"projection-push-down\":true},\"prepared-plan-cache\":{\"enabled\":true,\"capacity\":100,\"memory-guard-ratio\":0.1},\"opentracing\":{\"enable\":false,\"rpc-metrics\":false,\"sampler\":{\"type\":\"const\",\"param\":1,\"sampling-server-url\":\"\",\"max-operations\":0,\"sampling-refresh-interval\":0},\"reporter\":{\"queue-size\":0,\"buffer-flush-interval\":0,\"log-spans\":false,\"local-agent-host-port\":\"\"}},\"proxy-protocol\":{\"networks\":\"\",\"header-timeout\":5,\"fallbackable\":false},\"pd-client\":{\"pd-server-timeout\":3},\"tikv-client\":{\"grpc-connection-count\":4,\"grpc-keepalive-time\":10,\"grpc-keepalive-timeout\":3,\"grpc-compression-type\":\"none\",\"grpc-shared-buffer-pool\":false,\"grpc-initial-window-size\":134217728,\"grpc-initial-conn-window-size\":134217728,\"commit-timeout\":\"41s\",\"async-commit\":{\"keys-limit\":256,\"total-key-size-limit\":4096,\"safe-window\":2000000000,\"allowed-clock-drift\":500000000},\"batch-policy\":\"standard\",\"max-batch-size\":128,\"overload-threshold\":200,\"max-batch-wait-time\":0,\"batch-wait-size\":8,\"enable-chunk-rpc\":true,\"region-cache-ttl\":600,\"store-limit\":0,\"store-liveness-timeout\":\"1s\",\"copr-cache\":{\"capacity-mb\":1000},\"copr-req-timeout\":60000000000,\"ttl-refreshed-txn-size\":33554432,\"resolve-lock-lite-threshold\":16,\"max-concurrency-request-limit\":9223372036854775807,\"enable-replica-selector-v2\":true},\"binlog\":{\"enable\":false,\"ignore-error\":false,\"write-timeout\":\"15s\",\"binlog-socket\":\"\",\"strategy\":\"range\"},\"compatible-kill-query\":false,\"pessimistic-txn\":{\"max-retry-count\":256,\"deadlock-history-capacity\":10,\"deadlock-history-collect-retryable\":false,\"pessimistic-auto-commit\":false,\"constraint-check-in-place-pessimistic\":true},\"max-index-length\":3072,\"index-limit\":64,\"table-column-count-limit\":1017,\"graceful-wait-before-shutdown\":0,\"alter-primary-key\":false,\"treat-old-version-utf8-as-utf8mb4\":true,\"enable-table-lock\":false,\"delay-clean-table-lock\":0,\"split-region-max-num\":1000,\"top-sql\":{\"receiver-address\":\"\"},\"repair-mode\":false,\"repair-table-list\":[],\"isolation-read\":{\"engines\":[\"tikv\",\"tiflash\",\"tidb\"]},\"new_collations_enabled_on_first_bootstrap\":true,\"experimental\":{\"allow-expression-index\":false},\"skip-register-to-dashboard\":false,\"enable-telemetry\":false,\"labels\":{},\"enable-global-index\":false,\"deprecate-integer-display-length\":false,\"enable-enum-length-limit\":true,\"stores-refresh-interval\":60,\"enable-tcp4-only\":false,\"enable-forwarding\":false,\"max-ballast-object-size\":0,\"ballast-object-size\":0,\"transaction-summary\":{\"transaction-summary-capacity\":500,\"transaction-id-digest-min-duration\":2147483647},\"enable-global-kill\":true,\"enable-32bits-connection-id\":true,\"initialize-sql-file\":\"\",\"enable-batch-dml\":false,\"mem-quota-query\":1073741824,\"oom-action\":\"cancel\",\"oom-use-tmp-storage\":true,\"check-mb4-value-in-utf8\":true,\"enable-collect-execution-info\":true,\"plugin\":{\"dir\":\"/data/deploy/plugin\",\"load\":\"\"},\"max-server-connections\":0,\"run-ddl\":true,\"disaggregated-tiflash\":false,\"autoscaler-type\":\"aws\",\"autoscaler-addr\":\"tiflash-autoscale-lb.tiflash-autoscale.svc.cluster.local:8081\",\"is-tiflashcompute-fixed-pool\":false,\"autoscaler-cluster-id\":\"\",\"use-autoscaler\":false,\"tidb-max-reuse-chunk\":64,\"tidb-max-reuse-column\":256,\"tidb-enable-exit-check\":false,\"in-mem-slow-query-topn-num\":30,\"in-mem-slow-query-recent-num\":500}"]
[2024/09/16 20:03:57.184 +00:00] [INFO] [cgmon.go:130] ["set the maxprocs"] [quota=10]
[2024/09/16 20:03:57.191 +00:00] [INFO] [main.go:467] ["disable Prometheus push client"]
[2024/09/16 20:03:57.195 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 20:03:57.191 +00:00] [INFO] [systime_mon.go:26] ["start system time monitor"]
[2024/09/16 20:03:57.195 +00:00] [INFO] [cgmon.go:154] ["set the memory limit"] [memLimit=16750510080]
[2024/09/16 20:03:58.200 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 20:03:58.201 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 20:03:59.197 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 20:04:00.197 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51834->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 20:04:01.197 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51850->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51850->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 20:04:02.198 +00:00] [WARN] [pd_service_discovery.go:837] ["[pd] failed to get cluster id"] [url=http://pd0:2379] [error="[PD:client:ErrClientGetMember]error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51850->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE: error:rpc error: code = Unavailable desc = connection error: desc = \"error reading server preface: read tcp 172.18.0.4:51850->172.18.0.2:2379: use of closed network connection\" target:pd0:2379 status:TRANSIENT_FAILURE"]
[2024/09/16 20:04:03.424 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 20:04:03.425 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 20:04:03.426 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 20:04:03.426 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 20:04:03.427 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 20:04:03.427 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 20:04:03.427 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 20:04:03.427 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 20:04:03.428 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 20:04:03.429 +00:00] [INFO] [tikv_driver.go:197] ["using API V1."]
[2024/09/16 20:04:03.431 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 20:04:03.433 +00:00] [INFO] [store_cache.go:532] ["change store resolve state"] [store=1] [addr=tikv:20160] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2024/09/16 20:04:04.017 +00:00] [INFO] [tidb.go:85] ["new domain"] [store=tikv-7415309541240867473] ["ddl lease"=45s] ["stats lease"=3s]
[2024/09/16 20:04:04.029 +00:00] [WARN] [info.go:328] ["init TiFlashReplicaManager"]
[2024/09/16 20:04:04.046 +00:00] [INFO] [domain.go:2933] [acquireServerID] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:04:04.048 +00:00] [INFO] [controller.go:198] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/16 20:04:04.067 +00:00] [INFO] [domain.go:393] ["full load InfoSchema success"] [isV2=true] [currentSchemaVersion=0] [neededSchemaVersion=52] ["elapsed time"=12.681708ms]
[2024/09/16 20:04:04.067 +00:00] [INFO] [domain.go:403] ["infoschema v1/v2 switch"]
[2024/09/16 20:04:04.068 +00:00] [INFO] [domain.go:789] ["full load and reset schema validator"]
[2024/09/16 20:04:04.073 +00:00] [INFO] [ddl.go:737] ["start DDL"] [category=ddl] [ID=8b2440e3-76fd-48fa-b6ac-668fd9af4dd8] [runWorker=true] [jobVersion=v1]
[2024/09/16 20:04:04.073 +00:00] [INFO] [ddl.go:714] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=false]
[2024/09/16 20:04:04.074 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[ddl] /tidb/ddl/fg/owner"]
[2024/09/16 20:04:04.075 +00:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/16 20:04:04.076 +00:00] [INFO] [env.go:81] ["init global ingest backend environment finished"] [category=ddl-ingest] ["memory limitation"=8375255040] ["disk usage info"="disk usage: 52039262208/275273396224, backend usage: 0"] ["max open file number"=1048576] ["lightning is initialized"=true]
[2024/09/16 20:04:04.076 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/16 20:04:04.076 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/16 20:04:04.076 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/16 20:04:04.076 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/16 20:04:04.077 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/16 20:04:04.077 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/16 20:04:04.077 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/16 20:04:04.077 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/16 20:04:04.077 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc6f472c4e] [ownerID=8b2440e3-76fd-48fa-b6ac-668fd9af4dd8] [op=none]
[2024/09/16 20:04:04.078 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"]
[2024/09/16 20:04:04.077 +00:00] [INFO] [runaway.go:68] ["try to start runaway manager loop"]
[2024/09/16 20:04:04.077 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/16 20:04:04.078 +00:00] [INFO] [owner_daemon.go:70] ["begin advancer daemon"] [daemon-id=LogBackup::Advancer]
[2024/09/16 20:04:04.078 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[log-backup] /tidb/br-stream/owner"]
[2024/09/16 20:04:04.079 +00:00] [INFO] [job_scheduler.go:359] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/16 20:04:04.080 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"] ["owner key"=/tidb/ddl/fg/owner/4cf691fc6f472c4e] [ownerID=8b2440e3-76fd-48fa-b6ac-668fd9af4dd8] [op=none]
[2024/09/16 20:04:04.080 +00:00] [INFO] [manager.go:408] ["set owner op is the same as the original, so do nothing."] ["owner info"="[ddl] /tidb/ddl/fg/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"] [op=none]
[2024/09/16 20:04:04.080 +00:00] [INFO] [job_scheduler.go:371] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/16 20:04:04.080 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=logBackupAdvancer]
[2024/09/16 20:04:04.081 +00:00] [INFO] [owner_daemon.go:81] ["begin running daemon"] [id=813f0338-4a4e-41b1-ad8b-57b9bd6f52b1] [daemon-id=LogBackup::Advancer]
[2024/09/16 20:04:04.083 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[bindinfo] /tidb/bindinfo/owner"]
[2024/09/16 20:04:04.084 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/16 20:04:04.084 +00:00] [WARN] [sysvar_cache.go:49] ["sysvar cache is empty, triggering rebuild"]
[2024/09/16 20:04:04.089 +00:00] [INFO] [sysvar.go:2881] ["set resource control"] [enable=true]
[2024/09/16 20:04:04.090 +00:00] [INFO] [controller.go:496] ["[resource group controller] create resource group cost controller"] [name=default]
[2024/09/16 20:04:04.110 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/16 20:04:04.113 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/16 20:04:04.116 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskCollectHandle]
[2024/09/16 20:04:04.116 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=PlanReplayerTaskDumpHandle]
[2024/09/16 20:04:04.116 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2024/09/16 20:04:04.116 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=HistoricalStatsWorker]
[2024/09/16 20:04:04.116 +00:00] [INFO] [domain.go:2150] ["PlanReplayerTaskCollectHandle started"]
[2024/09/16 20:04:04.116 +00:00] [INFO] [domain.go:2172] ["PlanReplayerTaskDumpHandle started"]
[2024/09/16 20:04:04.117 +00:00] [INFO] [plan_replayer.go:409] ["planReplayerTaskDumpWorker started."]
[2024/09/16 20:04:04.117 +00:00] [INFO] [domain.go:2204] ["dumpFileGcChecker started"]
[2024/09/16 20:04:04.117 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadStatsWorker]
[2024/09/16 20:04:04.117 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[stats] /tidb/stats/owner"]
[2024/09/16 20:04:04.117 +00:00] [INFO] [domain.go:2237] ["HistoricalStatsWorker started"]
[2024/09/16 20:04:04.118 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=indexUsageWorker]
[2024/09/16 20:04:04.118 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=updateStatsWorker]
[2024/09/16 20:04:04.118 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=handleDDLEvent]
[2024/09/16 20:04:04.118 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=autoAnalyzeWorker]
[2024/09/16 20:04:04.118 +00:00] [INFO] [domain.go:2541] ["updateStatsWorker started."]
[2024/09/16 20:04:04.118 +00:00] [INFO] [domain.go:2522] ["handleDDLEvent started."]
[2024/09/16 20:04:04.118 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=analyzeJobsCleanupWorker]
[2024/09/16 20:04:04.119 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 20:04:04.119 +00:00] [INFO] [domain.go:2395] ["start load stats sub workers"] ["worker count"=6]
[2024/09/16 20:04:04.119 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/16 20:04:04.119 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/16 20:04:04.119 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2024/09/16 20:04:04.121 +00:00] [INFO] [bootstrap.go:774] ["complete to load the meta in the lite mode"] [category=stats]
[2024/09/16 20:04:04.121 +00:00] [INFO] [gc_worker.go:196] [start] [category="gc worker"] [uuid=647f1bd8dc8000f]
[2024/09/16 20:04:04.122 +00:00] [INFO] [notifier.go:225] ["etcd notify loop to watch timer events started"] [EtcdKey=/tidb/timer/cluster/1/notify/69425081-59e1-4480-abef-377a32eff341]
[2024/09/16 20:04:04.122 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 20:04:04.123 +00:00] [INFO] [task_manager.go:222] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/16 20:04:04.124 +00:00] [INFO] [bootstrap.go:780] ["complete to load the histogram in the lite mode"] [category=stats]
[2024/09/16 20:04:04.128 +00:00] [INFO] [domain.go:2436] ["init stats info time"] [lite=true] ["take time"=10.764083ms]
[2024/09/16 20:04:04.128 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=RemoveInitStatsFromInternalSessions]
[2024/09/16 20:04:04.144 +00:00] [INFO] [manager.go:108] ["adjust memory limit for cgroup v2"] [before=15.6GiB] [after=15.6GiB]
[2024/09/16 20:04:04.144 +00:00] [INFO] [manager.go:113] ["build task executor manager"] [total-cpu=10] [total-mem=15.6GiB]
[2024/09/16 20:04:04.147 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/16 20:04:04.147 +00:00] [WARN] [misc.go:468] ["Automatic TLS Certificate creation is disabled"] []
[2024/09/16 20:04:04.147 +00:00] [INFO] [manager.go:146] ["task executor manager start"]
[2024/09/16 20:04:04.147 +00:00] [INFO] [domain.go:1735] ["dist task executor manager started"]
[2024/09/16 20:04:04.147 +00:00] [INFO] [cpu.go:97] ["sql cpu collector started"]
[2024/09/16 20:04:04.147 +00:00] [INFO] [http_status.go:102] ["for status and metrics report"] ["listening on addr"=0.0.0.0:10080]
[2024/09/16 20:04:04.148 +00:00] [INFO] [server.go:311] ["server is running MySQL protocol"] [addr=0.0.0.0:4000]
[2024/09/16 20:04:04.148 +00:00] [INFO] [server.go:325] ["server is running MySQL protocol"] [socket=/tmp/tidb-4000.sock]
[2024/09/16 20:04:04.149 +00:00] [INFO] [store.go:76] ["new store"] [path=tikv://pd0:2379]
[2024/09/16 20:04:04.150 +00:00] [INFO] [pd_service_discovery.go:1019] ["[pd] switch leader"] [new-leader=http://pd0:2379] [old-leader=]
[2024/09/16 20:04:04.150 +00:00] [INFO] [pd_service_discovery.go:499] ["[pd] init cluster id"] [cluster-id=7415309541240867473]
[2024/09/16 20:04:04.150 +00:00] [INFO] [client.go:675] ["[pd] changing service mode"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 20:04:04.150 +00:00] [INFO] [tso_client.go:296] ["[tso] switch dc tso global allocator serving url"] [dc-location=global] [new-url=http://pd0:2379]
[2024/09/16 20:04:04.151 +00:00] [INFO] [client.go:681] ["[pd] service mode changed"] [old-mode=UNKNOWN_SVC_MODE] [new-mode=PD_SVC_MODE]
[2024/09/16 20:04:04.151 +00:00] [INFO] [pd_service_discovery.go:551] ["[pd] exit member loop due to context canceled"]
[2024/09/16 20:04:04.151 +00:00] [WARN] [resource_manager_client.go:308] ["[resource_manager] get token stream error"] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 20:04:04.151 +00:00] [INFO] [resource_manager_client.go:296] ["[resource manager] exit resource token dispatcher"]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_client.go:157] ["[tso] closing tso client"]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_client.go:132] ["[tso] start tso dispatcher check loop"]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_client.go:147] ["[tso] exit tso dispatcher check loop"]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_dispatcher.go:132] ["[tso] start tso deadline watcher"] [dc-location=global]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_dispatcher.go:150] ["[tso] exit tso deadline watcher"] [dc-location=global]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_dispatcher.go:193] ["[tso] tso dispatcher created"] [dc-location=global]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_dispatcher.go:196] ["[tso] exit tso dispatcher"] [dc-location=global]
[2024/09/16 20:04:04.152 +00:00] [INFO] [tso_client.go:162] ["[tso] close tso client"]
[2024/09/16 20:04:04.152 +00:00] [INFO] [tso_client.go:164] ["[tso] tso client is closed"]
[2024/09/16 20:04:04.152 +00:00] [INFO] [pd_service_discovery.go:638] ["[pd] close pd service discovery client"]
[2024/09/16 20:04:04.151 +00:00] [INFO] [tso_dispatcher.go:403] ["[tso] start tso connection contexts updater"] [dc-location=global]
[2024/09/16 20:04:04.152 +00:00] [ERROR] [tso_client.go:366] ["[tso] update connection contexts failed"] [dc=global] [error="rpc error: code = Canceled desc = context canceled"]
[2024/09/16 20:04:04.152 +00:00] [INFO] [tso_dispatcher.go:417] ["[tso] exit tso connection contexts updater"] [dc-location=global]
[2024/09/16 20:04:04.152 +00:00] [INFO] [store.go:82] ["new store with retry success"]
[2024/09/16 20:04:04.153 +00:00] [INFO] [manager.go:192] ["start campaign owner"] [ownerInfo="[autoid] tidb/autoid/leader"]
[2024/09/16 20:04:04.154 +00:00] [INFO] [http_status.go:510] ["register auto service at"] [addr=tidb:10080]
[2024/09/16 20:04:04.161 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"] ["owner key"=tidb/autoid/leader/4cf691fc6f472c64] [ownerID=tidb:10080] [op=none]
[2024/09/16 20:04:04.161 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[autoid] tidb/autoid/leader ownerManager tidb:10080"]
[2024/09/16 20:04:04.161 +00:00] [INFO] [autoid.go:602] ["leader change of autoid service, this node become owner"] [addr=tidb:10080] [category="autoid service"]
[2024/09/16 20:04:05.085 +00:00] [INFO] [runaway.go:77] ["preparations for the runaway manager are finished and start runaway manager loop"]
[2024/09/16 20:04:05.085 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/16 20:04:05.086 +00:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/16 20:04:05.086 +00:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/16 20:04:05.124 +00:00] [INFO] [runtime.go:160] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2024/09/16 20:04:05.124 +00:00] [INFO] [runtime.go:402] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2024/09/16 20:04:05.124 +00:00] [INFO] [notifier.go:140] ["new etcd watcher created to watch timer events"] [EtcdKey=/tidb/timer/cluster/1/notify/69425081-59e1-4480-abef-377a32eff341] [watcherID=569f4f7a-6855-4535-a36c-e6cc249232cb]
[2024/09/16 20:04:05.147 +00:00] [INFO] [slots.go:205] ["initialize slot capacity"] [capacity=10]
[2024/09/16 20:04:05.150 +00:00] [INFO] [scheduler_manager.go:200] ["schedule task loop start"]
[2024/09/16 20:04:05.150 +00:00] [INFO] [scheduler_manager.go:453] ["collect loop start"]
[2024/09/16 20:04:05.150 +00:00] [INFO] [scheduler_manager.go:312] ["subtask table gc loop start"]
[2024/09/16 20:04:05.150 +00:00] [INFO] [scheduler_manager.go:373] ["cleanup loop start"]
[2024/09/16 20:04:06.076 +00:00] [INFO] [info.go:1164] [SetTiFlashGroupConfig]
[2024/09/16 20:04:15.490 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=52] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/16 20:04:15.505 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:106, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.481 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.505 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:106, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.481 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"]
[2024/09/16 20:04:15.507 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=107] [conn=952107012] [category=ddl] [job="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:106, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.481 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.520 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=52] [neededSchemaVersion=53] ["elapsed time"=574.375s] [gotSchemaVersion=53] [phyTblIDs="[106]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.523 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=107] [version=53]
[2024/09/16 20:04:15.524 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=53] ["take time"=6.654042ms] [job="ID:107, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:106, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.481 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.528 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=107] [conn=952107012] [job="ID:107, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:106, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.481 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.534 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=107]
[2024/09/16 20:04:15.534 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000006a]
[2024/09/16 20:04:15.537 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000006a] ["first new region left"="{Id:5001 StartKey:7480000000000000ff6800000000000000f8 EndKey:7480000000000000ff6a00000000000000f8 RegionEpoch:{ConfVer:1 Version:58} Peers:[id:5002 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.537 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5001]"]
[2024/09/16 20:04:15.543 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=53] [cur_db=test] [sql="CREATE TABLE `abTestVariants` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`broadcastId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`weight` int NOT NULL DEFAULT 1,\n\t`sendAt` timestamp,\n\tCONSTRAINT `abTestVariants_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.544 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107012] [session_alias=] [schemaVersion=53] [txnStartTS=452596087005118472] [txnScope=global]
[2024/09/16 20:04:15.550 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:109, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.550 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:109, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `abTestVariants` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`broadcastId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`weight` int NOT NULL DEFAULT 1,\n\t`sendAt` timestamp,\n\tCONSTRAINT `abTestVariants_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.553 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=109] [conn=952107012] [category=ddl] [job="ID:109, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.561 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=53] [neededSchemaVersion=54] ["elapsed time"=586.25s] [gotSchemaVersion=54] [phyTblIDs="[108]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.563 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=109] [version=54]
[2024/09/16 20:04:15.563 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=54] ["take time"=3.271333ms] [job="ID:109, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:108, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.567 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=109] [conn=952107012] [job="ID:109, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.570 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=109]
[2024/09/16 20:04:15.570 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000006c]
[2024/09/16 20:04:15.571 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=54] [cur_db=test] [sql="CREATE TABLE `accessTokens` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`teamId` bigint unsigned,\n\t`name` varchar(32),\n\t`hash` varchar(100) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastUsedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `accessTokens_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.572 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000006c] ["first new region left"="{Id:5003 StartKey:7480000000000000ff6a00000000000000f8 EndKey:7480000000000000ff6c00000000000000f8 RegionEpoch:{ConfVer:1 Version:59} Peers:[id:5004 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.573 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5003]"]
[2024/09/16 20:04:15.575 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:111, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.575 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:111, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `accessTokens` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`teamId` bigint unsigned,\n\t`name` varchar(32),\n\t`hash` varchar(100) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastUsedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `accessTokens_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.576 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=111] [conn=952107012] [category=ddl] [job="ID:111, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.586 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=54] [neededSchemaVersion=55] ["elapsed time"=831.542s] [gotSchemaVersion=55] [phyTblIDs="[110]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.588 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=111] [version=55]
[2024/09/16 20:04:15.601 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=55] ["take time"=17.147583ms] [job="ID:111, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:110, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.614 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=111] [conn=952107012] [job="ID:111, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.531 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.619 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=111]
[2024/09/16 20:04:15.619 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000006e]
[2024/09/16 20:04:15.620 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=55] [cur_db=test] [sql="CREATE TABLE `audiences` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`knownAttributes` json,\n\tCONSTRAINT `audiences_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.623 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000006e] ["first new region left"="{Id:5005 StartKey:7480000000000000ff6c00000000000000f8 EndKey:7480000000000000ff6e00000000000000f8 RegionEpoch:{ConfVer:1 Version:60} Peers:[id:5006 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.623 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5005]"]
[2024/09/16 20:04:15.625 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:113, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.581 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.625 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:113, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.581 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `audiences` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`knownAttributes` json,\n\tCONSTRAINT `audiences_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.627 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=113] [conn=952107012] [category=ddl] [job="ID:113, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.581 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.635 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=55] [neededSchemaVersion=56] ["elapsed time"=648.75s] [gotSchemaVersion=56] [phyTblIDs="[112]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.637 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=113] [version=56]
[2024/09/16 20:04:15.637 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=56] ["take time"=3.732042ms] [job="ID:113, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:112, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.581 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.642 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=113] [conn=952107012] [job="ID:113, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.581 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.646 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=113]
[2024/09/16 20:04:15.646 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000070]
[2024/09/16 20:04:15.647 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=56] [cur_db=test] [sql="CREATE TABLE `automationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationId` bigint unsigned NOT NULL,\n\t`type` enum('TRIGGER','ACTION','RULE','END') NOT NULL,\n\t`status` enum('DRAFT','ACTIVE','PAUSED','ARCHIVED') NOT NULL DEFAULT 'DRAFT',\n\t`subtype` enum('TRIGGER_CONTACT_SUBSCRIBED','TRIGGER_CONTACT_UNSUBSCRIBED','TRIGGER_CONTACT_TAG_ADDED','TRIGGER_CONTACT_TAG_REMOVED','TRIGGER_API_MANUAL','ACTION_SEND_EMAIL','ACTION_ADD_TAG','ACTION_REMOVE_TAG','ACTION_SUBSCRIBE_TO_AUDIENCE','ACTION_UNSUBSCRIBE_FROM_AUDIENCE','ACTION_UPDATE_CONTACT_ATTRIBUTES','RULE_IF_ELSE','RULE_WAIT_FOR_DURATION','RULE_PERCENTAGE_SPLIT','RULE_WAIT_FOR_TRIGGER','END') NOT NULL,\n\t`parentId` bigint unsigned,\n\t`branchIndex` int,\n\t`configuration` json NOT NULL,\n\t`emailId` bigint unsigned,\n\t`tagId` bigint unsigned,\n\t`audienceId` bigint unsigned,\n\tCONSTRAINT `automationSteps_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.650 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000070] ["first new region left"="{Id:5007 StartKey:7480000000000000ff6e00000000000000f8 EndKey:7480000000000000ff7000000000000000f8 RegionEpoch:{ConfVer:1 Version:61} Peers:[id:5008 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.650 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5007]"]
[2024/09/16 20:04:15.651 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:115, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.651 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:115, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `automationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationId` bigint unsigned NOT NULL,\n\t`type` enum('TRIGGER','ACTION','RULE','END') NOT NULL,\n\t`status` enum('DRAFT','ACTIVE','PAUSED','ARCHIVED') NOT NULL DEFAULT 'DRAFT',\n\t`subtype` enum('TRIGGER_CONTACT_SUBSCRIBED','TRIGGER_CONTACT_UNSUBSCRIBED','TRIGGER_CONTACT_TAG_ADDED','TRIGGER_CONTACT_TAG_REMOVED','TRIGGER_API_MANUAL','ACTION_SEND_EMAIL','ACTION_ADD_TAG','ACTION_REMOVE_TAG','ACTION_SUBSCRIBE_TO_AUDIENCE','ACTION_UNSUBSCRIBE_FROM_AUDIENCE','ACTION_UPDATE_CONTACT_ATTRIBUTES','RULE_IF_ELSE','RULE_WAIT_FOR_DURATION','RULE_PERCENTAGE_SPLIT','RULE_WAIT_FOR_TRIGGER','END') NOT NULL,\n\t`parentId` bigint unsigned,\n\t`branchIndex` int,\n\t`configuration` json NOT NULL,\n\t`emailId` bigint unsigned,\n\t`tagId` bigint unsigned,\n\t`audienceId` bigint unsigned,\n\tCONSTRAINT `automationSteps_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.652 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=115] [conn=952107012] [category=ddl] [job="ID:115, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.661 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=56] [neededSchemaVersion=57] ["elapsed time"=604.375s] [gotSchemaVersion=57] [phyTblIDs="[114]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.663 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=115] [version=57]
[2024/09/16 20:04:15.664 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=57] ["take time"=4.282834ms] [job="ID:115, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:114, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.667 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=115] [conn=952107012] [job="ID:115, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.671 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=115]
[2024/09/16 20:04:15.672 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000072]
[2024/09/16 20:04:15.672 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=57] [cur_db=test] [sql="CREATE TABLE `automations` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`description` varchar(512),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `automations_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.676 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000072] ["first new region left"="{Id:5009 StartKey:7480000000000000ff7000000000000000f8 EndKey:7480000000000000ff7200000000000000f8 RegionEpoch:{ConfVer:1 Version:62} Peers:[id:5010 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.676 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5009]"]
[2024/09/16 20:04:15.677 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:117, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.677 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:117, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `automations` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`description` varchar(512),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `automations_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.678 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=117] [conn=952107012] [category=ddl] [job="ID:117, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.685 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=57] [neededSchemaVersion=58] ["elapsed time"=416.916s] [gotSchemaVersion=58] [phyTblIDs="[116]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.687 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=117] [version=58]
[2024/09/16 20:04:15.687 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=58] ["take time"=3.141917ms] [job="ID:117, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:116, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.690 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=117] [conn=952107012] [job="ID:117, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.694 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=117]
[2024/09/16 20:04:15.695 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000074]
[2024/09/16 20:04:15.696 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=58] [cur_db=test] [sql="CREATE TABLE `broadcasts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`segmentId` bigint unsigned,\n\t`teamId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`emailContentId` bigint unsigned,\n\t`winningAbTestVariantId` bigint unsigned,\n\t`waitingTimeToPickWinner` int DEFAULT 4,\n\t`status` enum('SENT','SENDING','DRAFT','QUEUED_FOR_SENDING','SENDING_FAILED','DRAFT_ARCHIVED','ARCHIVED') DEFAULT 'DRAFT',\n\t`isAbTest` boolean NOT NULL DEFAULT false,\n\t`winningCriteria` enum('OPENS','CLICKS','CONVERSIONS'),\n\t`winningWaitTime` int,\n\t`sendAt` timestamp,\n\tCONSTRAINT `broadcasts_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.698 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000074] ["first new region left"="{Id:5011 StartKey:7480000000000000ff7200000000000000f8 EndKey:7480000000000000ff7400000000000000f8 RegionEpoch:{ConfVer:1 Version:63} Peers:[id:5012 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.699 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5011]"]
[2024/09/16 20:04:15.700 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:119, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.700 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:119, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `broadcasts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`segmentId` bigint unsigned,\n\t`teamId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`emailContentId` bigint unsigned,\n\t`winningAbTestVariantId` bigint unsigned,\n\t`waitingTimeToPickWinner` int DEFAULT 4,\n\t`status` enum('SENT','SENDING','DRAFT','QUEUED_FOR_SENDING','SENDING_FAILED','DRAFT_ARCHIVED','ARCHIVED') DEFAULT 'DRAFT',\n\t`isAbTest` boolean NOT NULL DEFAULT false,\n\t`winningCriteria` enum('OPENS','CLICKS','CONVERSIONS'),\n\t`winningWaitTime` int,\n\t`sendAt` timestamp,\n\tCONSTRAINT `broadcasts_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.702 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=119] [conn=952107012] [category=ddl] [job="ID:119, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.710 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=58] [neededSchemaVersion=59] ["elapsed time"=543.167s] [gotSchemaVersion=59] [phyTblIDs="[118]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.712 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=119] [version=59]
[2024/09/16 20:04:15.712 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=59] ["take time"=3.808083ms] [job="ID:119, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:118, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.716 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=119] [conn=952107012] [job="ID:119, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.720 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=119]
[2024/09/16 20:04:15.720 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000076]
[2024/09/16 20:04:15.722 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=59] [cur_db=test] [sql="CREATE TABLE `contactAutomationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationStepId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`status` enum('PENDING','ACTIVE','COMPLETED','FAILED','HALTED') DEFAULT 'PENDING',\n\t`haltedAt` timestamp,\n\t`failedAt` timestamp,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp,\n\t`output` json,\n\tCONSTRAINT `contactAutomationSteps_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.725 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000076] ["first new region left"="{Id:5013 StartKey:7480000000000000ff7400000000000000f8 EndKey:7480000000000000ff7600000000000000f8 RegionEpoch:{ConfVer:1 Version:64} Peers:[id:5014 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.725 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5013]"]
[2024/09/16 20:04:15.727 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:121, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.727 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:121, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contactAutomationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationStepId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`status` enum('PENDING','ACTIVE','COMPLETED','FAILED','HALTED') DEFAULT 'PENDING',\n\t`haltedAt` timestamp,\n\t`failedAt` timestamp,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp,\n\t`output` json,\n\tCONSTRAINT `contactAutomationSteps_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.728 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=121] [conn=952107012] [category=ddl] [job="ID:121, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.735 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=59] [neededSchemaVersion=60] ["elapsed time"=480.875s] [gotSchemaVersion=60] [phyTblIDs="[120]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.737 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=121] [version=60]
[2024/09/16 20:04:15.737 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=60] ["take time"=3.339458ms] [job="ID:121, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:120, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.740 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=121] [conn=952107012] [job="ID:121, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.682 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.744 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=121]
[2024/09/16 20:04:15.744 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000078]
[2024/09/16 20:04:15.745 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=60] [cur_db=test] [sql="CREATE TABLE `contactImports` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fileIdentifier` varchar(32) NOT NULL,\n\t`name` varchar(50),\n\t`audienceId` bigint unsigned NOT NULL,\n\t`url` varchar(100) NOT NULL,\n\t`status` enum('PENDING','PROCESSING','FAILED','SUCCESS'),\n\t`subscribeAllContacts` boolean DEFAULT true,\n\t`updateExistingContacts` boolean DEFAULT true,\n\t`createdAt` timestamp DEFAULT (now()),\n\t`attributesMap` json NOT NULL,\n\tCONSTRAINT `contactImports_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contactImports_fileIdentifier_unique` UNIQUE(`fileIdentifier`)\n);"] [user=root@%]
[2024/09/16 20:04:15.750 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000078] ["first new region left"="{Id:5015 StartKey:7480000000000000ff7600000000000000f8 EndKey:7480000000000000ff7800000000000000f8 RegionEpoch:{ConfVer:1 Version:65} Peers:[id:5016 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.750 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5015]"]
[2024/09/16 20:04:15.751 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:123, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.751 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:123, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contactImports` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fileIdentifier` varchar(32) NOT NULL,\n\t`name` varchar(50),\n\t`audienceId` bigint unsigned NOT NULL,\n\t`url` varchar(100) NOT NULL,\n\t`status` enum('PENDING','PROCESSING','FAILED','SUCCESS'),\n\t`subscribeAllContacts` boolean DEFAULT true,\n\t`updateExistingContacts` boolean DEFAULT true,\n\t`createdAt` timestamp DEFAULT (now()),\n\t`attributesMap` json NOT NULL,\n\tCONSTRAINT `contactImports_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contactImports_fileIdentifier_unique` UNIQUE(`fileIdentifier`)\n);"]
[2024/09/16 20:04:15.753 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=123] [conn=952107012] [category=ddl] [job="ID:123, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.761 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=60] [neededSchemaVersion=61] ["elapsed time"=561.333s] [gotSchemaVersion=61] [phyTblIDs="[122]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.764 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=123] [version=61]
[2024/09/16 20:04:15.765 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=61] ["take time"=5.451125ms] [job="ID:123, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:122, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.770 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=123] [conn=952107012] [job="ID:123, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.776 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=123]
[2024/09/16 20:04:15.776 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000007a]
[2024/09/16 20:04:15.777 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=61] [cur_db=test] [sql="CREATE TABLE `contacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`firstName` varchar(50),\n\t`lastName` varchar(50),\n\t`email` varchar(80) NOT NULL,\n\t`avatarUrl` varchar(256),\n\t`subscribedAt` timestamp,\n\t`unsubscribedAt` timestamp,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailVerificationToken` varchar(100),\n\t`emailVerificationTokenExpiresAt` timestamp,\n\t`contactImportId` bigint unsigned,\n\t`attributes` json,\n\t`createdAt` timestamp DEFAULT (now()),\n\tCONSTRAINT `contacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `ContactEmailAudienceIdKey` UNIQUE(`email`,`audienceId`)\n);"] [user=root@%]
[2024/09/16 20:04:15.781 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000007a] ["first new region left"="{Id:5017 StartKey:7480000000000000ff7800000000000000f8 EndKey:7480000000000000ff7a00000000000000f8 RegionEpoch:{ConfVer:1 Version:66} Peers:[id:5018 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.781 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5017]"]
[2024/09/16 20:04:15.785 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:125, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.785 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:125, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`firstName` varchar(50),\n\t`lastName` varchar(50),\n\t`email` varchar(80) NOT NULL,\n\t`avatarUrl` varchar(256),\n\t`subscribedAt` timestamp,\n\t`unsubscribedAt` timestamp,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailVerificationToken` varchar(100),\n\t`emailVerificationTokenExpiresAt` timestamp,\n\t`contactImportId` bigint unsigned,\n\t`attributes` json,\n\t`createdAt` timestamp DEFAULT (now()),\n\tCONSTRAINT `contacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `ContactEmailAudienceIdKey` UNIQUE(`email`,`audienceId`)\n);"]
[2024/09/16 20:04:15.787 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=125] [conn=952107012] [category=ddl] [job="ID:125, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.796 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=61] [neededSchemaVersion=62] ["elapsed time"=850.291s] [gotSchemaVersion=62] [phyTblIDs="[124]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.797 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=125] [version=62]
[2024/09/16 20:04:15.798 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=62] ["take time"=3.896583ms] [job="ID:125, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:124, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.802 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=125] [conn=952107012] [job="ID:125, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.732 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.806 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=125]
[2024/09/16 20:04:15.806 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000007c]
[2024/09/16 20:04:15.807 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=62] [cur_db=test] [sql="CREATE TABLE `emailContents` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fromName` varchar(255),\n\t`fromEmail` varchar(255),\n\t`replyToEmail` varchar(255),\n\t`replyToName` varchar(255),\n\t`contentJson` json,\n\t`contentText` text,\n\t`contentHtml` text,\n\t`subject` varchar(255),\n\t`previewText` varchar(255),\n\tCONSTRAINT `emailContents_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.810 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000007c] ["first new region left"="{Id:5019 StartKey:7480000000000000ff7a00000000000000f8 EndKey:7480000000000000ff7c00000000000000f8 RegionEpoch:{ConfVer:1 Version:67} Peers:[id:5020 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.810 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5019]"]
[2024/09/16 20:04:15.812 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:127, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:126, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.812 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:127, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:126, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `emailContents` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fromName` varchar(255),\n\t`fromEmail` varchar(255),\n\t`replyToEmail` varchar(255),\n\t`replyToName` varchar(255),\n\t`contentJson` json,\n\t`contentText` text,\n\t`contentHtml` text,\n\t`subject` varchar(255),\n\t`previewText` varchar(255),\n\tCONSTRAINT `emailContents_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.813 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=127] [conn=952107012] [category=ddl] [job="ID:127, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:126, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.821 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=62] [neededSchemaVersion=63] ["elapsed time"=545.083s] [gotSchemaVersion=63] [phyTblIDs="[126]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.822 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=127] [version=63]
[2024/09/16 20:04:15.823 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=63] ["take time"=3.442ms] [job="ID:127, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:126, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.826 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=127] [conn=952107012] [job="ID:127, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:126, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.830 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=127]
[2024/09/16 20:04:15.830 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000007e]
[2024/09/16 20:04:15.831 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=63] [cur_db=test] [sql="CREATE TABLE `emails` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`type` enum('AUTOMATION','TRANSACTIONAL') NOT NULL,\n\t`title` varchar(50) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned,\n\tCONSTRAINT `emails_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.835 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:129, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.835 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000007e] ["first new region left"="{Id:5021 StartKey:7480000000000000ff7c00000000000000f8 EndKey:7480000000000000ff7e00000000000000f8 RegionEpoch:{ConfVer:1 Version:68} Peers:[id:5022 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.835 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5021]"]
[2024/09/16 20:04:15.835 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:129, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `emails` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`type` enum('AUTOMATION','TRANSACTIONAL') NOT NULL,\n\t`title` varchar(50) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned,\n\tCONSTRAINT `emails_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.837 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=129] [conn=952107012] [category=ddl] [job="ID:129, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.844 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=63] [neededSchemaVersion=64] ["elapsed time"=555.667s] [gotSchemaVersion=64] [phyTblIDs="[128]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.845 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=129] [version=64]
[2024/09/16 20:04:15.846 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=64] ["take time"=3.287958ms] [job="ID:129, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:128, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.849 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=129] [conn=952107012] [job="ID:129, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.853 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=129]
[2024/09/16 20:04:15.853 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000080]
[2024/09/16 20:04:15.854 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=64] [cur_db=test] [sql="CREATE TABLE `segments` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`filterGroups` json NOT NULL,\n\tCONSTRAINT `segments_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.858 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000080] ["first new region left"="{Id:5023 StartKey:7480000000000000ff7e00000000000000f8 EndKey:7480000000000000ff8000000000000000f8 RegionEpoch:{ConfVer:1 Version:69} Peers:[id:5024 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.858 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5023]"]
[2024/09/16 20:04:15.858 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:131, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.858 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:131, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `segments` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`filterGroups` json NOT NULL,\n\tCONSTRAINT `segments_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.860 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=131] [conn=952107012] [category=ddl] [job="ID:131, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.868 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=64] [neededSchemaVersion=65] ["elapsed time"=502.291s] [gotSchemaVersion=65] [phyTblIDs="[130]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.869 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=131] [version=65]
[2024/09/16 20:04:15.870 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=65] ["take time"=3.232666ms] [job="ID:131, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:130, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.872 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=131] [conn=952107012] [job="ID:131, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.877 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=131]
[2024/09/16 20:04:15.877 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000082]
[2024/09/16 20:04:15.877 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=65] [cur_db=test] [sql="CREATE TABLE `sendingDomains` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`dkimSubDomain` varchar(120) NOT NULL,\n\t`dkimPublicKey` text NOT NULL,\n\t`dkimPrivateKey` text NOT NULL,\n\t`returnPathSubDomain` varchar(120) NOT NULL,\n\t`returnPathDomainCnameValue` varchar(120) NOT NULL,\n\t`dkimVerifiedAt` timestamp,\n\t`returnPathDomainVerifiedAt` timestamp,\n\tCONSTRAINT `sendingDomains_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.881 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000082] ["first new region left"="{Id:5025 StartKey:7480000000000000ff8000000000000000f8 EndKey:7480000000000000ff8200000000000000f8 RegionEpoch:{ConfVer:1 Version:70} Peers:[id:5026 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.882 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5025]"]
[2024/09/16 20:04:15.882 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:133, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.882 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:133, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `sendingDomains` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`dkimSubDomain` varchar(120) NOT NULL,\n\t`dkimPublicKey` text NOT NULL,\n\t`dkimPrivateKey` text NOT NULL,\n\t`returnPathSubDomain` varchar(120) NOT NULL,\n\t`returnPathDomainCnameValue` varchar(120) NOT NULL,\n\t`dkimVerifiedAt` timestamp,\n\t`returnPathDomainVerifiedAt` timestamp,\n\tCONSTRAINT `sendingDomains_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.884 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=133] [conn=952107012] [category=ddl] [job="ID:133, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.893 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=65] [neededSchemaVersion=66] ["elapsed time"=537.584s] [gotSchemaVersion=66] [phyTblIDs="[132]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.895 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=133] [version=66]
[2024/09/16 20:04:15.895 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=66] ["take time"=3.549709ms] [job="ID:133, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:132, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.898 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=133] [conn=952107012] [job="ID:133, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.831 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.902 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=133]
[2024/09/16 20:04:15.902 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000084]
[2024/09/16 20:04:15.903 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=66] [cur_db=test] [sql="CREATE TABLE `settings` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`url` varchar(256),\n\t`domain` varchar(50) NOT NULL,\n\t`installedSslCertificate` boolean NOT NULL DEFAULT false,\n\tCONSTRAINT `settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `settings_url_unique` UNIQUE(`url`),\n\tCONSTRAINT `settings_domain_unique` UNIQUE(`domain`)\n);"] [user=root@%]
[2024/09/16 20:04:15.907 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000084] ["first new region left"="{Id:5027 StartKey:7480000000000000ff8200000000000000f8 EndKey:7480000000000000ff8400000000000000f8 RegionEpoch:{ConfVer:1 Version:71} Peers:[id:5028 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.907 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5027]"]
[2024/09/16 20:04:15.908 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:135, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:134, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.908 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:135, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:134, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `settings` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`url` varchar(256),\n\t`domain` varchar(50) NOT NULL,\n\t`installedSslCertificate` boolean NOT NULL DEFAULT false,\n\tCONSTRAINT `settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `settings_url_unique` UNIQUE(`url`),\n\tCONSTRAINT `settings_domain_unique` UNIQUE(`domain`)\n);"]
[2024/09/16 20:04:15.909 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=135] [conn=952107012] [category=ddl] [job="ID:135, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:134, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.916 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=66] [neededSchemaVersion=67] ["elapsed time"=539s] [gotSchemaVersion=67] [phyTblIDs="[134]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.918 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=135] [version=67]
[2024/09/16 20:04:15.918 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=67] ["take time"=3.47075ms] [job="ID:135, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:134, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.921 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=135] [conn=952107012] [job="ID:135, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:134, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.926 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=135]
[2024/09/16 20:04:15.926 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000086]
[2024/09/16 20:04:15.927 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=67] [cur_db=test] [sql="CREATE TABLE `tags` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(256) NOT NULL,\n\t`description` varchar(256),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `tags_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagNameAudienceIdKey` UNIQUE(`name`,`audienceId`)\n);"] [user=root@%]
[2024/09/16 20:04:15.929 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000086] ["first new region left"="{Id:5029 StartKey:7480000000000000ff8400000000000000f8 EndKey:7480000000000000ff8600000000000000f8 RegionEpoch:{ConfVer:1 Version:72} Peers:[id:5030 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.930 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5029]"]
[2024/09/16 20:04:15.931 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:137, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.931 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:137, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `tags` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(256) NOT NULL,\n\t`description` varchar(256),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `tags_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagNameAudienceIdKey` UNIQUE(`name`,`audienceId`)\n);"]
[2024/09/16 20:04:15.932 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=137] [conn=952107012] [category=ddl] [job="ID:137, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.940 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=67] [neededSchemaVersion=68] ["elapsed time"=465s] [gotSchemaVersion=68] [phyTblIDs="[136]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.941 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=137] [version=68]
[2024/09/16 20:04:15.942 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=68] ["take time"=3.335833ms] [job="ID:137, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:136, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.945 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=137] [conn=952107012] [job="ID:137, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.881 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.948 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=137]
[2024/09/16 20:04:15.948 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000088]
[2024/09/16 20:04:15.949 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=68] [cur_db=test] [sql="CREATE TABLE `tagsOnContacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`tagId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`assignedAt` timestamp,\n\tCONSTRAINT `tagsOnContacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagsOnContactsTagIdContactIdKey` UNIQUE(`tagId`,`contactId`)\n);"] [user=root@%]
[2024/09/16 20:04:15.953 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000088] ["first new region left"="{Id:5031 StartKey:7480000000000000ff8600000000000000f8 EndKey:7480000000000000ff8800000000000000f8 RegionEpoch:{ConfVer:1 Version:73} Peers:[id:5032 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.953 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5031]"]
[2024/09/16 20:04:15.953 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:139, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.953 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:139, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `tagsOnContacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`tagId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`assignedAt` timestamp,\n\tCONSTRAINT `tagsOnContacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagsOnContactsTagIdContactIdKey` UNIQUE(`tagId`,`contactId`)\n);"]
[2024/09/16 20:04:15.955 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=139] [conn=952107012] [category=ddl] [job="ID:139, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.963 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=68] [neededSchemaVersion=69] ["elapsed time"=424.709s] [gotSchemaVersion=69] [phyTblIDs="[138]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.964 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=139] [version=69]
[2024/09/16 20:04:15.964 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=69] ["take time"=3.082917ms] [job="ID:139, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.967 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=139] [conn=952107012] [job="ID:139, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.971 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=139]
[2024/09/16 20:04:15.971 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000008a]
[2024/09/16 20:04:15.972 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=69] [cur_db=test] [sql="CREATE TABLE `teamMemberships` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`email` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`role` enum('ADMINISTRATOR','MANAGER','AUTHOR','GUEST'),\n\t`status` enum('PENDING','ACTIVE'),\n\t`invitedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL,\n\tCONSTRAINT `teamMemberships_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.975 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000008a] ["first new region left"="{Id:5033 StartKey:7480000000000000ff8800000000000000f8 EndKey:7480000000000000ff8a00000000000000f8 RegionEpoch:{ConfVer:1 Version:74} Peers:[id:5034 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.975 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5033]"]
[2024/09/16 20:04:15.976 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:141, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.976 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:141, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `teamMemberships` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`email` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`role` enum('ADMINISTRATOR','MANAGER','AUTHOR','GUEST'),\n\t`status` enum('PENDING','ACTIVE'),\n\t`invitedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL,\n\tCONSTRAINT `teamMemberships_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:15.977 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=141] [conn=952107012] [category=ddl] [job="ID:141, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.985 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=69] [neededSchemaVersion=70] ["elapsed time"=449.375s] [gotSchemaVersion=70] [phyTblIDs="[140]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:15.987 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=141] [version=70]
[2024/09/16 20:04:15.987 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=70] ["take time"=3.284834ms] [job="ID:141, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:140, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.990 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=141] [conn=952107012] [job="ID:141, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.932 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:15.994 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=141]
[2024/09/16 20:04:15.994 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000008c]
[2024/09/16 20:04:15.995 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=70] [cur_db=test] [sql="CREATE TABLE `teams` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`userId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`broadcastEditor` enum('DEFAULT','MARKDOWN'),\n\tCONSTRAINT `teams_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:15.998 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000008c] ["first new region left"="{Id:5035 StartKey:7480000000000000ff8a00000000000000f8 EndKey:7480000000000000ff8c00000000000000f8 RegionEpoch:{ConfVer:1 Version:75} Peers:[id:5036 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:15.998 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5035]"]
[2024/09/16 20:04:15.999 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:143, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:15.999 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:143, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `teams` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`userId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`broadcastEditor` enum('DEFAULT','MARKDOWN'),\n\tCONSTRAINT `teams_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:16.001 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=143] [conn=952107012] [category=ddl] [job="ID:143, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.009 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=70] [neededSchemaVersion=71] ["elapsed time"=548.75s] [gotSchemaVersion=71] [phyTblIDs="[142]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:16.011 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=143] [version=71]
[2024/09/16 20:04:16.012 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=71] ["take time"=4.027875ms] [job="ID:143, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:142, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.016 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=143] [conn=952107012] [job="ID:143, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.020 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=143]
[2024/09/16 20:04:16.021 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=74800000000000008e]
[2024/09/16 20:04:16.021 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=71] [cur_db=test] [sql="CREATE TABLE `users` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`email` varchar(80) NOT NULL,\n\t`name` varchar(80),\n\t`avatarUrl` varchar(256),\n\t`password` varchar(256) NOT NULL,\n\tCONSTRAINT `users_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `users_email_unique` UNIQUE(`email`)\n);"] [user=root@%]
[2024/09/16 20:04:16.025 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=74800000000000008e] ["first new region left"="{Id:5037 StartKey:7480000000000000ff8c00000000000000f8 EndKey:7480000000000000ff8e00000000000000f8 RegionEpoch:{ConfVer:1 Version:76} Peers:[id:5038 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:16.025 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5037]"]
[2024/09/16 20:04:16.025 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:145, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:144, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:16.026 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:145, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:144, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `users` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`email` varchar(80) NOT NULL,\n\t`name` varchar(80),\n\t`avatarUrl` varchar(256),\n\t`password` varchar(256) NOT NULL,\n\tCONSTRAINT `users_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `users_email_unique` UNIQUE(`email`)\n);"]
[2024/09/16 20:04:16.027 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=145] [conn=952107012] [category=ddl] [job="ID:145, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:144, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.037 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=71] [neededSchemaVersion=72] ["elapsed time"=690.792s] [gotSchemaVersion=72] [phyTblIDs="[144]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:16.040 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=145] [version=72]
[2024/09/16 20:04:16.040 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=72] ["take time"=5.294083ms] [job="ID:145, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:144, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.046 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=145] [conn=952107012] [job="ID:145, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:144, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:15.981 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.052 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=145]
[2024/09/16 20:04:16.052 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000090]
[2024/09/16 20:04:16.053 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=72] [cur_db=test] [sql="CREATE TABLE `webhooks` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`url` varchar(256) NOT NULL,\n\t`webhookEvent` enum('ALL_EVENTS','CONTACT_ADDED','CONTACT_REMOVED','CONTACT_TAG_ADDED','CONTACT_TAG_REMOVED','BROADCAST_SENT','BROADCAST_PAUSED','BROADCAST_EMAIL_OPENED','BROADCAST_EMAIL_LINK_CLICKED','AUDIENCE_ADDED','TAG_ADDED','TAG_REMOVED'),\n\t`teamId` bigint unsigned NOT NULL,\n\tCONSTRAINT `webhooks_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 20:04:16.058 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000090] ["first new region left"="{Id:5039 StartKey:7480000000000000ff8e00000000000000f8 EndKey:7480000000000000ff9000000000000000f8 RegionEpoch:{ConfVer:1 Version:77} Peers:[id:5040 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:16.058 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5039]"]
[2024/09/16 20:04:16.059 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:147, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:16.059 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:147, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `webhooks` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`url` varchar(256) NOT NULL,\n\t`webhookEvent` enum('ALL_EVENTS','CONTACT_ADDED','CONTACT_REMOVED','CONTACT_TAG_ADDED','CONTACT_TAG_REMOVED','BROADCAST_SENT','BROADCAST_PAUSED','BROADCAST_EMAIL_OPENED','BROADCAST_EMAIL_LINK_CLICKED','AUDIENCE_ADDED','TAG_ADDED','TAG_REMOVED'),\n\t`teamId` bigint unsigned NOT NULL,\n\tCONSTRAINT `webhooks_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 20:04:16.060 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=147] [conn=952107012] [category=ddl] [job="ID:147, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.067 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=72] [neededSchemaVersion=73] ["elapsed time"=490.542s] [gotSchemaVersion=73] [phyTblIDs="[146]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 20:04:16.069 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=147] [version=73]
[2024/09/16 20:04:16.070 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=73] ["take time"=3.400875ms] [job="ID:147, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:146, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.072 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=147] [conn=952107012] [job="ID:147, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:16.076 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=147]
[2024/09/16 20:04:16.077 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=14] ["first split key"=748000000000000092]
[2024/09/16 20:04:16.078 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=73] [cur_db=test] [sql="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_broadcastId_broadcasts_id_fk` FOREIGN KEY (`broadcastId`) REFERENCES `broadcasts`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:16.078 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:16.078 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:16.080 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=14] ["first at"=748000000000000092] ["first new region left"="{Id:5041 StartKey:7480000000000000ff9000000000000000f8 EndKey:7480000000000000ff9200000000000000f8 RegionEpoch:{ConfVer:1 Version:78} Peers:[id:5042 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 20:04:16.081 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5041]"]
[2024/09/16 20:04:16.082 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:148, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:16.082 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:148, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_broadcastId_broadcasts_id_fk` FOREIGN KEY (`broadcastId`) REFERENCES `broadcasts`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:16.084 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:16.085 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"abTestVariants_broadcastId_broadcasts_id_fk\",\"L\":\"abtestvariants_broadcastid_broadcasts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"broadcastId\",\"L\":\"broadcastid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:16.092 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=73] [neededSchemaVersion=74] ["elapsed time"=461.042s] [gotSchemaVersion=74] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:16.093 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=74]
[2024/09/16 20:04:16.094 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=74] ["take time"=3.128791ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:16.096 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:16.103 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=74] [neededSchemaVersion=75] ["elapsed time"=505.167s] [gotSchemaVersion=75] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:16.104 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=75]
[2024/09/16 20:04:16.105 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=75] ["take time"=3.221375ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:16.107 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:16.112 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=75] [neededSchemaVersion=76] ["elapsed time"=469.875s] [gotSchemaVersion=76] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:16.114 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=76]
[2024/09/16 20:04:16.114 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=76] ["take time"=2.817625ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:16.116 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:16.117 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=148] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 20:04:16.118 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{108 abTestVariants utf8mb4 utf8mb4_bin [0x40095026e0 0x4009502840 0x40095029a0 0x4009502b00 0x4009502c60 0x4009502dc0] [0x4009526090] [] [] public true false 0  0 0 0 0 6 1 0 0 452596087149297689 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=108] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:16.118 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=148] [physicalTableID=108] [startKey=] [endKey=]
[2024/09/16 20:04:16.126 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=148]
[2024/09/16 20:04:16.127 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087149297699, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:16.128 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=148] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 20:04:16.132 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/148/0]
[2024/09/16 20:04:16.136 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=108] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:16.149 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=1]
[2024/09/16 20:04:16.150 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=1] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:16.653 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=1] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:16.653 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=1] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:16.654 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=1] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:16.655 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{108 abTestVariants utf8mb4 utf8mb4_bin [0x400a4e2160 0x400a4e22c0 0x400a4e2420 0x400a4e2580 0x400a4e26e0 0x400a4e2840] [0x4009cfcc60] [] [] public true false 0  0 0 0 0 6 1 0 0 452596087149297689 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=108] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:16.655 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=1] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:17.159 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=1] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:17.358 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:17.365 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=76] [neededSchemaVersion=77] ["elapsed time"=515.625s] [gotSchemaVersion=77] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:17.367 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=77]
[2024/09/16 20:04:17.368 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=77] ["take time"=3.671542ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.370 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087149297699, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.371 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=148] [table=abTestVariants] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 20:04:17.377 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=77] [neededSchemaVersion=78] ["elapsed time"=433.125s] [gotSchemaVersion=78] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:17.378 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=78]
[2024/09/16 20:04:17.379 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=78] ["take time"=3.698834ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.382 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.382 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=148] [physicalTableID=108] [startKey=74800000000000006c5f69ffff000000000001] [endKey=74800000000000006c5f69ffff000000000001ff]
[2024/09/16 20:04:17.386 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=148]
[2024/09/16 20:04:17.387 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087490084866, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.389 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087490084866, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000006c5f69ffff000000000001,EndKey:74800000000000006c5f69ffff000000000001ff,First:false,PhysicalTableID:108,Ingest mode:false"]
[2024/09/16 20:04:17.390 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=108] ["start key"=74800000000000006c5f69ffff000000000001] ["end key"=74800000000000006c5f69ffff000000000001ff]
[2024/09/16 20:04:17.391 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=108] ["range start"=74800000000000006c5f69ffff000000000001] ["range end"=74800000000000006c5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:17.391 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000006c5f69ffff000000000001] [endKey=74800000000000006c5f69ffff000000000001ff]
[2024/09/16 20:04:17.391 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=148]
[2024/09/16 20:04:17.391 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=148]
[2024/09/16 20:04:17.391 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=148]
[2024/09/16 20:04:17.391 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 108, range: [74800000000000006c5f69ffff000000000001, 74800000000000006c5f69ffff000000000001ff), jobID: 148"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000006c5f69ffff000000000001ff00] ["take time"=602.75s]
[2024/09/16 20:04:17.391 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=148]
[2024/09/16 20:04:17.392 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000006c5f69ffff000000000001]
[2024/09/16 20:04:17.392 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:17.397 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=78] [neededSchemaVersion=79] ["elapsed time"=480.625s] [gotSchemaVersion=79] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:17.399 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=79]
[2024/09/16 20:04:17.399 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=79] ["take time"=3.115875ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.402 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.408 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=79] [neededSchemaVersion=80] ["elapsed time"=538.917s] [gotSchemaVersion=80] [phyTblIDs="[108]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:17.409 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=80]
[2024/09/16 20:04:17.409 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=80] ["take time"=2.892209ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.411 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.419 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=80] [neededSchemaVersion=81] ["elapsed time"=461.459s] [gotSchemaVersion=81] [phyTblIDs="[108]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:17.420 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=81]
[2024/09/16 20:04:17.421 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=81] ["take time"=4.02475ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.423 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.431 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=81] [neededSchemaVersion=82] ["elapsed time"=700.375s] [gotSchemaVersion=82] [phyTblIDs="[108]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:17.432 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=82]
[2024/09/16 20:04:17.433 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=82] ["take time"=3.646833ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.436 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [category=ddl] [job="ID:148, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087490084866, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:17.437 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:17.442 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=82] [neededSchemaVersion=83] ["elapsed time"=514.834s] [gotSchemaVersion=83] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:17.444 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=148] [version=83]
[2024/09/16 20:04:17.454 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=83] ["take time"=12.58125ms] [job="ID:148, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.463 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=148]
[2024/09/16 20:04:17.464 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=148] [tableID=108] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:17.468 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=148] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:17.468 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=148] [conn=952107012] [job="ID:148, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:16.032 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.474 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=148]
[2024/09/16 20:04:17.476 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=83] [cur_db=test] [sql="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:17.476 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:17.476 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:17.480 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:149, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:17.480 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:149, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:17.482 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.482 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"abTestVariants_emailContentId_emailContents_id_fk\",\"L\":\"abtestvariants_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:17.488 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=83] [neededSchemaVersion=84] ["elapsed time"=462.792s] [gotSchemaVersion=84] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:17.490 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=84]
[2024/09/16 20:04:17.491 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=84] ["take time"=3.844042ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.493 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.499 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=84] [neededSchemaVersion=85] ["elapsed time"=488.542s] [gotSchemaVersion=85] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:17.500 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=85]
[2024/09/16 20:04:17.501 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=85] ["take time"=3.145792ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.503 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.509 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=85] [neededSchemaVersion=86] ["elapsed time"=403.458s] [gotSchemaVersion=86] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:17.510 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=86]
[2024/09/16 20:04:17.511 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=86] ["take time"=2.969375ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:17.513 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.514 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=149] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:17.514 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{108 abTestVariants utf8mb4 utf8mb4_bin [0x400b368580 0x400b3686e0 0x400b368840 0x400b3689a0 0x400b368b00 0x400b368c60] [0x400b36eab0 0x400b36ecf0] [] [0x400b147980] public true false 0  0 0 0 0 6 2 1 0 452596087516561426 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=108] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:17.515 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=149] [physicalTableID=108] [startKey=] [endKey=]
[2024/09/16 20:04:17.519 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=149]
[2024/09/16 20:04:17.520 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087516561436, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:17.521 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=149] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:17.524 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/149/0]
[2024/09/16 20:04:17.525 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=108] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:17.532 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=2]
[2024/09/16 20:04:17.532 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=2] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:17.651 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=1]
[2024/09/16 20:04:17.653 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:17.653 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=1]
[2024/09/16 20:04:17.661 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:18.033 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=2] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:18.034 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=2] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:18.036 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=2] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:18.037 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{108 abTestVariants utf8mb4 utf8mb4_bin [0x400bc062c0 0x400bc06420 0x400bc06580 0x400bc066e0 0x400bc06840 0x400bc069a0] [0x400bc605a0 0x400bc607e0] [] [0x400babd8c0] public true false 0  0 0 0 0 6 2 1 0 452596087516561426 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=108] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:18.037 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=2] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:18.537 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=2] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:18.737 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:18.746 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=86] [neededSchemaVersion=87] ["elapsed time"=645.75s] [gotSchemaVersion=87] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:18.747 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=87]
[2024/09/16 20:04:18.748 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=87] ["take time"=4.095084ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.751 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087516561436, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.751 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=149] [table=abTestVariants] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:18.761 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=87] [neededSchemaVersion=88] ["elapsed time"=611.167s] [gotSchemaVersion=88] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:18.762 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=88]
[2024/09/16 20:04:18.763 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=88] ["take time"=3.834833ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.767 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.768 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=149] [physicalTableID=108] [startKey=74800000000000006c5f69ffff000000000002] [endKey=74800000000000006c5f69ffff000000000002ff]
[2024/09/16 20:04:18.773 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=149]
[2024/09/16 20:04:18.775 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087843979288, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.777 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087843979288, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000006c5f69ffff000000000002,EndKey:74800000000000006c5f69ffff000000000002ff,First:false,PhysicalTableID:108,Ingest mode:false"]
[2024/09/16 20:04:18.779 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=108] ["start key"=74800000000000006c5f69ffff000000000002] ["end key"=74800000000000006c5f69ffff000000000002ff]
[2024/09/16 20:04:18.780 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=108] ["range start"=74800000000000006c5f69ffff000000000002] ["range end"=74800000000000006c5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:18.780 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000006c5f69ffff000000000002] [endKey=74800000000000006c5f69ffff000000000002ff]
[2024/09/16 20:04:18.780 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=149]
[2024/09/16 20:04:18.780 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=149]
[2024/09/16 20:04:18.780 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=149]
[2024/09/16 20:04:18.780 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [task="taskID: 1, physicalTableID: 108, range: [74800000000000006c5f69ffff000000000002, 74800000000000006c5f69ffff000000000002ff), jobID: 149"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000006c5f69ffff000000000002ff00] ["take time"=511.167s]
[2024/09/16 20:04:18.781 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=149]
[2024/09/16 20:04:18.781 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000006c5f69ffff000000000002]
[2024/09/16 20:04:18.781 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:18.789 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=88] [neededSchemaVersion=89] ["elapsed time"=738.5s] [gotSchemaVersion=89] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:18.791 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=89]
[2024/09/16 20:04:18.792 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=89] ["take time"=5.072291ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.796 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.810 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=89] [neededSchemaVersion=90] ["elapsed time"=635.625s] [gotSchemaVersion=90] [phyTblIDs="[108]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:18.812 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=90]
[2024/09/16 20:04:18.813 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=90] ["take time"=6.298042ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.817 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.835 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=90] [neededSchemaVersion=91] ["elapsed time"=617.625s] [gotSchemaVersion=91] [phyTblIDs="[108]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:18.837 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=91]
[2024/09/16 20:04:18.838 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=91] ["take time"=4.429333ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.842 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.861 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=91] [neededSchemaVersion=92] ["elapsed time"=1.125708ms] [gotSchemaVersion=92] [phyTblIDs="[108]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:18.863 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=92]
[2024/09/16 20:04:18.864 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=92] ["take time"=5.257166ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.868 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [category=ddl] [job="ID:149, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087843979288, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:18.870 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:18.875 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=92] [neededSchemaVersion=93] ["elapsed time"=527.667s] [gotSchemaVersion=93] [phyTblIDs="[108]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:18.877 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=149] [version=93]
[2024/09/16 20:04:18.878 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=93] ["take time"=3.950458ms] [job="ID:149, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.883 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=149]
[2024/09/16 20:04:18.885 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=149] [tableID=108] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:18.887 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=149] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:18.888 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=149] [conn=952107012] [job="ID:149, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:108, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:17.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.894 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=149]
[2024/09/16 20:04:18.895 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=93] [cur_db=test] [sql="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:18.895 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:18.895 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:18.899 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:150, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:18.899 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:150, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:18.900 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.901 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"accessTokens_userId_users_id_fk\",\"L\":\"accesstokens_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:18.907 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=93] [neededSchemaVersion=94] ["elapsed time"=485.417s] [gotSchemaVersion=94] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:18.909 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=94]
[2024/09/16 20:04:18.909 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=94] ["take time"=3.416459ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.912 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.918 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=94] [neededSchemaVersion=95] ["elapsed time"=473.541s] [gotSchemaVersion=95] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:18.920 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=95]
[2024/09/16 20:04:18.920 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=95] ["take time"=3.159125ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.923 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.929 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=95] [neededSchemaVersion=96] ["elapsed time"=412.083s] [gotSchemaVersion=96] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:18.931 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=96]
[2024/09/16 20:04:18.931 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=96] ["take time"=3.176375ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:18.934 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.934 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=150] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_userId_users_id_fk]
[2024/09/16 20:04:18.935 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{110 accessTokens utf8mb4 utf8mb4_bin [0x400ca334a0 0x400ca33600 0x400ca33760 0x400ca338c0 0x400ca33a20 0x400ca33b80 0x400ca33ce0 0x400ca33e40] [0x400ca63050] [] [] public true false 0  0 0 0 0 8 1 0 0 452596087883563046 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=110] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:18.935 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=150] [physicalTableID=110] [startKey=] [endKey=]
[2024/09/16 20:04:18.939 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=150]
[2024/09/16 20:04:18.940 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087896408068, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:18.941 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=150] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_userId_users_id_fk]
[2024/09/16 20:04:18.945 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/150/0]
[2024/09/16 20:04:18.946 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=110] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:18.954 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=3]
[2024/09/16 20:04:18.954 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=3] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:19.033 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=2]
[2024/09/16 20:04:19.036 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:19.036 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=2]
[2024/09/16 20:04:19.042 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:19.456 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=3] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:19.456 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=3] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:19.457 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=3] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:19.458 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{110 accessTokens utf8mb4 utf8mb4_bin [0x400d56a580 0x400d56a6e0 0x400d56a840 0x400d56a9a0 0x400d56ab00 0x400d56ac60 0x400d56adc0 0x400d56af20] [0x400d63a480] [] [] public true false 0  0 0 0 0 8 1 0 0 452596087883563046 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=110] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:19.458 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=3] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:19.959 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=3] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:20.156 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:20.163 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=96] [neededSchemaVersion=97] ["elapsed time"=567.375s] [gotSchemaVersion=97] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:20.165 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=97]
[2024/09/16 20:04:20.165 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=97] ["take time"=3.518875ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.168 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596087896408068, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.168 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=150] [table=accessTokens] [index=accessTokens_userId_users_id_fk]
[2024/09/16 20:04:20.175 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=97] [neededSchemaVersion=98] ["elapsed time"=687.333s] [gotSchemaVersion=98] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:20.177 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=98]
[2024/09/16 20:04:20.177 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=98] ["take time"=4.249584ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.180 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.181 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=150] [physicalTableID=110] [startKey=74800000000000006e5f69ffff000000000001] [endKey=74800000000000006e5f69ffff000000000001ff]
[2024/09/16 20:04:20.186 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=150]
[2024/09/16 20:04:20.187 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088210980891, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.189 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088210980891, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000006e5f69ffff000000000001,EndKey:74800000000000006e5f69ffff000000000001ff,First:false,PhysicalTableID:110,Ingest mode:false"]
[2024/09/16 20:04:20.190 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=110] ["start key"=74800000000000006e5f69ffff000000000001] ["end key"=74800000000000006e5f69ffff000000000001ff]
[2024/09/16 20:04:20.190 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=110] ["range start"=74800000000000006e5f69ffff000000000001] ["range end"=74800000000000006e5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:20.190 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000006e5f69ffff000000000001] [endKey=74800000000000006e5f69ffff000000000001ff]
[2024/09/16 20:04:20.190 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=150]
[2024/09/16 20:04:20.190 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=150]
[2024/09/16 20:04:20.190 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=150]
[2024/09/16 20:04:20.190 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 110, range: [74800000000000006e5f69ffff000000000001, 74800000000000006e5f69ffff000000000001ff), jobID: 150"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000006e5f69ffff000000000001ff00] ["take time"=473s]
[2024/09/16 20:04:20.191 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=150]
[2024/09/16 20:04:20.191 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000006e5f69ffff000000000001]
[2024/09/16 20:04:20.191 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:20.198 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=98] [neededSchemaVersion=99] ["elapsed time"=813.333s] [gotSchemaVersion=99] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:20.200 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=99]
[2024/09/16 20:04:20.201 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=99] ["take time"=4.954208ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.204 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.211 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=99] [neededSchemaVersion=100] ["elapsed time"=484.25s] [gotSchemaVersion=100] [phyTblIDs="[110]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:20.213 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=100]
[2024/09/16 20:04:20.214 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=100] ["take time"=3.806917ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.217 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.231 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=100] [neededSchemaVersion=101] ["elapsed time"=948.166s] [gotSchemaVersion=101] [phyTblIDs="[110]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:20.233 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=101]
[2024/09/16 20:04:20.234 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=101] ["take time"=5.398417ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.237 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.244 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=101] [neededSchemaVersion=102] ["elapsed time"=580.791s] [gotSchemaVersion=102] [phyTblIDs="[110]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:20.246 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=102]
[2024/09/16 20:04:20.247 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=102] ["take time"=3.813833ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.250 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [category=ddl] [job="ID:150, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088210980891, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:20.252 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:20.258 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=102] [neededSchemaVersion=103] ["elapsed time"=719.084s] [gotSchemaVersion=103] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:20.259 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=150] [version=103]
[2024/09/16 20:04:20.260 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=103] ["take time"=4.136583ms] [job="ID:150, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.266 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=150]
[2024/09/16 20:04:20.268 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=150] [tableID=110] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:20.270 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=150] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:20.270 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=150] [conn=952107012] [job="ID:150, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:18.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.277 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=150]
[2024/09/16 20:04:20.278 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=103] [cur_db=test] [sql="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:20.278 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:20.278 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:20.282 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:151, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:20.282 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:151, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:20.284 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.284 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"accessTokens_teamId_teams_id_fk\",\"L\":\"accesstokens_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:20.291 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=103] [neededSchemaVersion=104] ["elapsed time"=555.083s] [gotSchemaVersion=104] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:20.292 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=104]
[2024/09/16 20:04:20.293 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=104] ["take time"=3.338375ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.296 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.302 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=104] [neededSchemaVersion=105] ["elapsed time"=497.709s] [gotSchemaVersion=105] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:20.304 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=105]
[2024/09/16 20:04:20.304 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=105] ["take time"=3.323083ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.306 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.313 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=105] [neededSchemaVersion=106] ["elapsed time"=449.25s] [gotSchemaVersion=106] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:20.314 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=106]
[2024/09/16 20:04:20.315 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=106] ["take time"=3.392625ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:20.318 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.319 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=151] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 20:04:20.319 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{110 accessTokens utf8mb4 utf8mb4_bin [0x400e58adc0 0x400e58af20 0x400e58b080 0x400e58b1e0 0x400e58b340 0x400e58b4a0 0x400e58b600 0x400e58b760] [0x400d84e900 0x400d84eb40] [] [0x400df9bd40] public true false 0  0 0 0 0 8 2 1 0 452596088250302484 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=110] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:20.320 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=151] [physicalTableID=110] [startKey=] [endKey=]
[2024/09/16 20:04:20.324 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=151]
[2024/09/16 20:04:20.325 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088250302494, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:20.326 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=151] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 20:04:20.329 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/151/0]
[2024/09/16 20:04:20.332 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=110] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:20.339 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=4]
[2024/09/16 20:04:20.339 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=4] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:20.456 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=3]
[2024/09/16 20:04:20.459 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:20.459 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=3]
[2024/09/16 20:04:20.464 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:20.843 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=4] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:20.843 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=4] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:20.845 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=4] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:20.847 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{110 accessTokens utf8mb4 utf8mb4_bin [0x400eb96160 0x400eb962c0 0x400eb96420 0x400eb96580 0x400eb966e0 0x400eb96840 0x400eb969a0 0x400eb96b00] [0x400e651d40 0x400eba0000] [] [0x400eb8e300] public true false 0  0 0 0 0 8 2 1 0 452596088250302484 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=110] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:20.847 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=4] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:21.345 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=4] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:21.551 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:21.562 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=106] [neededSchemaVersion=107] ["elapsed time"=697s] [gotSchemaVersion=107] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:21.564 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=107]
[2024/09/16 20:04:21.565 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=107] ["take time"=4.348ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.567 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088250302494, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.568 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=151] [table=accessTokens] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 20:04:21.575 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=107] [neededSchemaVersion=108] ["elapsed time"=676.709s] [gotSchemaVersion=108] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:21.576 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=108]
[2024/09/16 20:04:21.577 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=108] ["take time"=3.903709ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.580 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.580 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=151] [physicalTableID=110] [startKey=74800000000000006e5f69ffff000000000002] [endKey=74800000000000006e5f69ffff000000000002ff]
[2024/09/16 20:04:21.586 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=151]
[2024/09/16 20:04:21.587 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088578244632, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.589 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088578244632, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000006e5f69ffff000000000002,EndKey:74800000000000006e5f69ffff000000000002ff,First:false,PhysicalTableID:110,Ingest mode:false"]
[2024/09/16 20:04:21.589 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=110] ["start key"=74800000000000006e5f69ffff000000000002] ["end key"=74800000000000006e5f69ffff000000000002ff]
[2024/09/16 20:04:21.590 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=110] ["range start"=74800000000000006e5f69ffff000000000002] ["range end"=74800000000000006e5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:21.590 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000006e5f69ffff000000000002] [endKey=74800000000000006e5f69ffff000000000002ff]
[2024/09/16 20:04:21.590 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=151]
[2024/09/16 20:04:21.590 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=151]
[2024/09/16 20:04:21.590 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=151]
[2024/09/16 20:04:21.591 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 110, range: [74800000000000006e5f69ffff000000000002, 74800000000000006e5f69ffff000000000002ff), jobID: 151"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000006e5f69ffff000000000002ff00] ["take time"=475.5s]
[2024/09/16 20:04:21.591 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=151]
[2024/09/16 20:04:21.591 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000006e5f69ffff000000000002]
[2024/09/16 20:04:21.591 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:21.597 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=108] [neededSchemaVersion=109] ["elapsed time"=585.375s] [gotSchemaVersion=109] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:21.598 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=109]
[2024/09/16 20:04:21.599 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=109] ["take time"=3.422333ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.601 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.608 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=109] [neededSchemaVersion=110] ["elapsed time"=495s] [gotSchemaVersion=110] [phyTblIDs="[110]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:21.609 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=110]
[2024/09/16 20:04:21.610 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=110] ["take time"=3.438917ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.613 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.621 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=110] [neededSchemaVersion=111] ["elapsed time"=454.25s] [gotSchemaVersion=111] [phyTblIDs="[110]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:21.622 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=111]
[2024/09/16 20:04:21.623 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=111] ["take time"=3.393333ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.626 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.632 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=111] [neededSchemaVersion=112] ["elapsed time"=448.958s] [gotSchemaVersion=112] [phyTblIDs="[110]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:21.634 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=112]
[2024/09/16 20:04:21.634 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=112] ["take time"=3.439166ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.638 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [category=ddl] [job="ID:151, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088578244632, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:21.639 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:21.644 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=112] [neededSchemaVersion=113] ["elapsed time"=1.182792ms] [gotSchemaVersion=113] [phyTblIDs="[110]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:21.646 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=151] [version=113]
[2024/09/16 20:04:21.647 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=113] ["take time"=4.126541ms] [job="ID:151, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.652 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=151]
[2024/09/16 20:04:21.653 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=151] [tableID=110] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:21.655 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=151] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:21.655 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=151] [conn=952107012] [job="ID:151, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:110, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:20.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.661 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=151]
[2024/09/16 20:04:21.662 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=113] [cur_db=test] [sql="ALTER TABLE `audiences` ADD CONSTRAINT `audiences_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:21.663 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=audiences] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:21.663 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=audiences] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:21.667 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:152, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:21.667 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:152, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `audiences` ADD CONSTRAINT `audiences_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:21.668 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.669 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"audiences_teamId_teams_id_fk\",\"L\":\"audiences_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:21.676 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=113] [neededSchemaVersion=114] ["elapsed time"=476.334s] [gotSchemaVersion=114] [phyTblIDs="[112]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:21.677 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=114]
[2024/09/16 20:04:21.678 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=114] ["take time"=3.265667ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.681 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.689 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=114] [neededSchemaVersion=115] ["elapsed time"=516.584s] [gotSchemaVersion=115] [phyTblIDs="[112]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:21.691 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=115]
[2024/09/16 20:04:21.691 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=115] ["take time"=3.830375ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.694 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.701 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=115] [neededSchemaVersion=116] ["elapsed time"=451.542s] [gotSchemaVersion=116] [phyTblIDs="[112]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:21.702 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=116]
[2024/09/16 20:04:21.703 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=116] ["take time"=3.466416ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:21.705 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.706 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=152] [table=audiences] ["ingest mode"=true] [index=audiences_teamId_teams_id_fk]
[2024/09/16 20:04:21.707 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{112 audiences utf8mb4 utf8mb4_bin [0x400fa8f080 0x400fa8f1e0 0x400fa8f340 0x400fa8f4a0] [0x400fabac60] [] [] public true false 0  0 0 0 0 4 1 0 0 452596088617304073 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=112] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:21.707 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=152] [physicalTableID=112] [startKey=] [endKey=]
[2024/09/16 20:04:21.711 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=152]
[2024/09/16 20:04:21.712 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088617304083, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:21.713 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=152] [table=audiences] ["ingest mode"=true] [index=audiences_teamId_teams_id_fk]
[2024/09/16 20:04:21.719 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/152/0]
[2024/09/16 20:04:21.720 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=112] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:21.733 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=5]
[2024/09/16 20:04:21.734 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=5] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:21.840 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=4]
[2024/09/16 20:04:21.842 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:21.842 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=4]
[2024/09/16 20:04:21.848 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:22.235 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=5] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:22.235 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=5] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:22.237 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=5] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:22.238 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{112 audiences utf8mb4 utf8mb4_bin [0x40102aab00 0x40102aac60 0x40102aadc0 0x40102aaf20] [0x40102bbcb0] [] [] public true false 0  0 0 0 0 4 1 0 0 452596088617304073 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=112] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:22.238 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=5] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:22.739 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=5] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:22.939 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:22.948 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=116] [neededSchemaVersion=117] ["elapsed time"=413.792s] [gotSchemaVersion=117] [phyTblIDs="[112]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:22.950 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=117]
[2024/09/16 20:04:22.951 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=117] ["take time"=4.248041ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:22.954 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088617304083, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:22.955 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=152] [table=audiences] [index=audiences_teamId_teams_id_fk]
[2024/09/16 20:04:22.965 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=117] [neededSchemaVersion=118] ["elapsed time"=519.334s] [gotSchemaVersion=118] [phyTblIDs="[112]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:22.966 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=118]
[2024/09/16 20:04:22.967 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=118] ["take time"=4.051709ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:22.971 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:22.971 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=152] [physicalTableID=112] [startKey=7480000000000000705f69ffff000000000001] [endKey=7480000000000000705f69ffff000000000001ff]
[2024/09/16 20:04:22.977 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=152]
[2024/09/16 20:04:22.979 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088944984087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:22.980 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088944984087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000705f69ffff000000000001,EndKey:7480000000000000705f69ffff000000000001ff,First:false,PhysicalTableID:112,Ingest mode:false"]
[2024/09/16 20:04:22.981 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=112] ["start key"=7480000000000000705f69ffff000000000001] ["end key"=7480000000000000705f69ffff000000000001ff]
[2024/09/16 20:04:22.981 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=112] ["range start"=7480000000000000705f69ffff000000000001] ["range end"=7480000000000000705f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:22.982 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000705f69ffff000000000001] [endKey=7480000000000000705f69ffff000000000001ff]
[2024/09/16 20:04:22.982 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=152]
[2024/09/16 20:04:22.982 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=152]
[2024/09/16 20:04:22.982 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=152]
[2024/09/16 20:04:22.982 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 112, range: [7480000000000000705f69ffff000000000001, 7480000000000000705f69ffff000000000001ff), jobID: 152"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000705f69ffff000000000001ff00] ["take time"=396.084s]
[2024/09/16 20:04:22.982 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=152]
[2024/09/16 20:04:22.982 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000705f69ffff000000000001]
[2024/09/16 20:04:22.982 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:22.988 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=118] [neededSchemaVersion=119] ["elapsed time"=447.25s] [gotSchemaVersion=119] [phyTblIDs="[112]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:22.990 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=119]
[2024/09/16 20:04:22.990 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=119] ["take time"=3.213875ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:22.993 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:22.999 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=119] [neededSchemaVersion=120] ["elapsed time"=651.125s] [gotSchemaVersion=120] [phyTblIDs="[112]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:23.002 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=120]
[2024/09/16 20:04:23.003 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=120] ["take time"=5.079541ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.006 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:23.014 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=120] [neededSchemaVersion=121] ["elapsed time"=484s] [gotSchemaVersion=121] [phyTblIDs="[112]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:23.015 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=121]
[2024/09/16 20:04:23.016 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=121] ["take time"=3.508625ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.018 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:23.025 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=121] [neededSchemaVersion=122] ["elapsed time"=428s] [gotSchemaVersion=122] [phyTblIDs="[112]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:23.026 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=122]
[2024/09/16 20:04:23.027 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=122] ["take time"=3.209667ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.030 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [category=ddl] [job="ID:152, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088944984087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:23.031 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:23.036 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=122] [neededSchemaVersion=123] ["elapsed time"=619.334s] [gotSchemaVersion=123] [phyTblIDs="[112]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:23.037 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=152] [version=123]
[2024/09/16 20:04:23.038 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=123] ["take time"=3.495583ms] [job="ID:152, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.043 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=152]
[2024/09/16 20:04:23.044 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=152] [tableID=112] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:23.046 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=152] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:23.046 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=152] [conn=952107012] [job="ID:152, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:112, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:21.631 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.052 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=152]
[2024/09/16 20:04:23.053 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=123] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_automationId_automations_id_fk` FOREIGN KEY (`automationId`) REFERENCES `automations`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:23.053 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:23.053 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:23.056 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:153, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:23.056 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:153, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_automationId_automations_id_fk` FOREIGN KEY (`automationId`) REFERENCES `automations`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:23.058 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:23.058 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"automationSteps_automationId_automations_id_fk\",\"L\":\"automationsteps_automationid_automations_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"automationId\",\"L\":\"automationid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:23.064 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=123] [neededSchemaVersion=124] ["elapsed time"=535.5s] [gotSchemaVersion=124] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:23.066 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=124]
[2024/09/16 20:04:23.066 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=124] ["take time"=3.267375ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.069 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:23.074 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=124] [neededSchemaVersion=125] ["elapsed time"=502s] [gotSchemaVersion=125] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:23.076 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=125]
[2024/09/16 20:04:23.076 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=125] ["take time"=3.0355ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.078 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:23.086 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=125] [neededSchemaVersion=126] ["elapsed time"=566.125s] [gotSchemaVersion=126] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:23.087 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=126]
[2024/09/16 20:04:23.088 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=126] ["take time"=3.341792ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:23.090 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:23.091 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=153] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 20:04:23.091 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x4011409ce0 0x4011409e40 0x401146a000 0x401146a160 0x401146a2c0 0x401146a420 0x401146a580 0x401146a6e0 0x401146a840 0x401146a9a0 0x401146ab00] [0x401146c630] [] [] public true false 0  0 0 0 0 11 1 0 0 452596088971198510 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:23.091 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=153] [physicalTableID=114] [startKey=] [endKey=]
[2024/09/16 20:04:23.095 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=153]
[2024/09/16 20:04:23.096 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088984305674, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:23.097 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=153] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 20:04:23.101 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/153/0]
[2024/09/16 20:04:23.102 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=114] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:23.110 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=6]
[2024/09/16 20:04:23.111 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=6] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:23.236 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=5]
[2024/09/16 20:04:23.238 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:23.238 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=5]
[2024/09/16 20:04:23.243 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:23.616 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=6] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:23.616 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=6] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:23.618 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=6] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:23.619 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x4011b9c580 0x4011b9c6e0 0x4011b9c840 0x4011b9c9a0 0x4011b9cb00 0x4011b9cc60 0x4011b9cdc0 0x4011b9cf20 0x4011b9d080 0x4011b9d1e0 0x4011b9d340] [0x4011c84360] [] [] public true false 0  0 0 0 0 11 1 0 0 452596088971198510 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:23.619 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=6] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:24.114 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=6] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:24.331 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:24.342 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=126] [neededSchemaVersion=127] ["elapsed time"=576.416s] [gotSchemaVersion=127] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:24.343 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=127]
[2024/09/16 20:04:24.344 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=127] ["take time"=3.92125ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.347 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596088984305674, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.347 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=153] [table=automationSteps] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 20:04:24.353 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=127] [neededSchemaVersion=128] ["elapsed time"=572.042s] [gotSchemaVersion=128] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:24.354 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=128]
[2024/09/16 20:04:24.355 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=128] ["take time"=3.390875ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.357 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.358 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=153] [physicalTableID=114] [startKey=7480000000000000725f69ffff000000000001] [endKey=7480000000000000725f69ffff000000000001ff]
[2024/09/16 20:04:24.362 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=153]
[2024/09/16 20:04:24.363 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089311985683, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.365 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089311985683, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000725f69ffff000000000001,EndKey:7480000000000000725f69ffff000000000001ff,First:false,PhysicalTableID:114,Ingest mode:false"]
[2024/09/16 20:04:24.367 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=114] ["start key"=7480000000000000725f69ffff000000000001] ["end key"=7480000000000000725f69ffff000000000001ff]
[2024/09/16 20:04:24.367 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=114] ["range start"=7480000000000000725f69ffff000000000001] ["range end"=7480000000000000725f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:24.367 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000725f69ffff000000000001] [endKey=7480000000000000725f69ffff000000000001ff]
[2024/09/16 20:04:24.367 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=153]
[2024/09/16 20:04:24.367 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=153]
[2024/09/16 20:04:24.367 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=153]
[2024/09/16 20:04:24.367 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 114, range: [7480000000000000725f69ffff000000000001, 7480000000000000725f69ffff000000000001ff), jobID: 153"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000725f69ffff000000000001ff00] ["take time"=444.333s]
[2024/09/16 20:04:24.368 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=153]
[2024/09/16 20:04:24.368 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000725f69ffff000000000001]
[2024/09/16 20:04:24.368 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:24.373 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=128] [neededSchemaVersion=129] ["elapsed time"=535.042s] [gotSchemaVersion=129] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:24.375 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=129]
[2024/09/16 20:04:24.375 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=129] ["take time"=3.135166ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.378 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.384 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=129] [neededSchemaVersion=130] ["elapsed time"=559s] [gotSchemaVersion=130] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:24.385 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=130]
[2024/09/16 20:04:24.386 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=130] ["take time"=3.253417ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.389 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.398 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=130] [neededSchemaVersion=131] ["elapsed time"=665.292s] [gotSchemaVersion=131] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:24.399 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=131]
[2024/09/16 20:04:24.399 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=131] ["take time"=3.36625ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.402 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.409 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=131] [neededSchemaVersion=132] ["elapsed time"=576.209s] [gotSchemaVersion=132] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:24.410 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=132]
[2024/09/16 20:04:24.411 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=132] ["take time"=3.318041ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.414 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [category=ddl] [job="ID:153, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089311985683, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:24.415 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:24.420 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=132] [neededSchemaVersion=133] ["elapsed time"=520.584s] [gotSchemaVersion=133] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:24.421 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=153] [version=133]
[2024/09/16 20:04:24.422 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=133] ["take time"=3.668ms] [job="ID:153, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.428 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=153]
[2024/09/16 20:04:24.429 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=153] [tableID=114] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:24.431 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=153] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:24.431 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=153] [conn=952107012] [job="ID:153, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:23.031 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.437 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=153]
[2024/09/16 20:04:24.438 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=133] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_parentId_automationSteps_id_fk` FOREIGN KEY (`parentId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:24.438 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:24.438 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:24.443 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:154, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:24.443 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:154, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_parentId_automationSteps_id_fk` FOREIGN KEY (`parentId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:24.445 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.446 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"automationSteps_parentId_automationSteps_id_fk\",\"L\":\"automationsteps_parentid_automationsteps_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"parentId\",\"L\":\"parentid\"},\"offset\":5,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:24.453 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=133] [neededSchemaVersion=134] ["elapsed time"=591.375s] [gotSchemaVersion=134] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:24.454 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=134]
[2024/09/16 20:04:24.454 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=134] ["take time"=3.314958ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.457 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.463 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=134] [neededSchemaVersion=135] ["elapsed time"=528.458s] [gotSchemaVersion=135] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:24.464 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=135]
[2024/09/16 20:04:24.465 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=135] ["take time"=3.1815ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.467 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.473 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=135] [neededSchemaVersion=136] ["elapsed time"=595.25s] [gotSchemaVersion=136] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:24.475 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=136]
[2024/09/16 20:04:24.475 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=136] ["take time"=3.289292ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:24.478 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.478 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=154] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 20:04:24.479 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x4005ecd600 0x4005ecd760 0x4005ecd8c0 0x4005ecda20 0x4005ecdb80 0x4005ecdce0 0x4005ecde40 0x4005c6e000 0x4005c6e160 0x4005c6e2c0 0x4005c6e420] [0x4004c3a360 0x4004c3a5a0] [] [0x401239fbc0] public true false 0  0 0 0 0 11 2 1 0 452596089338200096 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:24.479 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=154] [physicalTableID=114] [startKey=] [endKey=]
[2024/09/16 20:04:24.482 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=154]
[2024/09/16 20:04:24.483 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089338200106, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:24.484 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=154] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 20:04:24.487 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/154/0]
[2024/09/16 20:04:24.490 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=114] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:24.497 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=7]
[2024/09/16 20:04:24.498 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=7] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:24.612 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=6]
[2024/09/16 20:04:24.614 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:24.614 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=6]
[2024/09/16 20:04:24.618 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:25.003 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=7] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:25.005 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=7] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:25.007 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=7] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:25.008 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x400834a2c0 0x400834a420 0x400834a580 0x400834a6e0 0x400834a840 0x400834a9a0 0x400834ab00 0x400834ac60 0x400834adc0 0x400834af20 0x400834b080] [0x40062a6f30 0x40062a7170] [] [0x4006032d80] public true false 0  0 0 0 0 11 2 1 0 452596089338200096 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:25.008 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=7] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:25.503 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=7] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:25.704 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:25.711 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=136] [neededSchemaVersion=137] ["elapsed time"=549.458s] [gotSchemaVersion=137] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:25.713 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=137]
[2024/09/16 20:04:25.713 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=137] ["take time"=3.266916ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.716 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089338200106, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.717 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=154] [table=automationSteps] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 20:04:25.724 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=137] [neededSchemaVersion=138] ["elapsed time"=624.792s] [gotSchemaVersion=138] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:25.726 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=138]
[2024/09/16 20:04:25.726 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=138] ["take time"=4.04875ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.729 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.729 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=154] [physicalTableID=114] [startKey=7480000000000000725f69ffff000000000002] [endKey=7480000000000000725f69ffff000000000002ff]
[2024/09/16 20:04:25.733 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=154]
[2024/09/16 20:04:25.734 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089665880087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.736 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089665880087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000725f69ffff000000000002,EndKey:7480000000000000725f69ffff000000000002ff,First:false,PhysicalTableID:114,Ingest mode:false"]
[2024/09/16 20:04:25.737 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=114] ["start key"=7480000000000000725f69ffff000000000002] ["end key"=7480000000000000725f69ffff000000000002ff]
[2024/09/16 20:04:25.737 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=114] ["range start"=7480000000000000725f69ffff000000000002] ["range end"=7480000000000000725f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:25.737 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000725f69ffff000000000002] [endKey=7480000000000000725f69ffff000000000002ff]
[2024/09/16 20:04:25.737 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=154]
[2024/09/16 20:04:25.737 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=154]
[2024/09/16 20:04:25.737 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=154]
[2024/09/16 20:04:25.738 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 114, range: [7480000000000000725f69ffff000000000002, 7480000000000000725f69ffff000000000002ff), jobID: 154"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000725f69ffff000000000002ff00] ["take time"=345.833s]
[2024/09/16 20:04:25.738 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=154]
[2024/09/16 20:04:25.738 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000725f69ffff000000000002]
[2024/09/16 20:04:25.738 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:25.744 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=138] [neededSchemaVersion=139] ["elapsed time"=550.333s] [gotSchemaVersion=139] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:25.745 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=139]
[2024/09/16 20:04:25.745 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=139] ["take time"=3.143834ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.748 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.755 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=139] [neededSchemaVersion=140] ["elapsed time"=589.292s] [gotSchemaVersion=140] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:25.756 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=140]
[2024/09/16 20:04:25.757 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=140] ["take time"=3.155291ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.759 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.767 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=140] [neededSchemaVersion=141] ["elapsed time"=594.542s] [gotSchemaVersion=141] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:25.768 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=141]
[2024/09/16 20:04:25.768 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=141] ["take time"=3.422792ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.771 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.777 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=141] [neededSchemaVersion=142] ["elapsed time"=529.583s] [gotSchemaVersion=142] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:25.778 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=142]
[2024/09/16 20:04:25.779 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=142] ["take time"=3.186ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.782 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [category=ddl] [job="ID:154, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089665880087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:25.784 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:25.788 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=142] [neededSchemaVersion=143] ["elapsed time"=554.083s] [gotSchemaVersion=143] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:25.790 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=154] [version=143]
[2024/09/16 20:04:25.790 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=143] ["take time"=3.190333ms] [job="ID:154, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.795 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=154]
[2024/09/16 20:04:25.796 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=154] [tableID=114] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:25.798 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=154] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:25.798 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=154] [conn=952107012] [job="ID:154, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:24.431 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.805 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=154]
[2024/09/16 20:04:25.806 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=143] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_emailId_emails_id_fk` FOREIGN KEY (`emailId`) REFERENCES `emails`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:25.806 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:25.806 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:25.810 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:155, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:25.810 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:155, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_emailId_emails_id_fk` FOREIGN KEY (`emailId`) REFERENCES `emails`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:25.811 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.812 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"automationSteps_emailId_emails_id_fk\",\"L\":\"automationsteps_emailid_emails_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailId\",\"L\":\"emailid\"},\"offset\":8,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:25.819 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=143] [neededSchemaVersion=144] ["elapsed time"=505.292s] [gotSchemaVersion=144] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:25.820 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=144]
[2024/09/16 20:04:25.821 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=144] ["take time"=3.323542ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.824 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.830 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=144] [neededSchemaVersion=145] ["elapsed time"=529s] [gotSchemaVersion=145] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:25.832 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=145]
[2024/09/16 20:04:25.832 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=145] ["take time"=3.156542ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.835 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.842 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=145] [neededSchemaVersion=146] ["elapsed time"=571.667s] [gotSchemaVersion=146] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:25.843 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=146]
[2024/09/16 20:04:25.844 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=146] ["take time"=3.218417ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:25.847 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.847 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=155] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 20:04:25.848 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x400dddf340 0x400dddf4a0 0x400dddf600 0x400dddf760 0x400dddf8c0 0x400dddfa20 0x400e090000 0x400e090160 0x400e0902c0 0x400e090420 0x400e0911e0] [0x40084a8870 0x40084a8cf0 0x40084a90e0] [] [0x4007e75500 0x4007e755c0] public true false 0  0 0 0 0 11 3 2 0 452596089705201669 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:25.848 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=155] [physicalTableID=114] [startKey=] [endKey=]
[2024/09/16 20:04:25.852 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=155]
[2024/09/16 20:04:25.853 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089705201679, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:25.854 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=155] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 20:04:25.857 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/155/0]
[2024/09/16 20:04:25.858 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=114] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:25.865 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=8]
[2024/09/16 20:04:25.865 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=8] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:25.999 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=7]
[2024/09/16 20:04:26.001 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:26.001 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=7]
[2024/09/16 20:04:26.006 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:26.366 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=8] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:26.367 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=8] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:26.368 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=8] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:26.369 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x40102669a0 0x4010266b00 0x4010266c60 0x4010266dc0 0x4010266f20 0x4010267080 0x40102671e0 0x4010267340 0x40103ba840 0x40103ba9a0 0x40103bab00] [0x4008d95170 0x4008d953b0 0x4008d955f0] [] [0x400876d740 0x400876d800] public true false 0  0 0 0 0 11 3 2 0 452596089705201669 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:26.369 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=8] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:26.870 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=8] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:27.071 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:27.079 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=146] [neededSchemaVersion=147] ["elapsed time"=565.667s] [gotSchemaVersion=147] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:27.081 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=147]
[2024/09/16 20:04:27.082 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=147] ["take time"=4.283959ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.086 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596089705201679, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.087 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=155] [table=automationSteps] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 20:04:27.094 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=147] [neededSchemaVersion=148] ["elapsed time"=586.375s] [gotSchemaVersion=148] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:27.096 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=148]
[2024/09/16 20:04:27.097 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=148] ["take time"=4.000375ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.100 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.101 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=155] [physicalTableID=114] [startKey=7480000000000000725f69ffff000000000003] [endKey=7480000000000000725f69ffff000000000003ff]
[2024/09/16 20:04:27.106 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=155]
[2024/09/16 20:04:27.107 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090032881679, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.109 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090032881679, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000000725f69ffff000000000003,EndKey:7480000000000000725f69ffff000000000003ff,First:false,PhysicalTableID:114,Ingest mode:false"]
[2024/09/16 20:04:27.110 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=114] ["start key"=7480000000000000725f69ffff000000000003] ["end key"=7480000000000000725f69ffff000000000003ff]
[2024/09/16 20:04:27.110 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=114] ["range start"=7480000000000000725f69ffff000000000003] ["range end"=7480000000000000725f69ffff000000000003ff] ["range count"=1]
[2024/09/16 20:04:27.110 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000725f69ffff000000000003] [endKey=7480000000000000725f69ffff000000000003ff]
[2024/09/16 20:04:27.110 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=155]
[2024/09/16 20:04:27.110 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=155]
[2024/09/16 20:04:27.110 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=155]
[2024/09/16 20:04:27.111 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 114, range: [7480000000000000725f69ffff000000000003, 7480000000000000725f69ffff000000000003ff), jobID: 155"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000725f69ffff000000000003ff00] ["take time"=321.334s]
[2024/09/16 20:04:27.111 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=155]
[2024/09/16 20:04:27.111 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000725f69ffff000000000003]
[2024/09/16 20:04:27.111 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:27.117 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=148] [neededSchemaVersion=149] ["elapsed time"=543.375s] [gotSchemaVersion=149] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:27.118 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=149]
[2024/09/16 20:04:27.119 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=149] ["take time"=3.42725ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.121 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.128 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=149] [neededSchemaVersion=150] ["elapsed time"=605.25s] [gotSchemaVersion=150] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:27.129 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=150]
[2024/09/16 20:04:27.130 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=150] ["take time"=3.33875ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.133 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.141 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=150] [neededSchemaVersion=151] ["elapsed time"=657.917s] [gotSchemaVersion=151] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:27.142 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=151]
[2024/09/16 20:04:27.143 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=151] ["take time"=3.823125ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.145 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.153 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=151] [neededSchemaVersion=152] ["elapsed time"=594.125s] [gotSchemaVersion=152] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:27.154 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=152]
[2024/09/16 20:04:27.155 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=152] ["take time"=3.345125ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.158 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [category=ddl] [job="ID:155, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090032881679, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:27.160 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:27.165 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=152] [neededSchemaVersion=153] ["elapsed time"=631s] [gotSchemaVersion=153] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:27.167 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=155] [version=153]
[2024/09/16 20:04:27.167 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=153] ["take time"=3.62575ms] [job="ID:155, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.172 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=155]
[2024/09/16 20:04:27.174 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=155] [tableID=114] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:27.175 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=155] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:27.176 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=155] [conn=952107012] [job="ID:155, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:25.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.182 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=155]
[2024/09/16 20:04:27.182 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=153] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:27.183 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:27.183 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:27.186 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:156, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:27.186 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:156, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:27.187 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.188 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":4,\"idx_name\":{\"O\":\"automationSteps_tagId_tags_id_fk\",\"L\":\"automationsteps_tagid_tags_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"tagId\",\"L\":\"tagid\"},\"offset\":9,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:27.193 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=153] [neededSchemaVersion=154] ["elapsed time"=528.375s] [gotSchemaVersion=154] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:27.194 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=154]
[2024/09/16 20:04:27.195 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=154] ["take time"=3.280667ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.198 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.203 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=154] [neededSchemaVersion=155] ["elapsed time"=571.958s] [gotSchemaVersion=155] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:27.205 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=155]
[2024/09/16 20:04:27.205 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=155] ["take time"=3.024916ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.207 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.213 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=155] [neededSchemaVersion=156] ["elapsed time"=577.417s] [gotSchemaVersion=156] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:27.215 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=156]
[2024/09/16 20:04:27.215 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=156] ["take time"=3.2075ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:27.217 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.218 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=156] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 20:04:27.219 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x400460e580 0x400460e6e0 0x400460e840 0x400460e9a0 0x400460eb00 0x400460ec60 0x400460edc0 0x400460ef20 0x400460f080 0x400460f1e0 0x400460f340] [0x400b19a510 0x400b19a750 0x400b19a990 0x400b19abd0] [] [0x400ab8d980 0x400ab8da40 0x400ab8db00] public true false 0  0 0 0 0 11 4 3 0 452596090059096092 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:27.219 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=156] [physicalTableID=114] [startKey=] [endKey=]
[2024/09/16 20:04:27.223 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=156]
[2024/09/16 20:04:27.225 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090059096102, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:27.225 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=156] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 20:04:27.229 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/156/0]
[2024/09/16 20:04:27.229 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=114] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:27.236 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=9]
[2024/09/16 20:04:27.236 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=9] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:27.366 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=8]
[2024/09/16 20:04:27.368 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:27.368 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=8]
[2024/09/16 20:04:27.374 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:27.740 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=9] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:27.740 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=9] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:27.741 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=9] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:27.742 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x400476d4a0 0x400476d600 0x400476d760 0x400476d8c0 0x400476da20 0x400476db80 0x400476dce0 0x400476de40 0x40046de000 0x40046de160 0x40046de2c0] [0x400b9fbdd0 0x400c1b0090 0x400c1b02d0 0x400c1b0510] [] [0x400ca08180 0x400ca08300 0x400ca083c0] public true false 0  0 0 0 0 11 4 3 0 452596090059096092 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:27.743 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=9] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:28.240 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=9] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:28.440 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:28.448 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=156] [neededSchemaVersion=157] ["elapsed time"=602.833s] [gotSchemaVersion=157] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:28.450 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=157]
[2024/09/16 20:04:28.450 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=157] ["take time"=3.795167ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.453 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090059096102, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.454 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=156] [table=automationSteps] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 20:04:28.460 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=157] [neededSchemaVersion=158] ["elapsed time"=781.291s] [gotSchemaVersion=158] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:28.462 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=158]
[2024/09/16 20:04:28.463 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=158] ["take time"=4.379125ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.465 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.466 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=156] [physicalTableID=114] [startKey=7480000000000000725f69ffff000000000004] [endKey=7480000000000000725f69ffff000000000004ff]
[2024/09/16 20:04:28.470 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=156]
[2024/09/16 20:04:28.471 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090387038232, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.473 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090387038232, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:4,StartKey:7480000000000000725f69ffff000000000004,EndKey:7480000000000000725f69ffff000000000004ff,First:false,PhysicalTableID:114,Ingest mode:false"]
[2024/09/16 20:04:28.473 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=114] ["start key"=7480000000000000725f69ffff000000000004] ["end key"=7480000000000000725f69ffff000000000004ff]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=114] ["range start"=7480000000000000725f69ffff000000000004] ["range end"=7480000000000000725f69ffff000000000004ff] ["range count"=1]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000725f69ffff000000000004] [endKey=7480000000000000725f69ffff000000000004ff]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=156]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=156]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=156]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 114, range: [7480000000000000725f69ffff000000000004, 7480000000000000725f69ffff000000000004ff), jobID: 156"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000725f69ffff000000000004ff00] ["take time"=426.5s]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=156]
[2024/09/16 20:04:28.474 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:4,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000725f69ffff000000000004]
[2024/09/16 20:04:28.475 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:28.481 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=158] [neededSchemaVersion=159] ["elapsed time"=662.958s] [gotSchemaVersion=159] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:28.482 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=159]
[2024/09/16 20:04:28.483 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=159] ["take time"=3.461791ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.485 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.492 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=159] [neededSchemaVersion=160] ["elapsed time"=578.042s] [gotSchemaVersion=160] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:28.493 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=160]
[2024/09/16 20:04:28.494 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=160] ["take time"=3.450542ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.496 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.504 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=160] [neededSchemaVersion=161] ["elapsed time"=567.25s] [gotSchemaVersion=161] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:28.505 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=161]
[2024/09/16 20:04:28.506 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=161] ["take time"=3.555209ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.508 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.515 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=161] [neededSchemaVersion=162] ["elapsed time"=555.792s] [gotSchemaVersion=162] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:28.516 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=162]
[2024/09/16 20:04:28.517 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=162] ["take time"=3.243083ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.520 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [category=ddl] [job="ID:156, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090387038232, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:28.521 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:28.526 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=162] [neededSchemaVersion=163] ["elapsed time"=597.708s] [gotSchemaVersion=163] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:28.528 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=156] [version=163]
[2024/09/16 20:04:28.528 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=163] ["take time"=3.571375ms] [job="ID:156, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.534 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=156]
[2024/09/16 20:04:28.535 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=156] [tableID=114] [indexIDs="[9223090561878065156]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:28.537 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=156] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:28.537 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=156] [conn=952107012] [job="ID:156, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:27.181 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.543 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=156]
[2024/09/16 20:04:28.544 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=163] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:28.544 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:28.544 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:28.547 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:157, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:28.547 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:157, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:28.549 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.549 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":5,\"idx_name\":{\"O\":\"automationSteps_audienceId_audiences_id_fk\",\"L\":\"automationsteps_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":10,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:28.555 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=163] [neededSchemaVersion=164] ["elapsed time"=543.25s] [gotSchemaVersion=164] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:28.556 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=164]
[2024/09/16 20:04:28.557 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=164] ["take time"=3.272167ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.559 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.566 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=164] [neededSchemaVersion=165] ["elapsed time"=606s] [gotSchemaVersion=165] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:28.567 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=165]
[2024/09/16 20:04:28.568 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=165] ["take time"=3.386125ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.570 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.576 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=165] [neededSchemaVersion=166] ["elapsed time"=541.708s] [gotSchemaVersion=166] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:28.577 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=166]
[2024/09/16 20:04:28.578 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=166] ["take time"=3.238375ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:28.580 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.581 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=157] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 20:04:28.581 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x40050c2dc0 0x40050c2f20 0x40050c3080 0x40050c31e0 0x40050c3340 0x40050c34a0 0x40050c3600 0x40050c3760 0x40050c38c0 0x40050c3a20 0x40050c3b80] [0x400f48a360 0x400f48a630 0x400f48a870 0x400f48aab0 0x400f48acf0] [] [0x4010d1c0c0 0x4010d1c240 0x4010d1c3c0 0x4010d1c480] public true false 0  0 0 0 0 11 5 4 0 452596090413252645 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:28.581 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=157] [physicalTableID=114] [startKey=] [endKey=]
[2024/09/16 20:04:28.585 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=157]
[2024/09/16 20:04:28.586 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090426097665, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:28.587 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=157] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 20:04:28.590 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/157/0]
[2024/09/16 20:04:28.592 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=114] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:28.598 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=10]
[2024/09/16 20:04:28.598 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=10] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:28.738 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=9]
[2024/09/16 20:04:28.740 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:28.740 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=9]
[2024/09/16 20:04:28.745 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:29.100 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=10] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:29.100 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=10] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:29.101 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=10] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:29.102 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{114 automationSteps utf8mb4 utf8mb4_bin [0x400574d4a0 0x400574d600 0x400574d760 0x400574d8c0 0x400574da20 0x400574db80 0x400574dce0 0x400574de40 0x400577a000 0x400577a160 0x400577a2c0] [0x400fa2ab40 0x400fa2ad80 0x400fa2b050 0x400fa2b290 0x400fa2b4d0] [] [0x4011c6e780 0x4011c6e840 0x4011c6e900 0x4011c6e9c0] public true false 0  0 0 0 0 11 5 4 0 452596090413252645 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 2}"] ["table/partition ID"=114] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:29.102 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=10] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:29.601 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=10] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:29.802 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:29.810 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=166] [neededSchemaVersion=167] ["elapsed time"=629.417s] [gotSchemaVersion=167] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:29.812 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=167]
[2024/09/16 20:04:29.813 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=167] ["take time"=3.995ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.815 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090426097665, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.816 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=157] [table=automationSteps] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 20:04:29.822 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=167] [neededSchemaVersion=168] ["elapsed time"=749.667s] [gotSchemaVersion=168] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:29.824 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=168]
[2024/09/16 20:04:29.825 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=168] ["take time"=3.980667ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.827 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.828 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=157] [physicalTableID=114] [startKey=7480000000000000725f69ffff000000000005] [endKey=7480000000000000725f69ffff000000000005ff]
[2024/09/16 20:04:29.832 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=157]
[2024/09/16 20:04:29.833 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090740932631, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.835 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090740932631, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:5,StartKey:7480000000000000725f69ffff000000000005,EndKey:7480000000000000725f69ffff000000000005ff,First:false,PhysicalTableID:114,Ingest mode:false"]
[2024/09/16 20:04:29.836 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=114] ["start key"=7480000000000000725f69ffff000000000005] ["end key"=7480000000000000725f69ffff000000000005ff]
[2024/09/16 20:04:29.836 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=114] ["range start"=7480000000000000725f69ffff000000000005] ["range end"=7480000000000000725f69ffff000000000005ff] ["range count"=1]
[2024/09/16 20:04:29.836 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000725f69ffff000000000005] [endKey=7480000000000000725f69ffff000000000005ff]
[2024/09/16 20:04:29.836 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=157]
[2024/09/16 20:04:29.836 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=157]
[2024/09/16 20:04:29.836 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=157]
[2024/09/16 20:04:29.837 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 114, range: [7480000000000000725f69ffff000000000005, 7480000000000000725f69ffff000000000005ff), jobID: 157"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000725f69ffff000000000005ff00] ["take time"=303.292s]
[2024/09/16 20:04:29.837 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=157]
[2024/09/16 20:04:29.837 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:5,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000725f69ffff000000000005]
[2024/09/16 20:04:29.837 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:29.843 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=168] [neededSchemaVersion=169] ["elapsed time"=621.292s] [gotSchemaVersion=169] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:29.845 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=169]
[2024/09/16 20:04:29.846 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=169] ["take time"=4.306708ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.849 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.860 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=169] [neededSchemaVersion=170] ["elapsed time"=794.458s] [gotSchemaVersion=170] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:29.862 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=170]
[2024/09/16 20:04:29.862 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=170] ["take time"=4.523542ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.865 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.873 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=170] [neededSchemaVersion=171] ["elapsed time"=634.583s] [gotSchemaVersion=171] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:29.875 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=171]
[2024/09/16 20:04:29.876 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=171] ["take time"=3.954958ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.879 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.888 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=171] [neededSchemaVersion=172] ["elapsed time"=739.709s] [gotSchemaVersion=172] [phyTblIDs="[114]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:29.890 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=172]
[2024/09/16 20:04:29.891 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=172] ["take time"=4.24775ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.894 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [category=ddl] [job="ID:157, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090740932631, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:29.896 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:29.901 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=172] [neededSchemaVersion=173] ["elapsed time"=671.125s] [gotSchemaVersion=173] [phyTblIDs="[114]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:29.903 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=157] [version=173]
[2024/09/16 20:04:29.903 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=173] ["take time"=3.989709ms] [job="ID:157, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.909 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=157]
[2024/09/16 20:04:29.910 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=157] [tableID=114] [indexIDs="[9223090561878065157]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:29.912 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=157] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:29.913 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=157] [conn=952107012] [job="ID:157, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:114, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:28.532 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.920 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=157]
[2024/09/16 20:04:29.921 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=173] [cur_db=test] [sql="ALTER TABLE `automations` ADD CONSTRAINT `automations_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:29.921 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automations] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:29.921 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automations] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:29.924 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:158, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:29.924 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:158, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automations` ADD CONSTRAINT `automations_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:29.925 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.926 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"automations_audienceId_audiences_id_fk\",\"L\":\"automations_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:29.932 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=173] [neededSchemaVersion=174] ["elapsed time"=412.833s] [gotSchemaVersion=174] [phyTblIDs="[116]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:29.933 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=174]
[2024/09/16 20:04:29.934 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=174] ["take time"=3.222375ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.936 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.942 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=174] [neededSchemaVersion=175] ["elapsed time"=490.875s] [gotSchemaVersion=175] [phyTblIDs="[116]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:29.944 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=175]
[2024/09/16 20:04:29.945 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=175] ["take time"=3.744208ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.947 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.954 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=175] [neededSchemaVersion=176] ["elapsed time"=426.458s] [gotSchemaVersion=176] [phyTblIDs="[116]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:29.955 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=176]
[2024/09/16 20:04:29.956 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=176] ["take time"=3.268958ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:29.958 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.959 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=158] [table=automations] ["ingest mode"=true] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 20:04:29.960 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{116 automations utf8mb4 utf8mb4_bin [0x4006ca62c0 0x4006ca6420 0x4006ca6580 0x4006ca66e0] [0x4009184e10] [] [] public true false 0  0 0 0 0 4 1 0 0 452596090780254222 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=116] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:29.960 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=158] [physicalTableID=116] [startKey=] [endKey=]
[2024/09/16 20:04:29.964 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=158]
[2024/09/16 20:04:29.965 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090780254233, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:29.965 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=158] [table=automations] ["ingest mode"=true] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 20:04:29.969 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/158/0]
[2024/09/16 20:04:29.970 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=116] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:29.977 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=11]
[2024/09/16 20:04:29.977 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=11] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:30.100 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=10]
[2024/09/16 20:04:30.102 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:30.102 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=10]
[2024/09/16 20:04:30.109 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:30.480 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=11] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:30.480 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=11] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:30.481 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=11] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:30.482 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{116 automations utf8mb4 utf8mb4_bin [0x40068491e0 0x4006849340 0x40068494a0 0x4006849600] [0x40074fb050] [] [] public true false 0  0 0 0 0 4 1 0 0 452596090780254222 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=116] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:30.482 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=11] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:30.984 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=11] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:31.182 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:31.190 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=176] [neededSchemaVersion=177] ["elapsed time"=528.75s] [gotSchemaVersion=177] [phyTblIDs="[116]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:31.191 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=177]
[2024/09/16 20:04:31.192 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=177] ["take time"=3.700542ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.195 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596090780254233, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.196 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=158] [table=automations] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 20:04:31.202 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=177] [neededSchemaVersion=178] ["elapsed time"=452.084s] [gotSchemaVersion=178] [phyTblIDs="[116]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:31.203 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=178]
[2024/09/16 20:04:31.204 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=178] ["take time"=3.495083ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.207 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.207 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=158] [physicalTableID=116] [startKey=7480000000000000745f69ffff000000000001] [endKey=7480000000000000745f69ffff000000000001ff]
[2024/09/16 20:04:31.212 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=158]
[2024/09/16 20:04:31.213 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091107672083, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.215 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091107672083, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000745f69ffff000000000001,EndKey:7480000000000000745f69ffff000000000001ff,First:false,PhysicalTableID:116,Ingest mode:false"]
[2024/09/16 20:04:31.216 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=116] ["start key"=7480000000000000745f69ffff000000000001] ["end key"=7480000000000000745f69ffff000000000001ff]
[2024/09/16 20:04:31.216 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=116] ["range start"=7480000000000000745f69ffff000000000001] ["range end"=7480000000000000745f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:31.216 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000745f69ffff000000000001] [endKey=7480000000000000745f69ffff000000000001ff]
[2024/09/16 20:04:31.216 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=158]
[2024/09/16 20:04:31.216 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=158]
[2024/09/16 20:04:31.216 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=158]
[2024/09/16 20:04:31.217 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 116, range: [7480000000000000745f69ffff000000000001, 7480000000000000745f69ffff000000000001ff), jobID: 158"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000745f69ffff000000000001ff00] ["take time"=409.75s]
[2024/09/16 20:04:31.217 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=158]
[2024/09/16 20:04:31.217 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000745f69ffff000000000001]
[2024/09/16 20:04:31.217 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:31.223 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=178] [neededSchemaVersion=179] ["elapsed time"=519.25s] [gotSchemaVersion=179] [phyTblIDs="[116]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:31.224 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=179]
[2024/09/16 20:04:31.225 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=179] ["take time"=3.553083ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.227 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.235 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=179] [neededSchemaVersion=180] ["elapsed time"=474.5s] [gotSchemaVersion=180] [phyTblIDs="[116]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:31.236 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=180]
[2024/09/16 20:04:31.237 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=180] ["take time"=3.551083ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.240 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.247 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=180] [neededSchemaVersion=181] ["elapsed time"=483.084s] [gotSchemaVersion=181] [phyTblIDs="[116]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:31.249 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=181]
[2024/09/16 20:04:31.249 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=181] ["take time"=3.03075ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.252 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.258 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=181] [neededSchemaVersion=182] ["elapsed time"=434.042s] [gotSchemaVersion=182] [phyTblIDs="[116]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:31.259 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=182]
[2024/09/16 20:04:31.260 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=182] ["take time"=3.301833ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.263 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [category=ddl] [job="ID:158, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091107672083, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:31.265 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:31.269 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=182] [neededSchemaVersion=183] ["elapsed time"=429.375s] [gotSchemaVersion=183] [phyTblIDs="[116]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:31.271 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=158] [version=183]
[2024/09/16 20:04:31.271 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=183] ["take time"=3.241ms] [job="ID:158, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.276 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=158]
[2024/09/16 20:04:31.278 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=158] [tableID=116] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:31.280 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=158] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:31.281 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=158] [conn=952107012] [job="ID:158, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:116, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:29.882 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.287 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=158]
[2024/09/16 20:04:31.288 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=183] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:31.288 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:31.288 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:31.291 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:159, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:31.291 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:159, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:31.292 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.293 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"broadcasts_audienceId_audiences_id_fk\",\"L\":\"broadcasts_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:31.299 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=183] [neededSchemaVersion=184] ["elapsed time"=554.208s] [gotSchemaVersion=184] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:31.301 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=184]
[2024/09/16 20:04:31.301 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=184] ["take time"=3.528417ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.304 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.311 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=184] [neededSchemaVersion=185] ["elapsed time"=553.083s] [gotSchemaVersion=185] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:31.312 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=185]
[2024/09/16 20:04:31.313 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=185] ["take time"=3.325125ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.315 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.322 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=185] [neededSchemaVersion=186] ["elapsed time"=584.125s] [gotSchemaVersion=186] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:31.323 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=186]
[2024/09/16 20:04:31.324 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=186] ["take time"=3.522375ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:31.326 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.327 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=159] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 20:04:31.328 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x4008faf760 0x4008faf8c0 0x4008fafa20 0x4008fafb80 0x4008fafce0 0x4008fafe40 0x40094c0000 0x40094c0160 0x40094c02c0 0x40094c0420 0x40094c0580 0x40094c06e0 0x40094c0840 0x40094c09a0 0x40094c0b00] [0x40094b7320] [] [] public true false 0  0 0 0 0 15 1 0 0 452596091133886496 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:31.328 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=159] [physicalTableID=118] [startKey=] [endKey=]
[2024/09/16 20:04:31.332 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=159]
[2024/09/16 20:04:31.333 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091133886506, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:31.333 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=159] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 20:04:31.337 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/159/0]
[2024/09/16 20:04:31.338 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=118] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:31.349 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=12]
[2024/09/16 20:04:31.349 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=12] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:31.479 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=11]
[2024/09/16 20:04:31.481 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:31.481 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=11]
[2024/09/16 20:04:31.486 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:31.852 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=12] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:31.852 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=12] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:31.854 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=12] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:31.856 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x4009bfb1e0 0x4009bfb340 0x4009bfb4a0 0x4009bfb600 0x4009bfb760 0x4009bfb8c0 0x4009bfba20 0x4009bfbb80 0x4009bfbce0 0x4009bfbe40 0x4009e50000 0x4009e50160 0x4009e502c0 0x4009e50420 0x4009e50580] [0x4009e359e0] [] [] public true false 0  0 0 0 0 15 1 0 0 452596091133886496 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:31.856 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=12] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:32.351 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=12] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:32.556 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:32.565 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=186] [neededSchemaVersion=187] ["elapsed time"=692.416s] [gotSchemaVersion=187] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:32.567 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=187]
[2024/09/16 20:04:32.568 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=187] ["take time"=4.59775ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.571 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091133886506, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.571 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=159] [table=broadcasts] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 20:04:32.578 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=187] [neededSchemaVersion=188] ["elapsed time"=568.333s] [gotSchemaVersion=188] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:32.580 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=188]
[2024/09/16 20:04:32.580 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=188] ["take time"=3.991167ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.583 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.584 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=159] [physicalTableID=118] [startKey=7480000000000000765f69ffff000000000001] [endKey=7480000000000000765f69ffff000000000001ff]
[2024/09/16 20:04:32.588 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=159]
[2024/09/16 20:04:32.589 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091474673667, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.591 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091474673667, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000765f69ffff000000000001,EndKey:7480000000000000765f69ffff000000000001ff,First:false,PhysicalTableID:118,Ingest mode:false"]
[2024/09/16 20:04:32.592 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=118] ["start key"=7480000000000000765f69ffff000000000001] ["end key"=7480000000000000765f69ffff000000000001ff]
[2024/09/16 20:04:32.593 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=118] ["range start"=7480000000000000765f69ffff000000000001] ["range end"=7480000000000000765f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:32.593 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000765f69ffff000000000001] [endKey=7480000000000000765f69ffff000000000001ff]
[2024/09/16 20:04:32.593 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=159]
[2024/09/16 20:04:32.593 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=159]
[2024/09/16 20:04:32.593 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=159]
[2024/09/16 20:04:32.594 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 118, range: [7480000000000000765f69ffff000000000001, 7480000000000000765f69ffff000000000001ff), jobID: 159"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000765f69ffff000000000001ff00] ["take time"=544.208s]
[2024/09/16 20:04:32.594 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=159]
[2024/09/16 20:04:32.594 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000765f69ffff000000000001]
[2024/09/16 20:04:32.594 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:32.600 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=188] [neededSchemaVersion=189] ["elapsed time"=620.916s] [gotSchemaVersion=189] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:32.601 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=189]
[2024/09/16 20:04:32.602 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=189] ["take time"=3.555167ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.605 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.611 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=189] [neededSchemaVersion=190] ["elapsed time"=597.167s] [gotSchemaVersion=190] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:32.613 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=190]
[2024/09/16 20:04:32.613 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=190] ["take time"=3.621083ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.616 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.624 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=190] [neededSchemaVersion=191] ["elapsed time"=582.709s] [gotSchemaVersion=191] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:32.626 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=191]
[2024/09/16 20:04:32.626 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=191] ["take time"=3.519542ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.629 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.638 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=191] [neededSchemaVersion=192] ["elapsed time"=589.542s] [gotSchemaVersion=192] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:32.640 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=192]
[2024/09/16 20:04:32.641 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=192] ["take time"=4.314708ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.644 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [category=ddl] [job="ID:159, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091474673667, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:32.647 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:32.653 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=192] [neededSchemaVersion=193] ["elapsed time"=619.75s] [gotSchemaVersion=193] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:32.655 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=159] [version=193]
[2024/09/16 20:04:32.656 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=193] ["take time"=4.174584ms] [job="ID:159, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.661 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=159]
[2024/09/16 20:04:32.664 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=159] [tableID=118] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:32.666 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=159] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:32.667 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=159] [conn=952107012] [job="ID:159, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:31.281 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.674 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=159]
[2024/09/16 20:04:32.675 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=193] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_segmentId_segments_id_fk` FOREIGN KEY (`segmentId`) REFERENCES `segments`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:32.675 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:32.676 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:32.679 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:160, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:32.679 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:160, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_segmentId_segments_id_fk` FOREIGN KEY (`segmentId`) REFERENCES `segments`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:32.681 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.681 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"broadcasts_segmentId_segments_id_fk\",\"L\":\"broadcasts_segmentid_segments_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"segmentId\",\"L\":\"segmentid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:32.688 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=193] [neededSchemaVersion=194] ["elapsed time"=591.208s] [gotSchemaVersion=194] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:32.690 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=194]
[2024/09/16 20:04:32.694 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=194] ["take time"=6.743292ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.697 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.704 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=194] [neededSchemaVersion=195] ["elapsed time"=595.041s] [gotSchemaVersion=195] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:32.706 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=195]
[2024/09/16 20:04:32.706 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=195] ["take time"=3.698916ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.709 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.716 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=195] [neededSchemaVersion=196] ["elapsed time"=629s] [gotSchemaVersion=196] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:32.718 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=196]
[2024/09/16 20:04:32.719 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=196] ["take time"=3.948542ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:32.721 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.722 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=160] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 20:04:32.723 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x400b41f080 0x400b41f1e0 0x400b41f340 0x400b41f4a0 0x400b41f600 0x400b41f760 0x400b41f8c0 0x400b41fa20 0x400b41fb80 0x400b41fce0 0x400b41fe40 0x400b46e000 0x400b46e160 0x400b46e2c0 0x400b46e420] [0x400b461710 0x400b461950] [] [0x400aedd8c0] public true false 0  0 0 0 0 15 2 1 0 452596091500888083 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:32.723 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=160] [physicalTableID=118] [startKey=] [endKey=]
[2024/09/16 20:04:32.727 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=160]
[2024/09/16 20:04:32.728 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091500888093, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:32.729 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=160] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 20:04:32.732 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/160/0]
[2024/09/16 20:04:32.735 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=118] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:32.743 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=13]
[2024/09/16 20:04:32.743 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=13] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:32.850 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=12]
[2024/09/16 20:04:32.852 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:32.852 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=12]
[2024/09/16 20:04:32.858 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:33.248 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=13] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:33.248 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=13] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:33.249 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=13] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:33.250 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x400be8a000 0x400be8a160 0x400be8a2c0 0x400be8a420 0x400be8a580 0x400be8a6e0 0x400be8a840 0x400be8a9a0 0x400be8ab00 0x400be8ac60 0x400be8adc0 0x400be8af20 0x400be8b080 0x400be8b1e0 0x400be8b340] [0x400be8e000 0x400be8e240] [] [0x400bd06840] public true false 0  0 0 0 0 15 2 1 0 452596091500888083 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:33.250 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=13] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:33.747 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=13] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:33.946 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:33.955 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=196] [neededSchemaVersion=197] ["elapsed time"=619.25s] [gotSchemaVersion=197] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:33.956 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=197]
[2024/09/16 20:04:33.957 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=197] ["take time"=3.982458ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:33.960 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091500888093, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:33.961 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=160] [table=broadcasts] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 20:04:33.969 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=197] [neededSchemaVersion=198] ["elapsed time"=786.458s] [gotSchemaVersion=198] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:33.971 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=198]
[2024/09/16 20:04:33.971 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=198] ["take time"=4.412459ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:33.974 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:33.975 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=160] [physicalTableID=118] [startKey=7480000000000000765f69ffff000000000002] [endKey=7480000000000000765f69ffff000000000002ff]
[2024/09/16 20:04:33.980 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=160]
[2024/09/16 20:04:33.981 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091828568087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:33.983 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091828568087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000765f69ffff000000000002,EndKey:7480000000000000765f69ffff000000000002ff,First:false,PhysicalTableID:118,Ingest mode:false"]
[2024/09/16 20:04:33.985 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=118] ["start key"=7480000000000000765f69ffff000000000002] ["end key"=7480000000000000765f69ffff000000000002ff]
[2024/09/16 20:04:33.985 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=118] ["range start"=7480000000000000765f69ffff000000000002] ["range end"=7480000000000000765f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:33.985 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000765f69ffff000000000002] [endKey=7480000000000000765f69ffff000000000002ff]
[2024/09/16 20:04:33.985 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=160]
[2024/09/16 20:04:33.985 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=160]
[2024/09/16 20:04:33.985 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=160]
[2024/09/16 20:04:33.986 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 118, range: [7480000000000000765f69ffff000000000002, 7480000000000000765f69ffff000000000002ff), jobID: 160"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000765f69ffff000000000002ff00] ["take time"=498.916s]
[2024/09/16 20:04:33.986 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=160]
[2024/09/16 20:04:33.986 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000765f69ffff000000000002]
[2024/09/16 20:04:33.986 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:33.993 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=198] [neededSchemaVersion=199] ["elapsed time"=768.25s] [gotSchemaVersion=199] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:33.995 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=199]
[2024/09/16 20:04:33.995 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=199] ["take time"=4.380125ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:33.998 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.005 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=199] [neededSchemaVersion=200] ["elapsed time"=570.5s] [gotSchemaVersion=200] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:34.007 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=200]
[2024/09/16 20:04:34.008 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=200] ["take time"=3.710917ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.011 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.021 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=200] [neededSchemaVersion=201] ["elapsed time"=720.084s] [gotSchemaVersion=201] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:34.022 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=201]
[2024/09/16 20:04:34.023 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=201] ["take time"=4.011375ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.026 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.033 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=201] [neededSchemaVersion=202] ["elapsed time"=570.25s] [gotSchemaVersion=202] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:34.035 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=202]
[2024/09/16 20:04:34.036 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=202] ["take time"=3.895875ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.039 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [category=ddl] [job="ID:160, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091828568087, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:34.041 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:34.049 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=202] [neededSchemaVersion=203] ["elapsed time"=1.182833ms] [gotSchemaVersion=203] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:34.052 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=160] [version=203]
[2024/09/16 20:04:34.053 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=203] ["take time"=6.857125ms] [job="ID:160, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.062 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=160]
[2024/09/16 20:04:34.066 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=160] [tableID=118] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:34.069 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=160] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:34.070 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=160] [conn=952107012] [job="ID:160, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:32.632 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.082 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=160]
[2024/09/16 20:04:34.083 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=203] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:34.084 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:34.084 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:34.091 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:161, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:34.092 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:161, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:34.094 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.095 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"broadcasts_teamId_teams_id_fk\",\"L\":\"broadcasts_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:34.104 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=203] [neededSchemaVersion=204] ["elapsed time"=631.417s] [gotSchemaVersion=204] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:34.106 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=204]
[2024/09/16 20:04:34.107 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=204] ["take time"=4.596708ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.111 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.120 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=204] [neededSchemaVersion=205] ["elapsed time"=1.021708ms] [gotSchemaVersion=205] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:34.122 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=205]
[2024/09/16 20:04:34.123 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=205] ["take time"=5.460708ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.126 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.134 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=205] [neededSchemaVersion=206] ["elapsed time"=697.416s] [gotSchemaVersion=206] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:34.136 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=206]
[2024/09/16 20:04:34.137 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=206] ["take time"=4.288125ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:34.140 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.140 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=161] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 20:04:34.141 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x400d683e40 0x400d8bc000 0x400d8bc160 0x400d8bc2c0 0x400d8bc420 0x400d8bc580 0x400d8bc6e0 0x400d8bc840 0x400d8bc9a0 0x400d8bcb00 0x400d8bcc60 0x400d8bcdc0 0x400d8bcf20 0x400d8bd080 0x400d8bd1e0] [0x400d8c2750 0x400d8c2990 0x400d8c2bd0] [] [0x400d8a0300 0x400d8a03c0] public true false 0  0 0 0 0 15 3 2 0 452596091867365428 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:34.141 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=161] [physicalTableID=118] [startKey=] [endKey=]
[2024/09/16 20:04:34.145 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=161]
[2024/09/16 20:04:34.147 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091880734728, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:34.148 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=161] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 20:04:34.153 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/161/0]
[2024/09/16 20:04:34.154 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=118] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:34.166 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=14]
[2024/09/16 20:04:34.171 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=14] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:34.242 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=13]
[2024/09/16 20:04:34.244 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:34.245 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=13]
[2024/09/16 20:04:34.250 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:34.676 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=14] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:34.677 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=14] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:34.679 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=14] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:34.680 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x400e1b0420 0x400e1b0580 0x400e1b06e0 0x400e1b0840 0x400e1b09a0 0x400e1b0b00 0x400e1b0c60 0x400e1b0dc0 0x400e1b0f20 0x400e1b1080 0x400e1b11e0 0x400e1b1340 0x400e1b14a0 0x400e1b1600 0x400e1b1760] [0x400e1f99e0 0x400e1f9c20 0x400e1f9e60] [] [0x400d83d800 0x400d83d8c0] public true false 0  0 0 0 0 15 3 2 0 452596091867365428 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:34.680 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=14] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:35.176 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=14] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:35.367 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:35.377 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=206] [neededSchemaVersion=207] ["elapsed time"=805.125s] [gotSchemaVersion=207] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:35.379 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=207]
[2024/09/16 20:04:35.380 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=207] ["take time"=5.297125ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.384 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596091880734728, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.385 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=161] [table=broadcasts] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 20:04:35.393 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=207] [neededSchemaVersion=208] ["elapsed time"=724.25s] [gotSchemaVersion=208] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:35.394 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=208]
[2024/09/16 20:04:35.395 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=208] ["take time"=4.219917ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.398 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.399 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=161] [physicalTableID=118] [startKey=7480000000000000765f69ffff000000000003] [endKey=7480000000000000765f69ffff000000000003ff]
[2024/09/16 20:04:35.404 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=161]
[2024/09/16 20:04:35.405 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092208152589, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.407 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092208152589, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000000765f69ffff000000000003,EndKey:7480000000000000765f69ffff000000000003ff,First:false,PhysicalTableID:118,Ingest mode:false"]
[2024/09/16 20:04:35.408 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=118] ["start key"=7480000000000000765f69ffff000000000003] ["end key"=7480000000000000765f69ffff000000000003ff]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=118] ["range start"=7480000000000000765f69ffff000000000003] ["range end"=7480000000000000765f69ffff000000000003ff] ["range count"=1]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000765f69ffff000000000003] [endKey=7480000000000000765f69ffff000000000003ff]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=161]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=161]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=161]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 118, range: [7480000000000000765f69ffff000000000003, 7480000000000000765f69ffff000000000003ff), jobID: 161"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000765f69ffff000000000003ff00] ["take time"=379.417s]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=161]
[2024/09/16 20:04:35.409 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000765f69ffff000000000003]
[2024/09/16 20:04:35.409 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:35.416 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=208] [neededSchemaVersion=209] ["elapsed time"=624.542s] [gotSchemaVersion=209] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:35.417 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=209]
[2024/09/16 20:04:35.418 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=209] ["take time"=3.417958ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.420 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.426 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=209] [neededSchemaVersion=210] ["elapsed time"=618.041s] [gotSchemaVersion=210] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:35.428 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=210]
[2024/09/16 20:04:35.428 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=210] ["take time"=3.426542ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.431 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.439 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=210] [neededSchemaVersion=211] ["elapsed time"=612.459s] [gotSchemaVersion=211] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:35.440 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=211]
[2024/09/16 20:04:35.441 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=211] ["take time"=3.467833ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.443 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.450 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=211] [neededSchemaVersion=212] ["elapsed time"=614.5s] [gotSchemaVersion=212] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:35.451 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=212]
[2024/09/16 20:04:35.452 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=212] ["take time"=3.333708ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.455 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [category=ddl] [job="ID:161, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092208152589, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:35.461 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:35.465 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=212] [neededSchemaVersion=213] ["elapsed time"=758.459s] [gotSchemaVersion=213] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:35.467 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=161] [version=213]
[2024/09/16 20:04:35.468 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=213] ["take time"=4.391667ms] [job="ID:161, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.474 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=161]
[2024/09/16 20:04:35.475 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=161] [tableID=118] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:35.477 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=161] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:35.478 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=161] [conn=952107012] [job="ID:161, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:34.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.484 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=161]
[2024/09/16 20:04:35.485 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=213] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:35.485 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:35.485 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:35.488 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:162, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:35.489 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:162, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:35.490 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.490 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":4,\"idx_name\":{\"O\":\"broadcasts_emailContentId_emailContents_id_fk\",\"L\":\"broadcasts_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":7,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:35.496 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=213] [neededSchemaVersion=214] ["elapsed time"=619.042s] [gotSchemaVersion=214] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:35.498 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=214]
[2024/09/16 20:04:35.498 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=214] ["take time"=3.546583ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.501 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.507 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=214] [neededSchemaVersion=215] ["elapsed time"=560.75s] [gotSchemaVersion=215] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:35.509 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=215]
[2024/09/16 20:04:35.509 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=215] ["take time"=3.366125ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.511 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.518 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=215] [neededSchemaVersion=216] ["elapsed time"=594s] [gotSchemaVersion=216] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:35.519 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=216]
[2024/09/16 20:04:35.520 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=216] ["take time"=3.5445ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:35.523 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.524 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=162] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:35.525 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x400fd07600 0x400fd07760 0x400fd078c0 0x400fd07a20 0x400fd07b80 0x400fd07ce0 0x400fd07e40 0x400fd72000 0x400fd72160 0x400fd722c0 0x400fd72420 0x400fd72580 0x400fd726e0 0x400fd72840 0x400fd729a0] [0x400fd4fc20 0x400fd4fe60 0x400fd74120 0x400fd74360] [] [0x400fd44780 0x400fd44840 0x400fd44900] public true false 0  0 0 0 0 15 4 3 0 452596092234629151 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:35.525 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=162] [physicalTableID=118] [startKey=] [endKey=]
[2024/09/16 20:04:35.529 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=162]
[2024/09/16 20:04:35.530 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092234629161, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:35.531 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=162] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:35.535 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/162/0]
[2024/09/16 20:04:35.536 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=118] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:35.543 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=15]
[2024/09/16 20:04:35.543 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=15] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:35.673 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=14]
[2024/09/16 20:04:35.675 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:35.675 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=14]
[2024/09/16 20:04:35.679 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:36.046 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=15] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:36.046 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=15] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:36.048 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=15] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:36.049 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x40104c0580 0x40104c06e0 0x40104c0840 0x40104c09a0 0x40104c0b00 0x40104c0c60 0x40104c0dc0 0x40104c0f20 0x40104c1080 0x40104c11e0 0x40104c1340 0x40104c14a0 0x40104c1600 0x40104c1760 0x40104c18c0] [0x40108041b0 0x40108043f0 0x4010804630 0x4010804870] [] [0x401025e780 0x401025e840 0x401025e900] public true false 0  0 0 0 0 15 4 3 0 452596092234629151 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:36.049 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=15] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:36.546 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=15] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:36.747 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:36.756 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=216] [neededSchemaVersion=217] ["elapsed time"=710.208s] [gotSchemaVersion=217] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:36.757 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=217]
[2024/09/16 20:04:36.758 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=217] ["take time"=4.150542ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.762 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092234629161, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.762 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=162] [table=broadcasts] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:36.770 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=217] [neededSchemaVersion=218] ["elapsed time"=652.125s] [gotSchemaVersion=218] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:36.771 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=218]
[2024/09/16 20:04:36.772 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=218] ["take time"=3.807791ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.775 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.775 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=162] [physicalTableID=118] [startKey=7480000000000000765f69ffff000000000004] [endKey=7480000000000000765f69ffff000000000004ff]
[2024/09/16 20:04:36.780 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=162]
[2024/09/16 20:04:36.781 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092562309143, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.784 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092562309143, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:4,StartKey:7480000000000000765f69ffff000000000004,EndKey:7480000000000000765f69ffff000000000004ff,First:false,PhysicalTableID:118,Ingest mode:false"]
[2024/09/16 20:04:36.785 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=118] ["start key"=7480000000000000765f69ffff000000000004] ["end key"=7480000000000000765f69ffff000000000004ff]
[2024/09/16 20:04:36.785 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=118] ["range start"=7480000000000000765f69ffff000000000004] ["range end"=7480000000000000765f69ffff000000000004ff] ["range count"=1]
[2024/09/16 20:04:36.785 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000765f69ffff000000000004] [endKey=7480000000000000765f69ffff000000000004ff]
[2024/09/16 20:04:36.785 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=162]
[2024/09/16 20:04:36.785 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=162]
[2024/09/16 20:04:36.786 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=162]
[2024/09/16 20:04:36.786 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 118, range: [7480000000000000765f69ffff000000000004, 7480000000000000765f69ffff000000000004ff), jobID: 162"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000765f69ffff000000000004ff00] ["take time"=574.333s]
[2024/09/16 20:04:36.786 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=162]
[2024/09/16 20:04:36.786 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:4,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000765f69ffff000000000004]
[2024/09/16 20:04:36.786 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:36.796 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=218] [neededSchemaVersion=219] ["elapsed time"=719s] [gotSchemaVersion=219] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:36.798 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=219]
[2024/09/16 20:04:36.799 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=219] ["take time"=5.056459ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.803 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.815 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=219] [neededSchemaVersion=220] ["elapsed time"=2.910042ms] [gotSchemaVersion=220] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:36.822 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=220]
[2024/09/16 20:04:36.823 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=220] ["take time"=12.691167ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.828 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.843 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=220] [neededSchemaVersion=221] ["elapsed time"=1.31625ms] [gotSchemaVersion=221] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:36.846 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=221]
[2024/09/16 20:04:36.848 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=221] ["take time"=7.470584ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.852 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.862 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=221] [neededSchemaVersion=222] ["elapsed time"=704.833s] [gotSchemaVersion=222] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:36.864 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=222]
[2024/09/16 20:04:36.865 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=222] ["take time"=4.476125ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.869 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [category=ddl] [job="ID:162, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092562309143, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:36.871 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:36.878 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=222] [neededSchemaVersion=223] ["elapsed time"=952s] [gotSchemaVersion=223] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:36.880 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=162] [version=223]
[2024/09/16 20:04:36.881 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=223] ["take time"=5.432583ms] [job="ID:162, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.889 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=162]
[2024/09/16 20:04:36.891 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=162] [tableID=118] [indexIDs="[9223090561878065156]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:36.894 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=162] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:36.896 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=162] [conn=952107012] [job="ID:162, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:35.48 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.905 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=162]
[2024/09/16 20:04:36.906 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=223] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_winningAbTestVariantId_abTestVariants_id_fk` FOREIGN KEY (`winningAbTestVariantId`) REFERENCES `abTestVariants`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:36.907 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:36.907 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:36.912 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:163, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:36.912 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:163, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_winningAbTestVariantId_abTestVariants_id_fk` FOREIGN KEY (`winningAbTestVariantId`) REFERENCES `abTestVariants`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:36.913 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.914 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":5,\"idx_name\":{\"O\":\"broadcasts_winningAbTestVariantId_abTestVariants_id_fk\",\"L\":\"broadcasts_winningabtestvariantid_abtestvariants_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"winningAbTestVariantId\",\"L\":\"winningabtestvariantid\"},\"offset\":8,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:36.922 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=223] [neededSchemaVersion=224] ["elapsed time"=729.375s] [gotSchemaVersion=224] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:36.924 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=224]
[2024/09/16 20:04:36.925 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=224] ["take time"=4.455708ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.929 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.938 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=224] [neededSchemaVersion=225] ["elapsed time"=747.041s] [gotSchemaVersion=225] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:36.940 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=225]
[2024/09/16 20:04:36.941 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=225] ["take time"=4.700375ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.944 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.953 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=225] [neededSchemaVersion=226] ["elapsed time"=606.542s] [gotSchemaVersion=226] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:36.954 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=226]
[2024/09/16 20:04:36.955 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=226] ["take time"=4.070833ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:36.958 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.959 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=163] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 20:04:36.960 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x401263a840 0x401263a9a0 0x401263ab00 0x401263ac60 0x401263adc0 0x401263af20 0x401263b080 0x401263b1e0 0x401263b340 0x401263b4a0 0x401263b600 0x401263b760 0x401263b8c0 0x401263ba20 0x401263bb80] [0x401265cc60 0x401265cea0 0x401265d0e0 0x401265d320 0x401265d560] [] [0x40120ede00 0x40120edec0 0x401265e000 0x401265e0c0] public true false 0  0 0 0 0 15 5 4 0 452596092614475785 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:36.960 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=163] [physicalTableID=118] [startKey=] [endKey=]
[2024/09/16 20:04:36.965 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=163]
[2024/09/16 20:04:36.967 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092614475795, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:36.968 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=163] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 20:04:36.972 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/163/0]
[2024/09/16 20:04:36.975 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=118] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:36.985 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=16]
[2024/09/16 20:04:36.985 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=16] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:37.045 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=15]
[2024/09/16 20:04:37.047 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:37.047 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=15]
[2024/09/16 20:04:37.053 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:37.488 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=16] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:37.490 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=16] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:37.495 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=16] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:37.496 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{118 broadcasts utf8mb4 utf8mb4_bin [0x4013020420 0x4013020580 0x40130206e0 0x4013020840 0x40130209a0 0x4013020b00 0x4013020c60 0x4013020dc0 0x4013020f20 0x4013021080 0x40130211e0 0x4013021340 0x40130214a0 0x4013021600 0x4013021760] [0x4012ef7560 0x4012ef77a0 0x4012ef79e0 0x4012ef7c20 0x4012ef7e60] [] [0x4012b41a40 0x4012b41b00 0x4012b41bc0 0x4012b41c80] public true false 0  0 0 0 0 15 5 4 0 452596092614475785 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 2}"] ["table/partition ID"=118] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:37.496 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=16] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:37.992 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=16] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:38.193 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:38.201 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=226] [neededSchemaVersion=227] ["elapsed time"=709.292s] [gotSchemaVersion=227] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:38.203 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=227]
[2024/09/16 20:04:38.207 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=227] ["take time"=7.259083ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.210 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092614475795, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.210 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=163] [table=broadcasts] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 20:04:38.217 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=227] [neededSchemaVersion=228] ["elapsed time"=714.084s] [gotSchemaVersion=228] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:38.219 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=228]
[2024/09/16 20:04:38.220 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=228] ["take time"=4.533958ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.223 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.224 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=163] [physicalTableID=118] [startKey=7480000000000000765f69ffff000000000005] [endKey=7480000000000000765f69ffff000000000005ff]
[2024/09/16 20:04:38.228 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=163]
[2024/09/16 20:04:38.229 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092942155800, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.231 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092942155800, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:5,StartKey:7480000000000000765f69ffff000000000005,EndKey:7480000000000000765f69ffff000000000005ff,First:false,PhysicalTableID:118,Ingest mode:false"]
[2024/09/16 20:04:38.232 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=118] ["start key"=7480000000000000765f69ffff000000000005] ["end key"=7480000000000000765f69ffff000000000005ff]
[2024/09/16 20:04:38.232 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=118] ["range start"=7480000000000000765f69ffff000000000005] ["range end"=7480000000000000765f69ffff000000000005ff] ["range count"=1]
[2024/09/16 20:04:38.232 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000765f69ffff000000000005] [endKey=7480000000000000765f69ffff000000000005ff]
[2024/09/16 20:04:38.232 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=163]
[2024/09/16 20:04:38.232 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=163]
[2024/09/16 20:04:38.232 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=163]
[2024/09/16 20:04:38.233 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 118, range: [7480000000000000765f69ffff000000000005, 7480000000000000765f69ffff000000000005ff), jobID: 163"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000765f69ffff000000000005ff00] ["take time"=527.541s]
[2024/09/16 20:04:38.233 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=163]
[2024/09/16 20:04:38.233 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:5,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000765f69ffff000000000005]
[2024/09/16 20:04:38.233 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:38.239 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=228] [neededSchemaVersion=229] ["elapsed time"=714.833s] [gotSchemaVersion=229] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:38.241 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=229]
[2024/09/16 20:04:38.241 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=229] ["take time"=3.740333ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.244 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.251 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=229] [neededSchemaVersion=230] ["elapsed time"=613.083s] [gotSchemaVersion=230] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:38.252 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=230]
[2024/09/16 20:04:38.253 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=230] ["take time"=3.4325ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.255 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.264 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=230] [neededSchemaVersion=231] ["elapsed time"=762.667s] [gotSchemaVersion=231] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:38.265 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=231]
[2024/09/16 20:04:38.266 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=231] ["take time"=3.801292ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.268 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.275 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=231] [neededSchemaVersion=232] ["elapsed time"=634.125s] [gotSchemaVersion=232] [phyTblIDs="[118]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:38.277 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=232]
[2024/09/16 20:04:38.277 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=232] ["take time"=3.660625ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.281 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [category=ddl] [job="ID:163, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092942155800, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:38.283 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:38.288 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=232] [neededSchemaVersion=233] ["elapsed time"=700.208s] [gotSchemaVersion=233] [phyTblIDs="[118]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:38.289 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=163] [version=233]
[2024/09/16 20:04:38.290 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=233] ["take time"=3.557208ms] [job="ID:163, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.295 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=163]
[2024/09/16 20:04:38.297 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=163] [tableID=118] [indexIDs="[9223090561878065157]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:38.299 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=163] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:38.300 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=163] [conn=952107012] [job="ID:163, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:118, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:36.88 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.306 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=163]
[2024/09/16 20:04:38.307 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=233] [cur_db=test] [sql="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_automationStepId_automationSteps_id_fk` FOREIGN KEY (`automationStepId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:38.307 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:38.307 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:38.311 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:164, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:38.311 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:164, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_automationStepId_automationSteps_id_fk` FOREIGN KEY (`automationStepId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:38.312 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.312 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"contactAutomationSteps_automationStepId_automationSteps_id_fk\",\"L\":\"contactautomationsteps_automationstepid_automationsteps_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"automationStepId\",\"L\":\"automationstepid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:38.319 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=233] [neededSchemaVersion=234] ["elapsed time"=531.791s] [gotSchemaVersion=234] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:38.321 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=234]
[2024/09/16 20:04:38.322 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=234] ["take time"=3.89ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.324 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.331 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=234] [neededSchemaVersion=235] ["elapsed time"=496.208s] [gotSchemaVersion=235] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:38.332 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=235]
[2024/09/16 20:04:38.333 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=235] ["take time"=3.396583ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.335 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.341 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=235] [neededSchemaVersion=236] ["elapsed time"=458.084s] [gotSchemaVersion=236] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:38.343 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=236]
[2024/09/16 20:04:38.343 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=236] ["take time"=3.269166ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:38.346 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.347 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=164] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 20:04:38.348 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{120 contactAutomationSteps utf8mb4 utf8mb4_bin [0x40140b7080 0x40140b71e0 0x40140b7340 0x40140b74a0 0x40140b7600 0x40140b7760 0x40140b78c0 0x40140b7a20 0x40140b7b80 0x40140b7ce0] [0x40140cc630] [] [] public true false 0  0 0 0 0 10 1 0 0 452596092981477382 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=120] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:38.348 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=164] [physicalTableID=120] [startKey=] [endKey=]
[2024/09/16 20:04:38.353 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=164]
[2024/09/16 20:04:38.354 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092981477393, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:38.354 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=164] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 20:04:38.358 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/164/0]
[2024/09/16 20:04:38.358 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=120] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:38.366 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=17]
[2024/09/16 20:04:38.366 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=17] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:38.487 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=16]
[2024/09/16 20:04:38.489 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:38.489 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=16]
[2024/09/16 20:04:38.494 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:38.871 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=17] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:38.871 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=17] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:38.873 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=17] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:38.875 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{120 contactAutomationSteps utf8mb4 utf8mb4_bin [0x40146d86e0 0x40146d8840 0x40146d89a0 0x40146d8b00 0x40146d8c60 0x40146d8dc0 0x40146d8f20 0x40146d9080 0x40146d91e0 0x40146d9340] [0x40147847e0] [] [] public true false 0  0 0 0 0 10 1 0 0 452596092981477382 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=120] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:38.876 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=17] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:39.369 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=17] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:39.570 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:39.578 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=236] [neededSchemaVersion=237] ["elapsed time"=564.75s] [gotSchemaVersion=237] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:39.580 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=237]
[2024/09/16 20:04:39.581 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=237] ["take time"=3.59ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.583 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596092981477393, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.584 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=164] [table=contactAutomationSteps] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 20:04:39.590 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=237] [neededSchemaVersion=238] ["elapsed time"=485.5s] [gotSchemaVersion=238] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:39.592 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=238]
[2024/09/16 20:04:39.593 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=238] ["take time"=4.09225ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.596 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.597 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=164] [physicalTableID=120] [startKey=7480000000000000785f69ffff000000000001] [endKey=7480000000000000785f69ffff000000000001ff]
[2024/09/16 20:04:39.603 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=164]
[2024/09/16 20:04:39.604 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093309419533, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.607 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093309419533, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000785f69ffff000000000001,EndKey:7480000000000000785f69ffff000000000001ff,First:false,PhysicalTableID:120,Ingest mode:false"]
[2024/09/16 20:04:39.608 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=120] ["start key"=7480000000000000785f69ffff000000000001] ["end key"=7480000000000000785f69ffff000000000001ff]
[2024/09/16 20:04:39.608 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=120] ["range start"=7480000000000000785f69ffff000000000001] ["range end"=7480000000000000785f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:39.608 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000785f69ffff000000000001] [endKey=7480000000000000785f69ffff000000000001ff]
[2024/09/16 20:04:39.608 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=164]
[2024/09/16 20:04:39.608 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=164]
[2024/09/16 20:04:39.609 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=164]
[2024/09/16 20:04:39.609 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 120, range: [7480000000000000785f69ffff000000000001, 7480000000000000785f69ffff000000000001ff), jobID: 164"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000785f69ffff000000000001ff00] ["take time"=608.458s]
[2024/09/16 20:04:39.609 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=164]
[2024/09/16 20:04:39.609 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000785f69ffff000000000001]
[2024/09/16 20:04:39.609 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:39.616 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=238] [neededSchemaVersion=239] ["elapsed time"=634.792s] [gotSchemaVersion=239] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:39.618 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=239]
[2024/09/16 20:04:39.619 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=239] ["take time"=4.215834ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.622 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.629 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=239] [neededSchemaVersion=240] ["elapsed time"=610.791s] [gotSchemaVersion=240] [phyTblIDs="[120]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:39.631 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=240]
[2024/09/16 20:04:39.632 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=240] ["take time"=4.189791ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.635 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.644 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=240] [neededSchemaVersion=241] ["elapsed time"=561.416s] [gotSchemaVersion=241] [phyTblIDs="[120]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:39.645 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=241]
[2024/09/16 20:04:39.649 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=241] ["take time"=7.599958ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.653 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.660 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=241] [neededSchemaVersion=242] ["elapsed time"=512.458s] [gotSchemaVersion=242] [phyTblIDs="[120]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:39.662 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=242]
[2024/09/16 20:04:39.662 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=242] ["take time"=3.453792ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.665 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [category=ddl] [job="ID:164, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093309419533, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:39.667 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:39.672 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=242] [neededSchemaVersion=243] ["elapsed time"=539.75s] [gotSchemaVersion=243] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:39.673 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=164] [version=243]
[2024/09/16 20:04:39.674 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=243] ["take time"=3.532ms] [job="ID:164, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.679 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=164]
[2024/09/16 20:04:39.680 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=164] [tableID=120] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:39.681 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=164] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:39.682 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=164] [conn=952107012] [job="ID:164, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:38.28 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.687 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=164]
[2024/09/16 20:04:39.688 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=243] [cur_db=test] [sql="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:39.689 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:39.689 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:39.692 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:165, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:39.693 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:165, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:39.694 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.695 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contactAutomationSteps_contactId_contacts_id_fk\",\"L\":\"contactautomationsteps_contactid_contacts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:39.701 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=243] [neededSchemaVersion=244] ["elapsed time"=583.291s] [gotSchemaVersion=244] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:39.702 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=244]
[2024/09/16 20:04:39.703 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=244] ["take time"=3.54725ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.706 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.714 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=244] [neededSchemaVersion=245] ["elapsed time"=631.208s] [gotSchemaVersion=245] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:39.715 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=245]
[2024/09/16 20:04:39.716 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=245] ["take time"=4.466458ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.720 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.729 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=245] [neededSchemaVersion=246] ["elapsed time"=631s] [gotSchemaVersion=246] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:39.731 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=246]
[2024/09/16 20:04:39.732 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=246] ["take time"=4.762833ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:39.736 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.737 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=165] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 20:04:39.738 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{120 contactAutomationSteps utf8mb4 utf8mb4_bin [0x4015466000 0x4015466160 0x40154662c0 0x4015466420 0x4015466580 0x40154666e0 0x4015466840 0x40154669a0 0x4015466b00 0x4015466c60] [0x401545b830 0x401545ba70] [] [0x40153f7b00] public true false 0  0 0 0 0 10 2 1 0 452596093335633956 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=120] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:39.738 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=165] [physicalTableID=120] [startKey=] [endKey=]
[2024/09/16 20:04:39.743 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=165]
[2024/09/16 20:04:39.745 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093348478982, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:39.745 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=165] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 20:04:39.750 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/165/0]
[2024/09/16 20:04:39.751 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=120] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:39.759 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=18]
[2024/09/16 20:04:39.759 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=18] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:39.867 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=17]
[2024/09/16 20:04:39.869 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:39.869 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=17]
[2024/09/16 20:04:39.874 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:40.262 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=18] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:40.262 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=18] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:40.263 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=18] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:40.265 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{120 contactAutomationSteps utf8mb4 utf8mb4_bin [0x4015f92420 0x4015f92580 0x4015f926e0 0x4015f92840 0x4015f929a0 0x4015f92b00 0x4015f92c60 0x4015f92dc0 0x4015f92f20 0x4015f93080] [0x4015f8f830 0x4015f8fa70] [] [0x4015fba3c0] public true false 0  0 0 0 0 10 2 1 0 452596093335633956 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=120] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:40.265 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=18] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:40.762 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=18] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:40.967 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:40.975 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=246] [neededSchemaVersion=247] ["elapsed time"=522.917s] [gotSchemaVersion=247] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:40.977 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=247]
[2024/09/16 20:04:40.977 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=247] ["take time"=3.63925ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:40.980 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093348478982, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:40.981 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=165] [table=contactAutomationSteps] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 20:04:40.988 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=247] [neededSchemaVersion=248] ["elapsed time"=514.792s] [gotSchemaVersion=248] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:40.990 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=248]
[2024/09/16 20:04:40.990 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=248] ["take time"=3.703375ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:40.993 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:40.993 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=165] [physicalTableID=120] [startKey=7480000000000000785f69ffff000000000002] [endKey=7480000000000000785f69ffff000000000002ff]
[2024/09/16 20:04:40.998 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=165]
[2024/09/16 20:04:40.999 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093676158987, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.000 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093676158987, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000785f69ffff000000000002,EndKey:7480000000000000785f69ffff000000000002ff,First:false,PhysicalTableID:120,Ingest mode:false"]
[2024/09/16 20:04:41.001 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=120] ["start key"=7480000000000000785f69ffff000000000002] ["end key"=7480000000000000785f69ffff000000000002ff]
[2024/09/16 20:04:41.002 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=120] ["range start"=7480000000000000785f69ffff000000000002] ["range end"=7480000000000000785f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:41.002 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000785f69ffff000000000002] [endKey=7480000000000000785f69ffff000000000002ff]
[2024/09/16 20:04:41.002 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=165]
[2024/09/16 20:04:41.002 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=165]
[2024/09/16 20:04:41.002 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=165]
[2024/09/16 20:04:41.002 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 120, range: [7480000000000000785f69ffff000000000002, 7480000000000000785f69ffff000000000002ff), jobID: 165"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000785f69ffff000000000002ff00] ["take time"=468.292s]
[2024/09/16 20:04:41.002 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=165]
[2024/09/16 20:04:41.003 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000785f69ffff000000000002]
[2024/09/16 20:04:41.003 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:41.009 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=248] [neededSchemaVersion=249] ["elapsed time"=518s] [gotSchemaVersion=249] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:41.010 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=249]
[2024/09/16 20:04:41.011 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=249] ["take time"=3.291958ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.014 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.021 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=249] [neededSchemaVersion=250] ["elapsed time"=640.542s] [gotSchemaVersion=250] [phyTblIDs="[120]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:41.023 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=250]
[2024/09/16 20:04:41.023 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=250] ["take time"=3.517875ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.026 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.034 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=250] [neededSchemaVersion=251] ["elapsed time"=696s] [gotSchemaVersion=251] [phyTblIDs="[120]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:41.036 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=251]
[2024/09/16 20:04:41.037 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=251] ["take time"=3.959417ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.040 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.047 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=251] [neededSchemaVersion=252] ["elapsed time"=607s] [gotSchemaVersion=252] [phyTblIDs="[120]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:41.049 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=252]
[2024/09/16 20:04:41.050 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=252] ["take time"=4.277792ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.053 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [category=ddl] [job="ID:165, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093676158987, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:41.055 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:41.061 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=252] [neededSchemaVersion=253] ["elapsed time"=488.375s] [gotSchemaVersion=253] [phyTblIDs="[120]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:41.062 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=165] [version=253]
[2024/09/16 20:04:41.063 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=253] ["take time"=3.42775ms] [job="ID:165, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.069 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=165]
[2024/09/16 20:04:41.070 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=165] [tableID=120] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:41.072 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=165] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:41.072 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=165] [conn=952107012] [job="ID:165, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:120, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:39.68 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.078 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=165]
[2024/09/16 20:04:41.079 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=253] [cur_db=test] [sql="ALTER TABLE `contactImports` ADD CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:41.080 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactimports] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:41.080 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactimports] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:41.083 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:166, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:41.083 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:166, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactImports` ADD CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:41.084 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.085 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contactImports_audienceId_audiences_id_fk\",\"L\":\"contactimports_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:41.092 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=253] [neededSchemaVersion=254] ["elapsed time"=1.17375ms] [gotSchemaVersion=254] [phyTblIDs="[122]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:41.099 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=254]
[2024/09/16 20:04:41.103 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=254] ["take time"=12.977209ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.106 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.113 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=254] [neededSchemaVersion=255] ["elapsed time"=499.541s] [gotSchemaVersion=255] [phyTblIDs="[122]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:41.115 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=255]
[2024/09/16 20:04:41.115 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=255] ["take time"=3.495792ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.118 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.125 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=255] [neededSchemaVersion=256] ["elapsed time"=552.416s] [gotSchemaVersion=256] [phyTblIDs="[122]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:41.126 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=256]
[2024/09/16 20:04:41.127 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=256] ["take time"=3.6775ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:41.130 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.130 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=166] [table=contactImports] ["ingest mode"=true] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 20:04:41.131 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{122 contactImports utf8mb4 utf8mb4_bin [0x4016c1fce0 0x4016c1fe40 0x40014f5b80 0x4001a10f20 0x4001a11080 0x4001a111e0 0x4001a11340 0x4001a114a0 0x4001a11600 0x4001a11a20] [0x4000dc75f0 0x4000dc7c20] [] [] public true false 0  0 0 0 0 10 2 0 0 452596093702373405 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=122] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:41.131 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=166] [physicalTableID=122] [startKey=] [endKey=]
[2024/09/16 20:04:41.136 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=166]
[2024/09/16 20:04:41.137 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093715742721, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:41.138 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=166] [table=contactImports] ["ingest mode"=true] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 20:04:41.141 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/166/0]
[2024/09/16 20:04:41.143 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=122] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:41.151 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=19]
[2024/09/16 20:04:41.151 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=19] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:41.260 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=18]
[2024/09/16 20:04:41.262 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:41.263 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=18]
[2024/09/16 20:04:41.268 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:41.655 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=19] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:41.655 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=19] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:41.657 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=19] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:41.658 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{122 contactImports utf8mb4 utf8mb4_bin [0x4001e5e6e0 0x4001e5f080 0x4005ecd1e0 0x4005ecd340 0x4005ecd4a0 0x4005ecd600 0x4005ecd760 0x4005ecd8c0 0x4005ecda20 0x4005ecdb80] [0x4002b19200 0x4002b19440] [] [] public true false 0  0 0 0 0 10 2 0 0 452596093702373405 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=122] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:41.658 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=19] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:42.157 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=19] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:42.354 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:42.363 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=256] [neededSchemaVersion=257] ["elapsed time"=765.5s] [gotSchemaVersion=257] [phyTblIDs="[122]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:42.365 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=257]
[2024/09/16 20:04:42.366 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=257] ["take time"=4.67825ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.370 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596093715742721, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.370 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=166] [table=contactImports] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 20:04:42.377 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=257] [neededSchemaVersion=258] ["elapsed time"=541.166s] [gotSchemaVersion=258] [phyTblIDs="[122]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:42.379 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=258]
[2024/09/16 20:04:42.380 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=258] ["take time"=4.046625ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.382 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.383 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=166] [physicalTableID=122] [startKey=74800000000000007a5f69ffff000000000002] [endKey=74800000000000007a5f69ffff000000000002ff]
[2024/09/16 20:04:42.389 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=166]
[2024/09/16 20:04:42.391 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094043160580, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.392 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094043160580, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000007a5f69ffff000000000002,EndKey:74800000000000007a5f69ffff000000000002ff,First:false,PhysicalTableID:122,Ingest mode:false"]
[2024/09/16 20:04:42.394 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=122] ["start key"=74800000000000007a5f69ffff000000000002] ["end key"=74800000000000007a5f69ffff000000000002ff]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=122] ["range start"=74800000000000007a5f69ffff000000000002] ["range end"=74800000000000007a5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000007a5f69ffff000000000002] [endKey=74800000000000007a5f69ffff000000000002ff]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=166]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=166]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=166]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 122, range: [74800000000000007a5f69ffff000000000002, 74800000000000007a5f69ffff000000000002ff), jobID: 166"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000007a5f69ffff000000000002ff00] ["take time"=425.667s]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=166]
[2024/09/16 20:04:42.395 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000007a5f69ffff000000000002]
[2024/09/16 20:04:42.395 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:42.403 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=258] [neededSchemaVersion=259] ["elapsed time"=575.458s] [gotSchemaVersion=259] [phyTblIDs="[122]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:42.406 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=259]
[2024/09/16 20:04:42.406 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=259] ["take time"=4.717083ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.410 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.417 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=259] [neededSchemaVersion=260] ["elapsed time"=764.875s] [gotSchemaVersion=260] [phyTblIDs="[122]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:42.419 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=260]
[2024/09/16 20:04:42.420 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=260] ["take time"=4.231834ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.423 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.432 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=260] [neededSchemaVersion=261] ["elapsed time"=542.5s] [gotSchemaVersion=261] [phyTblIDs="[122]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:42.434 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=261]
[2024/09/16 20:04:42.435 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=261] ["take time"=3.985042ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.438 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.445 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=261] [neededSchemaVersion=262] ["elapsed time"=655.333s] [gotSchemaVersion=262] [phyTblIDs="[122]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:42.447 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=262]
[2024/09/16 20:04:42.448 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=262] ["take time"=4.117917ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.452 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [category=ddl] [job="ID:166, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094043160580, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:42.454 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:42.459 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=262] [neededSchemaVersion=263] ["elapsed time"=634.166s] [gotSchemaVersion=263] [phyTblIDs="[122]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:42.461 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=166] [version=263]
[2024/09/16 20:04:42.462 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=263] ["take time"=3.990083ms] [job="ID:166, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.468 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=166]
[2024/09/16 20:04:42.469 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=166] [tableID=122] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:42.471 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=166] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:42.471 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=166] [conn=952107012] [job="ID:166, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:122, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:41.079 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.478 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=166]
[2024/09/16 20:04:42.479 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=263] [cur_db=test] [sql="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:42.479 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:42.480 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:42.483 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:167, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:42.483 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:167, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:42.485 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.485 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contacts_audienceId_audiences_id_fk\",\"L\":\"contacts_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":7,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:42.492 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=263] [neededSchemaVersion=264] ["elapsed time"=539.625s] [gotSchemaVersion=264] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:42.493 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=264]
[2024/09/16 20:04:42.494 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=264] ["take time"=3.745916ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.497 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.504 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=264] [neededSchemaVersion=265] ["elapsed time"=627.375s] [gotSchemaVersion=265] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:42.506 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=265]
[2024/09/16 20:04:42.507 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=265] ["take time"=3.573958ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.509 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.518 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=265] [neededSchemaVersion=266] ["elapsed time"=1.450917ms] [gotSchemaVersion=266] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:42.520 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=266]
[2024/09/16 20:04:42.520 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=266] ["take time"=4.747083ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:42.523 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.524 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=167] [table=contacts] ["ingest mode"=true] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 20:04:42.525 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{124 contacts utf8mb4 utf8mb4_bin [0x400ca33080 0x400ca331e0 0x400ca33340 0x400ca334a0 0x400ca33600 0x400ca33760 0x400ca338c0 0x400ca33a20 0x400ca33b80 0x400ca33ce0 0x400ca33e40 0x400cc22000 0x400cc22160] [0x40077262d0 0x4007726750] [] [] public true false 0  0 0 0 0 13 2 0 0 452596094069375000 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=124] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:42.525 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=167] [physicalTableID=124] [startKey=] [endKey=]
[2024/09/16 20:04:42.530 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=167]
[2024/09/16 20:04:42.531 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094069375010, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:42.532 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=167] [table=contacts] ["ingest mode"=true] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 20:04:42.536 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/167/0]
[2024/09/16 20:04:42.536 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=124] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:42.544 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=20]
[2024/09/16 20:04:42.545 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=20] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:42.653 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=19]
[2024/09/16 20:04:42.655 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:42.655 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=19]
[2024/09/16 20:04:42.660 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:43.046 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=20] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:43.046 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=20] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:43.048 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=20] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:43.049 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{124 contacts utf8mb4 utf8mb4_bin [0x400fa3a9a0 0x400fa3ab00 0x400fa3ac60 0x400fa3adc0 0x400fa3af20 0x400fa3b080 0x4010994000 0x4010994160 0x40109942c0 0x4010994420 0x4010994580 0x40109946e0 0x4010994840] [0x4007dfa090 0x4007dfa510] [] [] public true false 0  0 0 0 0 13 2 0 0 452596094069375000 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=124] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:43.049 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=20] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:43.547 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=20] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:43.748 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:43.757 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=266] [neededSchemaVersion=267] ["elapsed time"=654.25s] [gotSchemaVersion=267] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:43.759 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=267]
[2024/09/16 20:04:43.760 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=267] ["take time"=4.061041ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.762 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094069375010, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.763 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=167] [table=contacts] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 20:04:43.770 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=267] [neededSchemaVersion=268] ["elapsed time"=583.25s] [gotSchemaVersion=268] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:43.771 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=268]
[2024/09/16 20:04:43.772 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=268] ["take time"=3.715833ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.774 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.775 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=167] [physicalTableID=124] [startKey=74800000000000007c5f69ffff000000000002] [endKey=74800000000000007c5f69ffff000000000002ff]
[2024/09/16 20:04:43.780 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=167]
[2024/09/16 20:04:43.781 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094397579288, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.782 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094397579288, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000007c5f69ffff000000000002,EndKey:74800000000000007c5f69ffff000000000002ff,First:false,PhysicalTableID:124,Ingest mode:false"]
[2024/09/16 20:04:43.783 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=124] ["start key"=74800000000000007c5f69ffff000000000002] ["end key"=74800000000000007c5f69ffff000000000002ff]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=124] ["range start"=74800000000000007c5f69ffff000000000002] ["range end"=74800000000000007c5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000007c5f69ffff000000000002] [endKey=74800000000000007c5f69ffff000000000002ff]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=167]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=167]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=167]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 124, range: [74800000000000007c5f69ffff000000000002, 74800000000000007c5f69ffff000000000002ff), jobID: 167"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000007c5f69ffff000000000002ff00] ["take time"=383.458s]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=167]
[2024/09/16 20:04:43.784 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000007c5f69ffff000000000002]
[2024/09/16 20:04:43.784 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:43.791 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=268] [neededSchemaVersion=269] ["elapsed time"=629.625s] [gotSchemaVersion=269] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:43.793 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=269]
[2024/09/16 20:04:43.794 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=269] ["take time"=4.463125ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.797 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.803 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=269] [neededSchemaVersion=270] ["elapsed time"=534.708s] [gotSchemaVersion=270] [phyTblIDs="[124]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:43.805 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=270]
[2024/09/16 20:04:43.806 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=270] ["take time"=3.686166ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.808 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.816 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=270] [neededSchemaVersion=271] ["elapsed time"=561.542s] [gotSchemaVersion=271] [phyTblIDs="[124]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:43.818 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=271]
[2024/09/16 20:04:43.818 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=271] ["take time"=3.400375ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.821 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.829 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=271] [neededSchemaVersion=272] ["elapsed time"=583.875s] [gotSchemaVersion=272] [phyTblIDs="[124]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:43.831 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=272]
[2024/09/16 20:04:43.832 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=272] ["take time"=4.417458ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.835 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [category=ddl] [job="ID:167, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094397579288, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:43.837 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:43.843 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=272] [neededSchemaVersion=273] ["elapsed time"=542.417s] [gotSchemaVersion=273] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:43.844 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=167] [version=273]
[2024/09/16 20:04:43.845 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=273] ["take time"=3.613375ms] [job="ID:167, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.850 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=167]
[2024/09/16 20:04:43.852 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=167] [tableID=124] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:43.854 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=167] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:43.854 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=167] [conn=952107012] [job="ID:167, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:42.479 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.861 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=167]
[2024/09/16 20:04:43.862 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=273] [cur_db=test] [sql="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_contactImportId_contactImports_id_fk` FOREIGN KEY (`contactImportId`) REFERENCES `contactImports`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:43.862 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:43.862 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:43.866 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:168, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:43.866 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:168, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_contactImportId_contactImports_id_fk` FOREIGN KEY (`contactImportId`) REFERENCES `contactImports`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:43.867 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.867 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"contacts_contactImportId_contactImports_id_fk\",\"L\":\"contacts_contactimportid_contactimports_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactImportId\",\"L\":\"contactimportid\"},\"offset\":10,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:43.874 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=273] [neededSchemaVersion=274] ["elapsed time"=569.084s] [gotSchemaVersion=274] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:43.875 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=274]
[2024/09/16 20:04:43.876 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=274] ["take time"=3.558625ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.879 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.885 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=274] [neededSchemaVersion=275] ["elapsed time"=625.625s] [gotSchemaVersion=275] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:43.887 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=275]
[2024/09/16 20:04:43.887 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=275] ["take time"=3.663875ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.890 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.897 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=275] [neededSchemaVersion=276] ["elapsed time"=586.125s] [gotSchemaVersion=276] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:43.898 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=276]
[2024/09/16 20:04:43.899 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=276] ["take time"=3.610167ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:43.902 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.902 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=168] [table=contacts] ["ingest mode"=true] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 20:04:43.903 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{124 contacts utf8mb4 utf8mb4_bin [0x40081c2840 0x40081c29a0 0x40081c2b00 0x40081c2c60 0x40081c2dc0 0x40081c2f20 0x40081c3080 0x40081c31e0 0x40081c3340 0x40081c34a0 0x40081c3600 0x40081c3760 0x40081c38c0] [0x400abd7320 0x400abd75f0 0x400abd7830] [] [0x400f808600] public true false 0  0 0 0 0 13 3 1 0 452596094436376584 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=124] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:43.903 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=168] [physicalTableID=124] [startKey=] [endKey=]
[2024/09/16 20:04:43.907 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=168]
[2024/09/16 20:04:43.908 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094436376594, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:43.909 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=168] [table=contacts] ["ingest mode"=true] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 20:04:43.912 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/168/0]
[2024/09/16 20:04:43.913 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=124] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:43.921 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=21]
[2024/09/16 20:04:43.922 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=21] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:44.045 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=20]
[2024/09/16 20:04:44.048 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:44.048 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=20]
[2024/09/16 20:04:44.053 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:44.424 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=21] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:44.424 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=21] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:44.426 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=21] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:44.427 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{124 contacts utf8mb4 utf8mb4_bin [0x400b104160 0x400b1042c0 0x400b104420 0x400b104580 0x400b1046e0 0x400b104840 0x400b1049a0 0x400b104b00 0x400b104c60 0x400b104dc0 0x400b104f20 0x400b105080 0x400b1051e0] [0x400c0dee10 0x400c0df0e0 0x400c0df3b0] [] [0x40058e9980] public true false 0  0 0 0 0 13 3 1 0 452596094436376584 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=124] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:44.427 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=21] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:44.925 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=21] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:45.125 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:45.134 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=276] [neededSchemaVersion=277] ["elapsed time"=624.459s] [gotSchemaVersion=277] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:45.136 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=277]
[2024/09/16 20:04:45.136 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=277] ["take time"=3.81475ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.139 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094436376594, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.140 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=168] [table=contacts] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 20:04:45.147 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=277] [neededSchemaVersion=278] ["elapsed time"=647.292s] [gotSchemaVersion=278] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:45.148 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=278]
[2024/09/16 20:04:45.149 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=278] ["take time"=4.162417ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.152 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.153 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=168] [physicalTableID=124] [startKey=74800000000000007c5f69ffff000000000003] [endKey=74800000000000007c5f69ffff000000000003ff]
[2024/09/16 20:04:45.157 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=168]
[2024/09/16 20:04:45.158 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094764580882, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.160 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094764580882, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:74800000000000007c5f69ffff000000000003,EndKey:74800000000000007c5f69ffff000000000003ff,First:false,PhysicalTableID:124,Ingest mode:false"]
[2024/09/16 20:04:45.161 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=124] ["start key"=74800000000000007c5f69ffff000000000003] ["end key"=74800000000000007c5f69ffff000000000003ff]
[2024/09/16 20:04:45.161 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=124] ["range start"=74800000000000007c5f69ffff000000000003] ["range end"=74800000000000007c5f69ffff000000000003ff] ["range count"=1]
[2024/09/16 20:04:45.161 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000007c5f69ffff000000000003] [endKey=74800000000000007c5f69ffff000000000003ff]
[2024/09/16 20:04:45.161 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=168]
[2024/09/16 20:04:45.161 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=168]
[2024/09/16 20:04:45.161 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=168]
[2024/09/16 20:04:45.162 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 124, range: [74800000000000007c5f69ffff000000000003, 74800000000000007c5f69ffff000000000003ff), jobID: 168"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000007c5f69ffff000000000003ff00] ["take time"=419.416s]
[2024/09/16 20:04:45.162 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=168]
[2024/09/16 20:04:45.162 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000007c5f69ffff000000000003]
[2024/09/16 20:04:45.162 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:45.168 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=278] [neededSchemaVersion=279] ["elapsed time"=626.208s] [gotSchemaVersion=279] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:45.170 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=279]
[2024/09/16 20:04:45.170 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=279] ["take time"=3.754292ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.173 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.180 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=279] [neededSchemaVersion=280] ["elapsed time"=647.042s] [gotSchemaVersion=280] [phyTblIDs="[124]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:45.183 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=280]
[2024/09/16 20:04:45.183 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=280] ["take time"=4.668416ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.186 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.194 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=280] [neededSchemaVersion=281] ["elapsed time"=617.333s] [gotSchemaVersion=281] [phyTblIDs="[124]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:45.196 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=281]
[2024/09/16 20:04:45.197 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=281] ["take time"=3.670916ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.199 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.206 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=281] [neededSchemaVersion=282] ["elapsed time"=633.792s] [gotSchemaVersion=282] [phyTblIDs="[124]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:45.208 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=282]
[2024/09/16 20:04:45.208 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=282] ["take time"=3.499584ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.211 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [category=ddl] [job="ID:168, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094764580882, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:45.213 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:45.219 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=282] [neededSchemaVersion=283] ["elapsed time"=643.916s] [gotSchemaVersion=283] [phyTblIDs="[124]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:45.220 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=168] [version=283]
[2024/09/16 20:04:45.221 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=283] ["take time"=4.84975ms] [job="ID:168, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.233 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=168]
[2024/09/16 20:04:45.235 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=168] [tableID=124] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:45.237 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=168] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:45.244 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=168] [conn=952107012] [job="ID:168, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:124, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:43.829 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.254 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=168]
[2024/09/16 20:04:45.264 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=283] [cur_db=test] [sql="ALTER TABLE `emails` ADD CONSTRAINT `emails_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:45.265 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:45.265 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:45.272 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:169, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:45.272 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:169, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `emails` ADD CONSTRAINT `emails_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:45.274 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.275 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"emails_audienceId_audiences_id_fk\",\"L\":\"emails_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:45.282 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=283] [neededSchemaVersion=284] ["elapsed time"=508.166s] [gotSchemaVersion=284] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:45.284 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=284]
[2024/09/16 20:04:45.285 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=284] ["take time"=4.059708ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.288 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.296 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=284] [neededSchemaVersion=285] ["elapsed time"=661.708s] [gotSchemaVersion=285] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:45.298 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=285]
[2024/09/16 20:04:45.299 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=285] ["take time"=4.574916ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.302 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.308 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=285] [neededSchemaVersion=286] ["elapsed time"=604.041s] [gotSchemaVersion=286] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:45.310 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=286]
[2024/09/16 20:04:45.311 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=286] ["take time"=3.810458ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:45.314 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.314 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=169] [table=emails] ["ingest mode"=true] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 20:04:45.315 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{128 emails utf8mb4 utf8mb4_bin [0x4013c69340 0x4013c694a0 0x4013c69600 0x4013c69760 0x4013c698c0] [0x400f319a70] [] [] public true false 0  0 0 0 0 5 1 0 0 452596094803640335 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=128] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:45.315 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=169] [physicalTableID=128] [startKey=] [endKey=]
[2024/09/16 20:04:45.320 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=169]
[2024/09/16 20:04:45.321 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094803640345, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:45.322 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=169] [table=emails] ["ingest mode"=true] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 20:04:45.325 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/169/0]
[2024/09/16 20:04:45.328 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=128] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:45.336 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=22]
[2024/09/16 20:04:45.336 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=22] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:45.423 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=21]
[2024/09/16 20:04:45.425 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:45.425 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=21]
[2024/09/16 20:04:45.430 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:45.842 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=22] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:45.843 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=22] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:45.845 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=22] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:45.846 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{128 emails utf8mb4 utf8mb4_bin [0x401564e160 0x401564e2c0 0x401564e420 0x401564e580 0x401564e6e0] [0x40101b1170] [] [] public true false 0  0 0 0 0 5 1 0 0 452596094803640335 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=128] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:45.846 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=22] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:46.341 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=22] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:46.545 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:46.554 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=286] [neededSchemaVersion=287] ["elapsed time"=713.75s] [gotSchemaVersion=287] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:46.556 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=287]
[2024/09/16 20:04:46.557 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=287] ["take time"=4.411666ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.561 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596094803640345, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.561 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=169] [table=emails] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 20:04:46.570 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=287] [neededSchemaVersion=288] ["elapsed time"=531.375s] [gotSchemaVersion=288] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:46.571 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=288]
[2024/09/16 20:04:46.572 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=288] ["take time"=3.80575ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.575 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.576 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=169] [physicalTableID=128] [startKey=7480000000000000805f69ffff000000000001] [endKey=7480000000000000805f69ffff000000000001ff]
[2024/09/16 20:04:46.581 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=169]
[2024/09/16 20:04:46.582 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095131058199, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.584 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095131058199, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000805f69ffff000000000001,EndKey:7480000000000000805f69ffff000000000001ff,First:false,PhysicalTableID:128,Ingest mode:false"]
[2024/09/16 20:04:46.585 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=128] ["start key"=7480000000000000805f69ffff000000000001] ["end key"=7480000000000000805f69ffff000000000001ff]
[2024/09/16 20:04:46.585 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=128] ["range start"=7480000000000000805f69ffff000000000001] ["range end"=7480000000000000805f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:46.585 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000805f69ffff000000000001] [endKey=7480000000000000805f69ffff000000000001ff]
[2024/09/16 20:04:46.585 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=169]
[2024/09/16 20:04:46.585 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=169]
[2024/09/16 20:04:46.586 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=169]
[2024/09/16 20:04:46.586 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 128, range: [7480000000000000805f69ffff000000000001, 7480000000000000805f69ffff000000000001ff), jobID: 169"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000805f69ffff000000000001ff00] ["take time"=544.708s]
[2024/09/16 20:04:46.586 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=169]
[2024/09/16 20:04:46.586 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000805f69ffff000000000001]
[2024/09/16 20:04:46.586 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:46.593 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=288] [neededSchemaVersion=289] ["elapsed time"=626.833s] [gotSchemaVersion=289] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:46.595 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=289]
[2024/09/16 20:04:46.595 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=289] ["take time"=3.965792ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.598 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.605 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=289] [neededSchemaVersion=290] ["elapsed time"=465.208s] [gotSchemaVersion=290] [phyTblIDs="[128]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:46.607 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=290]
[2024/09/16 20:04:46.608 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=290] ["take time"=4.388125ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.612 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.629 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=290] [neededSchemaVersion=291] ["elapsed time"=520.042s] [gotSchemaVersion=291] [phyTblIDs="[128]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:46.630 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=291]
[2024/09/16 20:04:46.631 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=291] ["take time"=4.039875ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.634 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.642 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=291] [neededSchemaVersion=292] ["elapsed time"=438.542s] [gotSchemaVersion=292] [phyTblIDs="[128]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:46.643 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=292]
[2024/09/16 20:04:46.644 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=292] ["take time"=3.786667ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.648 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [category=ddl] [job="ID:169, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095131058199, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:46.650 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:46.655 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=292] [neededSchemaVersion=293] ["elapsed time"=575.167s] [gotSchemaVersion=293] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:46.658 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=169] [version=293]
[2024/09/16 20:04:46.664 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=293] ["take time"=10.030417ms] [job="ID:169, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.670 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=169]
[2024/09/16 20:04:46.671 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=169] [tableID=128] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:46.673 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=169] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:46.673 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=169] [conn=952107012] [job="ID:169, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:45.231 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.680 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=169]
[2024/09/16 20:04:46.681 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=293] [cur_db=test] [sql="ALTER TABLE `emails` ADD CONSTRAINT `emails_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:46.681 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:46.681 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:46.685 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:170, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:46.685 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:170, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `emails` ADD CONSTRAINT `emails_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 20:04:46.686 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.687 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"emails_emailContentId_emailContents_id_fk\",\"L\":\"emails_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:46.693 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=293] [neededSchemaVersion=294] ["elapsed time"=623.334s] [gotSchemaVersion=294] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:46.695 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=294]
[2024/09/16 20:04:46.696 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=294] ["take time"=4.198917ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.699 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.706 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=294] [neededSchemaVersion=295] ["elapsed time"=516.541s] [gotSchemaVersion=295] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:46.708 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=295]
[2024/09/16 20:04:46.709 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=295] ["take time"=3.985917ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.712 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.719 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=295] [neededSchemaVersion=296] ["elapsed time"=457.875s] [gotSchemaVersion=296] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:46.721 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=296]
[2024/09/16 20:04:46.721 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=296] ["take time"=3.460125ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:46.724 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.724 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=170] [table=emails] ["ingest mode"=true] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:46.725 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{128 emails utf8mb4 utf8mb4_bin [0x40039a66e0 0x40039a6840 0x40039a69a0 0x40039a6b00 0x40039a6c60] [0x4009185560 0x40091857a0] [] [0x400a85c0c0] public true false 0  0 0 0 0 5 2 1 0 452596095170379805 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=128] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:46.725 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=170] [physicalTableID=128] [startKey=] [endKey=]
[2024/09/16 20:04:46.730 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=170]
[2024/09/16 20:04:46.731 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095170379815, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:46.732 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=170] [table=emails] ["ingest mode"=true] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:46.736 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/170/0]
[2024/09/16 20:04:46.737 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=128] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:46.746 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=23]
[2024/09/16 20:04:46.746 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=23] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:46.837 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=22]
[2024/09/16 20:04:46.839 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:46.840 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=22]
[2024/09/16 20:04:46.845 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:47.252 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=23] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:47.253 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=23] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:47.254 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=23] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:47.255 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{128 emails utf8mb4 utf8mb4_bin [0x40054a0f20 0x40054a1080 0x40054a11e0 0x40054a1340 0x40054a14a0] [0x400ae5bb90 0x400ae5bdd0] [] [0x400c5fefc0] public true false 0  0 0 0 0 5 2 1 0 452596095170379805 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=128] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:47.255 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=23] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:47.753 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=23] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:47.954 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:47.962 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=296] [neededSchemaVersion=297] ["elapsed time"=498.625s] [gotSchemaVersion=297] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:47.964 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=297]
[2024/09/16 20:04:47.965 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=297] ["take time"=3.797834ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:47.968 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095170379815, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:47.969 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=170] [table=emails] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 20:04:47.976 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=297] [neededSchemaVersion=298] ["elapsed time"=601.25s] [gotSchemaVersion=298] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:47.977 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=298]
[2024/09/16 20:04:47.978 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=298] ["take time"=3.859209ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:47.980 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:47.981 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=170] [physicalTableID=128] [startKey=7480000000000000805f69ffff000000000002] [endKey=7480000000000000805f69ffff000000000002ff]
[2024/09/16 20:04:47.985 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=170]
[2024/09/16 20:04:47.986 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095511166978, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:47.987 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095511166978, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000805f69ffff000000000002,EndKey:7480000000000000805f69ffff000000000002ff,First:false,PhysicalTableID:128,Ingest mode:false"]
[2024/09/16 20:04:47.988 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=128] ["start key"=7480000000000000805f69ffff000000000002] ["end key"=7480000000000000805f69ffff000000000002ff]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=128] ["range start"=7480000000000000805f69ffff000000000002] ["range end"=7480000000000000805f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000805f69ffff000000000002] [endKey=7480000000000000805f69ffff000000000002ff]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=170]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=170]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=170]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 128, range: [7480000000000000805f69ffff000000000002, 7480000000000000805f69ffff000000000002ff), jobID: 170"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000805f69ffff000000000002ff00] ["take time"=363.208s]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=170]
[2024/09/16 20:04:47.989 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000805f69ffff000000000002]
[2024/09/16 20:04:47.989 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:47.997 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=298] [neededSchemaVersion=299] ["elapsed time"=568.75s] [gotSchemaVersion=299] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:47.998 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=299]
[2024/09/16 20:04:47.999 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=299] ["take time"=3.334709ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.001 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.008 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=299] [neededSchemaVersion=300] ["elapsed time"=548.583s] [gotSchemaVersion=300] [phyTblIDs="[128]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:48.009 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=300]
[2024/09/16 20:04:48.010 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=300] ["take time"=3.705333ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.013 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.021 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=300] [neededSchemaVersion=301] ["elapsed time"=474.375s] [gotSchemaVersion=301] [phyTblIDs="[128]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:48.022 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=301]
[2024/09/16 20:04:48.023 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=301] ["take time"=3.237333ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.026 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.032 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=301] [neededSchemaVersion=302] ["elapsed time"=506.334s] [gotSchemaVersion=302] [phyTblIDs="[128]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:48.034 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=302]
[2024/09/16 20:04:48.034 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=302] ["take time"=3.297708ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.037 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [category=ddl] [job="ID:170, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095511166978, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:48.039 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:48.043 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=302] [neededSchemaVersion=303] ["elapsed time"=492.459s] [gotSchemaVersion=303] [phyTblIDs="[128]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:48.044 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=170] [version=303]
[2024/09/16 20:04:48.045 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=303] ["take time"=3.186375ms] [job="ID:170, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.049 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=170]
[2024/09/16 20:04:48.050 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=170] [tableID=128] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:48.052 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=170] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:48.052 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=170] [conn=952107012] [job="ID:170, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:128, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:46.679 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.058 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=170]
[2024/09/16 20:04:48.059 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=303] [cur_db=test] [sql="ALTER TABLE `segments` ADD CONSTRAINT `segments_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:48.059 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=segments] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:48.059 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=segments] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:48.062 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:171, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:48.063 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:171, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `segments` ADD CONSTRAINT `segments_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:48.063 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.064 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"segments_audienceId_audiences_id_fk\",\"L\":\"segments_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:48.070 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=303] [neededSchemaVersion=304] ["elapsed time"=549.167s] [gotSchemaVersion=304] [phyTblIDs="[130]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:48.071 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=304]
[2024/09/16 20:04:48.072 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=304] ["take time"=3.237041ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.074 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.081 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=304] [neededSchemaVersion=305] ["elapsed time"=543.084s] [gotSchemaVersion=305] [phyTblIDs="[130]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:48.082 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=305]
[2024/09/16 20:04:48.083 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=305] ["take time"=3.115583ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.085 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.091 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=305] [neededSchemaVersion=306] ["elapsed time"=438.25s] [gotSchemaVersion=306] [phyTblIDs="[130]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:48.093 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=306]
[2024/09/16 20:04:48.093 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=306] ["take time"=3.095792ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:48.096 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.096 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=171] [table=segments] ["ingest mode"=true] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 20:04:48.097 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{130 segments utf8mb4 utf8mb4_bin [0x4006980f20 0x4006981080 0x40069811e0 0x4006981340] [0x400aba0360] [] [] public true false 0  0 0 0 0 4 1 0 0 452596095537381383 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=130] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:48.097 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=171] [physicalTableID=130] [startKey=] [endKey=]
[2024/09/16 20:04:48.101 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=171]
[2024/09/16 20:04:48.102 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095537381394, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:48.102 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=171] [table=segments] ["ingest mode"=true] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 20:04:48.105 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/171/0]
[2024/09/16 20:04:48.106 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=130] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:48.113 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=24]
[2024/09/16 20:04:48.113 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=24] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:48.248 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=23]
[2024/09/16 20:04:48.250 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:48.250 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=23]
[2024/09/16 20:04:48.255 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:48.617 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=24] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:48.617 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=24] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:48.618 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=24] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:48.620 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{130 segments utf8mb4 utf8mb4_bin [0x4007052000 0x4007052160 0x40070522c0 0x4007052420] [0x400cb8f710] [] [] public true false 0  0 0 0 0 4 1 0 0 452596095537381383 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=130] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:48.620 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=24] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:49.119 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=24] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:49.316 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:49.324 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=306] [neededSchemaVersion=307] ["elapsed time"=471.542s] [gotSchemaVersion=307] [phyTblIDs="[130]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:49.325 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=307]
[2024/09/16 20:04:49.326 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=307] ["take time"=3.433834ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.328 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095537381394, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.329 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=171] [table=segments] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 20:04:49.335 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=307] [neededSchemaVersion=308] ["elapsed time"=462.292s] [gotSchemaVersion=308] [phyTblIDs="[130]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:49.336 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=308]
[2024/09/16 20:04:49.337 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=308] ["take time"=3.307375ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.339 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.340 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=171] [physicalTableID=130] [startKey=7480000000000000825f69ffff000000000001] [endKey=7480000000000000825f69ffff000000000001ff]
[2024/09/16 20:04:49.344 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=171]
[2024/09/16 20:04:49.345 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095865323528, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.347 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095865323528, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000825f69ffff000000000001,EndKey:7480000000000000825f69ffff000000000001ff,First:false,PhysicalTableID:130,Ingest mode:false"]
[2024/09/16 20:04:49.348 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=130] ["start key"=7480000000000000825f69ffff000000000001] ["end key"=7480000000000000825f69ffff000000000001ff]
[2024/09/16 20:04:49.348 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=130] ["range start"=7480000000000000825f69ffff000000000001] ["range end"=7480000000000000825f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:49.348 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000825f69ffff000000000001] [endKey=7480000000000000825f69ffff000000000001ff]
[2024/09/16 20:04:49.348 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=171]
[2024/09/16 20:04:49.348 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=171]
[2024/09/16 20:04:49.348 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=171]
[2024/09/16 20:04:49.349 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 130, range: [7480000000000000825f69ffff000000000001, 7480000000000000825f69ffff000000000001ff), jobID: 171"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000825f69ffff000000000001ff00] ["take time"=380.083s]
[2024/09/16 20:04:49.349 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=171]
[2024/09/16 20:04:49.349 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000825f69ffff000000000001]
[2024/09/16 20:04:49.349 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:49.355 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=308] [neededSchemaVersion=309] ["elapsed time"=489.625s] [gotSchemaVersion=309] [phyTblIDs="[130]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:49.356 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=309]
[2024/09/16 20:04:49.357 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=309] ["take time"=3.214375ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.359 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.366 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=309] [neededSchemaVersion=310] ["elapsed time"=465.458s] [gotSchemaVersion=310] [phyTblIDs="[130]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:49.368 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=310]
[2024/09/16 20:04:49.369 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=310] ["take time"=4.090416ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.371 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.380 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=310] [neededSchemaVersion=311] ["elapsed time"=466.542s] [gotSchemaVersion=311] [phyTblIDs="[130]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:49.382 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=311]
[2024/09/16 20:04:49.383 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=311] ["take time"=3.871958ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.386 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.393 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=311] [neededSchemaVersion=312] ["elapsed time"=589.709s] [gotSchemaVersion=312] [phyTblIDs="[130]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:49.395 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=312]
[2024/09/16 20:04:49.396 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=312] ["take time"=4.099083ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.399 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [category=ddl] [job="ID:171, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095865323528, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:49.401 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:49.406 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=312] [neededSchemaVersion=313] ["elapsed time"=514.084s] [gotSchemaVersion=313] [phyTblIDs="[130]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:49.407 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=171] [version=313]
[2024/09/16 20:04:49.408 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=313] ["take time"=3.250792ms] [job="ID:171, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.413 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=171]
[2024/09/16 20:04:49.415 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=171] [tableID=130] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:49.416 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=171] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:49.417 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=171] [conn=952107012] [job="ID:171, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:130, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:48.03 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.424 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=171]
[2024/09/16 20:04:49.425 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=313] [cur_db=test] [sql="ALTER TABLE `sendingDomains` ADD CONSTRAINT `sendingDomains_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:49.425 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=sendingdomains] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:49.425 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=sendingdomains] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:49.430 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:172, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:49.430 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:172, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `sendingDomains` ADD CONSTRAINT `sendingDomains_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:49.431 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.432 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"sendingDomains_teamId_teams_id_fk\",\"L\":\"sendingdomains_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:49.439 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=313] [neededSchemaVersion=314] ["elapsed time"=496.542s] [gotSchemaVersion=314] [phyTblIDs="[132]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:49.441 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=314]
[2024/09/16 20:04:49.441 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=314] ["take time"=3.597833ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.445 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.453 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=314] [neededSchemaVersion=315] ["elapsed time"=518.5s] [gotSchemaVersion=315] [phyTblIDs="[132]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:49.455 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=315]
[2024/09/16 20:04:49.456 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=315] ["take time"=3.779792ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.459 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.466 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=315] [neededSchemaVersion=316] ["elapsed time"=497.292s] [gotSchemaVersion=316] [phyTblIDs="[132]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:49.468 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=316]
[2024/09/16 20:04:49.469 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=316] ["take time"=4.134959ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:49.472 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.473 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=172] [table=sendingDomains] ["ingest mode"=true] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 20:04:49.474 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{132 sendingDomains utf8mb4 utf8mb4_bin [0x4008114420 0x4008114580 0x40081146e0 0x4008114840 0x40081149a0 0x4008114b00 0x4008114c60 0x4008114dc0 0x4008114f20 0x4008115080] [0x400ef5d8c0] [] [] public true false 0  0 0 0 0 10 1 0 0 452596095891275798 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=132] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:49.474 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=172] [physicalTableID=132] [startKey=] [endKey=]
[2024/09/16 20:04:49.478 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=172]
[2024/09/16 20:04:49.480 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095891275808, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:49.480 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=172] [table=sendingDomains] ["ingest mode"=true] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 20:04:49.484 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/172/0]
[2024/09/16 20:04:49.486 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=132] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:49.494 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=25]
[2024/09/16 20:04:49.494 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=25] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:49.616 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=24]
[2024/09/16 20:04:49.618 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:49.618 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=24]
[2024/09/16 20:04:49.621 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:49.998 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=25] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:49.998 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=25] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:49.999 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=25] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:50.000 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{132 sendingDomains utf8mb4 utf8mb4_bin [0x4008b042c0 0x4008b04420 0x4008b04580 0x4008b046e0 0x4008b04840 0x4008b049a0 0x4008b04b00 0x4008b04c60 0x4008b04dc0 0x4008b04f20] [0x401110e6c0] [] [] public true false 0  0 0 0 0 10 1 0 0 452596095891275798 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=132] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:50.000 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=25] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:50.498 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=25] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:50.698 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:50.706 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=316] [neededSchemaVersion=317] ["elapsed time"=703.292s] [gotSchemaVersion=317] [phyTblIDs="[132]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:50.708 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=317]
[2024/09/16 20:04:50.709 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=317] ["take time"=4.777083ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.712 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596095891275808, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.712 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=172] [table=sendingDomains] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 20:04:50.719 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=317] [neededSchemaVersion=318] ["elapsed time"=508.584s] [gotSchemaVersion=318] [phyTblIDs="[132]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:50.721 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=318]
[2024/09/16 20:04:50.722 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=318] ["take time"=4.10975ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.726 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.727 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=172] [physicalTableID=132] [startKey=7480000000000000845f69ffff000000000001] [endKey=7480000000000000845f69ffff000000000001ff]
[2024/09/16 20:04:50.732 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=172]
[2024/09/16 20:04:50.734 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096219217944, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.735 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096219217944, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000845f69ffff000000000001,EndKey:7480000000000000845f69ffff000000000001ff,First:false,PhysicalTableID:132,Ingest mode:false"]
[2024/09/16 20:04:50.736 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=132] ["start key"=7480000000000000845f69ffff000000000001] ["end key"=7480000000000000845f69ffff000000000001ff]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=132] ["range start"=7480000000000000845f69ffff000000000001] ["range end"=7480000000000000845f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000845f69ffff000000000001] [endKey=7480000000000000845f69ffff000000000001ff]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=172]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=172]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=172]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 132, range: [7480000000000000845f69ffff000000000001, 7480000000000000845f69ffff000000000001ff), jobID: 172"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000845f69ffff000000000001ff00] ["take time"=355.208s]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=172]
[2024/09/16 20:04:50.737 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000845f69ffff000000000001]
[2024/09/16 20:04:50.737 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:50.744 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=318] [neededSchemaVersion=319] ["elapsed time"=547.625s] [gotSchemaVersion=319] [phyTblIDs="[132]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:50.746 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=319]
[2024/09/16 20:04:50.747 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=319] ["take time"=4.264ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.750 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.758 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=319] [neededSchemaVersion=320] ["elapsed time"=570.042s] [gotSchemaVersion=320] [phyTblIDs="[132]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:50.760 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=320]
[2024/09/16 20:04:50.760 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=320] ["take time"=4.025291ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.763 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.772 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=320] [neededSchemaVersion=321] ["elapsed time"=714.417s] [gotSchemaVersion=321] [phyTblIDs="[132]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:50.774 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=321]
[2024/09/16 20:04:50.774 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=321] ["take time"=4.236583ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.777 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.784 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=321] [neededSchemaVersion=322] ["elapsed time"=578.75s] [gotSchemaVersion=322] [phyTblIDs="[132]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:50.785 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=322]
[2024/09/16 20:04:50.786 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=322] ["take time"=3.451834ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.789 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [category=ddl] [job="ID:172, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096219217944, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:50.791 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:50.796 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=322] [neededSchemaVersion=323] ["elapsed time"=533.166s] [gotSchemaVersion=323] [phyTblIDs="[132]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:50.797 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=172] [version=323]
[2024/09/16 20:04:50.798 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=323] ["take time"=3.836208ms] [job="ID:172, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.803 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=172]
[2024/09/16 20:04:50.805 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=172] [tableID=132] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:50.807 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=172] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:50.807 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=172] [conn=952107012] [job="ID:172, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:132, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:49.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.813 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=172]
[2024/09/16 20:04:50.814 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=323] [cur_db=test] [sql="ALTER TABLE `tags` ADD CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:50.814 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tags] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:50.814 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tags] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:50.818 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:173, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:50.818 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:173, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `tags` ADD CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:50.819 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.819 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"tags_audienceId_audiences_id_fk\",\"L\":\"tags_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:50.826 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=323] [neededSchemaVersion=324] ["elapsed time"=477.958s] [gotSchemaVersion=324] [phyTblIDs="[136]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:50.827 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=324]
[2024/09/16 20:04:50.828 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=324] ["take time"=3.226292ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.831 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.837 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=324] [neededSchemaVersion=325] ["elapsed time"=485.208s] [gotSchemaVersion=325] [phyTblIDs="[136]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:50.838 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=325]
[2024/09/16 20:04:50.839 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=325] ["take time"=3.594417ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.842 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.848 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=325] [neededSchemaVersion=326] ["elapsed time"=430.792s] [gotSchemaVersion=326] [phyTblIDs="[136]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:50.850 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=326]
[2024/09/16 20:04:50.850 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=326] ["take time"=3.250833ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:50.853 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.853 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=173] [table=tags] ["ingest mode"=true] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 20:04:50.854 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{136 tags utf8mb4 utf8mb4_bin [0x400a2cb600 0x400a2cb760 0x400a2cb8c0 0x400a2cba20] [0x40151c2120 0x40151c2510] [] [] public true false 0  0 0 0 0 4 2 0 0 452596096258277386 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=136] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:50.854 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=173] [physicalTableID=136] [startKey=] [endKey=]
[2024/09/16 20:04:50.858 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=173]
[2024/09/16 20:04:50.859 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096258277396, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:50.860 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=173] [table=tags] ["ingest mode"=true] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 20:04:50.863 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/173/0]
[2024/09/16 20:04:50.864 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=136] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:50.872 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=26]
[2024/09/16 20:04:50.872 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=26] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:50.996 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=25]
[2024/09/16 20:04:50.998 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:50.998 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=25]
[2024/09/16 20:04:51.004 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:51.374 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=26] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:51.375 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=26] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:51.383 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=26] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:51.384 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{136 tags utf8mb4 utf8mb4_bin [0x400a6f02c0 0x400a6f0420 0x400a6f0580 0x400a6f06e0] [0x4015d687e0 0x4015d68ab0] [] [] public true false 0  0 0 0 0 4 2 0 0 452596096258277386 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=136] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:51.384 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=26] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:51.880 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=26] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:52.077 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:52.086 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=326] [neededSchemaVersion=327] ["elapsed time"=625.417s] [gotSchemaVersion=327] [phyTblIDs="[136]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:52.088 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=327]
[2024/09/16 20:04:52.089 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=327] ["take time"=4.531708ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.092 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096258277396, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.092 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=173] [table=tags] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 20:04:52.098 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=327] [neededSchemaVersion=328] ["elapsed time"=452.25s] [gotSchemaVersion=328] [phyTblIDs="[136]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:52.100 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=328]
[2024/09/16 20:04:52.100 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=328] ["take time"=3.327542ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.103 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.103 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=173] [physicalTableID=136] [startKey=7480000000000000885f69ffff000000000002] [endKey=7480000000000000885f69ffff000000000002ff]
[2024/09/16 20:04:52.108 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=173]
[2024/09/16 20:04:52.108 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096585957399, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.110 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096585957399, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000885f69ffff000000000002,EndKey:7480000000000000885f69ffff000000000002ff,First:false,PhysicalTableID:136,Ingest mode:false"]
[2024/09/16 20:04:52.111 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=136] ["start key"=7480000000000000885f69ffff000000000002] ["end key"=7480000000000000885f69ffff000000000002ff]
[2024/09/16 20:04:52.111 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=136] ["range start"=7480000000000000885f69ffff000000000002] ["range end"=7480000000000000885f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:52.111 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000885f69ffff000000000002] [endKey=7480000000000000885f69ffff000000000002ff]
[2024/09/16 20:04:52.111 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=173]
[2024/09/16 20:04:52.111 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=173]
[2024/09/16 20:04:52.111 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=173]
[2024/09/16 20:04:52.112 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 136, range: [7480000000000000885f69ffff000000000002, 7480000000000000885f69ffff000000000002ff), jobID: 173"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000885f69ffff000000000002ff00] ["take time"=450.583s]
[2024/09/16 20:04:52.112 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=173]
[2024/09/16 20:04:52.112 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000885f69ffff000000000002]
[2024/09/16 20:04:52.112 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:52.118 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=328] [neededSchemaVersion=329] ["elapsed time"=473.791s] [gotSchemaVersion=329] [phyTblIDs="[136]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:52.120 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=329]
[2024/09/16 20:04:52.121 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=329] ["take time"=4.091583ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.124 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.130 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=329] [neededSchemaVersion=330] ["elapsed time"=453.083s] [gotSchemaVersion=330] [phyTblIDs="[136]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:52.131 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=330]
[2024/09/16 20:04:52.132 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=330] ["take time"=3.192167ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.134 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.141 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=330] [neededSchemaVersion=331] ["elapsed time"=517.042s] [gotSchemaVersion=331] [phyTblIDs="[136]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:52.143 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=331]
[2024/09/16 20:04:52.143 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=331] ["take time"=3.713417ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.146 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.154 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=331] [neededSchemaVersion=332] ["elapsed time"=520.25s] [gotSchemaVersion=332] [phyTblIDs="[136]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:52.155 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=332]
[2024/09/16 20:04:52.156 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=332] ["take time"=3.324708ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.159 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [category=ddl] [job="ID:173, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096585957399, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:52.160 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:52.164 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=332] [neededSchemaVersion=333] ["elapsed time"=434.084s] [gotSchemaVersion=333] [phyTblIDs="[136]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:52.166 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=173] [version=333]
[2024/09/16 20:04:52.167 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=333] ["take time"=3.617708ms] [job="ID:173, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.172 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=173]
[2024/09/16 20:04:52.173 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=173] [tableID=136] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:52.174 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=173] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:52.175 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=173] [conn=952107012] [job="ID:173, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:136, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:50.781 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.180 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=173]
[2024/09/16 20:04:52.181 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=333] [cur_db=test] [sql="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:52.185 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:174, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 20:04:52.185 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:174, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:52.186 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=174] [conn=952107012] [category=ddl] [job="ID:174, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:52.192 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=333] [neededSchemaVersion=334] ["elapsed time"=477.208s] [gotSchemaVersion=334] [phyTblIDs="[138]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:52.194 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=174] [version=334]
[2024/09/16 20:04:52.194 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=334] ["take time"=3.124958ms] [job="ID:174, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:52.197 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=174] [conn=952107012] [category=ddl] [job="ID:174, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:52.204 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=334] [neededSchemaVersion=335] ["elapsed time"=512.583s] [gotSchemaVersion=335] [phyTblIDs="[138]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:52.205 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=174] [version=335]
[2024/09/16 20:04:52.205 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=335] ["take time"=2.919792ms] [job="ID:174, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:52.208 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=174] [conn=952107012] [category=ddl] [job="ID:174, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:52.214 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=335] [neededSchemaVersion=336] ["elapsed time"=428.292s] [gotSchemaVersion=336] [phyTblIDs="[138]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:52.215 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=174] [version=336]
[2024/09/16 20:04:52.216 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=336] ["take time"=3.169167ms] [job="ID:174, Type:add foreign key, State:done, SchemaState:public, SchemaID:2, TableID:138, RowCount:0, ArgLen:2, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:52.218 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=174] [conn=952107012] [job="ID:174, Type:add foreign key, State:synced, SchemaState:public, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 20:04:52.222 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=174]
[2024/09/16 20:04:52.223 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=336] [cur_db=test] [sql="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:52.224 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:52.224 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:52.227 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:175, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:52.227 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:175, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:52.228 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.229 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"tagsOnContacts_contactId_contacts_id_fk\",\"L\":\"tagsoncontacts_contactid_contacts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:52.234 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=336] [neededSchemaVersion=337] ["elapsed time"=450.5s] [gotSchemaVersion=337] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:52.236 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=337]
[2024/09/16 20:04:52.236 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=337] ["take time"=3.196959ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.239 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.245 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=337] [neededSchemaVersion=338] ["elapsed time"=438s] [gotSchemaVersion=338] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:52.246 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=338]
[2024/09/16 20:04:52.247 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=338] ["take time"=3.058041ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.249 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.255 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=338] [neededSchemaVersion=339] ["elapsed time"=468.708s] [gotSchemaVersion=339] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:52.256 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=339]
[2024/09/16 20:04:52.257 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=339] ["take time"=3.293875ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:52.259 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.259 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=175] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 20:04:52.260 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{138 tagsOnContacts utf8mb4 utf8mb4_bin [0x400ca642c0 0x400ca64420 0x400ca64580 0x400ca646e0] [0x4011aedb00 0x4011aeddd0] [] [0x401577b680] public true false 0  0 0 0 0 4 2 1 0 452596096625541136 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 6 2}"] ["table/partition ID"=138] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:52.260 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=175] [physicalTableID=138] [startKey=] [endKey=]
[2024/09/16 20:04:52.264 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=175]
[2024/09/16 20:04:52.265 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096625541146, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:52.265 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=175] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 20:04:52.268 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/175/0]
[2024/09/16 20:04:52.269 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=138] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:52.276 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=27]
[2024/09/16 20:04:52.276 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=27] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:52.374 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=26]
[2024/09/16 20:04:52.376 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:52.376 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=26]
[2024/09/16 20:04:52.381 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:52.779 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=27] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:52.780 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=27] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:52.781 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=27] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:52.782 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{138 tagsOnContacts utf8mb4 utf8mb4_bin [0x400d05b4a0 0x400d05b600 0x400d05b760 0x400d05b8c0] [0x400d498120 0x400d4983f0] [] [0x400fe95c80] public true false 0  0 0 0 0 4 2 1 0 452596096625541136 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 6 2}"] ["table/partition ID"=138] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:52.782 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=27] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:53.284 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=27] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:53.485 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:53.532 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=339] [neededSchemaVersion=340] ["elapsed time"=565.042s] [gotSchemaVersion=340] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:53.535 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=340]
[2024/09/16 20:04:53.535 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=340] ["take time"=5.667ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.541 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096625541146, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.541 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=175] [table=tagsOnContacts] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 20:04:53.549 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=340] [neededSchemaVersion=341] ["elapsed time"=540.75s] [gotSchemaVersion=341] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:53.551 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=341]
[2024/09/16 20:04:53.552 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=341] ["take time"=3.934708ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.555 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.556 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=175] [physicalTableID=138] [startKey=74800000000000008a5f69ffff000000000002] [endKey=74800000000000008a5f69ffff000000000002ff]
[2024/09/16 20:04:53.561 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=175]
[2024/09/16 20:04:53.562 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096966066192, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.563 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096966066192, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000008a5f69ffff000000000002,EndKey:74800000000000008a5f69ffff000000000002ff,First:false,PhysicalTableID:138,Ingest mode:false"]
[2024/09/16 20:04:53.564 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=138] ["start key"=74800000000000008a5f69ffff000000000002] ["end key"=74800000000000008a5f69ffff000000000002ff]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=138] ["range start"=74800000000000008a5f69ffff000000000002] ["range end"=74800000000000008a5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000008a5f69ffff000000000002] [endKey=74800000000000008a5f69ffff000000000002ff]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=175]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=175]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=175]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 138, range: [74800000000000008a5f69ffff000000000002, 74800000000000008a5f69ffff000000000002ff), jobID: 175"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000008a5f69ffff000000000002ff00] ["take time"=360.292s]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=175]
[2024/09/16 20:04:53.565 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000008a5f69ffff000000000002]
[2024/09/16 20:04:53.566 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:53.572 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=341] [neededSchemaVersion=342] ["elapsed time"=488.25s] [gotSchemaVersion=342] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:53.574 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=342]
[2024/09/16 20:04:53.575 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=342] ["take time"=3.769833ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.578 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.585 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=342] [neededSchemaVersion=343] ["elapsed time"=624.5s] [gotSchemaVersion=343] [phyTblIDs="[138]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:53.587 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=343]
[2024/09/16 20:04:53.587 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=343] ["take time"=3.799459ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.589 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.597 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=343] [neededSchemaVersion=344] ["elapsed time"=507.833s] [gotSchemaVersion=344] [phyTblIDs="[138]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:53.599 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=344]
[2024/09/16 20:04:53.600 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=344] ["take time"=3.516875ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.602 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.609 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=344] [neededSchemaVersion=345] ["elapsed time"=482.917s] [gotSchemaVersion=345] [phyTblIDs="[138]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:53.611 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=345]
[2024/09/16 20:04:53.612 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=345] ["take time"=3.814833ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.615 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [category=ddl] [job="ID:175, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596096966066192, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:53.616 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:53.622 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=345] [neededSchemaVersion=346] ["elapsed time"=525.125s] [gotSchemaVersion=346] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:53.623 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=175] [version=346]
[2024/09/16 20:04:53.624 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=346] ["take time"=3.459959ms] [job="ID:175, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.629 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=175]
[2024/09/16 20:04:53.630 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=175] [tableID=138] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:53.632 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=175] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:53.633 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=175] [conn=952107012] [job="ID:175, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:52.179 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.639 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=175]
[2024/09/16 20:04:53.640 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=346] [cur_db=test] [sql="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:53.640 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:53.640 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:53.644 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:176, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:53.644 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:176, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:53.645 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.646 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"teamMemberships_userId_users_id_fk\",\"L\":\"teammemberships_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:53.653 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=346] [neededSchemaVersion=347] ["elapsed time"=525.459s] [gotSchemaVersion=347] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:53.655 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=347]
[2024/09/16 20:04:53.656 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=347] ["take time"=4.04275ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.659 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.666 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=347] [neededSchemaVersion=348] ["elapsed time"=516.917s] [gotSchemaVersion=348] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:53.670 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=348]
[2024/09/16 20:04:53.671 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=348] ["take time"=6.651042ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.674 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.681 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=348] [neededSchemaVersion=349] ["elapsed time"=596s] [gotSchemaVersion=349] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:53.683 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=349]
[2024/09/16 20:04:53.683 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=349] ["take time"=3.740708ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:53.686 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.686 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=176] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 20:04:53.687 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{140 teamMemberships utf8mb4 utf8mb4_bin [0x400ecb54a0 0x400ecb5600 0x400ecb5760 0x400ecb58c0 0x400ecb5a20 0x400ecb5b80 0x400ecb5ce0 0x400ecb5e40] [0x400ecd3cb0] [] [] public true false 0  0 0 0 0 8 1 0 0 452596096992280614 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=140] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:53.687 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=176] [physicalTableID=140] [startKey=] [endKey=]
[2024/09/16 20:04:53.691 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=176]
[2024/09/16 20:04:53.693 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097005387783, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:53.693 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=176] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 20:04:53.696 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/176/0]
[2024/09/16 20:04:53.699 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=140] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:53.707 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=28]
[2024/09/16 20:04:53.707 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=28] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:53.777 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=27]
[2024/09/16 20:04:53.779 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:53.779 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=27]
[2024/09/16 20:04:53.785 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:54.208 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=28] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:54.208 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=28] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:54.209 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=28] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:54.210 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{140 teamMemberships utf8mb4 utf8mb4_bin [0x400faa2160 0x400faa22c0 0x400faa2420 0x400faa2580 0x400faa26e0 0x400faa2840 0x400faa29a0 0x400faa2b00] [0x400faa87e0] [] [] public true false 0  0 0 0 0 8 1 0 0 452596096992280614 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=140] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:54.210 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=28] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:54.712 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=28] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:54.911 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:54.920 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=349] [neededSchemaVersion=350] ["elapsed time"=559.833s] [gotSchemaVersion=350] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:54.922 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=350]
[2024/09/16 20:04:54.923 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=350] ["take time"=4.476375ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:54.925 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097005387783, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:54.926 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=176] [table=teamMemberships] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 20:04:54.932 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=350] [neededSchemaVersion=351] ["elapsed time"=611.25s] [gotSchemaVersion=351] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:54.934 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=351]
[2024/09/16 20:04:54.935 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=351] ["take time"=4.236208ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:54.937 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:54.938 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=176] [physicalTableID=140] [startKey=74800000000000008c5f69ffff000000000001] [endKey=74800000000000008c5f69ffff000000000001ff]
[2024/09/16 20:04:54.943 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=176]
[2024/09/16 20:04:54.944 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097333329927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:54.946 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097333329927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000008c5f69ffff000000000001,EndKey:74800000000000008c5f69ffff000000000001ff,First:false,PhysicalTableID:140,Ingest mode:false"]
[2024/09/16 20:04:54.947 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=140] ["start key"=74800000000000008c5f69ffff000000000001] ["end key"=74800000000000008c5f69ffff000000000001ff]
[2024/09/16 20:04:54.948 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=140] ["range start"=74800000000000008c5f69ffff000000000001] ["range end"=74800000000000008c5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:54.948 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000008c5f69ffff000000000001] [endKey=74800000000000008c5f69ffff000000000001ff]
[2024/09/16 20:04:54.948 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=176]
[2024/09/16 20:04:54.948 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=176]
[2024/09/16 20:04:54.948 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=176]
[2024/09/16 20:04:54.949 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 140, range: [74800000000000008c5f69ffff000000000001, 74800000000000008c5f69ffff000000000001ff), jobID: 176"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000008c5f69ffff000000000001ff00] ["take time"=604.666s]
[2024/09/16 20:04:54.949 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=176]
[2024/09/16 20:04:54.949 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000008c5f69ffff000000000001]
[2024/09/16 20:04:54.949 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:54.956 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=351] [neededSchemaVersion=352] ["elapsed time"=610.292s] [gotSchemaVersion=352] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:54.957 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=352]
[2024/09/16 20:04:54.958 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=352] ["take time"=3.63725ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:54.960 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:54.966 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=352] [neededSchemaVersion=353] ["elapsed time"=503.167s] [gotSchemaVersion=353] [phyTblIDs="[140]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:54.968 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=353]
[2024/09/16 20:04:54.968 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=353] ["take time"=3.273791ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:54.971 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:54.978 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=353] [neededSchemaVersion=354] ["elapsed time"=502.542s] [gotSchemaVersion=354] [phyTblIDs="[140]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:54.979 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=354]
[2024/09/16 20:04:54.980 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=354] ["take time"=3.302042ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:54.982 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:54.989 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=354] [neededSchemaVersion=355] ["elapsed time"=474.791s] [gotSchemaVersion=355] [phyTblIDs="[140]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:54.991 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=355]
[2024/09/16 20:04:54.991 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=355] ["take time"=3.400125ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:54.994 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [category=ddl] [job="ID:176, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097333329927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:54.996 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:55.001 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=355] [neededSchemaVersion=356] ["elapsed time"=629.042s] [gotSchemaVersion=356] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:55.003 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=176] [version=356]
[2024/09/16 20:04:55.004 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=356] ["take time"=4.393375ms] [job="ID:176, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:55.009 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=176]
[2024/09/16 20:04:55.010 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=176] [tableID=140] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:55.012 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=176] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:55.012 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=176] [conn=952107012] [job="ID:176, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:53.629 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:55.018 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=176]
[2024/09/16 20:04:55.019 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=356] [cur_db=test] [sql="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:55.019 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:55.019 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:55.023 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:177, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:55.023 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:177, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:55.024 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:55.025 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"teamMemberships_teamId_teams_id_fk\",\"L\":\"teammemberships_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:55.031 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=356] [neededSchemaVersion=357] ["elapsed time"=644.041s] [gotSchemaVersion=357] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:55.032 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=357]
[2024/09/16 20:04:55.033 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=357] ["take time"=3.610875ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:55.036 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:55.042 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=357] [neededSchemaVersion=358] ["elapsed time"=503.625s] [gotSchemaVersion=358] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:55.043 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=358]
[2024/09/16 20:04:55.044 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=358] ["take time"=3.336292ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:55.046 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:55.052 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=358] [neededSchemaVersion=359] ["elapsed time"=539.208s] [gotSchemaVersion=359] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:55.054 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=359]
[2024/09/16 20:04:55.054 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=359] ["take time"=3.498ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:55.057 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:55.057 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=177] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 20:04:55.058 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{140 teamMemberships utf8mb4 utf8mb4_bin [0x40116f6c60 0x40116f6dc0 0x40116f6f20 0x40116f7080 0x40116f71e0 0x40116f7340 0x40116f74a0 0x40116f7600] [0x401174ca20 0x401174cc60] [] [0x40112fb200] public true false 0  0 0 0 0 8 2 1 0 452596097359282191 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=140] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:55.058 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=177] [physicalTableID=140] [startKey=] [endKey=]
[2024/09/16 20:04:55.062 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=177]
[2024/09/16 20:04:55.063 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097359282201, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:55.064 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=177] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 20:04:55.068 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/177/0]
[2024/09/16 20:04:55.069 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=140] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:55.078 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=29]
[2024/09/16 20:04:55.078 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=29] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:55.209 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=28]
[2024/09/16 20:04:55.211 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:55.211 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=28]
[2024/09/16 20:04:55.216 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:55.582 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=29] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:55.583 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=29] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:55.584 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=29] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:55.586 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{140 teamMemberships utf8mb4 utf8mb4_bin [0x40125ac000 0x40125ac160 0x40125ac2c0 0x40125ac420 0x40125ac580 0x40125ac6e0 0x40125ac840 0x40125ac9a0] [0x4012598bd0 0x4012598e10] [] [0x40123d2900] public true false 0  0 0 0 0 8 2 1 0 452596097359282191 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 2}"] ["table/partition ID"=140] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:55.586 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=29] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:56.086 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=29] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:56.279 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:56.288 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=359] [neededSchemaVersion=360] ["elapsed time"=539.625s] [gotSchemaVersion=360] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:56.289 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=360]
[2024/09/16 20:04:56.290 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=360] ["take time"=4.049917ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.293 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097359282201, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.293 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=177] [table=teamMemberships] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 20:04:56.300 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=360] [neededSchemaVersion=361] ["elapsed time"=473.292s] [gotSchemaVersion=361] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:56.302 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=361]
[2024/09/16 20:04:56.302 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=361] ["take time"=3.500167ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.305 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.306 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=177] [physicalTableID=140] [startKey=74800000000000008c5f69ffff000000000002] [endKey=74800000000000008c5f69ffff000000000002ff]
[2024/09/16 20:04:56.310 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=177]
[2024/09/16 20:04:56.311 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097686962194, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.313 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097686962194, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000008c5f69ffff000000000002,EndKey:74800000000000008c5f69ffff000000000002ff,First:false,PhysicalTableID:140,Ingest mode:false"]
[2024/09/16 20:04:56.314 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=140] ["start key"=74800000000000008c5f69ffff000000000002] ["end key"=74800000000000008c5f69ffff000000000002ff]
[2024/09/16 20:04:56.314 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=140] ["range start"=74800000000000008c5f69ffff000000000002] ["range end"=74800000000000008c5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 20:04:56.314 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000008c5f69ffff000000000002] [endKey=74800000000000008c5f69ffff000000000002ff]
[2024/09/16 20:04:56.315 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=177]
[2024/09/16 20:04:56.315 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=177]
[2024/09/16 20:04:56.315 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=177]
[2024/09/16 20:04:56.315 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 140, range: [74800000000000008c5f69ffff000000000002, 74800000000000008c5f69ffff000000000002ff), jobID: 177"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000008c5f69ffff000000000002ff00] ["take time"=419.792s]
[2024/09/16 20:04:56.315 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=177]
[2024/09/16 20:04:56.315 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000008c5f69ffff000000000002]
[2024/09/16 20:04:56.315 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:56.322 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=361] [neededSchemaVersion=362] ["elapsed time"=609.875s] [gotSchemaVersion=362] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:56.323 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=362]
[2024/09/16 20:04:56.324 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=362] ["take time"=3.729791ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.326 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.334 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=362] [neededSchemaVersion=363] ["elapsed time"=495.292s] [gotSchemaVersion=363] [phyTblIDs="[140]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:56.335 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=363]
[2024/09/16 20:04:56.336 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=363] ["take time"=3.341875ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.338 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.346 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=363] [neededSchemaVersion=364] ["elapsed time"=615.208s] [gotSchemaVersion=364] [phyTblIDs="[140]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:56.348 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=364]
[2024/09/16 20:04:56.349 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=364] ["take time"=4.227416ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.351 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.358 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=364] [neededSchemaVersion=365] ["elapsed time"=507.25s] [gotSchemaVersion=365] [phyTblIDs="[140]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:56.360 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=365]
[2024/09/16 20:04:56.361 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=365] ["take time"=3.520875ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.365 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [category=ddl] [job="ID:177, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097686962194, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:56.366 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:56.371 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=365] [neededSchemaVersion=366] ["elapsed time"=606.375s] [gotSchemaVersion=366] [phyTblIDs="[140]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:56.373 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=177] [version=366]
[2024/09/16 20:04:56.374 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=366] ["take time"=3.864125ms] [job="ID:177, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.379 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=177]
[2024/09/16 20:04:56.380 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=177] [tableID=140] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:56.382 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=177] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:56.382 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=177] [conn=952107012] [job="ID:177, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:140, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:54.979 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.388 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=177]
[2024/09/16 20:04:56.389 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=366] [cur_db=test] [sql="ALTER TABLE `teams` ADD CONSTRAINT `teams_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:56.390 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teams] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:56.390 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teams] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:56.393 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:178, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:56.394 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:178, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teams` ADD CONSTRAINT `teams_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:56.395 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.395 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"teams_userId_users_id_fk\",\"L\":\"teams_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:56.403 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=366] [neededSchemaVersion=367] ["elapsed time"=605.042s] [gotSchemaVersion=367] [phyTblIDs="[142]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:56.405 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=367]
[2024/09/16 20:04:56.406 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=367] ["take time"=5.275125ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.409 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.417 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=367] [neededSchemaVersion=368] ["elapsed time"=503.792s] [gotSchemaVersion=368] [phyTblIDs="[142]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:56.418 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=368]
[2024/09/16 20:04:56.419 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=368] ["take time"=4.137625ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.421 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.428 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=368] [neededSchemaVersion=369] ["elapsed time"=530.667s] [gotSchemaVersion=369] [phyTblIDs="[142]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:56.429 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=369]
[2024/09/16 20:04:56.430 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=369] ["take time"=3.563625ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:56.433 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.433 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=178] [table=teams] ["ingest mode"=true] [index=teams_userId_users_id_fk]
[2024/09/16 20:04:56.434 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{142 teams utf8mb4 utf8mb4_bin [0x4013a322c0 0x4013a32420 0x4013a32580 0x4013a326e0 0x4013a32840 0x4013a329a0] [0x4013a34fc0] [] [] public true false 0  0 0 0 0 6 1 0 0 452596097713176612 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=142] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:56.434 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=178] [physicalTableID=142] [startKey=] [endKey=]
[2024/09/16 20:04:56.438 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=178]
[2024/09/16 20:04:56.439 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097726283780, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:56.440 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=178] [table=teams] ["ingest mode"=true] [index=teams_userId_users_id_fk]
[2024/09/16 20:04:56.443 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/178/0]
[2024/09/16 20:04:56.444 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=142] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:56.451 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=30]
[2024/09/16 20:04:56.452 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=30] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:56.579 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=29]
[2024/09/16 20:04:56.581 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:56.581 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=29]
[2024/09/16 20:04:56.586 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:56.953 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=30] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:56.953 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=30] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:56.954 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=30] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:56.955 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{142 teams utf8mb4 utf8mb4_bin [0x401449cb00 0x401449cc60 0x401449cdc0 0x401449cf20 0x401449d080 0x401449d1e0] [0x401451abd0] [] [] public true false 0  0 0 0 0 6 1 0 0 452596097713176612 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=142] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:56.955 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=30] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:57.459 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=30] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:57.655 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:57.662 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=369] [neededSchemaVersion=370] ["elapsed time"=453.625s] [gotSchemaVersion=370] [phyTblIDs="[142]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:57.664 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=370]
[2024/09/16 20:04:57.664 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=370] ["take time"=3.372959ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.667 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596097726283780, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.668 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=178] [table=teams] [index=teams_userId_users_id_fk]
[2024/09/16 20:04:57.674 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=370] [neededSchemaVersion=371] ["elapsed time"=556.375s] [gotSchemaVersion=371] [phyTblIDs="[142]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:57.676 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=371]
[2024/09/16 20:04:57.676 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=371] ["take time"=3.695708ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.679 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.680 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=178] [physicalTableID=142] [startKey=74800000000000008e5f69ffff000000000001] [endKey=74800000000000008e5f69ffff000000000001ff]
[2024/09/16 20:04:57.684 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=178]
[2024/09/16 20:04:57.685 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098041118743, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.687 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098041118743, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000008e5f69ffff000000000001,EndKey:74800000000000008e5f69ffff000000000001ff,First:false,PhysicalTableID:142,Ingest mode:false"]
[2024/09/16 20:04:57.688 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=142] ["start key"=74800000000000008e5f69ffff000000000001] ["end key"=74800000000000008e5f69ffff000000000001ff]
[2024/09/16 20:04:57.688 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=142] ["range start"=74800000000000008e5f69ffff000000000001] ["range end"=74800000000000008e5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:57.688 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000008e5f69ffff000000000001] [endKey=74800000000000008e5f69ffff000000000001ff]
[2024/09/16 20:04:57.688 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=178]
[2024/09/16 20:04:57.688 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=178]
[2024/09/16 20:04:57.688 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=178]
[2024/09/16 20:04:57.689 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 142, range: [74800000000000008e5f69ffff000000000001, 74800000000000008e5f69ffff000000000001ff), jobID: 178"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000008e5f69ffff000000000001ff00] ["take time"=460.375s]
[2024/09/16 20:04:57.689 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=178]
[2024/09/16 20:04:57.689 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000008e5f69ffff000000000001]
[2024/09/16 20:04:57.689 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:57.695 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=371] [neededSchemaVersion=372] ["elapsed time"=422.334s] [gotSchemaVersion=372] [phyTblIDs="[142]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:57.697 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=372]
[2024/09/16 20:04:57.697 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=372] ["take time"=3.06875ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.699 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.706 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=372] [neededSchemaVersion=373] ["elapsed time"=441.167s] [gotSchemaVersion=373] [phyTblIDs="[142]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:57.707 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=373]
[2024/09/16 20:04:57.708 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=373] ["take time"=3.342417ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.711 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.718 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=373] [neededSchemaVersion=374] ["elapsed time"=547.458s] [gotSchemaVersion=374] [phyTblIDs="[142]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:57.720 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=374]
[2024/09/16 20:04:57.720 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=374] ["take time"=3.568583ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.723 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.729 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=374] [neededSchemaVersion=375] ["elapsed time"=455.667s] [gotSchemaVersion=375] [phyTblIDs="[142]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:57.731 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=375]
[2024/09/16 20:04:57.731 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=375] ["take time"=3.479292ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.735 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [category=ddl] [job="ID:178, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098041118743, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:57.736 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:57.741 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=375] [neededSchemaVersion=376] ["elapsed time"=539.625s] [gotSchemaVersion=376] [phyTblIDs="[142]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:57.743 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=178] [version=376]
[2024/09/16 20:04:57.743 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=376] ["take time"=3.491208ms] [job="ID:178, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.748 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=178]
[2024/09/16 20:04:57.749 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=178] [tableID=142] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:57.751 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=178] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:57.752 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=178] [conn=952107012] [job="ID:178, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:142, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:56.379 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.757 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=178]
[2024/09/16 20:04:57.759 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=376] [cur_db=test] [sql="ALTER TABLE `webhooks` ADD CONSTRAINT `webhooks_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 20:04:57.759 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=webhooks] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:57.759 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=webhooks] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:57.763 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:179, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:57.763 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:179, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `webhooks` ADD CONSTRAINT `webhooks_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 20:04:57.764 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.764 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"webhooks_teamId_teams_id_fk\",\"L\":\"webhooks_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:57.771 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=376] [neededSchemaVersion=377] ["elapsed time"=456.791s] [gotSchemaVersion=377] [phyTblIDs="[146]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:57.772 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=377]
[2024/09/16 20:04:57.773 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=377] ["take time"=3.56025ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.776 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.783 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=377] [neededSchemaVersion=378] ["elapsed time"=619.708s] [gotSchemaVersion=378] [phyTblIDs="[146]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:57.785 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=378]
[2024/09/16 20:04:57.786 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=378] ["take time"=3.9105ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.788 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.795 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=378] [neededSchemaVersion=379] ["elapsed time"=443.417s] [gotSchemaVersion=379] [phyTblIDs="[146]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:57.797 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=379]
[2024/09/16 20:04:57.797 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=379] ["take time"=3.514292ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:57.800 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.801 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=179] [table=webhooks] ["ingest mode"=true] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 20:04:57.802 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{146 webhooks utf8mb4 utf8mb4_bin [0x40158e42c0 0x40158e4420 0x40158e4580 0x40158e46e0 0x40158e4840] [0x40158db290] [] [] public true false 0  0 0 0 0 5 1 0 0 452596098080440327 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=146] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:57.802 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=179] [physicalTableID=146] [startKey=] [endKey=]
[2024/09/16 20:04:57.806 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=179]
[2024/09/16 20:04:57.807 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098080440337, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:57.807 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=179] [table=webhooks] ["ingest mode"=true] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 20:04:57.811 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/179/0]
[2024/09/16 20:04:57.813 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=146] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:57.822 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=31]
[2024/09/16 20:04:57.822 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=31] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:57.954 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=30]
[2024/09/16 20:04:57.956 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:57.956 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=30]
[2024/09/16 20:04:57.961 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:58.326 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=31] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:58.327 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=31] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:58.330 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=31] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:58.331 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{146 webhooks utf8mb4 utf8mb4_bin [0x40169e8160 0x40169e82c0 0x40169e8420 0x40169e8580 0x40169e86e0] [0x40161f9830] [] [] public true false 0  0 0 0 0 5 1 0 0 452596098080440327 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 2}"] ["table/partition ID"=146] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:58.331 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=31] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:04:58.828 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=31] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:04:59.028 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:59.036 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=379] [neededSchemaVersion=380] ["elapsed time"=718.584s] [gotSchemaVersion=380] [phyTblIDs="[146]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:59.038 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=380]
[2024/09/16 20:04:59.038 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=380] ["take time"=3.937959ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.041 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098080440337, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:59.041 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=179] [table=webhooks] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 20:04:59.049 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=380] [neededSchemaVersion=381] ["elapsed time"=487.292s] [gotSchemaVersion=381] [phyTblIDs="[146]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:59.050 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=381]
[2024/09/16 20:04:59.051 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=381] ["take time"=3.140417ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.053 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:59.054 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=179] [physicalTableID=146] [startKey=7480000000000000925f69ffff000000000001] [endKey=7480000000000000925f69ffff000000000001ff]
[2024/09/16 20:04:59.058 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=179]
[2024/09/16 20:04:59.059 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098408120339, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:59.061 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098408120339, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000925f69ffff000000000001,EndKey:7480000000000000925f69ffff000000000001ff,First:false,PhysicalTableID:146,Ingest mode:false"]
[2024/09/16 20:04:59.062 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=146] ["start key"=7480000000000000925f69ffff000000000001] ["end key"=7480000000000000925f69ffff000000000001ff]
[2024/09/16 20:04:59.062 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=146] ["range start"=7480000000000000925f69ffff000000000001] ["range end"=7480000000000000925f69ffff000000000001ff] ["range count"=1]
[2024/09/16 20:04:59.062 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000925f69ffff000000000001] [endKey=7480000000000000925f69ffff000000000001ff]
[2024/09/16 20:04:59.062 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=179]
[2024/09/16 20:04:59.062 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=179]
[2024/09/16 20:04:59.062 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=179]
[2024/09/16 20:04:59.063 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 146, range: [7480000000000000925f69ffff000000000001, 7480000000000000925f69ffff000000000001ff), jobID: 179"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000925f69ffff000000000001ff00] ["take time"=556.708s]
[2024/09/16 20:04:59.063 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=179]
[2024/09/16 20:04:59.063 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000925f69ffff000000000001]
[2024/09/16 20:04:59.063 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:04:59.070 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=381] [neededSchemaVersion=382] ["elapsed time"=516.959s] [gotSchemaVersion=382] [phyTblIDs="[146]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:59.072 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=382]
[2024/09/16 20:04:59.073 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=382] ["take time"=4.721334ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.076 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:59.083 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=382] [neededSchemaVersion=383] ["elapsed time"=535.167s] [gotSchemaVersion=383] [phyTblIDs="[146]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:59.085 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=383]
[2024/09/16 20:04:59.086 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=383] ["take time"=4.191208ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.089 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add foreign key, State:running, SchemaState:write only, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:59.097 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=383] [neededSchemaVersion=384] ["elapsed time"=493.959s] [gotSchemaVersion=384] [phyTblIDs="[146]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:59.098 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=384]
[2024/09/16 20:04:59.099 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=384] ["take time"=3.258542ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.101 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 20:04:59.108 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=384] [neededSchemaVersion=385] ["elapsed time"=455.375s] [gotSchemaVersion=385] [phyTblIDs="[146]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 20:04:59.110 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=385]
[2024/09/16 20:04:59.111 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=385] ["take time"=3.526333ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.114 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [category=ddl] [job="ID:179, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098408120339, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 20:04:59.116 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 20:04:59.121 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=385] [neededSchemaVersion=386] ["elapsed time"=656.209s] [gotSchemaVersion=386] [phyTblIDs="[146]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:59.123 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=179] [version=386]
[2024/09/16 20:04:59.123 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=386] ["take time"=3.835167ms] [job="ID:179, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.128 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=179]
[2024/09/16 20:04:59.130 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=179] [tableID=146] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:04:59.132 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=179] [jobType="alter table multi-schema change"]
[2024/09/16 20:04:59.132 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=179] [conn=952107012] [job="ID:179, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:2, TableID:146, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:57.729 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.139 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=179]
[2024/09/16 20:04:59.140 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107012] [schemaVersion=386] [cur_db=test] [sql="CREATE INDEX `tagsOnContactsTagIdContactIdIdx` ON `tagsOnContacts` (`tagId`,`contactId`);"] [user=root@%]
[2024/09/16 20:04:59.140 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 20:04:59.143 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:180, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:6, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 20:04:59.144 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:180, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:6, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="CREATE INDEX `tagsOnContactsTagIdContactIdIdx` ON `tagsOnContacts` (`tagId`,`contactId`);"]
[2024/09/16 20:04:59.145 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:queueing, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.145 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:none, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"tagsOnContactsTagIdContactIdIdx\",\"L\":\"tagsoncontactstagidcontactididx\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"tagId\",\"L\":\"tagid\"},\"offset\":1,\"length\":-1},{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 20:04:59.153 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=386] [neededSchemaVersion=387] ["elapsed time"=612.041s] [gotSchemaVersion=387] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:59.155 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=180] [version=387]
[2024/09/16 20:04:59.156 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=387] ["take time"=5.453125ms] [job="ID:180, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.160 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:delete only, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.170 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=387] [neededSchemaVersion=388] ["elapsed time"=654.042s] [gotSchemaVersion=388] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:59.172 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=180] [version=388]
[2024/09/16 20:04:59.172 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=388] ["take time"=6.157834ms] [job="ID:180, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.176 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:write only, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.183 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=388] [neededSchemaVersion=389] ["elapsed time"=518.25s] [gotSchemaVersion=389] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:04:59.186 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=180] [version=389]
[2024/09/16 20:04:59.186 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=389] ["take time"=4.558ms] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.190 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.190 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=180] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 20:04:59.191 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{138 tagsOnContacts utf8mb4 utf8mb4_bin [0x4017e98160 0x4017e982c0 0x4017e98420 0x4017e98580] [0x4017d17950 0x4017d17c20 0x4017d17e60] [] [0x4017d2f680 0x4017d2f740] public true false 0  0 0 0 0 4 3 2 0 452596098434334757 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 16 2}"] ["table/partition ID"=138] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:59.191 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=180] [physicalTableID=138] [startKey=] [endKey=]
[2024/09/16 20:04:59.196 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=180]
[2024/09/16 20:04:59.201 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098447441928, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:04:59.206 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=180] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 20:04:59.215 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/180]
[2024/09/16 20:04:59.216 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=138] [size=0] [error="less than 3 regions"]
[2024/09/16 20:04:59.225 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=32]
[2024/09/16 20:04:59.225 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=32] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 20:04:59.323 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=31]
[2024/09/16 20:04:59.325 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:04:59.325 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=31]
[2024/09/16 20:04:59.329 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:04:59.730 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=32] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 20:04:59.731 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=32] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 20:04:59.732 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=32] [curr-step=init] [next-step=read-index]
[2024/09/16 20:04:59.733 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{138 tagsOnContacts utf8mb4 utf8mb4_bin [0x4018266840 0x40182669a0 0x4018266b00 0x4018266c60] [0x4017e642d0 0x4017e645a0 0x4017e647e0] [] [0x4017e50180 0x4017e50240] public true false 0  0 0 0 0 4 3 2 0 452596098434334757 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 16 2}"] ["table/partition ID"=138] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 20:04:59.733 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=32] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 20:05:00.229 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=32] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 20:05:00.431 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:05:00.439 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=389] [neededSchemaVersion=390] ["elapsed time"=509.166s] [gotSchemaVersion=390] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:05:00.440 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=180] [version=390]
[2024/09/16 20:05:00.441 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=390] ["take time"=3.507167ms] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098447441928, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:05:00.443 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098447441928, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:05:00.444 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=180] [table=tagsOnContacts] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 20:05:00.450 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=390] [neededSchemaVersion=391] ["elapsed time"=464.292s] [gotSchemaVersion=391] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:05:00.452 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=180] [version=391]
[2024/09/16 20:05:00.452 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=391] ["take time"=3.449083ms] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:05:00.455 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:05:00.455 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=180] [physicalTableID=138] [startKey=74800000000000008a5f69ffff000000000003] [endKey=74800000000000008a5f69ffff000000000003ff]
[2024/09/16 20:05:00.460 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=180]
[2024/09/16 20:05:00.461 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:0, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098774859796, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:05:00.462 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:180, Type:add index, State:running, SchemaState:write reorganization, SchemaID:2, TableID:138, RowCount:0, ArgLen:5, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098774859796, Version: v1, UniqueWarnings:0"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:74800000000000008a5f69ffff000000000003,EndKey:74800000000000008a5f69ffff000000000003ff,First:false,PhysicalTableID:138,Ingest mode:false"]
[2024/09/16 20:05:00.463 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=138] ["start key"=74800000000000008a5f69ffff000000000003] ["end key"=74800000000000008a5f69ffff000000000003ff]
[2024/09/16 20:05:00.463 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=138] ["range start"=74800000000000008a5f69ffff000000000003] ["range end"=74800000000000008a5f69ffff000000000003ff] ["range count"=1]
[2024/09/16 20:05:00.463 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000008a5f69ffff000000000003] [endKey=74800000000000008a5f69ffff000000000003ff]
[2024/09/16 20:05:00.464 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=180]
[2024/09/16 20:05:00.464 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=180]
[2024/09/16 20:05:00.464 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=180]
[2024/09/16 20:05:00.464 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 138, range: [74800000000000008a5f69ffff000000000003, 74800000000000008a5f69ffff000000000003ff), jobID: 180"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000008a5f69ffff000000000003ff00] ["take time"=318.541s]
[2024/09/16 20:05:00.464 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=180]
[2024/09/16 20:05:00.464 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000008a5f69ffff000000000003]
[2024/09/16 20:05:00.464 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 20:05:00.466 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=utf8mb4] [collation=utf8mb4_unicode_ci]
[2024/09/16 20:05:00.471 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=391] [neededSchemaVersion=392] ["elapsed time"=556.417s] [gotSchemaVersion=392] [phyTblIDs="[138]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 20:05:00.472 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=180] [version=392]
[2024/09/16 20:05:00.473 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=392] ["take time"=3.221667ms] [job="ID:180, Type:add index, State:done, SchemaState:public, SchemaID:2, TableID:138, RowCount:0, ArgLen:4, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098774859796, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:05:00.475 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=180] [tableID=138] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 20:05:00.477 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=180] [jobType="add index"]
[2024/09/16 20:05:00.477 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=180] [conn=952107012] [job="ID:180, Type:add index, State:synced, SchemaState:public, SchemaID:2, TableID:138, RowCount:0, ArgLen:4, start time: 2024-09-16 20:04:59.13 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452596098774859796, Version: v1, UniqueWarnings:0"]
[2024/09/16 20:05:00.483 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=180]
[2024/09/16 20:05:00.728 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=32]
[2024/09/16 20:05:00.730 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 20:05:00.730 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=32]
[2024/09/16 20:05:00.735 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 20:05:04.493 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 813f0338-4a4e-41b1-ad8b-57b9bd6f52b1"] ["owner key"=/tidb/br-stream/owner/4cf691fc6f472c53] [ownerID=813f0338-4a4e-41b1-ad8b-57b9bd6f52b1] [op=none]
[2024/09/16 20:05:04.493 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[log-backup] /tidb/br-stream/owner ownerManager 813f0338-4a4e-41b1-ad8b-57b9bd6f52b1"]
[2024/09/16 20:05:04.493 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"] ["owner key"=/tidb/stats/owner/4cf691fc6f472c5f] [ownerID=8b2440e3-76fd-48fa-b6ac-668fd9af4dd8] [op=none]
[2024/09/16 20:05:04.494 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[stats] /tidb/stats/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"]
[2024/09/16 20:05:04.493 +00:00] [INFO] [manager.go:364] ["get owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"] ["owner key"=/tidb/bindinfo/owner/4cf691fc6f472c5b] [ownerID=8b2440e3-76fd-48fa-b6ac-668fd9af4dd8] [op=none]
[2024/09/16 20:05:04.494 +00:00] [INFO] [manager.go:223] ["become owner"] ["owner info"="[bindinfo] /tidb/bindinfo/owner ownerManager 8b2440e3-76fd-48fa-b6ac-668fd9af4dd8"]
[2024/09/16 20:05:07.135 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:05:16.080 +00:00] [INFO] [owner_daemon.go:56] ["daemon became owner"] [id=813f0338-4a4e-41b1-ad8b-57b9bd6f52b1] [daemon-id=LogBackup::Advancer]
[2024/09/16 20:05:16.080 +00:00] [INFO] [advancer.go:524] ["Subscription handler spawned."] [category="log backup subscription manager"]
[2024/09/16 20:05:24.208 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107048] ["key sample"=7480000000000000705f728000000000000079] [size=11369206] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452596104319991809]
[2024/09/16 20:05:24.215 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596104319991809]
[2024/09/16 20:05:24.743 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596104319991809]
[2024/09/16 20:05:25.113 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107048] ["key sample"=74800000000000008a5f69800000000000000104001f90d44da0002104001ff44b75000006] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452596105171435521]
[2024/09/16 20:05:25.121 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596105171435521]
[2024/09/16 20:05:25.750 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596105171435521]
[2024/09/16 20:05:28.550 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107048] ["key sample"=74800000000000007c5f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000079] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452596105446948866]
[2024/09/16 20:05:29.480 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107050] [session_alias=] [schemaVersion=392] [txnStartTS=452596106377822214] [txnScope=global]
[2024/09/16 20:05:29.480 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107050] [session_alias=] [schemaVersion=392] [txnStartTS=452596106377822215] [txnScope=global]
[2024/09/16 20:05:29.481 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107050] [session_alias=] [schemaVersion=392] [txnStartTS=452596106390405121] [txnScope=global]
[2024/09/16 20:05:50.373 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107066] [schemaVersion=392] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/16 20:05:59.777 +00:00] [WARN] [pd.go:168] ["get timestamp too slow"] [conn=952107074] [session_alias=] ["cost time"=42.306417ms]
[2024/09/16 20:06:19.439 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107102] ["key sample"=7480000000000000705f728000000000000118] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452596118750494721]
[2024/09/16 20:06:19.446 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596118750494721]
[2024/09/16 20:06:20.052 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596118750494721]
[2024/09/16 20:06:20.537 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107102] ["key sample"=74800000000000008a5f69800000000000000104001f90d44da0006d04001fff1df6200006] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452596119694475266]
[2024/09/16 20:06:20.541 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596119694475266]
[2024/09/16 20:06:21.024 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596119694475266]
[2024/09/16 20:06:23.925 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107102] ["key sample"=74800000000000007c5f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000118] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452596119917297668]
[2024/09/16 20:06:24.776 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107104] [session_alias=] [schemaVersion=392] [txnStartTS=452596120873861126] [txnScope=global]
[2024/09/16 20:06:24.776 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107104] [session_alias=] [schemaVersion=392] [txnStartTS=452596120873861127] [txnScope=global]
[2024/09/16 20:06:24.777 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107104] [session_alias=] [schemaVersion=392] [txnStartTS=452596120873861128] [txnScope=global]
[2024/09/16 20:06:54.646 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107120] [schemaVersion=392] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/16 20:07:21.559 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107156] ["key sample"=7480000000000000705f7280000000000001b7] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452596134820184065]
[2024/09/16 20:07:21.565 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596134820184065]
[2024/09/16 20:07:22.064 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596134820184065]
[2024/09/16 20:07:22.568 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107156] ["key sample"=74800000000000008a5f69800000000000000104001f90d44da000b904001fff1df620293f] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452596135960510466]
[2024/09/16 20:07:22.571 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596135960510466]
[2024/09/16 20:07:23.074 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5035] ["mutations count"=120000] [startTS=452596135960510466]
[2024/09/16 20:07:25.474 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952107156] ["key sample"=74800000000000007c5f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd0400000000000001b7] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452596136169701382]
[2024/09/16 20:07:26.360 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107158] [session_alias=] [schemaVersion=392] [txnStartTS=452596137022193670] [txnScope=global]
[2024/09/16 20:07:26.361 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107158] [session_alias=] [schemaVersion=392] [txnStartTS=452596137022193671] [txnScope=global]
[2024/09/16 20:07:26.361 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952107158] [session_alias=] [schemaVersion=392] [txnStartTS=452596137022193672] [txnScope=global]
[2024/09/16 20:09:04.072 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:10:04.162 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596021101592576] [concurrency=1]
[2024/09/16 20:10:04.162 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596021101592576] [concurrency=1]
[2024/09/16 20:10:04.162 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 20:10:04.197 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=34.35725ms] ["completed regions"=82]
[2024/09/16 20:10:04.197 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596021101592576] [regions=82]
[2024/09/16 20:10:10.132 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:11:04.150 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 20:11:44.216 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 20:11:44.219 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=10.416s]
[2024/09/16 20:11:44.222 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 20:11:44.222 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.25s]
[2024/09/16 20:11:44.227 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452596021101592576]
[2024/09/16 20:14:04.076 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:14:11.578 +00:00] [INFO] [cache.go:119] ["reset the old infoschema after v1 v2 switch, using the stale object will panic"]
[2024/09/16 20:15:13.134 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:18:25.482 +00:00] [WARN] [pd.go:168] ["get timestamp too slow"] ["cost time"=48.539416ms]
[2024/09/16 20:19:04.073 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:20:16.134 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:21:04.156 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596194115321856] [concurrency=1]
[2024/09/16 20:21:04.157 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596194115321856] [concurrency=1]
[2024/09/16 20:21:04.157 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 20:21:04.185 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=28.206709ms] ["completed regions"=82]
[2024/09/16 20:21:04.186 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596194115321856] [regions=82]
[2024/09/16 20:22:04.144 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 20:22:44.201 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=32]
[2024/09/16 20:22:44.390 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=32] ["cost time"=188.338917ms]
[2024/09/16 20:22:44.391 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 20:22:44.391 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.208s]
[2024/09/16 20:22:44.393 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452596194115321856]
[2024/09/16 20:24:04.066 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:25:19.126 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:27:41.460 +00:00] [WARN] [pd.go:168] ["get timestamp too slow"] ["cost time"=33.571584ms]
[2024/09/16 20:29:04.071 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:30:19.128 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:30:32.348 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952107174] [schemaVersion=392] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/16 20:32:04.158 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596367129837568] [concurrency=1]
[2024/09/16 20:32:04.158 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596367129837568] [concurrency=1]
[2024/09/16 20:32:04.158 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 20:32:04.189 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=30.643583ms] ["completed regions"=82]
[2024/09/16 20:32:04.189 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596367129837568] [regions=82]
[2024/09/16 20:33:04.144 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 20:33:44.209 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 20:33:44.209 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=7.5s]
[2024/09/16 20:33:44.210 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 20:33:44.210 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.167s]
[2024/09/16 20:33:44.213 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452596367129837568]
[2024/09/16 20:34:04.068 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:35:22.124 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:39:04.064 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:40:25.119 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:43:04.127 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596540136488960] [concurrency=1]
[2024/09/16 20:43:04.127 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596540136488960] [concurrency=1]
[2024/09/16 20:43:04.127 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 20:43:04.157 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=30.190417ms] ["completed regions"=82]
[2024/09/16 20:43:04.158 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452596540136488960] [regions=82]
[2024/09/16 20:44:04.033 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:44:04.109 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 20:44:44.191 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 20:44:44.194 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.959s]
[2024/09/16 20:44:44.197 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 20:44:44.197 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=2s]
[2024/09/16 20:44:44.201 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452596540136488960]
[2024/09/16 20:45:25.135 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 20:49:04.030 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 20:50:28.089 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 21:27:08.912 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 21:27:14.167 +00:00] [WARN] [session.go:818] ["can not retry txn"] [label=internal] [error="[domain:8027]Information schema is out of date: schema failed to update in 1 lease, please make sure TiDB can connect to TiKV"] [IsBatchInsert=false] [IsPessimistic=false] [InRestrictedSQL=true] [tidb_retry_limit=10] [tidb_disable_txn_auto_retry=true]
[2024/09/16 21:27:14.170 +00:00] [WARN] [session.go:834] ["commit failed"] ["finished txn"="Txn{state=invalid}"] [error="[domain:8027]Information schema is out of date: schema failed to update in 1 lease, please make sure TiDB can connect to TiKV"]
[2024/09/16 21:27:14.172 +00:00] [WARN] [session.go:2162] ["run statement failed"] [schemaVersion=392] [error="[domain:8027]Information schema is out of date: schema failed to update in 1 lease, please make sure TiDB can connect to TiKV"] [session="{\n  \"currDBName\": \"\",\n  \"id\": 0,\n  \"status\": 2,\n  \"strictMode\": false,\n  \"user\": null\n}"]
[2024/09/16 21:27:14.172 +00:00] [WARN] [gc_worker.go:275] ["check leader"] [category="gc worker"] [error="[domain:8027]Information schema is out of date: schema failed to update in 1 lease, please make sure TiDB can connect to TiKV"]
[2024/09/16 21:35:07.537 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 21:35:13.479 +00:00] [WARN] [session.go:818] ["can not retry txn"] [label=internal] [error="[domain:8027]Information schema is out of date: schema failed to update in 1 lease, please make sure TiDB can connect to TiKV"] [IsBatchInsert=false] [IsPessimistic=true] [InRestrictedSQL=true] [tidb_retry_limit=10] [tidb_disable_txn_auto_retry=true]
[2024/09/16 21:35:13.482 +00:00] [WARN] [session.go:834] ["commit failed"] ["finished txn"="Txn{state=invalid}"] [error="[domain:8027]Information schema is out of date: schema failed to update in 1 lease, please make sure TiDB can connect to TiKV"]
[2024/09/16 21:35:13.483 +00:00] [WARN] [session.go:2162] ["run statement failed"] [schemaVersion=392] [error="previous statement: insert into mysql.stats_meta (version, table_id, modify_count, count) values (452597516449873922, 132, 4, 0) on duplicate key update version = values(version), modify_count = modify_count + values(modify_count), count = count + values(count): [domain:8027]Information schema is out of date: schema failed to update in 1 lease, please make sure TiDB can connect to TiKV"] [session="{\n  \"currDBName\": \"\",\n  \"id\": 0,\n  \"status\": 2,\n  \"strictMode\": false,\n  \"user\": null\n}"]
[2024/09/16 21:35:14.865 +00:00] [WARN] [pd.go:168] ["get timestamp too slow"] ["cost time"=33.514042ms]
[2024/09/16 21:35:37.565 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597366791864320] [concurrency=1]
[2024/09/16 21:35:37.566 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597366791864320] [concurrency=1]
[2024/09/16 21:35:37.566 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 21:35:37.596 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=29.732042ms] ["completed regions"=82]
[2024/09/16 21:35:37.596 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597366791864320] [regions=82]
[2024/09/16 21:36:37.550 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 21:37:17.607 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 21:37:17.607 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=7.666s]
[2024/09/16 21:37:17.609 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 21:37:17.609 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=792ns]
[2024/09/16 21:37:17.612 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452597366791864320]
[2024/09/16 21:37:37.477 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 21:40:10.533 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 21:42:37.475 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 21:45:13.529 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 21:46:37.565 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597539805593600] [concurrency=1]
[2024/09/16 21:46:37.567 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597539805593600] [concurrency=1]
[2024/09/16 21:46:37.567 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 21:46:37.610 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=42.290417ms] ["completed regions"=82]
[2024/09/16 21:46:37.610 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597539805593600] [regions=82]
[2024/09/16 21:47:37.469 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 21:47:37.552 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 21:48:17.631 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 21:48:17.632 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=8.5s]
[2024/09/16 21:48:17.633 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 21:48:17.634 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=958ns]
[2024/09/16 21:48:17.637 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452597539805593600]
[2024/09/16 21:50:16.529 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 21:52:37.456 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 21:55:19.507 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 21:57:37.445 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 21:57:37.532 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597712814866432] [concurrency=1]
[2024/09/16 21:57:37.532 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597712814866432] [concurrency=1]
[2024/09/16 21:57:37.532 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 21:57:37.544 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=11.93075ms] ["completed regions"=6]
[2024/09/16 21:57:37.545 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597712814866432] [regions=6]
[2024/09/16 21:58:37.522 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 21:59:17.558 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 21:59:17.559 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=9.875s]
[2024/09/16 21:59:17.560 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 21:59:17.560 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=875ns]
[2024/09/16 21:59:17.563 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452597712814866432]
[2024/09/16 22:00:22.503 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:02:37.448 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:05:25.500 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:07:37.443 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:08:37.529 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597885828333568] [concurrency=1]
[2024/09/16 22:08:37.529 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597885828333568] [concurrency=1]
[2024/09/16 22:08:37.530 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 22:08:37.541 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=11.22275ms] ["completed regions"=6]
[2024/09/16 22:08:37.541 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452597885828333568] [regions=6]
[2024/09/16 22:09:37.518 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 22:10:17.559 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 22:10:17.561 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=11.708s]
[2024/09/16 22:10:17.562 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 22:10:17.562 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1s]
[2024/09/16 22:10:17.566 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452597885828333568]
[2024/09/16 22:10:25.502 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:12:37.441 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:15:28.496 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:17:37.438 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:19:37.523 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598058841800704] [concurrency=1]
[2024/09/16 22:19:37.524 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598058841800704] [concurrency=1]
[2024/09/16 22:19:37.524 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 22:19:37.535 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=11.342583ms] ["completed regions"=6]
[2024/09/16 22:19:37.536 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598058841800704] [regions=6]
[2024/09/16 22:20:31.491 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:20:37.511 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 22:21:17.553 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 22:21:17.554 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=8.125s]
[2024/09/16 22:21:17.556 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 22:21:17.556 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.416s]
[2024/09/16 22:21:17.559 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452598058841800704]
[2024/09/16 22:22:37.432 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:25:31.501 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:27:37.432 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:30:34.489 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:30:37.516 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598231855005696] [concurrency=1]
[2024/09/16 22:30:37.516 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598231855005696] [concurrency=1]
[2024/09/16 22:30:37.516 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 22:30:37.528 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=11.968542ms] ["completed regions"=6]
[2024/09/16 22:30:37.529 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598231855005696] [regions=6]
[2024/09/16 22:31:02.917 +00:00] [WARN] [pd.go:168] ["get timestamp too slow"] ["cost time"=98.055791ms]
[2024/09/16 22:31:37.513 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 22:32:17.554 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 22:32:17.554 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=7.084s]
[2024/09/16 22:32:17.556 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 22:32:17.556 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.625s]
[2024/09/16 22:32:17.566 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452598231855005696]
[2024/09/16 22:32:37.429 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:35:37.484 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:37:37.427 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:40:37.492 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:41:37.502 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598404866637824] [concurrency=1]
[2024/09/16 22:41:37.502 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598404866637824] [concurrency=1]
[2024/09/16 22:41:37.502 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 22:41:37.514 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=11.15075ms] ["completed regions"=6]
[2024/09/16 22:41:37.514 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598404866637824] [regions=6]
[2024/09/16 22:42:37.400 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:42:37.474 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 22:43:17.512 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 22:43:17.512 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=833ns]
[2024/09/16 22:43:17.514 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 22:43:17.514 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=958ns]
[2024/09/16 22:43:17.517 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452598404866637824]
[2024/09/16 22:45:40.456 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:47:37.400 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:50:43.452 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:52:37.392 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 22:52:37.492 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598577875386368] [concurrency=1]
[2024/09/16 22:52:37.492 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598577875386368] [concurrency=1]
[2024/09/16 22:52:37.492 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 22:52:37.522 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=29.352292ms] ["completed regions"=6]
[2024/09/16 22:52:37.522 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598577875386368] [regions=6]
[2024/09/16 22:53:37.467 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 22:54:17.537 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 22:54:17.538 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=13.583s]
[2024/09/16 22:54:17.540 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 22:54:17.540 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.084s]
[2024/09/16 22:54:17.544 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452598577875386368]
[2024/09/16 22:55:43.461 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 22:57:37.470 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:00:43.528 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:02:37.475 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:02:37.554 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598735182495744] [concurrency=1]
[2024/09/16 23:02:37.555 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598735182495744] [concurrency=1]
[2024/09/16 23:02:37.555 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 23:02:37.580 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=24.754875ms] ["completed regions"=6]
[2024/09/16 23:02:37.580 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598735182495744] [regions=6]
[2024/09/16 23:03:37.545 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 23:04:17.615 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 23:04:17.616 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=13.667s]
[2024/09/16 23:04:17.617 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 23:04:17.618 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=875ns]
[2024/09/16 23:04:17.621 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452598735182495744]
[2024/09/16 23:05:43.529 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:07:37.467 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:10:46.531 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:12:37.464 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:13:37.550 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598908195438592] [concurrency=1]
[2024/09/16 23:13:37.551 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598908195438592] [concurrency=1]
[2024/09/16 23:13:37.551 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 23:13:37.562 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=11.4115ms] ["completed regions"=6]
[2024/09/16 23:13:37.562 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452598908195438592] [regions=6]
[2024/09/16 23:14:37.550 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 23:15:17.620 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 23:15:17.621 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=8.75s]
[2024/09/16 23:15:17.623 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 23:15:17.623 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.125s]
[2024/09/16 23:15:17.627 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452598908195438592]
[2024/09/16 23:15:49.521 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:17:37.463 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:20:52.521 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:22:37.460 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:24:09.107 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108036] [schemaVersion=392] [cur_db=test] [sql="drop database test"] [user=root@%]
[2024/09/16 23:24:09.118 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:181, Type:drop schema, State:queueing, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:24:09.118 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:181, Type:drop schema, State:queueing, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="drop database test"]
[2024/09/16 23:24:09.120 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=181] [conn=952108036] [category=ddl] [job="ID:181, Type:drop schema, State:queueing, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:09.146 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=392] [neededSchemaVersion=393] ["elapsed time"=4.097125ms] [gotSchemaVersion=393] [phyTblIDs="[106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146]"] [actionTypes="[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]"] [diffTypes="[\"drop schema\"]"]
[2024/09/16 23:24:09.148 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=181] [version=393]
[2024/09/16 23:24:09.149 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=393] ["take time"=9.450625ms] [job="ID:181, Type:drop schema, State:running, SchemaState:write only, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:09.154 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=181] [conn=952108036] [category=ddl] [job="ID:181, Type:drop schema, State:running, SchemaState:write only, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:09.162 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=393] [neededSchemaVersion=394] ["elapsed time"=29.5s] [gotSchemaVersion=394] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"drop schema\"]"]
[2024/09/16 23:24:09.164 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=181] [version=394]
[2024/09/16 23:24:09.165 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=394] ["take time"=3.991542ms] [job="ID:181, Type:drop schema, State:running, SchemaState:delete only, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:09.169 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=181] [conn=952108036] [category=ddl] [job="ID:181, Type:drop schema, State:running, SchemaState:delete only, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:09.185 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=394] [neededSchemaVersion=395] ["elapsed time"=39.042s] [gotSchemaVersion=395] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"drop schema\"]"]
[2024/09/16 23:24:09.187 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=181] [version=395]
[2024/09/16 23:24:09.187 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=395] ["take time"=3.737459ms] [job="ID:181, Type:drop schema, State:done, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:09.191 +00:00] [INFO] [delete_range.go:467] ["insert into delete-range table"] [category=ddl] [jobID=181] [tableIDs="[106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146]"] [comment="drop schema: table IDs"]
[2024/09/16 23:24:09.200 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=181] [jobType="drop schema"]
[2024/09/16 23:24:09.201 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=181] [conn=952108036] [job="ID:181, Type:drop schema, State:synced, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:09.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:09.206 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=181]
[2024/09/16 23:24:16.320 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108036] [schemaVersion=395] [cur_db=] [sql="CREATE DATABASE `test`"] [user=root@%]
[2024/09/16 23:24:16.326 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:183, Type:create schema, State:queueing, SchemaState:none, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:16.317 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:24:16.327 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:183, Type:create schema, State:queueing, SchemaState:none, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:16.317 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE DATABASE `test`"]
[2024/09/16 23:24:16.328 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=183] [conn=952108036] [category=ddl] [job="ID:183, Type:create schema, State:queueing, SchemaState:none, SchemaID:182, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:24:16.317 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:16.336 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=395] [neededSchemaVersion=396] ["elapsed time"=289.333s] [gotSchemaVersion=396] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"create schema\"]"]
[2024/09/16 23:24:16.337 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=183] [version=396]
[2024/09/16 23:24:16.338 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=396] ["take time"=3.374833ms] [job="ID:183, Type:create schema, State:done, SchemaState:public, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:24:16.317 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:16.341 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=183] [conn=952108036] [job="ID:183, Type:create schema, State:synced, SchemaState:public, SchemaID:182, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:24:16.317 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:24:16.346 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=183]
[2024/09/16 23:24:37.550 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599081209692160] [concurrency=1]
[2024/09/16 23:24:37.551 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599081209692160] [concurrency=1]
[2024/09/16 23:24:37.551 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 23:24:37.577 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=25.987833ms] ["completed regions"=6]
[2024/09/16 23:24:37.577 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599081209692160] [regions=6]
[2024/09/16 23:25:34.548 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=396] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/16 23:25:34.570 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:185, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:184, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.570 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:185, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:184, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"]
[2024/09/16 23:25:34.572 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=185] [conn=952108040] [category=ddl] [job="ID:185, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:184, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.583 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=396] [neededSchemaVersion=397] ["elapsed time"=794.917s] [gotSchemaVersion=397] [phyTblIDs="[184]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.591 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=185] [version=397]
[2024/09/16 23:25:34.592 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=397] ["take time"=11.597292ms] [job="ID:185, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:184, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.597 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=185] [conn=952108040] [job="ID:185, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:184, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.602 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=185]
[2024/09/16 23:25:34.603 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000b8]
[2024/09/16 23:25:34.607 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000b8] ["first new region left"="{Id:5043 StartKey:7480000000000000ff8a00000000000000f8 EndKey:7480000000000000ffb800000000000000f8 RegionEpoch:{ConfVer:1 Version:85} Peers:[id:5044 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.608 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5043]"]
[2024/09/16 23:25:34.609 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=397] [cur_db=test] [sql="CREATE TABLE `abTestVariants` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`broadcastId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`weight` int NOT NULL DEFAULT 1,\n\t`sendAt` timestamp,\n\tCONSTRAINT `abTestVariants_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.609 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952108040] [session_alias=] [schemaVersion=397] [txnStartTS=452599253451407383] [txnScope=global]
[2024/09/16 23:25:34.619 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:187, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.565 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.619 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:187, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.565 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `abTestVariants` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`broadcastId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`weight` int NOT NULL DEFAULT 1,\n\t`sendAt` timestamp,\n\tCONSTRAINT `abTestVariants_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.620 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=187] [conn=952108040] [category=ddl] [job="ID:187, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.565 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.628 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=397] [neededSchemaVersion=398] ["elapsed time"=567.333s] [gotSchemaVersion=398] [phyTblIDs="[186]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.630 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=187] [version=398]
[2024/09/16 23:25:34.630 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=398] ["take time"=3.856334ms] [job="ID:187, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:186, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.565 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.635 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=187] [conn=952108040] [job="ID:187, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.565 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.639 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=187]
[2024/09/16 23:25:34.640 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000ba]
[2024/09/16 23:25:34.641 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=398] [cur_db=test] [sql="CREATE TABLE `accessTokens` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`teamId` bigint unsigned,\n\t`name` varchar(32),\n\t`hash` varchar(100) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastUsedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `accessTokens_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.642 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000ba] ["first new region left"="{Id:5045 StartKey:7480000000000000ffb800000000000000f8 EndKey:7480000000000000ffba00000000000000f8 RegionEpoch:{ConfVer:1 Version:86} Peers:[id:5046 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.642 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5045]"]
[2024/09/16 23:25:34.652 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:189, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.652 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:189, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `accessTokens` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`teamId` bigint unsigned,\n\t`name` varchar(32),\n\t`hash` varchar(100) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastUsedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `accessTokens_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.654 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=189] [conn=952108040] [category=ddl] [job="ID:189, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.664 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=398] [neededSchemaVersion=399] ["elapsed time"=641.625s] [gotSchemaVersion=399] [phyTblIDs="[188]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.665 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=189] [version=399]
[2024/09/16 23:25:34.666 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=399] ["take time"=4.080333ms] [job="ID:189, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:188, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.670 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=189] [conn=952108040] [job="ID:189, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.674 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=189]
[2024/09/16 23:25:34.674 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000bc]
[2024/09/16 23:25:34.675 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=399] [cur_db=test] [sql="CREATE TABLE `audiences` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`knownAttributes` json,\n\tCONSTRAINT `audiences_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.676 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000bc] ["first new region left"="{Id:5047 StartKey:7480000000000000ffba00000000000000f8 EndKey:7480000000000000ffbc00000000000000f8 RegionEpoch:{ConfVer:1 Version:87} Peers:[id:5048 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.676 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5047]"]
[2024/09/16 23:25:34.684 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:191, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.684 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:191, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `audiences` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`knownAttributes` json,\n\tCONSTRAINT `audiences_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.686 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=191] [conn=952108040] [category=ddl] [job="ID:191, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.694 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=399] [neededSchemaVersion=400] ["elapsed time"=528.416s] [gotSchemaVersion=400] [phyTblIDs="[190]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.696 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=191] [version=400]
[2024/09/16 23:25:34.697 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=400] ["take time"=3.870917ms] [job="ID:191, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:190, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.700 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=191] [conn=952108040] [job="ID:191, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.705 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=191]
[2024/09/16 23:25:34.705 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000be]
[2024/09/16 23:25:34.706 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=400] [cur_db=test] [sql="CREATE TABLE `automationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationId` bigint unsigned NOT NULL,\n\t`type` enum('TRIGGER','ACTION','RULE','END') NOT NULL,\n\t`status` enum('DRAFT','ACTIVE','PAUSED','ARCHIVED') NOT NULL DEFAULT 'DRAFT',\n\t`subtype` enum('TRIGGER_CONTACT_SUBSCRIBED','TRIGGER_CONTACT_UNSUBSCRIBED','TRIGGER_CONTACT_TAG_ADDED','TRIGGER_CONTACT_TAG_REMOVED','TRIGGER_API_MANUAL','ACTION_SEND_EMAIL','ACTION_ADD_TAG','ACTION_REMOVE_TAG','ACTION_SUBSCRIBE_TO_AUDIENCE','ACTION_UNSUBSCRIBE_FROM_AUDIENCE','ACTION_UPDATE_CONTACT_ATTRIBUTES','RULE_IF_ELSE','RULE_WAIT_FOR_DURATION','RULE_PERCENTAGE_SPLIT','RULE_WAIT_FOR_TRIGGER','END') NOT NULL,\n\t`parentId` bigint unsigned,\n\t`branchIndex` int,\n\t`configuration` json NOT NULL,\n\t`emailId` bigint unsigned,\n\t`tagId` bigint unsigned,\n\t`audienceId` bigint unsigned,\n\tCONSTRAINT `automationSteps_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.707 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000be] ["first new region left"="{Id:5049 StartKey:7480000000000000ffbc00000000000000f8 EndKey:7480000000000000ffbe00000000000000f8 RegionEpoch:{ConfVer:1 Version:88} Peers:[id:5050 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.707 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5049]"]
[2024/09/16 23:25:34.714 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:193, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.714 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:193, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `automationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationId` bigint unsigned NOT NULL,\n\t`type` enum('TRIGGER','ACTION','RULE','END') NOT NULL,\n\t`status` enum('DRAFT','ACTIVE','PAUSED','ARCHIVED') NOT NULL DEFAULT 'DRAFT',\n\t`subtype` enum('TRIGGER_CONTACT_SUBSCRIBED','TRIGGER_CONTACT_UNSUBSCRIBED','TRIGGER_CONTACT_TAG_ADDED','TRIGGER_CONTACT_TAG_REMOVED','TRIGGER_API_MANUAL','ACTION_SEND_EMAIL','ACTION_ADD_TAG','ACTION_REMOVE_TAG','ACTION_SUBSCRIBE_TO_AUDIENCE','ACTION_UNSUBSCRIBE_FROM_AUDIENCE','ACTION_UPDATE_CONTACT_ATTRIBUTES','RULE_IF_ELSE','RULE_WAIT_FOR_DURATION','RULE_PERCENTAGE_SPLIT','RULE_WAIT_FOR_TRIGGER','END') NOT NULL,\n\t`parentId` bigint unsigned,\n\t`branchIndex` int,\n\t`configuration` json NOT NULL,\n\t`emailId` bigint unsigned,\n\t`tagId` bigint unsigned,\n\t`audienceId` bigint unsigned,\n\tCONSTRAINT `automationSteps_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.715 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=193] [conn=952108040] [category=ddl] [job="ID:193, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.724 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=400] [neededSchemaVersion=401] ["elapsed time"=717.083s] [gotSchemaVersion=401] [phyTblIDs="[192]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.725 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=193] [version=401]
[2024/09/16 23:25:34.726 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=401] ["take time"=4.149291ms] [job="ID:193, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:192, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.730 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=193] [conn=952108040] [job="ID:193, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.665 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.735 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=193]
[2024/09/16 23:25:34.735 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000c0]
[2024/09/16 23:25:34.736 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=401] [cur_db=test] [sql="CREATE TABLE `automations` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`description` varchar(512),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `automations_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.737 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000c0] ["first new region left"="{Id:5051 StartKey:7480000000000000ffbe00000000000000f8 EndKey:7480000000000000ffc000000000000000f8 RegionEpoch:{ConfVer:1 Version:89} Peers:[id:5052 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.737 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5051]"]
[2024/09/16 23:25:34.743 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:195, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.743 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:195, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `automations` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`description` varchar(512),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `automations_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.744 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=195] [conn=952108040] [category=ddl] [job="ID:195, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.753 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=401] [neededSchemaVersion=402] ["elapsed time"=909.541s] [gotSchemaVersion=402] [phyTblIDs="[194]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.754 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=195] [version=402]
[2024/09/16 23:25:34.755 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=402] ["take time"=4.479084ms] [job="ID:195, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:194, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.759 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=195] [conn=952108040] [job="ID:195, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.764 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=195]
[2024/09/16 23:25:34.765 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000c2]
[2024/09/16 23:25:34.766 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=402] [cur_db=test] [sql="CREATE TABLE `broadcasts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`segmentId` bigint unsigned,\n\t`teamId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`emailContentId` bigint unsigned,\n\t`winningAbTestVariantId` bigint unsigned,\n\t`waitingTimeToPickWinner` int DEFAULT 4,\n\t`status` enum('SENT','SENDING','DRAFT','QUEUED_FOR_SENDING','SENDING_FAILED','DRAFT_ARCHIVED','ARCHIVED') DEFAULT 'DRAFT',\n\t`isAbTest` boolean NOT NULL DEFAULT false,\n\t`winningCriteria` enum('OPENS','CLICKS','CONVERSIONS'),\n\t`winningWaitTime` int,\n\t`sendAt` timestamp,\n\tCONSTRAINT `broadcasts_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.767 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000c2] ["first new region left"="{Id:5053 StartKey:7480000000000000ffc000000000000000f8 EndKey:7480000000000000ffc200000000000000f8 RegionEpoch:{ConfVer:1 Version:90} Peers:[id:5054 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.767 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5053]"]
[2024/09/16 23:25:34.775 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:197, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.775 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:197, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `broadcasts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`segmentId` bigint unsigned,\n\t`teamId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`emailContentId` bigint unsigned,\n\t`winningAbTestVariantId` bigint unsigned,\n\t`waitingTimeToPickWinner` int DEFAULT 4,\n\t`status` enum('SENT','SENDING','DRAFT','QUEUED_FOR_SENDING','SENDING_FAILED','DRAFT_ARCHIVED','ARCHIVED') DEFAULT 'DRAFT',\n\t`isAbTest` boolean NOT NULL DEFAULT false,\n\t`winningCriteria` enum('OPENS','CLICKS','CONVERSIONS'),\n\t`winningWaitTime` int,\n\t`sendAt` timestamp,\n\tCONSTRAINT `broadcasts_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.777 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=197] [conn=952108040] [category=ddl] [job="ID:197, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.789 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=402] [neededSchemaVersion=403] ["elapsed time"=660.625s] [gotSchemaVersion=403] [phyTblIDs="[196]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.790 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=197] [version=403]
[2024/09/16 23:25:34.791 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=403] ["take time"=4.193ms] [job="ID:197, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:196, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.795 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=197] [conn=952108040] [job="ID:197, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.800 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=197]
[2024/09/16 23:25:34.800 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000c4]
[2024/09/16 23:25:34.801 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=403] [cur_db=test] [sql="CREATE TABLE `contactAutomationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationStepId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`status` enum('PENDING','ACTIVE','COMPLETED','FAILED','HALTED') DEFAULT 'PENDING',\n\t`haltedAt` timestamp,\n\t`failedAt` timestamp,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp,\n\t`output` json,\n\tCONSTRAINT `contactAutomationSteps_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.802 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000c4] ["first new region left"="{Id:5055 StartKey:7480000000000000ffc200000000000000f8 EndKey:7480000000000000ffc400000000000000f8 RegionEpoch:{ConfVer:1 Version:91} Peers:[id:5056 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.802 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5055]"]
[2024/09/16 23:25:34.811 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:199, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.811 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:199, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contactAutomationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationStepId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`status` enum('PENDING','ACTIVE','COMPLETED','FAILED','HALTED') DEFAULT 'PENDING',\n\t`haltedAt` timestamp,\n\t`failedAt` timestamp,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp,\n\t`output` json,\n\tCONSTRAINT `contactAutomationSteps_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.813 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=199] [conn=952108040] [category=ddl] [job="ID:199, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.822 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=403] [neededSchemaVersion=404] ["elapsed time"=603.541s] [gotSchemaVersion=404] [phyTblIDs="[198]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.824 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=199] [version=404]
[2024/09/16 23:25:34.825 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=404] ["take time"=5.1295ms] [job="ID:199, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:198, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.829 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=199] [conn=952108040] [job="ID:199, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.766 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.834 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=199]
[2024/09/16 23:25:34.834 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000c6]
[2024/09/16 23:25:34.835 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=404] [cur_db=test] [sql="CREATE TABLE `contactImports` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fileIdentifier` varchar(32) NOT NULL,\n\t`name` varchar(50),\n\t`audienceId` bigint unsigned NOT NULL,\n\t`url` varchar(100) NOT NULL,\n\t`status` enum('PENDING','PROCESSING','FAILED','SUCCESS'),\n\t`subscribeAllContacts` boolean DEFAULT true,\n\t`updateExistingContacts` boolean DEFAULT true,\n\t`createdAt` timestamp DEFAULT (now()),\n\t`attributesMap` json NOT NULL,\n\tCONSTRAINT `contactImports_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contactImports_fileIdentifier_unique` UNIQUE(`fileIdentifier`)\n);"] [user=root@%]
[2024/09/16 23:25:34.836 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000c6] ["first new region left"="{Id:5057 StartKey:7480000000000000ffc400000000000000f8 EndKey:7480000000000000ffc600000000000000f8 RegionEpoch:{ConfVer:1 Version:92} Peers:[id:5058 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.837 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5057]"]
[2024/09/16 23:25:34.846 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:201, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.815 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.846 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:201, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.815 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contactImports` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fileIdentifier` varchar(32) NOT NULL,\n\t`name` varchar(50),\n\t`audienceId` bigint unsigned NOT NULL,\n\t`url` varchar(100) NOT NULL,\n\t`status` enum('PENDING','PROCESSING','FAILED','SUCCESS'),\n\t`subscribeAllContacts` boolean DEFAULT true,\n\t`updateExistingContacts` boolean DEFAULT true,\n\t`createdAt` timestamp DEFAULT (now()),\n\t`attributesMap` json NOT NULL,\n\tCONSTRAINT `contactImports_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contactImports_fileIdentifier_unique` UNIQUE(`fileIdentifier`)\n);"]
[2024/09/16 23:25:34.848 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=201] [conn=952108040] [category=ddl] [job="ID:201, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.815 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.857 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=404] [neededSchemaVersion=405] ["elapsed time"=685.416s] [gotSchemaVersion=405] [phyTblIDs="[200]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.859 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=201] [version=405]
[2024/09/16 23:25:34.860 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=405] ["take time"=3.941625ms] [job="ID:201, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:200, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.815 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.864 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=201] [conn=952108040] [job="ID:201, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.815 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.869 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=201]
[2024/09/16 23:25:34.869 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000c8]
[2024/09/16 23:25:34.870 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=405] [cur_db=test] [sql="CREATE TABLE `contacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`firstName` varchar(50),\n\t`lastName` varchar(50),\n\t`email` varchar(80) NOT NULL,\n\t`avatarUrl` varchar(256),\n\t`subscribedAt` timestamp,\n\t`unsubscribedAt` timestamp,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailVerificationToken` varchar(100),\n\t`emailVerificationTokenExpiresAt` timestamp,\n\t`contactImportId` bigint unsigned,\n\t`attributes` json,\n\t`createdAt` timestamp DEFAULT (now()),\n\tCONSTRAINT `contacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `ContactEmailAudienceIdKey` UNIQUE(`email`,`audienceId`)\n);"] [user=root@%]
[2024/09/16 23:25:34.871 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000c8] ["first new region left"="{Id:5059 StartKey:7480000000000000ffc600000000000000f8 EndKey:7480000000000000ffc800000000000000f8 RegionEpoch:{ConfVer:1 Version:93} Peers:[id:5060 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.871 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5059]"]
[2024/09/16 23:25:34.879 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:203, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.879 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:203, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`firstName` varchar(50),\n\t`lastName` varchar(50),\n\t`email` varchar(80) NOT NULL,\n\t`avatarUrl` varchar(256),\n\t`subscribedAt` timestamp,\n\t`unsubscribedAt` timestamp,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailVerificationToken` varchar(100),\n\t`emailVerificationTokenExpiresAt` timestamp,\n\t`contactImportId` bigint unsigned,\n\t`attributes` json,\n\t`createdAt` timestamp DEFAULT (now()),\n\tCONSTRAINT `contacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `ContactEmailAudienceIdKey` UNIQUE(`email`,`audienceId`)\n);"]
[2024/09/16 23:25:34.880 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=203] [conn=952108040] [category=ddl] [job="ID:203, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.889 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=405] [neededSchemaVersion=406] ["elapsed time"=693.5s] [gotSchemaVersion=406] [phyTblIDs="[202]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.891 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=203] [version=406]
[2024/09/16 23:25:34.892 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=406] ["take time"=4.481375ms] [job="ID:203, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:202, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.895 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=203] [conn=952108040] [job="ID:203, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.900 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=203]
[2024/09/16 23:25:34.900 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000ca]
[2024/09/16 23:25:34.901 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=406] [cur_db=test] [sql="CREATE TABLE `emailContents` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fromName` varchar(255),\n\t`fromEmail` varchar(255),\n\t`replyToEmail` varchar(255),\n\t`replyToName` varchar(255),\n\t`contentJson` json,\n\t`contentText` text,\n\t`contentHtml` text,\n\t`subject` varchar(255),\n\t`previewText` varchar(255),\n\tCONSTRAINT `emailContents_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.902 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000ca] ["first new region left"="{Id:5061 StartKey:7480000000000000ffc800000000000000f8 EndKey:7480000000000000ffca00000000000000f8 RegionEpoch:{ConfVer:1 Version:94} Peers:[id:5062 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.902 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5061]"]
[2024/09/16 23:25:34.908 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:205, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:204, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.908 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:205, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:204, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `emailContents` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fromName` varchar(255),\n\t`fromEmail` varchar(255),\n\t`replyToEmail` varchar(255),\n\t`replyToName` varchar(255),\n\t`contentJson` json,\n\t`contentText` text,\n\t`contentHtml` text,\n\t`subject` varchar(255),\n\t`previewText` varchar(255),\n\tCONSTRAINT `emailContents_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.910 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=205] [conn=952108040] [category=ddl] [job="ID:205, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:204, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.920 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=406] [neededSchemaVersion=407] ["elapsed time"=593.375s] [gotSchemaVersion=407] [phyTblIDs="[204]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.921 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=205] [version=407]
[2024/09/16 23:25:34.922 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=407] ["take time"=4.376167ms] [job="ID:205, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:204, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.926 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=205] [conn=952108040] [job="ID:205, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:204, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.931 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=205]
[2024/09/16 23:25:34.931 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000cc]
[2024/09/16 23:25:34.932 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=407] [cur_db=test] [sql="CREATE TABLE `emails` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`type` enum('AUTOMATION','TRANSACTIONAL') NOT NULL,\n\t`title` varchar(50) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned,\n\tCONSTRAINT `emails_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.933 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000cc] ["first new region left"="{Id:5063 StartKey:7480000000000000ffca00000000000000f8 EndKey:7480000000000000ffcc00000000000000f8 RegionEpoch:{ConfVer:1 Version:95} Peers:[id:5064 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.933 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5063]"]
[2024/09/16 23:25:34.940 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:207, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.940 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:207, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `emails` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`type` enum('AUTOMATION','TRANSACTIONAL') NOT NULL,\n\t`title` varchar(50) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned,\n\tCONSTRAINT `emails_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.941 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=207] [conn=952108040] [category=ddl] [job="ID:207, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.949 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=407] [neededSchemaVersion=408] ["elapsed time"=654.584s] [gotSchemaVersion=408] [phyTblIDs="[206]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.951 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=207] [version=408]
[2024/09/16 23:25:34.952 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=408] ["take time"=4.272458ms] [job="ID:207, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:206, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.956 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=207] [conn=952108040] [job="ID:207, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.961 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=207]
[2024/09/16 23:25:34.962 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000ce]
[2024/09/16 23:25:34.962 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=408] [cur_db=test] [sql="CREATE TABLE `segments` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`filterGroups` json NOT NULL,\n\tCONSTRAINT `segments_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.963 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000ce] ["first new region left"="{Id:5065 StartKey:7480000000000000ffcc00000000000000f8 EndKey:7480000000000000ffce00000000000000f8 RegionEpoch:{ConfVer:1 Version:96} Peers:[id:5066 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.963 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5065]"]
[2024/09/16 23:25:34.970 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:209, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.970 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:209, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `segments` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`filterGroups` json NOT NULL,\n\tCONSTRAINT `segments_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:34.971 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=209] [conn=952108040] [category=ddl] [job="ID:209, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.979 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=408] [neededSchemaVersion=409] ["elapsed time"=580.833s] [gotSchemaVersion=409] [phyTblIDs="[208]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:34.980 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=209] [version=409]
[2024/09/16 23:25:34.981 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=409] ["take time"=3.997167ms] [job="ID:209, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:208, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.985 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=209] [conn=952108040] [job="ID:209, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.916 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:34.989 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=209]
[2024/09/16 23:25:34.989 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000d0]
[2024/09/16 23:25:34.990 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=409] [cur_db=test] [sql="CREATE TABLE `sendingDomains` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`dkimSubDomain` varchar(120) NOT NULL,\n\t`dkimPublicKey` text NOT NULL,\n\t`dkimPrivateKey` text NOT NULL,\n\t`returnPathSubDomain` varchar(120) NOT NULL,\n\t`returnPathDomainCnameValue` varchar(120) NOT NULL,\n\t`dkimVerifiedAt` timestamp,\n\t`returnPathDomainVerifiedAt` timestamp,\n\tCONSTRAINT `sendingDomains_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:34.991 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000d0] ["first new region left"="{Id:5067 StartKey:7480000000000000ffce00000000000000f8 EndKey:7480000000000000ffd000000000000000f8 RegionEpoch:{ConfVer:1 Version:97} Peers:[id:5068 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:34.991 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5067]"]
[2024/09/16 23:25:34.999 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:211, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:34.999 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:211, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `sendingDomains` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`dkimSubDomain` varchar(120) NOT NULL,\n\t`dkimPublicKey` text NOT NULL,\n\t`dkimPrivateKey` text NOT NULL,\n\t`returnPathSubDomain` varchar(120) NOT NULL,\n\t`returnPathDomainCnameValue` varchar(120) NOT NULL,\n\t`dkimVerifiedAt` timestamp,\n\t`returnPathDomainVerifiedAt` timestamp,\n\tCONSTRAINT `sendingDomains_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:35.001 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=211] [conn=952108040] [category=ddl] [job="ID:211, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.011 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=409] [neededSchemaVersion=410] ["elapsed time"=700.042s] [gotSchemaVersion=410] [phyTblIDs="[210]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.013 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=211] [version=410]
[2024/09/16 23:25:35.014 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=410] ["take time"=4.3885ms] [job="ID:211, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:210, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:34.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.017 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=211] [conn=952108040] [job="ID:211, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:34.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.022 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=211]
[2024/09/16 23:25:35.022 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000d2]
[2024/09/16 23:25:35.023 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=410] [cur_db=test] [sql="CREATE TABLE `settings` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`url` varchar(256),\n\t`domain` varchar(50) NOT NULL,\n\t`installedSslCertificate` boolean NOT NULL DEFAULT false,\n\tCONSTRAINT `settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `settings_url_unique` UNIQUE(`url`),\n\tCONSTRAINT `settings_domain_unique` UNIQUE(`domain`)\n);"] [user=root@%]
[2024/09/16 23:25:35.024 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000d2] ["first new region left"="{Id:5069 StartKey:7480000000000000ffd000000000000000f8 EndKey:7480000000000000ffd200000000000000f8 RegionEpoch:{ConfVer:1 Version:98} Peers:[id:5070 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.024 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5069]"]
[2024/09/16 23:25:35.031 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:213, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:212, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.031 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:213, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:212, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `settings` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`url` varchar(256),\n\t`domain` varchar(50) NOT NULL,\n\t`installedSslCertificate` boolean NOT NULL DEFAULT false,\n\tCONSTRAINT `settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `settings_url_unique` UNIQUE(`url`),\n\tCONSTRAINT `settings_domain_unique` UNIQUE(`domain`)\n);"]
[2024/09/16 23:25:35.032 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=213] [conn=952108040] [category=ddl] [job="ID:213, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:212, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.040 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=410] [neededSchemaVersion=411] ["elapsed time"=561.209s] [gotSchemaVersion=411] [phyTblIDs="[212]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.041 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=213] [version=411]
[2024/09/16 23:25:35.042 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=411] ["take time"=3.867375ms] [job="ID:213, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:212, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.046 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=213] [conn=952108040] [job="ID:213, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:212, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.050 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=213]
[2024/09/16 23:25:35.051 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000d4]
[2024/09/16 23:25:35.052 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=411] [cur_db=test] [sql="CREATE TABLE `tags` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(256) NOT NULL,\n\t`description` varchar(256),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `tags_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagNameAudienceIdKey` UNIQUE(`name`,`audienceId`)\n);"] [user=root@%]
[2024/09/16 23:25:35.053 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000d4] ["first new region left"="{Id:5071 StartKey:7480000000000000ffd200000000000000f8 EndKey:7480000000000000ffd400000000000000f8 RegionEpoch:{ConfVer:1 Version:99} Peers:[id:5072 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.053 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5071]"]
[2024/09/16 23:25:35.060 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:215, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.060 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:215, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `tags` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(256) NOT NULL,\n\t`description` varchar(256),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `tags_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagNameAudienceIdKey` UNIQUE(`name`,`audienceId`)\n);"]
[2024/09/16 23:25:35.061 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=215] [conn=952108040] [category=ddl] [job="ID:215, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.070 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=411] [neededSchemaVersion=412] ["elapsed time"=612.083s] [gotSchemaVersion=412] [phyTblIDs="[214]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.072 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=215] [version=412]
[2024/09/16 23:25:35.073 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=412] ["take time"=4.212041ms] [job="ID:215, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:214, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.077 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=215] [conn=952108040] [job="ID:215, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.015 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.081 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=215]
[2024/09/16 23:25:35.082 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000d6]
[2024/09/16 23:25:35.082 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=412] [cur_db=test] [sql="CREATE TABLE `tagsOnContacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`tagId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`assignedAt` timestamp,\n\tCONSTRAINT `tagsOnContacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagsOnContactsTagIdContactIdKey` UNIQUE(`tagId`,`contactId`)\n);"] [user=root@%]
[2024/09/16 23:25:35.083 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000d6] ["first new region left"="{Id:5073 StartKey:7480000000000000ffd400000000000000f8 EndKey:7480000000000000ffd600000000000000f8 RegionEpoch:{ConfVer:1 Version:100} Peers:[id:5074 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.083 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5073]"]
[2024/09/16 23:25:35.092 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:217, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.092 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:217, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `tagsOnContacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`tagId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`assignedAt` timestamp,\n\tCONSTRAINT `tagsOnContacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagsOnContactsTagIdContactIdKey` UNIQUE(`tagId`,`contactId`)\n);"]
[2024/09/16 23:25:35.093 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=217] [conn=952108040] [category=ddl] [job="ID:217, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.101 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=412] [neededSchemaVersion=413] ["elapsed time"=544.625s] [gotSchemaVersion=413] [phyTblIDs="[216]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.103 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=217] [version=413]
[2024/09/16 23:25:35.104 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=413] ["take time"=4.044375ms] [job="ID:217, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.107 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=217] [conn=952108040] [job="ID:217, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.111 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=217]
[2024/09/16 23:25:35.111 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000d8]
[2024/09/16 23:25:35.112 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=413] [cur_db=test] [sql="CREATE TABLE `teamMemberships` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`email` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`role` enum('ADMINISTRATOR','MANAGER','AUTHOR','GUEST'),\n\t`status` enum('PENDING','ACTIVE'),\n\t`invitedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL,\n\tCONSTRAINT `teamMemberships_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:35.113 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000d8] ["first new region left"="{Id:5075 StartKey:7480000000000000ffd600000000000000f8 EndKey:7480000000000000ffd800000000000000f8 RegionEpoch:{ConfVer:1 Version:101} Peers:[id:5076 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.113 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5075]"]
[2024/09/16 23:25:35.121 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:219, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.121 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:219, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `teamMemberships` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`email` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`role` enum('ADMINISTRATOR','MANAGER','AUTHOR','GUEST'),\n\t`status` enum('PENDING','ACTIVE'),\n\t`invitedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL,\n\tCONSTRAINT `teamMemberships_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:35.122 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=219] [conn=952108040] [category=ddl] [job="ID:219, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.130 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=413] [neededSchemaVersion=414] ["elapsed time"=544.458s] [gotSchemaVersion=414] [phyTblIDs="[218]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.132 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=219] [version=414]
[2024/09/16 23:25:35.133 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=414] ["take time"=3.914792ms] [job="ID:219, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:218, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.136 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=219] [conn=952108040] [job="ID:219, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.141 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=219]
[2024/09/16 23:25:35.141 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000da]
[2024/09/16 23:25:35.142 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=414] [cur_db=test] [sql="CREATE TABLE `teams` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`userId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`broadcastEditor` enum('DEFAULT','MARKDOWN'),\n\tCONSTRAINT `teams_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:35.143 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000da] ["first new region left"="{Id:5077 StartKey:7480000000000000ffd800000000000000f8 EndKey:7480000000000000ffda00000000000000f8 RegionEpoch:{ConfVer:1 Version:102} Peers:[id:5078 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.143 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5077]"]
[2024/09/16 23:25:35.150 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:221, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.150 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:221, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `teams` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`userId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`broadcastEditor` enum('DEFAULT','MARKDOWN'),\n\tCONSTRAINT `teams_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:35.151 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=221] [conn=952108040] [category=ddl] [job="ID:221, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.159 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=414] [neededSchemaVersion=415] ["elapsed time"=599.25s] [gotSchemaVersion=415] [phyTblIDs="[220]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.161 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=221] [version=415]
[2024/09/16 23:25:35.161 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=415] ["take time"=3.828333ms] [job="ID:221, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:220, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.165 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=221] [conn=952108040] [job="ID:221, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.169 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=221]
[2024/09/16 23:25:35.169 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000dc]
[2024/09/16 23:25:35.170 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=415] [cur_db=test] [sql="CREATE TABLE `users` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`email` varchar(80) NOT NULL,\n\t`name` varchar(80),\n\t`avatarUrl` varchar(256),\n\t`password` varchar(256) NOT NULL,\n\tCONSTRAINT `users_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `users_email_unique` UNIQUE(`email`)\n);"] [user=root@%]
[2024/09/16 23:25:35.171 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000dc] ["first new region left"="{Id:5079 StartKey:7480000000000000ffda00000000000000f8 EndKey:7480000000000000ffdc00000000000000f8 RegionEpoch:{ConfVer:1 Version:103} Peers:[id:5080 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.171 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5079]"]
[2024/09/16 23:25:35.180 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:223, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:222, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.180 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:223, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:222, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `users` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`email` varchar(80) NOT NULL,\n\t`name` varchar(80),\n\t`avatarUrl` varchar(256),\n\t`password` varchar(256) NOT NULL,\n\tCONSTRAINT `users_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `users_email_unique` UNIQUE(`email`)\n);"]
[2024/09/16 23:25:35.182 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=223] [conn=952108040] [category=ddl] [job="ID:223, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:222, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.190 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=415] [neededSchemaVersion=416] ["elapsed time"=684.875s] [gotSchemaVersion=416] [phyTblIDs="[222]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.192 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=223] [version=416]
[2024/09/16 23:25:35.193 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=416] ["take time"=3.989916ms] [job="ID:223, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:222, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.197 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=223] [conn=952108040] [job="ID:223, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:222, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.201 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=223]
[2024/09/16 23:25:35.201 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000de]
[2024/09/16 23:25:35.202 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=416] [cur_db=test] [sql="CREATE TABLE `webhooks` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`url` varchar(256) NOT NULL,\n\t`webhookEvent` enum('ALL_EVENTS','CONTACT_ADDED','CONTACT_REMOVED','CONTACT_TAG_ADDED','CONTACT_TAG_REMOVED','BROADCAST_SENT','BROADCAST_PAUSED','BROADCAST_EMAIL_OPENED','BROADCAST_EMAIL_LINK_CLICKED','AUDIENCE_ADDED','TAG_ADDED','TAG_REMOVED'),\n\t`teamId` bigint unsigned NOT NULL,\n\tCONSTRAINT `webhooks_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:25:35.203 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000de] ["first new region left"="{Id:5081 StartKey:7480000000000000ffdc00000000000000f8 EndKey:7480000000000000ffde00000000000000f8 RegionEpoch:{ConfVer:1 Version:104} Peers:[id:5082 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.204 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5081]"]
[2024/09/16 23:25:35.213 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:225, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.213 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:225, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `webhooks` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`url` varchar(256) NOT NULL,\n\t`webhookEvent` enum('ALL_EVENTS','CONTACT_ADDED','CONTACT_REMOVED','CONTACT_TAG_ADDED','CONTACT_TAG_REMOVED','BROADCAST_SENT','BROADCAST_PAUSED','BROADCAST_EMAIL_OPENED','BROADCAST_EMAIL_LINK_CLICKED','AUDIENCE_ADDED','TAG_ADDED','TAG_REMOVED'),\n\t`teamId` bigint unsigned NOT NULL,\n\tCONSTRAINT `webhooks_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:25:35.214 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=225] [conn=952108040] [category=ddl] [job="ID:225, Type:create table, State:queueing, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.223 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=416] [neededSchemaVersion=417] ["elapsed time"=571.75s] [gotSchemaVersion=417] [phyTblIDs="[224]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:25:35.225 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=225] [version=417]
[2024/09/16 23:25:35.226 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=417] ["take time"=4.476625ms] [job="ID:225, Type:create table, State:done, SchemaState:public, SchemaID:182, TableID:224, RowCount:0, ArgLen:2, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.230 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=225] [conn=952108040] [job="ID:225, Type:create table, State:synced, SchemaState:public, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:25:35.234 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=225]
[2024/09/16 23:25:35.234 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=7480000000000000e0]
[2024/09/16 23:25:35.235 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=417] [cur_db=test] [sql="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_broadcastId_broadcasts_id_fk` FOREIGN KEY (`broadcastId`) REFERENCES `broadcasts`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:35.236 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:35.236 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=7480000000000000e0] ["first new region left"="{Id:5083 StartKey:7480000000000000ffde00000000000000f8 EndKey:7480000000000000ffe000000000000000f8 RegionEpoch:{ConfVer:1 Version:105} Peers:[id:5084 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:25:35.237 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5083]"]
[2024/09/16 23:25:35.237 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:35.245 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:226, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:35.245 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:226, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_broadcastId_broadcasts_id_fk` FOREIGN KEY (`broadcastId`) REFERENCES `broadcasts`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:35.247 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:35.248 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"abTestVariants_broadcastId_broadcasts_id_fk\",\"L\":\"abtestvariants_broadcastid_broadcasts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"broadcastId\",\"L\":\"broadcastid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:35.254 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=417] [neededSchemaVersion=418] ["elapsed time"=517.417s] [gotSchemaVersion=418] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:35.256 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=418]
[2024/09/16 23:25:35.257 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=418] ["take time"=3.555417ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:35.260 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:35.266 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=418] [neededSchemaVersion=419] ["elapsed time"=496.958s] [gotSchemaVersion=419] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:35.268 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=419]
[2024/09/16 23:25:35.269 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=419] ["take time"=3.593625ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:35.271 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:35.278 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=419] [neededSchemaVersion=420] ["elapsed time"=649.459s] [gotSchemaVersion=420] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:35.280 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=420]
[2024/09/16 23:25:35.281 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=420] ["take time"=4.183791ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:35.284 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:35.284 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=226] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 23:25:35.285 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{186 abTestVariants utf8mb4 utf8mb4_bin [0x400cde8b00 0x400cde8c60 0x400cde8dc0 0x400cde8f20 0x400cde9080 0x400cde91e0] [0x402297cf30] [] [] public true false 0  0 0 0 0 6 1 0 0 452599253635170309 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=186] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:35.285 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=226] [physicalTableID=186] [startKey=] [endKey=]
[2024/09/16 23:25:35.290 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=226]
[2024/09/16 23:25:35.291 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599253635170319, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:35.291 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=226] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 23:25:35.296 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/226/0]
[2024/09/16 23:25:35.299 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=186] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:35.309 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=33]
[2024/09/16 23:25:35.309 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=33] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:35.812 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=33] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:35.812 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=33] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:35.813 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=33] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:35.814 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{186 abTestVariants utf8mb4 utf8mb4_bin [0x400d391340 0x400d3914a0 0x400d391600 0x400d391760 0x400d3918c0 0x400d391a20] [0x4014c4e900] [] [] public true false 0  0 0 0 0 6 1 0 0 452599253635170309 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=186] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:35.814 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=33] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:36.316 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=33] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:36.516 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:36.524 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=420] [neededSchemaVersion=421] ["elapsed time"=536.917s] [gotSchemaVersion=421] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:36.525 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=421]
[2024/09/16 23:25:36.526 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=421] ["take time"=3.984541ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.529 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599253635170319, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.530 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=226] [table=abTestVariants] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 23:25:36.537 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=421] [neededSchemaVersion=422] ["elapsed time"=766.208s] [gotSchemaVersion=422] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:36.539 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=422]
[2024/09/16 23:25:36.540 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=422] ["take time"=4.324458ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.543 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.544 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=226] [physicalTableID=186] [startKey=7480000000000000ba5f69ffff000000000001] [endKey=7480000000000000ba5f69ffff000000000001ff]
[2024/09/16 23:25:36.549 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=226]
[2024/09/16 23:25:36.550 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599253963112467, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.552 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599253963112467, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000ba5f69ffff000000000001,EndKey:7480000000000000ba5f69ffff000000000001ff,First:false,PhysicalTableID:186,Ingest mode:false"]
[2024/09/16 23:25:36.553 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=186] ["start key"=7480000000000000ba5f69ffff000000000001] ["end key"=7480000000000000ba5f69ffff000000000001ff]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=186] ["range start"=7480000000000000ba5f69ffff000000000001] ["range end"=7480000000000000ba5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000ba5f69ffff000000000001] [endKey=7480000000000000ba5f69ffff000000000001ff]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=226]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=226]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=226]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 186, range: [7480000000000000ba5f69ffff000000000001, 7480000000000000ba5f69ffff000000000001ff), jobID: 226"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000ba5f69ffff000000000001ff00] ["take time"=607.584s]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=226]
[2024/09/16 23:25:36.554 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000ba5f69ffff000000000001]
[2024/09/16 23:25:36.554 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:36.561 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=422] [neededSchemaVersion=423] ["elapsed time"=600.208s] [gotSchemaVersion=423] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:36.562 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=423]
[2024/09/16 23:25:36.563 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=423] ["take time"=3.812916ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.566 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.573 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=423] [neededSchemaVersion=424] ["elapsed time"=597.75s] [gotSchemaVersion=424] [phyTblIDs="[186]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:36.575 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=424]
[2024/09/16 23:25:36.575 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=424] ["take time"=3.678916ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.578 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.586 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=424] [neededSchemaVersion=425] ["elapsed time"=483.917s] [gotSchemaVersion=425] [phyTblIDs="[186]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:36.587 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=425]
[2024/09/16 23:25:36.588 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=425] ["take time"=3.344708ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.591 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.597 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=425] [neededSchemaVersion=426] ["elapsed time"=560.875s] [gotSchemaVersion=426] [phyTblIDs="[186]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:36.599 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=426]
[2024/09/16 23:25:36.600 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=426] ["take time"=3.708292ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.603 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [category=ddl] [job="ID:226, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599253963112467, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:36.605 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:36.610 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=426] [neededSchemaVersion=427] ["elapsed time"=536.667s] [gotSchemaVersion=427] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:36.611 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=226] [version=427]
[2024/09/16 23:25:36.612 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=427] ["take time"=3.427583ms] [job="ID:226, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.618 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=226]
[2024/09/16 23:25:36.620 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=226] [tableID=186] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:36.622 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=226] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:36.622 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=226] [conn=952108040] [job="ID:226, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:35.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.629 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=226]
[2024/09/16 23:25:36.630 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=427] [cur_db=test] [sql="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:36.631 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:36.631 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:36.636 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:227, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:36.636 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:227, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:36.637 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.638 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"abTestVariants_emailContentId_emailContents_id_fk\",\"L\":\"abtestvariants_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:36.645 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=427] [neededSchemaVersion=428] ["elapsed time"=555.333s] [gotSchemaVersion=428] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:36.647 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=428]
[2024/09/16 23:25:36.647 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=428] ["take time"=3.936083ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.650 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.657 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=428] [neededSchemaVersion=429] ["elapsed time"=533.958s] [gotSchemaVersion=429] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:36.659 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=429]
[2024/09/16 23:25:36.659 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=429] ["take time"=3.738708ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.662 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.669 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=429] [neededSchemaVersion=430] ["elapsed time"=529.709s] [gotSchemaVersion=430] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:36.670 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=430]
[2024/09/16 23:25:36.671 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=430] ["take time"=3.63325ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:36.674 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.674 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=227] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 23:25:36.675 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{186 abTestVariants utf8mb4 utf8mb4_bin [0x400e273760 0x400e2738c0 0x400e273a20 0x400e273b80 0x400e273ce0 0x400e273e40] [0x40149ef5f0 0x40149ef830] [] [0x400e0c5500] public true false 0  0 0 0 0 6 2 1 0 452599253989326886 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=186] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:36.675 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=227] [physicalTableID=186] [startKey=] [endKey=]
[2024/09/16 23:25:36.679 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=227]
[2024/09/16 23:25:36.681 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254002171911, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:36.681 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=227] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 23:25:36.685 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/227/0]
[2024/09/16 23:25:36.689 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=186] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:36.697 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=34]
[2024/09/16 23:25:36.697 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=34] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:36.811 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=33]
[2024/09/16 23:25:36.813 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:36.814 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=33]
[2024/09/16 23:25:36.822 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:37.199 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=34] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:37.199 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=34] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:37.200 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=34] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:37.201 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{186 abTestVariants utf8mb4 utf8mb4_bin [0x400ebee000 0x400ebee160 0x400ebee2c0 0x400ebee420 0x400ebee580 0x400ebee6e0] [0x400ddc9710 0x400ddc9950] [] [0x400e5b5bc0] public true false 0  0 0 0 0 6 2 1 0 452599253989326886 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=186] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:37.201 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=34] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:37.533 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 23:25:37.700 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=34] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:37.901 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:37.909 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=430] [neededSchemaVersion=431] ["elapsed time"=520.833s] [gotSchemaVersion=431] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:37.911 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=431]
[2024/09/16 23:25:37.911 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=431] ["take time"=3.993167ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:37.915 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254002171911, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:37.915 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=227] [table=abTestVariants] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 23:25:37.922 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=431] [neededSchemaVersion=432] ["elapsed time"=566.666s] [gotSchemaVersion=432] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:37.924 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=432]
[2024/09/16 23:25:37.924 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=432] ["take time"=3.806ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:37.927 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:37.928 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=227] [physicalTableID=186] [startKey=7480000000000000ba5f69ffff000000000002] [endKey=7480000000000000ba5f69ffff000000000002ff]
[2024/09/16 23:25:37.935 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=227]
[2024/09/16 23:25:37.937 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254329851913, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:37.940 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254329851913, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000ba5f69ffff000000000002,EndKey:7480000000000000ba5f69ffff000000000002ff,First:false,PhysicalTableID:186,Ingest mode:false"]
[2024/09/16 23:25:37.942 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=186] ["start key"=7480000000000000ba5f69ffff000000000002] ["end key"=7480000000000000ba5f69ffff000000000002ff]
[2024/09/16 23:25:37.942 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=186] ["range start"=7480000000000000ba5f69ffff000000000002] ["range end"=7480000000000000ba5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:25:37.942 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000ba5f69ffff000000000002] [endKey=7480000000000000ba5f69ffff000000000002ff]
[2024/09/16 23:25:37.942 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=227]
[2024/09/16 23:25:37.942 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=227]
[2024/09/16 23:25:37.943 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=227]
[2024/09/16 23:25:37.943 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 186, range: [7480000000000000ba5f69ffff000000000002, 7480000000000000ba5f69ffff000000000002ff), jobID: 227"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000ba5f69ffff000000000002ff00] ["take time"=977s]
[2024/09/16 23:25:37.943 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=227]
[2024/09/16 23:25:37.943 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000ba5f69ffff000000000002]
[2024/09/16 23:25:37.944 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:37.978 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=432] [neededSchemaVersion=433] ["elapsed time"=5.399375ms] [gotSchemaVersion=433] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:37.997 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=433]
[2024/09/16 23:25:38.000 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=433] ["take time"=36.168458ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.036 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.052 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=433] [neededSchemaVersion=434] ["elapsed time"=806.041s] [gotSchemaVersion=434] [phyTblIDs="[186]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:38.054 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=434]
[2024/09/16 23:25:38.055 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=434] ["take time"=5.396541ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.059 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.068 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=434] [neededSchemaVersion=435] ["elapsed time"=729.334s] [gotSchemaVersion=435] [phyTblIDs="[186]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:38.071 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=435]
[2024/09/16 23:25:38.072 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=435] ["take time"=5.00775ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.075 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.084 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=435] [neededSchemaVersion=436] ["elapsed time"=647.583s] [gotSchemaVersion=436] [phyTblIDs="[186]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:38.086 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=436]
[2024/09/16 23:25:38.086 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=436] ["take time"=4.503334ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.091 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [category=ddl] [job="ID:227, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254329851913, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:38.093 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:38.098 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=436] [neededSchemaVersion=437] ["elapsed time"=582.417s] [gotSchemaVersion=437] [phyTblIDs="[186]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:38.100 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=227] [version=437]
[2024/09/16 23:25:38.101 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=437] ["take time"=4.334709ms] [job="ID:227, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.108 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=227]
[2024/09/16 23:25:38.110 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=227] [tableID=186] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:38.112 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=227] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:38.113 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=227] [conn=952108040] [job="ID:227, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:186, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:36.617 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.121 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=227]
[2024/09/16 23:25:38.123 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=437] [cur_db=test] [sql="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:38.123 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:38.123 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:38.128 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:228, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:38.128 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:228, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:38.129 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.130 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"accessTokens_userId_users_id_fk\",\"L\":\"accesstokens_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:38.136 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=437] [neededSchemaVersion=438] ["elapsed time"=485.333s] [gotSchemaVersion=438] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:38.138 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=438]
[2024/09/16 23:25:38.139 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=438] ["take time"=3.572333ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.142 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.150 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=438] [neededSchemaVersion=439] ["elapsed time"=493.041s] [gotSchemaVersion=439] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:38.151 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=439]
[2024/09/16 23:25:38.152 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=439] ["take time"=3.615458ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.155 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.163 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=439] [neededSchemaVersion=440] ["elapsed time"=612.334s] [gotSchemaVersion=440] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:38.166 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=440]
[2024/09/16 23:25:38.166 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=440] ["take time"=4.623917ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:38.170 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.171 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=228] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_userId_users_id_fk]
[2024/09/16 23:25:38.172 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{188 accessTokens utf8mb4 utf8mb4_bin [0x4010ac4000 0x4010ac4160 0x4010ac42c0 0x4010ac4420 0x4010ac4580 0x4010ac46e0 0x4010ac4840 0x4010ac49a0] [0x400dd6d680] [] [] public true false 0  0 0 0 0 8 1 0 0 452599254382280736 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=188] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:38.172 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=228] [physicalTableID=188] [startKey=] [endKey=]
[2024/09/16 23:25:38.178 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=228]
[2024/09/16 23:25:38.180 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254395125764, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:38.181 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=228] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_userId_users_id_fk]
[2024/09/16 23:25:38.185 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/228/0]
[2024/09/16 23:25:38.186 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=188] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:38.198 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=35]
[2024/09/16 23:25:38.198 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=35] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:38.198 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=34]
[2024/09/16 23:25:38.200 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:38.200 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=34]
[2024/09/16 23:25:38.205 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:38.701 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=35] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:38.702 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=35] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:38.705 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=35] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:38.707 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{188 accessTokens utf8mb4 utf8mb4_bin [0x401128a6e0 0x401128a840 0x401128a9a0 0x401128ab00 0x401128ac60 0x401128adc0 0x401128af20 0x401128b080] [0x401b371cb0] [] [] public true false 0  0 0 0 0 8 1 0 0 452599254382280736 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=188] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:38.707 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=35] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:39.202 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=35] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:39.402 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:39.411 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=440] [neededSchemaVersion=441] ["elapsed time"=550.541s] [gotSchemaVersion=441] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:39.413 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=441]
[2024/09/16 23:25:39.414 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=441] ["take time"=4.563209ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.417 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254395125764, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.417 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=228] [table=accessTokens] [index=accessTokens_userId_users_id_fk]
[2024/09/16 23:25:39.424 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=441] [neededSchemaVersion=442] ["elapsed time"=642.041s] [gotSchemaVersion=442] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:39.425 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=442]
[2024/09/16 23:25:39.426 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=442] ["take time"=4.164875ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.430 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.431 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=228] [physicalTableID=188] [startKey=7480000000000000bc5f69ffff000000000001] [endKey=7480000000000000bc5f69ffff000000000001ff]
[2024/09/16 23:25:39.437 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=228]
[2024/09/16 23:25:39.440 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254723067914, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.442 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254723067914, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000bc5f69ffff000000000001,EndKey:7480000000000000bc5f69ffff000000000001ff,First:false,PhysicalTableID:188,Ingest mode:false"]
[2024/09/16 23:25:39.443 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=188] ["start key"=7480000000000000bc5f69ffff000000000001] ["end key"=7480000000000000bc5f69ffff000000000001ff]
[2024/09/16 23:25:39.443 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=188] ["range start"=7480000000000000bc5f69ffff000000000001] ["range end"=7480000000000000bc5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:25:39.443 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000bc5f69ffff000000000001] [endKey=7480000000000000bc5f69ffff000000000001ff]
[2024/09/16 23:25:39.443 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=228]
[2024/09/16 23:25:39.444 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=228]
[2024/09/16 23:25:39.444 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=228]
[2024/09/16 23:25:39.444 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 188, range: [7480000000000000bc5f69ffff000000000001, 7480000000000000bc5f69ffff000000000001ff), jobID: 228"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000bc5f69ffff000000000001ff00] ["take time"=551.333s]
[2024/09/16 23:25:39.444 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=228]
[2024/09/16 23:25:39.444 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000bc5f69ffff000000000001]
[2024/09/16 23:25:39.444 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:39.452 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=442] [neededSchemaVersion=443] ["elapsed time"=683.25s] [gotSchemaVersion=443] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:39.454 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=443]
[2024/09/16 23:25:39.455 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=443] ["take time"=5.529958ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.458 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.467 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=443] [neededSchemaVersion=444] ["elapsed time"=646.166s] [gotSchemaVersion=444] [phyTblIDs="[188]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:39.469 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=444]
[2024/09/16 23:25:39.469 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=444] ["take time"=4.027417ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.474 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.483 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=444] [neededSchemaVersion=445] ["elapsed time"=792.125s] [gotSchemaVersion=445] [phyTblIDs="[188]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:39.485 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=445]
[2024/09/16 23:25:39.486 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=445] ["take time"=4.6815ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.489 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.496 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=445] [neededSchemaVersion=446] ["elapsed time"=562.583s] [gotSchemaVersion=446] [phyTblIDs="[188]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:39.498 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=446]
[2024/09/16 23:25:39.499 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=446] ["take time"=3.776375ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.502 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [category=ddl] [job="ID:228, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254723067914, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:39.504 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:39.510 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=446] [neededSchemaVersion=447] ["elapsed time"=644.75s] [gotSchemaVersion=447] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:39.512 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=228] [version=447]
[2024/09/16 23:25:39.512 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=447] ["take time"=3.977333ms] [job="ID:228, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.518 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=228]
[2024/09/16 23:25:39.520 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=228] [tableID=188] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:39.522 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=228] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:39.523 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=228] [conn=952108040] [job="ID:228, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:38.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.530 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=228]
[2024/09/16 23:25:39.531 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=447] [cur_db=test] [sql="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:39.531 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:39.531 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:39.537 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:229, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:39.537 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:229, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:39.538 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.538 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"accessTokens_teamId_teams_id_fk\",\"L\":\"accesstokens_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:39.545 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=447] [neededSchemaVersion=448] ["elapsed time"=605.583s] [gotSchemaVersion=448] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:39.546 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=448]
[2024/09/16 23:25:39.547 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=448] ["take time"=3.720417ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.550 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.557 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=448] [neededSchemaVersion=449] ["elapsed time"=494.625s] [gotSchemaVersion=449] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:39.558 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=449]
[2024/09/16 23:25:39.559 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=449] ["take time"=3.714834ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.562 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.569 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=449] [neededSchemaVersion=450] ["elapsed time"=522.041s] [gotSchemaVersion=450] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:39.571 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=450]
[2024/09/16 23:25:39.572 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=450] ["take time"=3.995917ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:39.576 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.576 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=229] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 23:25:39.577 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{188 accessTokens utf8mb4 utf8mb4_bin [0x4012580dc0 0x4012580f20 0x4012581080 0x40125811e0 0x4012581340 0x40125814a0 0x4012581600 0x4012581760] [0x40125cf560 0x40125cf7a0] [] [0x401229f500] public true false 0  0 0 0 0 8 2 1 0 452599254749020199 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=188] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:39.577 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=229] [physicalTableID=188] [startKey=] [endKey=]
[2024/09/16 23:25:39.583 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=229]
[2024/09/16 23:25:39.585 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254762389512, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:39.586 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=229] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 23:25:39.591 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/229/0]
[2024/09/16 23:25:39.594 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=188] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:39.605 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=36]
[2024/09/16 23:25:39.605 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=36] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:39.699 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=35]
[2024/09/16 23:25:39.701 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:39.701 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=35]
[2024/09/16 23:25:39.707 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:40.108 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=36] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:40.109 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=36] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:40.111 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=36] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:40.113 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{188 accessTokens utf8mb4 utf8mb4_bin [0x4012fa0dc0 0x4012fa0f20 0x4012fa1080 0x4012fa11e0 0x4012fa1340 0x4012fa14a0 0x4012fa1600 0x4012fa1760] [0x40131479e0 0x4013147c20] [] [0x4012f22b40] public true false 0  0 0 0 0 8 2 1 0 452599254749020199 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=188] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:40.113 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=36] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:40.609 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=36] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:40.810 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:40.818 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=450] [neededSchemaVersion=451] ["elapsed time"=592.291s] [gotSchemaVersion=451] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:40.820 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=451]
[2024/09/16 23:25:40.820 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=451] ["take time"=3.541042ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.823 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599254762389512, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.824 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=229] [table=accessTokens] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 23:25:40.831 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=451] [neededSchemaVersion=452] ["elapsed time"=566.75s] [gotSchemaVersion=452] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:40.832 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=452]
[2024/09/16 23:25:40.833 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=452] ["take time"=4.268125ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.836 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.837 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=229] [physicalTableID=188] [startKey=7480000000000000bc5f69ffff000000000002] [endKey=7480000000000000bc5f69ffff000000000002ff]
[2024/09/16 23:25:40.841 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=229]
[2024/09/16 23:25:40.842 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255089807378, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.844 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255089807378, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000bc5f69ffff000000000002,EndKey:7480000000000000bc5f69ffff000000000002ff,First:false,PhysicalTableID:188,Ingest mode:false"]
[2024/09/16 23:25:40.845 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=188] ["start key"=7480000000000000bc5f69ffff000000000002] ["end key"=7480000000000000bc5f69ffff000000000002ff]
[2024/09/16 23:25:40.845 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=188] ["range start"=7480000000000000bc5f69ffff000000000002] ["range end"=7480000000000000bc5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:25:40.845 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000bc5f69ffff000000000002] [endKey=7480000000000000bc5f69ffff000000000002ff]
[2024/09/16 23:25:40.845 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=229]
[2024/09/16 23:25:40.845 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=229]
[2024/09/16 23:25:40.846 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=229]
[2024/09/16 23:25:40.846 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 188, range: [7480000000000000bc5f69ffff000000000002, 7480000000000000bc5f69ffff000000000002ff), jobID: 229"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000bc5f69ffff000000000002ff00] ["take time"=401.291s]
[2024/09/16 23:25:40.846 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=229]
[2024/09/16 23:25:40.846 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000bc5f69ffff000000000002]
[2024/09/16 23:25:40.846 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:40.852 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=452] [neededSchemaVersion=453] ["elapsed time"=527.25s] [gotSchemaVersion=453] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:40.854 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=453]
[2024/09/16 23:25:40.854 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=453] ["take time"=3.283583ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.857 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.863 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=453] [neededSchemaVersion=454] ["elapsed time"=622.25s] [gotSchemaVersion=454] [phyTblIDs="[188]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:40.865 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=454]
[2024/09/16 23:25:40.865 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=454] ["take time"=3.648875ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.868 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.876 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=454] [neededSchemaVersion=455] ["elapsed time"=653s] [gotSchemaVersion=455] [phyTblIDs="[188]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:40.878 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=455]
[2024/09/16 23:25:40.879 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=455] ["take time"=3.819584ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.882 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.889 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=455] [neededSchemaVersion=456] ["elapsed time"=651.375s] [gotSchemaVersion=456] [phyTblIDs="[188]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:40.891 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=456]
[2024/09/16 23:25:40.892 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=456] ["take time"=4.119042ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.895 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [category=ddl] [job="ID:229, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255089807378, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:40.897 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:40.902 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=456] [neededSchemaVersion=457] ["elapsed time"=574.875s] [gotSchemaVersion=457] [phyTblIDs="[188]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:40.904 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=229] [version=457]
[2024/09/16 23:25:40.904 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=457] ["take time"=3.490833ms] [job="ID:229, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.910 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=229]
[2024/09/16 23:25:40.911 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=229] [tableID=188] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:40.913 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=229] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:40.913 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=229] [conn=952108040] [job="ID:229, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:188, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:39.515 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.919 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=229]
[2024/09/16 23:25:40.920 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=457] [cur_db=test] [sql="ALTER TABLE `audiences` ADD CONSTRAINT `audiences_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:40.921 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=audiences] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:40.921 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=audiences] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:40.924 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:230, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:40.925 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:230, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `audiences` ADD CONSTRAINT `audiences_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:40.926 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.927 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"audiences_teamId_teams_id_fk\",\"L\":\"audiences_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:40.933 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=457] [neededSchemaVersion=458] ["elapsed time"=489.25s] [gotSchemaVersion=458] [phyTblIDs="[190]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:40.934 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=458]
[2024/09/16 23:25:40.935 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=458] ["take time"=3.375625ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.938 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.945 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=458] [neededSchemaVersion=459] ["elapsed time"=546.583s] [gotSchemaVersion=459] [phyTblIDs="[190]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:40.946 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=459]
[2024/09/16 23:25:40.947 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=459] ["take time"=3.65ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.949 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.955 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=459] [neededSchemaVersion=460] ["elapsed time"=488.875s] [gotSchemaVersion=460] [phyTblIDs="[190]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:40.957 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=460]
[2024/09/16 23:25:40.958 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=460] ["take time"=3.519208ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:40.960 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.961 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=230] [table=audiences] ["ingest mode"=true] [index=audiences_teamId_teams_id_fk]
[2024/09/16 23:25:40.961 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{190 audiences utf8mb4 utf8mb4_bin [0x4014916160 0x40149162c0 0x4014916420 0x4014916580] [0x4014914ab0] [] [] public true false 0  0 0 0 0 4 1 0 0 452599255116021791 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=190] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:40.962 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=230] [physicalTableID=190] [startKey=] [endKey=]
[2024/09/16 23:25:40.966 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=230]
[2024/09/16 23:25:40.967 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255116021801, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:40.968 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=230] [table=audiences] ["ingest mode"=true] [index=audiences_teamId_teams_id_fk]
[2024/09/16 23:25:40.971 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/230/0]
[2024/09/16 23:25:40.972 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=190] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:40.981 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=37]
[2024/09/16 23:25:40.982 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=37] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:41.106 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=36]
[2024/09/16 23:25:41.108 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:41.108 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=36]
[2024/09/16 23:25:41.113 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:41.483 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=37] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:41.483 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=37] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:41.484 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=37] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:41.487 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{190 audiences utf8mb4 utf8mb4_bin [0x4015034000 0x4015034160 0x40150342c0 0x4015034420] [0x4014f86a20] [] [] public true false 0  0 0 0 0 4 1 0 0 452599255116021791 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=190] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:41.487 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=37] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:41.987 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=37] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:42.189 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:42.199 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=460] [neededSchemaVersion=461] ["elapsed time"=668.208s] [gotSchemaVersion=461] [phyTblIDs="[190]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:42.203 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=461]
[2024/09/16 23:25:42.204 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=461] ["take time"=7.283875ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.208 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255116021801, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.209 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=230] [table=audiences] [index=audiences_teamId_teams_id_fk]
[2024/09/16 23:25:42.219 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=461] [neededSchemaVersion=462] ["elapsed time"=658.25s] [gotSchemaVersion=462] [phyTblIDs="[190]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:42.221 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=462]
[2024/09/16 23:25:42.222 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=462] ["take time"=4.843ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.226 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.227 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=230] [physicalTableID=190] [startKey=7480000000000000be5f69ffff000000000001] [endKey=7480000000000000be5f69ffff000000000001ff]
[2024/09/16 23:25:42.234 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=230]
[2024/09/16 23:25:42.236 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255457071111, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.240 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255457071111, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000be5f69ffff000000000001,EndKey:7480000000000000be5f69ffff000000000001ff,First:false,PhysicalTableID:190,Ingest mode:false"]
[2024/09/16 23:25:42.243 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=190] ["start key"=7480000000000000be5f69ffff000000000001] ["end key"=7480000000000000be5f69ffff000000000001ff]
[2024/09/16 23:25:42.243 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=190] ["range start"=7480000000000000be5f69ffff000000000001] ["range end"=7480000000000000be5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:25:42.244 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000be5f69ffff000000000001] [endKey=7480000000000000be5f69ffff000000000001ff]
[2024/09/16 23:25:42.244 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=230]
[2024/09/16 23:25:42.244 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=230]
[2024/09/16 23:25:42.244 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=230]
[2024/09/16 23:25:42.244 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 190, range: [7480000000000000be5f69ffff000000000001, 7480000000000000be5f69ffff000000000001ff), jobID: 230"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000be5f69ffff000000000001ff00] ["take time"=784.042s]
[2024/09/16 23:25:42.245 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=230]
[2024/09/16 23:25:42.245 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000be5f69ffff000000000001]
[2024/09/16 23:25:42.245 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:42.253 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=462] [neededSchemaVersion=463] ["elapsed time"=628.125s] [gotSchemaVersion=463] [phyTblIDs="[190]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:42.255 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=463]
[2024/09/16 23:25:42.256 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=463] ["take time"=4.004417ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.259 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.269 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=463] [neededSchemaVersion=464] ["elapsed time"=585.333s] [gotSchemaVersion=464] [phyTblIDs="[190]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:42.272 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=464]
[2024/09/16 23:25:42.273 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=464] ["take time"=6.669ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.277 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.286 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=464] [neededSchemaVersion=465] ["elapsed time"=560.042s] [gotSchemaVersion=465] [phyTblIDs="[190]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:42.288 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=465]
[2024/09/16 23:25:42.288 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=465] ["take time"=3.880792ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.293 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.301 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=465] [neededSchemaVersion=466] ["elapsed time"=694.5s] [gotSchemaVersion=466] [phyTblIDs="[190]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:42.303 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=466]
[2024/09/16 23:25:42.304 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=466] ["take time"=4.57725ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.307 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [category=ddl] [job="ID:230, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255457071111, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:42.309 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:42.314 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=466] [neededSchemaVersion=467] ["elapsed time"=516.917s] [gotSchemaVersion=467] [phyTblIDs="[190]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:42.316 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=230] [version=467]
[2024/09/16 23:25:42.317 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=467] ["take time"=4.260125ms] [job="ID:230, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.323 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=230]
[2024/09/16 23:25:42.325 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=230] [tableID=190] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:42.327 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=230] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:42.328 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=230] [conn=952108040] [job="ID:230, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:190, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:40.915 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.335 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=230]
[2024/09/16 23:25:42.336 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=467] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_automationId_automations_id_fk` FOREIGN KEY (`automationId`) REFERENCES `automations`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:42.337 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:42.337 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:42.341 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:231, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:42.341 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:231, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_automationId_automations_id_fk` FOREIGN KEY (`automationId`) REFERENCES `automations`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:42.343 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.343 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"automationSteps_automationId_automations_id_fk\",\"L\":\"automationsteps_automationid_automations_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"automationId\",\"L\":\"automationid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:42.351 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=467] [neededSchemaVersion=468] ["elapsed time"=569.208s] [gotSchemaVersion=468] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:42.353 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=468]
[2024/09/16 23:25:42.353 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=468] ["take time"=3.846125ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.357 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.365 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=468] [neededSchemaVersion=469] ["elapsed time"=776.417s] [gotSchemaVersion=469] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:42.367 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=469]
[2024/09/16 23:25:42.368 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=469] ["take time"=4.702125ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.371 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.379 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=469] [neededSchemaVersion=470] ["elapsed time"=689.625s] [gotSchemaVersion=470] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:42.381 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=470]
[2024/09/16 23:25:42.382 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=470] ["take time"=4.473083ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:42.385 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.386 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=231] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 23:25:42.387 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x4016485340 0x40164854a0 0x4016485600 0x4016485760 0x40164858c0 0x4016485a20 0x4016485b80 0x4016485ce0 0x4016485e40 0x4016782000 0x4016782160] [0x40164d9c20] [] [] public true false 0  0 0 0 0 11 1 0 0 452599255496130565 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:42.387 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=231] [physicalTableID=192] [startKey=] [endKey=]
[2024/09/16 23:25:42.392 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=231]
[2024/09/16 23:25:42.394 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255496130575, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:42.394 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=231] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 23:25:42.399 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/231/0]
[2024/09/16 23:25:42.400 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=192] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:42.410 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=38]
[2024/09/16 23:25:42.411 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=38] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:42.482 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=37]
[2024/09/16 23:25:42.484 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:42.484 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=37]
[2024/09/16 23:25:42.491 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:42.914 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=38] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:42.915 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=38] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:42.917 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=38] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:42.918 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x4016f1e160 0x4016f1e2c0 0x4016f1e420 0x4016f1e580 0x4016f1e6e0 0x4016f1e840 0x4016f1e9a0 0x4016f1eb00 0x4016f1ec60 0x4016f1edc0 0x4016f1ef20] [0x4016adf830] [] [] public true false 0  0 0 0 0 11 1 0 0 452599255496130565 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:42.918 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=38] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:43.414 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=38] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:43.613 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:43.621 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=470] [neededSchemaVersion=471] ["elapsed time"=586.083s] [gotSchemaVersion=471] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:43.622 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=471]
[2024/09/16 23:25:43.623 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=471] ["take time"=3.881209ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.626 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255496130575, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.627 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=231] [table=automationSteps] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 23:25:43.633 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=471] [neededSchemaVersion=472] ["elapsed time"=750.375s] [gotSchemaVersion=472] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:43.635 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=472]
[2024/09/16 23:25:43.636 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=472] ["take time"=5.01525ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.639 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.640 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=231] [physicalTableID=192] [startKey=7480000000000000c05f69ffff000000000001] [endKey=7480000000000000c05f69ffff000000000001ff]
[2024/09/16 23:25:43.645 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=231]
[2024/09/16 23:25:43.646 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255824334865, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.648 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255824334865, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000c05f69ffff000000000001,EndKey:7480000000000000c05f69ffff000000000001ff,First:false,PhysicalTableID:192,Ingest mode:false"]
[2024/09/16 23:25:43.649 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=192] ["start key"=7480000000000000c05f69ffff000000000001] ["end key"=7480000000000000c05f69ffff000000000001ff]
[2024/09/16 23:25:43.649 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=192] ["range start"=7480000000000000c05f69ffff000000000001] ["range end"=7480000000000000c05f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:25:43.649 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c05f69ffff000000000001] [endKey=7480000000000000c05f69ffff000000000001ff]
[2024/09/16 23:25:43.650 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=231]
[2024/09/16 23:25:43.650 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=231]
[2024/09/16 23:25:43.650 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=231]
[2024/09/16 23:25:43.650 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 192, range: [7480000000000000c05f69ffff000000000001, 7480000000000000c05f69ffff000000000001ff), jobID: 231"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c05f69ffff000000000001ff00] ["take time"=394.625s]
[2024/09/16 23:25:43.650 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=231]
[2024/09/16 23:25:43.650 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c05f69ffff000000000001]
[2024/09/16 23:25:43.650 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:43.656 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=472] [neededSchemaVersion=473] ["elapsed time"=576.083s] [gotSchemaVersion=473] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:43.658 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=473]
[2024/09/16 23:25:43.658 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=473] ["take time"=3.493958ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.661 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.669 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=473] [neededSchemaVersion=474] ["elapsed time"=600s] [gotSchemaVersion=474] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:43.671 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=474]
[2024/09/16 23:25:43.671 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=474] ["take time"=3.546791ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.674 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.682 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=474] [neededSchemaVersion=475] ["elapsed time"=563.084s] [gotSchemaVersion=475] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:43.683 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=475]
[2024/09/16 23:25:43.684 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=475] ["take time"=3.884083ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.687 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.694 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=475] [neededSchemaVersion=476] ["elapsed time"=554.417s] [gotSchemaVersion=476] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:43.696 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=476]
[2024/09/16 23:25:43.697 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=476] ["take time"=3.64075ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.701 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [category=ddl] [job="ID:231, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255824334865, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:43.703 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:43.709 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=476] [neededSchemaVersion=477] ["elapsed time"=675.833s] [gotSchemaVersion=477] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:43.711 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=231] [version=477]
[2024/09/16 23:25:43.711 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=477] ["take time"=4.39225ms] [job="ID:231, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.718 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=231]
[2024/09/16 23:25:43.720 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=231] [tableID=192] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:43.722 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=231] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:43.723 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=231] [conn=952108040] [job="ID:231, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:42.315 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.730 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=231]
[2024/09/16 23:25:43.731 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=477] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_parentId_automationSteps_id_fk` FOREIGN KEY (`parentId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:43.731 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:43.731 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:43.735 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:232, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:43.735 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:232, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_parentId_automationSteps_id_fk` FOREIGN KEY (`parentId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:43.737 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.738 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"automationSteps_parentId_automationSteps_id_fk\",\"L\":\"automationsteps_parentid_automationsteps_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"parentId\",\"L\":\"parentid\"},\"offset\":5,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:43.747 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=477] [neededSchemaVersion=478] ["elapsed time"=914.958s] [gotSchemaVersion=478] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:43.749 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=478]
[2024/09/16 23:25:43.750 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=478] ["take time"=5.632791ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.754 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.763 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=478] [neededSchemaVersion=479] ["elapsed time"=1.203625ms] [gotSchemaVersion=479] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:43.766 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=479]
[2024/09/16 23:25:43.767 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=479] ["take time"=5.587375ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.770 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.779 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=479] [neededSchemaVersion=480] ["elapsed time"=637.208s] [gotSchemaVersion=480] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:43.781 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=480]
[2024/09/16 23:25:43.782 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=480] ["take time"=4.627875ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:43.786 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.787 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=232] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 23:25:43.789 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x40188cf4a0 0x40188cf600 0x40188cf760 0x40188cf8c0 0x40188cfa20 0x40188cfb80 0x40188cfce0 0x40188cfe40 0x40188f6000 0x40188f6160 0x40188f62c0] [0x40188f81b0 0x40188f83f0] [] [0x4018888780] public true false 0  0 0 0 0 11 2 1 0 452599255863132163 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:43.789 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=232] [physicalTableID=192] [startKey=] [endKey=]
[2024/09/16 23:25:43.796 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=232]
[2024/09/16 23:25:43.797 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255863132173, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:43.798 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=232] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 23:25:43.802 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/232/0]
[2024/09/16 23:25:43.805 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=192] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:43.815 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=39]
[2024/09/16 23:25:43.815 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=39] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:43.912 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=38]
[2024/09/16 23:25:43.914 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:43.914 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=38]
[2024/09/16 23:25:43.919 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:44.317 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=39] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:44.317 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=39] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:44.318 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=39] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:44.319 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x4019486000 0x4019486160 0x40194862c0 0x4019486420 0x4019486580 0x40194866e0 0x4019486840 0x40194869a0 0x4019486b00 0x4019486c60 0x4019486dc0] [0x40194273b0 0x40194275f0] [] [0x4018911e00] public true false 0  0 0 0 0 11 2 1 0 452599255863132163 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:44.319 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=39] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:44.819 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=39] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:45.019 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:45.026 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=480] [neededSchemaVersion=481] ["elapsed time"=611s] [gotSchemaVersion=481] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:45.028 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=481]
[2024/09/16 23:25:45.029 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=481] ["take time"=3.939667ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.032 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599255863132173, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.033 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=232] [table=automationSteps] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 23:25:45.041 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=481] [neededSchemaVersion=482] ["elapsed time"=548.125s] [gotSchemaVersion=482] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:45.042 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=482]
[2024/09/16 23:25:45.043 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=482] ["take time"=3.870417ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.046 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.046 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=232] [physicalTableID=192] [startKey=7480000000000000c05f69ffff000000000002] [endKey=7480000000000000c05f69ffff000000000002ff]
[2024/09/16 23:25:45.052 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=232]
[2024/09/16 23:25:45.053 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256190812182, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.055 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256190812182, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000c05f69ffff000000000002,EndKey:7480000000000000c05f69ffff000000000002ff,First:false,PhysicalTableID:192,Ingest mode:false"]
[2024/09/16 23:25:45.056 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=192] ["start key"=7480000000000000c05f69ffff000000000002] ["end key"=7480000000000000c05f69ffff000000000002ff]
[2024/09/16 23:25:45.056 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=192] ["range start"=7480000000000000c05f69ffff000000000002] ["range end"=7480000000000000c05f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:25:45.056 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c05f69ffff000000000002] [endKey=7480000000000000c05f69ffff000000000002ff]
[2024/09/16 23:25:45.056 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=232]
[2024/09/16 23:25:45.056 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=232]
[2024/09/16 23:25:45.056 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=232]
[2024/09/16 23:25:45.057 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [task="taskID: 1, physicalTableID: 192, range: [7480000000000000c05f69ffff000000000002, 7480000000000000c05f69ffff000000000002ff), jobID: 232"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c05f69ffff000000000002ff00] ["take time"=361.375s]
[2024/09/16 23:25:45.057 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=232]
[2024/09/16 23:25:45.057 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c05f69ffff000000000002]
[2024/09/16 23:25:45.057 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:45.076 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=482] [neededSchemaVersion=483] ["elapsed time"=787.542s] [gotSchemaVersion=483] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:45.078 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=483]
[2024/09/16 23:25:45.079 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=483] ["take time"=4.490041ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.082 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.089 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=483] [neededSchemaVersion=484] ["elapsed time"=609.167s] [gotSchemaVersion=484] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:45.092 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=484]
[2024/09/16 23:25:45.093 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=484] ["take time"=5.469875ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.096 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.104 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=484] [neededSchemaVersion=485] ["elapsed time"=564.125s] [gotSchemaVersion=485] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:45.106 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=485]
[2024/09/16 23:25:45.106 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=485] ["take time"=3.898291ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.109 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.116 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=485] [neededSchemaVersion=486] ["elapsed time"=599.125s] [gotSchemaVersion=486] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:45.118 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=486]
[2024/09/16 23:25:45.119 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=486] ["take time"=4.037416ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.122 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [category=ddl] [job="ID:232, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256190812182, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:45.124 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:45.129 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=486] [neededSchemaVersion=487] ["elapsed time"=669.708s] [gotSchemaVersion=487] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:45.131 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=232] [version=487]
[2024/09/16 23:25:45.132 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=487] ["take time"=4.449209ms] [job="ID:232, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.139 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=232]
[2024/09/16 23:25:45.140 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=232] [tableID=192] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:45.142 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=232] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:45.143 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=232] [conn=952108040] [job="ID:232, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:43.717 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.150 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=232]
[2024/09/16 23:25:45.151 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=487] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_emailId_emails_id_fk` FOREIGN KEY (`emailId`) REFERENCES `emails`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:45.151 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:45.151 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:45.156 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:233, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:45.156 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:233, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_emailId_emails_id_fk` FOREIGN KEY (`emailId`) REFERENCES `emails`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:45.157 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.158 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"automationSteps_emailId_emails_id_fk\",\"L\":\"automationsteps_emailid_emails_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailId\",\"L\":\"emailid\"},\"offset\":8,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:45.165 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=487] [neededSchemaVersion=488] ["elapsed time"=721.375s] [gotSchemaVersion=488] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:45.167 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=488]
[2024/09/16 23:25:45.167 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=488] ["take time"=3.984917ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.170 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.178 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=488] [neededSchemaVersion=489] ["elapsed time"=690.375s] [gotSchemaVersion=489] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:45.180 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=489]
[2024/09/16 23:25:45.180 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=489] ["take time"=3.901ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.183 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.191 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=489] [neededSchemaVersion=490] ["elapsed time"=674.583s] [gotSchemaVersion=490] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:45.193 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=490]
[2024/09/16 23:25:45.193 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=490] ["take time"=3.774208ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:45.196 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.197 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=233] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 23:25:45.198 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x401a829080 0x401a8291e0 0x401a829340 0x401a8294a0 0x401a829600 0x401a829760 0x401a8298c0 0x401a829a20 0x401a829b80 0x401a829ce0 0x401a829e40] [0x401a836750 0x401a836990 0x401a836bd0] [] [0x401a5e1a40 0x401a5e1b00] public true false 0  0 0 0 0 11 3 2 0 452599256230395917 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:45.198 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=233] [physicalTableID=192] [startKey=] [endKey=]
[2024/09/16 23:25:45.203 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=233]
[2024/09/16 23:25:45.204 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256230395927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:45.204 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=233] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 23:25:45.208 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/233/0]
[2024/09/16 23:25:45.209 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=192] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:45.222 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=40]
[2024/09/16 23:25:45.222 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=40] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:45.317 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=39]
[2024/09/16 23:25:45.319 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:45.319 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=39]
[2024/09/16 23:25:45.324 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:45.726 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=40] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:45.726 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=40] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:45.728 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=40] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:45.729 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x401b310160 0x401b3102c0 0x401b310420 0x401b310580 0x401b3106e0 0x401b310840 0x401b3109a0 0x401b310b00 0x401b310c60 0x401b310dc0 0x401b310f20] [0x401b053320 0x401b053560 0x401b0537a0] [] [0x401afc3500 0x401afc35c0] public true false 0  0 0 0 0 11 3 2 0 452599256230395917 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:45.729 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=40] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:46.230 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=40] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:46.430 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:46.438 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=490] [neededSchemaVersion=491] ["elapsed time"=652.666s] [gotSchemaVersion=491] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:46.439 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=491]
[2024/09/16 23:25:46.440 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=491] ["take time"=4.120208ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.443 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256230395927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.444 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=233] [table=automationSteps] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 23:25:46.452 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=491] [neededSchemaVersion=492] ["elapsed time"=897s] [gotSchemaVersion=492] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:46.454 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=492]
[2024/09/16 23:25:46.455 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=492] ["take time"=5.64525ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.459 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.460 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=233] [physicalTableID=192] [startKey=7480000000000000c05f69ffff000000000003] [endKey=7480000000000000c05f69ffff000000000003ff]
[2024/09/16 23:25:46.466 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=233]
[2024/09/16 23:25:46.468 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256558075927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.470 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256558075927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000000c05f69ffff000000000003,EndKey:7480000000000000c05f69ffff000000000003ff,First:false,PhysicalTableID:192,Ingest mode:false"]
[2024/09/16 23:25:46.471 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=192] ["start key"=7480000000000000c05f69ffff000000000003] ["end key"=7480000000000000c05f69ffff000000000003ff]
[2024/09/16 23:25:46.472 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=192] ["range start"=7480000000000000c05f69ffff000000000003] ["range end"=7480000000000000c05f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:25:46.472 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c05f69ffff000000000003] [endKey=7480000000000000c05f69ffff000000000003ff]
[2024/09/16 23:25:46.472 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=233]
[2024/09/16 23:25:46.472 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=233]
[2024/09/16 23:25:46.472 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=233]
[2024/09/16 23:25:46.473 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 192, range: [7480000000000000c05f69ffff000000000003, 7480000000000000c05f69ffff000000000003ff), jobID: 233"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c05f69ffff000000000003ff00] ["take time"=517.083s]
[2024/09/16 23:25:46.473 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=233]
[2024/09/16 23:25:46.473 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c05f69ffff000000000003]
[2024/09/16 23:25:46.473 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:46.481 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=492] [neededSchemaVersion=493] ["elapsed time"=898.959s] [gotSchemaVersion=493] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:46.483 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=493]
[2024/09/16 23:25:46.484 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=493] ["take time"=4.7745ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.487 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.494 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=493] [neededSchemaVersion=494] ["elapsed time"=901.083s] [gotSchemaVersion=494] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:46.496 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=494]
[2024/09/16 23:25:46.497 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=494] ["take time"=4.46625ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.500 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.511 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=494] [neededSchemaVersion=495] ["elapsed time"=878.792s] [gotSchemaVersion=495] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:46.513 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=495]
[2024/09/16 23:25:46.514 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=495] ["take time"=4.56525ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.517 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.526 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=495] [neededSchemaVersion=496] ["elapsed time"=709.583s] [gotSchemaVersion=496] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:46.527 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=496]
[2024/09/16 23:25:46.528 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=496] ["take time"=4.417709ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.532 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [category=ddl] [job="ID:233, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256558075927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:46.535 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:46.541 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=496] [neededSchemaVersion=497] ["elapsed time"=836.334s] [gotSchemaVersion=497] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:46.543 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=233] [version=497]
[2024/09/16 23:25:46.543 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=497] ["take time"=4.515417ms] [job="ID:233, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.550 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=233]
[2024/09/16 23:25:46.552 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=233] [tableID=192] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:46.555 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=233] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:46.555 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=233] [conn=952108040] [job="ID:233, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:45.116 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.562 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=233]
[2024/09/16 23:25:46.563 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=497] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:46.563 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:46.564 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:46.568 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:234, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:46.568 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:234, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:46.569 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.570 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":4,\"idx_name\":{\"O\":\"automationSteps_tagId_tags_id_fk\",\"L\":\"automationsteps_tagid_tags_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"tagId\",\"L\":\"tagid\"},\"offset\":9,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:46.578 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=497] [neededSchemaVersion=498] ["elapsed time"=922.875s] [gotSchemaVersion=498] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:46.580 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=498]
[2024/09/16 23:25:46.581 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=498] ["take time"=4.791333ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.585 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.594 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=498] [neededSchemaVersion=499] ["elapsed time"=835.583s] [gotSchemaVersion=499] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:46.596 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=499]
[2024/09/16 23:25:46.597 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=499] ["take time"=5.2985ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.600 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.609 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=499] [neededSchemaVersion=500] ["elapsed time"=557.667s] [gotSchemaVersion=500] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:46.610 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=500]
[2024/09/16 23:25:46.611 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=500] ["take time"=4.3075ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:46.615 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.616 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=234] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 23:25:46.617 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x401c199e40 0x401ca8e000 0x401ca8e160 0x401ca8e2c0 0x401ca8e420 0x401ca8e580 0x401ca8e6e0 0x401ca8e840 0x401ca8e9a0 0x401ca8eb00 0x401ca8ec60] [0x401c6c95f0 0x401c6c9830 0x401c6c9a70 0x401c6c9cb0] [] [0x401c1812c0 0x401c181380 0x401c181440] public true false 0  0 0 0 0 11 4 3 0 452599256597659669 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:46.617 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=234] [physicalTableID=192] [startKey=] [endKey=]
[2024/09/16 23:25:46.623 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=234]
[2024/09/16 23:25:46.625 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256597659679, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:46.626 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=234] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 23:25:46.631 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/234/0]
[2024/09/16 23:25:46.634 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=192] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:46.645 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=41]
[2024/09/16 23:25:46.645 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=41] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:46.725 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=40]
[2024/09/16 23:25:46.727 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:46.727 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=40]
[2024/09/16 23:25:46.733 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:47.146 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=41] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:47.148 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=41] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:47.149 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=41] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:47.151 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x401c653760 0x401c6538c0 0x401c653a20 0x401c653b80 0x401c653ce0 0x401c653e40 0x401d230000 0x401d230160 0x401d2302c0 0x401d230420 0x401d230580] [0x401d21f560 0x401d21f7a0 0x401d21f9e0 0x401d21fc20] [] [0x401ceebbc0 0x401ceebc80 0x401ceebd40] public true false 0  0 0 0 0 11 4 3 0 452599256597659669 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:47.151 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=41] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:47.653 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=41] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:47.853 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:47.862 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=500] [neededSchemaVersion=501] ["elapsed time"=604.792s] [gotSchemaVersion=501] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:47.864 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=501]
[2024/09/16 23:25:47.865 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=501] ["take time"=4.441042ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.868 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256597659679, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:47.869 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=234] [table=automationSteps] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 23:25:47.877 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=501] [neededSchemaVersion=502] ["elapsed time"=662.083s] [gotSchemaVersion=502] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:47.879 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=502]
[2024/09/16 23:25:47.880 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=502] ["take time"=4.321708ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.884 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:47.885 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=234] [physicalTableID=192] [startKey=7480000000000000c05f69ffff000000000004] [endKey=7480000000000000c05f69ffff000000000004ff]
[2024/09/16 23:25:47.891 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=234]
[2024/09/16 23:25:47.893 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256937922572, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:47.894 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256937922572, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:4,StartKey:7480000000000000c05f69ffff000000000004,EndKey:7480000000000000c05f69ffff000000000004ff,First:false,PhysicalTableID:192,Ingest mode:false"]
[2024/09/16 23:25:47.896 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=192] ["start key"=7480000000000000c05f69ffff000000000004] ["end key"=7480000000000000c05f69ffff000000000004ff]
[2024/09/16 23:25:47.896 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=192] ["range start"=7480000000000000c05f69ffff000000000004] ["range end"=7480000000000000c05f69ffff000000000004ff] ["range count"=1]
[2024/09/16 23:25:47.896 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c05f69ffff000000000004] [endKey=7480000000000000c05f69ffff000000000004ff]
[2024/09/16 23:25:47.896 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=234]
[2024/09/16 23:25:47.896 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=234]
[2024/09/16 23:25:47.896 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=234]
[2024/09/16 23:25:47.897 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 192, range: [7480000000000000c05f69ffff000000000004, 7480000000000000c05f69ffff000000000004ff), jobID: 234"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c05f69ffff000000000004ff00] ["take time"=871s]
[2024/09/16 23:25:47.897 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=234]
[2024/09/16 23:25:47.897 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:4,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c05f69ffff000000000004]
[2024/09/16 23:25:47.897 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:47.905 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=502] [neededSchemaVersion=503] ["elapsed time"=679.5s] [gotSchemaVersion=503] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:47.907 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=503]
[2024/09/16 23:25:47.908 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=503] ["take time"=4.296417ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.911 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:47.920 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=503] [neededSchemaVersion=504] ["elapsed time"=668.75s] [gotSchemaVersion=504] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:47.921 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=504]
[2024/09/16 23:25:47.922 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=504] ["take time"=4.26525ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.926 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:47.937 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=504] [neededSchemaVersion=505] ["elapsed time"=711.041s] [gotSchemaVersion=505] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:47.939 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=505]
[2024/09/16 23:25:47.940 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=505] ["take time"=4.375709ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.943 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:47.953 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=505] [neededSchemaVersion=506] ["elapsed time"=704.083s] [gotSchemaVersion=506] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:47.954 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=506]
[2024/09/16 23:25:47.955 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=506] ["take time"=4.184834ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.959 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [category=ddl] [job="ID:234, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256937922572, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:47.962 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:47.968 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=506] [neededSchemaVersion=507] ["elapsed time"=852.084s] [gotSchemaVersion=507] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:47.970 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=234] [version=507]
[2024/09/16 23:25:47.971 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=507] ["take time"=5.211375ms] [job="ID:234, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.979 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=234]
[2024/09/16 23:25:47.980 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=234] [tableID=192] [indexIDs="[9223090561878065156]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:47.983 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=234] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:47.983 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=234] [conn=952108040] [job="ID:234, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:46.516 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:47.990 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=234]
[2024/09/16 23:25:47.991 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=507] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:47.991 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:47.991 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:47.995 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:235, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:47.995 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:235, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:47.996 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:47.997 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":5,\"idx_name\":{\"O\":\"automationSteps_audienceId_audiences_id_fk\",\"L\":\"automationsteps_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":10,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:48.005 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=507] [neededSchemaVersion=508] ["elapsed time"=723.791s] [gotSchemaVersion=508] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:48.007 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=508]
[2024/09/16 23:25:48.007 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=508] ["take time"=3.63225ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:48.010 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:48.018 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=508] [neededSchemaVersion=509] ["elapsed time"=758.542s] [gotSchemaVersion=509] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:48.020 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=509]
[2024/09/16 23:25:48.021 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=509] ["take time"=4.177417ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:48.024 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:48.032 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=509] [neededSchemaVersion=510] ["elapsed time"=1.109709ms] [gotSchemaVersion=510] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:48.039 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=510]
[2024/09/16 23:25:48.040 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=510] ["take time"=9.513083ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:48.043 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:48.044 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=235] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 23:25:48.044 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x401e760b00 0x401e760c60 0x401e760dc0 0x401e760f20 0x401e761080 0x401e7611e0 0x401e761340 0x401e7614a0 0x401e761600 0x401e761760 0x401e7618c0] [0x401e886480 0x401e8866c0 0x401e886900 0x401e886b40 0x401e886d80] [] [0x401e7f63c0 0x401e7f6480 0x401e7f6540 0x401e7f6600] public true false 0  0 0 0 0 11 5 4 0 452599256977506310 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:48.044 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=235] [physicalTableID=192] [startKey=] [endKey=]
[2024/09/16 23:25:48.049 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=235]
[2024/09/16 23:25:48.050 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256977506321, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:48.051 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=235] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 23:25:48.054 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/235/0]
[2024/09/16 23:25:48.057 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=192] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:48.065 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=42]
[2024/09/16 23:25:48.065 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=42] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:48.147 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=41]
[2024/09/16 23:25:48.148 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:48.148 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=41]
[2024/09/16 23:25:48.154 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:48.568 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=42] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:48.568 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=42] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:48.569 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=42] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:48.570 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{192 automationSteps utf8mb4 utf8mb4_bin [0x401f2cc2c0 0x401f2cc420 0x401f2cc580 0x401f2cc6e0 0x401f2cc840 0x401f2cc9a0 0x401f2ccb00 0x401f2ccc60 0x401f2ccdc0 0x401f2ccf20 0x401f2cd080] [0x401f2dc7e0 0x401f2dca20 0x401f2dcc60 0x401f2dcea0 0x401f2dd0e0] [] [0x401f2d8180 0x401f2d8240 0x401f2d8300 0x401f2d83c0] public true false 0  0 0 0 0 11 5 4 0 452599256977506310 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 182}"] ["table/partition ID"=192] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:48.571 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=42] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:49.068 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=42] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:49.274 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:49.284 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=510] [neededSchemaVersion=511] ["elapsed time"=857.417s] [gotSchemaVersion=511] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:49.287 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=511]
[2024/09/16 23:25:49.287 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=511] ["take time"=4.917334ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.291 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599256977506321, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.291 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=235] [table=automationSteps] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 23:25:49.303 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=511] [neededSchemaVersion=512] ["elapsed time"=902.125s] [gotSchemaVersion=512] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:49.305 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=512]
[2024/09/16 23:25:49.306 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=512] ["take time"=8.977584ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.310 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.311 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=235] [physicalTableID=192] [startKey=7480000000000000c05f69ffff000000000005] [endKey=7480000000000000c05f69ffff000000000005ff]
[2024/09/16 23:25:49.318 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=235]
[2024/09/16 23:25:49.320 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257305186326, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.323 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257305186326, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:5,StartKey:7480000000000000c05f69ffff000000000005,EndKey:7480000000000000c05f69ffff000000000005ff,First:false,PhysicalTableID:192,Ingest mode:false"]
[2024/09/16 23:25:49.325 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=192] ["start key"=7480000000000000c05f69ffff000000000005] ["end key"=7480000000000000c05f69ffff000000000005ff]
[2024/09/16 23:25:49.325 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=192] ["range start"=7480000000000000c05f69ffff000000000005] ["range end"=7480000000000000c05f69ffff000000000005ff] ["range count"=1]
[2024/09/16 23:25:49.325 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c05f69ffff000000000005] [endKey=7480000000000000c05f69ffff000000000005ff]
[2024/09/16 23:25:49.325 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=235]
[2024/09/16 23:25:49.325 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=235]
[2024/09/16 23:25:49.325 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=235]
[2024/09/16 23:25:49.326 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 192, range: [7480000000000000c05f69ffff000000000005, 7480000000000000c05f69ffff000000000005ff), jobID: 235"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c05f69ffff000000000005ff00] ["take time"=916.666s]
[2024/09/16 23:25:49.327 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=235]
[2024/09/16 23:25:49.327 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:5,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c05f69ffff000000000005]
[2024/09/16 23:25:49.327 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:49.340 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=512] [neededSchemaVersion=513] ["elapsed time"=1.199125ms] [gotSchemaVersion=513] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:49.342 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=513]
[2024/09/16 23:25:49.343 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=513] ["take time"=6.41125ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.347 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.356 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=513] [neededSchemaVersion=514] ["elapsed time"=696.333s] [gotSchemaVersion=514] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:49.358 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=514]
[2024/09/16 23:25:49.358 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=514] ["take time"=4.507625ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.362 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.373 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=514] [neededSchemaVersion=515] ["elapsed time"=912.75s] [gotSchemaVersion=515] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:49.376 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=515]
[2024/09/16 23:25:49.376 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=515] ["take time"=5.274625ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.380 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.397 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=515] [neededSchemaVersion=516] ["elapsed time"=1.362ms] [gotSchemaVersion=516] [phyTblIDs="[192]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:49.401 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=516]
[2024/09/16 23:25:49.402 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=516] ["take time"=8.562792ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.408 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [category=ddl] [job="ID:235, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257305186326, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:49.410 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:49.418 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=516] [neededSchemaVersion=517] ["elapsed time"=795.042s] [gotSchemaVersion=517] [phyTblIDs="[192]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:49.420 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=235] [version=517]
[2024/09/16 23:25:49.421 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=517] ["take time"=5.296333ms] [job="ID:235, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.430 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=235]
[2024/09/16 23:25:49.432 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=235] [tableID=192] [indexIDs="[9223090561878065157]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:49.436 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=235] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:49.437 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=235] [conn=952108040] [job="ID:235, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:192, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:47.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.463 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=235]
[2024/09/16 23:25:49.465 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=517] [cur_db=test] [sql="ALTER TABLE `automations` ADD CONSTRAINT `automations_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:49.466 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automations] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:49.466 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automations] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:49.475 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:236, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:49.475 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:236, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automations` ADD CONSTRAINT `automations_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:49.477 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.479 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"automations_audienceId_audiences_id_fk\",\"L\":\"automations_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:49.490 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=517] [neededSchemaVersion=518] ["elapsed time"=843.667s] [gotSchemaVersion=518] [phyTblIDs="[194]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:49.494 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=518]
[2024/09/16 23:25:49.495 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=518] ["take time"=7.624458ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.500 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.512 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=518] [neededSchemaVersion=519] ["elapsed time"=607.333s] [gotSchemaVersion=519] [phyTblIDs="[194]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:49.517 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=519]
[2024/09/16 23:25:49.521 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=519] ["take time"=11.198292ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.532 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.543 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=519] [neededSchemaVersion=520] ["elapsed time"=534.875s] [gotSchemaVersion=520] [phyTblIDs="[194]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:49.545 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=520]
[2024/09/16 23:25:49.546 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=520] ["take time"=5.326458ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:49.557 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.559 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=236] [table=automations] ["ingest mode"=true] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 23:25:49.560 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{194 automations utf8mb4 utf8mb4_bin [0x4021befe40 0x4022420000 0x4022420160 0x40224202c0] [0x4022422120] [] [] public true false 0  0 0 0 0 4 1 0 0 452599257370460163 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=194] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:49.561 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=236] [physicalTableID=194] [startKey=] [endKey=]
[2024/09/16 23:25:49.568 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=42]
[2024/09/16 23:25:49.574 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:49.574 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=42]
[2024/09/16 23:25:49.576 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=236]
[2024/09/16 23:25:49.582 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257370460175, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:49.583 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=236] [table=automations] ["ingest mode"=true] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 23:25:49.587 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:49.590 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/236/0]
[2024/09/16 23:25:49.594 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=194] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:49.617 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=43]
[2024/09/16 23:25:49.618 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=43] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:50.123 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=43] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:50.124 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=43] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:50.126 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=43] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:50.127 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{194 automations utf8mb4 utf8mb4_bin [0x4022937ce0 0x4022937e40 0x4022809760 0x40228098c0] [0x402287b8c0] [] [] public true false 0  0 0 0 0 4 1 0 0 452599257370460163 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=194] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:50.127 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=43] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:50.626 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=43] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:50.822 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:50.840 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=520] [neededSchemaVersion=521] ["elapsed time"=1.516958ms] [gotSchemaVersion=521] [phyTblIDs="[194]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:50.845 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=521]
[2024/09/16 23:25:50.847 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=521] ["take time"=10.992209ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:50.852 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257370460175, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:50.853 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=236] [table=automations] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 23:25:50.865 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=521] [neededSchemaVersion=522] ["elapsed time"=782.792s] [gotSchemaVersion=522] [phyTblIDs="[194]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:50.868 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=522]
[2024/09/16 23:25:50.869 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=522] ["take time"=6.971875ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:50.873 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:50.874 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=236] [physicalTableID=194] [startKey=7480000000000000c25f69ffff000000000001] [endKey=7480000000000000c25f69ffff000000000001ff]
[2024/09/16 23:25:50.889 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=236]
[2024/09/16 23:25:50.892 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257724354566, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:50.895 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257724354566, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000c25f69ffff000000000001,EndKey:7480000000000000c25f69ffff000000000001ff,First:false,PhysicalTableID:194,Ingest mode:false"]
[2024/09/16 23:25:50.896 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=194] ["start key"=7480000000000000c25f69ffff000000000001] ["end key"=7480000000000000c25f69ffff000000000001ff]
[2024/09/16 23:25:50.897 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=194] ["range start"=7480000000000000c25f69ffff000000000001] ["range end"=7480000000000000c25f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:25:50.897 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c25f69ffff000000000001] [endKey=7480000000000000c25f69ffff000000000001ff]
[2024/09/16 23:25:50.897 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=236]
[2024/09/16 23:25:50.898 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=236]
[2024/09/16 23:25:50.898 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=236]
[2024/09/16 23:25:50.898 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 194, range: [7480000000000000c25f69ffff000000000001, 7480000000000000c25f69ffff000000000001ff), jobID: 236"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c25f69ffff000000000001ff00] ["take time"=503.917s]
[2024/09/16 23:25:50.898 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=236]
[2024/09/16 23:25:50.898 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c25f69ffff000000000001]
[2024/09/16 23:25:50.898 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:50.906 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=522] [neededSchemaVersion=523] ["elapsed time"=576.791s] [gotSchemaVersion=523] [phyTblIDs="[194]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:50.908 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=523]
[2024/09/16 23:25:50.909 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=523] ["take time"=4.521625ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:50.913 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:50.923 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=523] [neededSchemaVersion=524] ["elapsed time"=956.041s] [gotSchemaVersion=524] [phyTblIDs="[194]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:50.927 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=524]
[2024/09/16 23:25:50.928 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=524] ["take time"=6.740542ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:50.932 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:50.943 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=524] [neededSchemaVersion=525] ["elapsed time"=666.25s] [gotSchemaVersion=525] [phyTblIDs="[194]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:50.945 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=525]
[2024/09/16 23:25:50.946 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=525] ["take time"=4.675583ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:50.949 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:50.957 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=525] [neededSchemaVersion=526] ["elapsed time"=612.334s] [gotSchemaVersion=526] [phyTblIDs="[194]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:50.959 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=526]
[2024/09/16 23:25:50.959 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=526] ["take time"=3.898ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:50.963 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [category=ddl] [job="ID:236, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257724354566, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:50.965 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:50.970 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=526] [neededSchemaVersion=527] ["elapsed time"=751.333s] [gotSchemaVersion=527] [phyTblIDs="[194]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:50.973 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=236] [version=527]
[2024/09/16 23:25:50.974 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=527] ["take time"=5.118791ms] [job="ID:236, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:50.984 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=236]
[2024/09/16 23:25:50.988 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=236] [tableID=194] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:50.992 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=236] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:50.992 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=236] [conn=952108040] [job="ID:236, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:194, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:49.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:51.004 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=236]
[2024/09/16 23:25:51.012 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=527] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:51.013 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:51.013 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:51.020 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:237, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:51.020 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:237, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:51.022 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:51.023 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"broadcasts_audienceId_audiences_id_fk\",\"L\":\"broadcasts_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:51.032 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=527] [neededSchemaVersion=528] ["elapsed time"=656.917s] [gotSchemaVersion=528] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:51.034 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=528]
[2024/09/16 23:25:51.035 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=528] ["take time"=4.301708ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:51.039 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:51.047 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=528] [neededSchemaVersion=529] ["elapsed time"=581.875s] [gotSchemaVersion=529] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:51.049 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=529]
[2024/09/16 23:25:51.049 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=529] ["take time"=4.211625ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:51.053 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:51.063 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=529] [neededSchemaVersion=530] ["elapsed time"=618.25s] [gotSchemaVersion=530] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:51.065 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=530]
[2024/09/16 23:25:51.066 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=530] ["take time"=4.982292ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:51.069 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:51.070 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=237] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 23:25:51.071 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x4024171ce0 0x4024171e40 0x4024426000 0x4024426160 0x40244262c0 0x4024426420 0x4024426580 0x40244266e0 0x4024426840 0x40244269a0 0x4024426b00 0x4024426c60 0x4024426dc0 0x4024426f20 0x4024427080] [0x4024428510] [] [] public true false 0  0 0 0 0 15 1 0 0 452599257763676183 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:51.071 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=237] [physicalTableID=196] [startKey=] [endKey=]
[2024/09/16 23:25:51.077 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=237]
[2024/09/16 23:25:51.080 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257776783364, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:51.081 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=237] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 23:25:51.086 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/237/0]
[2024/09/16 23:25:51.090 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=196] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:51.104 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=44]
[2024/09/16 23:25:51.105 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=44] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:51.121 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=43]
[2024/09/16 23:25:51.123 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:51.123 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=43]
[2024/09/16 23:25:51.129 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:51.606 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=44] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:51.607 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=44] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:51.608 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=44] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:51.610 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x402468cf20 0x402468d080 0x402468d1e0 0x402468d340 0x402468d4a0 0x402468d600 0x402468d760 0x402468d8c0 0x402468da20 0x402468db80 0x402468dce0 0x402468de40 0x4024348420 0x4024348580 0x40243486e0] [0x4024a57050] [] [] public true false 0  0 0 0 0 15 1 0 0 452599257763676183 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:51.610 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=44] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:52.108 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=44] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:52.306 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:52.316 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=530] [neededSchemaVersion=531] ["elapsed time"=702.791s] [gotSchemaVersion=531] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:52.318 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=531]
[2024/09/16 23:25:52.319 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=531] ["take time"=4.96ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.322 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599257776783364, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.323 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=237] [table=broadcasts] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 23:25:52.330 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=531] [neededSchemaVersion=532] ["elapsed time"=667s] [gotSchemaVersion=532] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:52.331 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=532]
[2024/09/16 23:25:52.332 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=532] ["take time"=3.973042ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.336 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.337 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=237] [physicalTableID=196] [startKey=7480000000000000c45f69ffff000000000001] [endKey=7480000000000000c45f69ffff000000000001ff]
[2024/09/16 23:25:52.344 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=237]
[2024/09/16 23:25:52.349 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258104725519, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.355 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258104725519, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000c45f69ffff000000000001,EndKey:7480000000000000c45f69ffff000000000001ff,First:false,PhysicalTableID:196,Ingest mode:false"]
[2024/09/16 23:25:52.356 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=196] ["start key"=7480000000000000c45f69ffff000000000001] ["end key"=7480000000000000c45f69ffff000000000001ff]
[2024/09/16 23:25:52.357 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=196] ["range start"=7480000000000000c45f69ffff000000000001] ["range end"=7480000000000000c45f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:25:52.357 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c45f69ffff000000000001] [endKey=7480000000000000c45f69ffff000000000001ff]
[2024/09/16 23:25:52.357 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=237]
[2024/09/16 23:25:52.357 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=237]
[2024/09/16 23:25:52.357 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=237]
[2024/09/16 23:25:52.358 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 196, range: [7480000000000000c45f69ffff000000000001, 7480000000000000c45f69ffff000000000001ff), jobID: 237"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c45f69ffff000000000001ff00] ["take time"=801.5s]
[2024/09/16 23:25:52.358 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=237]
[2024/09/16 23:25:52.358 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c45f69ffff000000000001]
[2024/09/16 23:25:52.358 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:52.369 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=532] [neededSchemaVersion=533] ["elapsed time"=1.126917ms] [gotSchemaVersion=533] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:52.377 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=533]
[2024/09/16 23:25:52.378 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=533] ["take time"=11.037875ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.389 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.400 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=533] [neededSchemaVersion=534] ["elapsed time"=834.583s] [gotSchemaVersion=534] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:52.402 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=534]
[2024/09/16 23:25:52.403 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=534] ["take time"=4.751583ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.406 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.420 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=534] [neededSchemaVersion=535] ["elapsed time"=875.833s] [gotSchemaVersion=535] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:52.422 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=535]
[2024/09/16 23:25:52.424 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=535] ["take time"=6.606ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.429 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.442 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=535] [neededSchemaVersion=536] ["elapsed time"=1.83125ms] [gotSchemaVersion=536] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:52.448 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=536]
[2024/09/16 23:25:52.450 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=536] ["take time"=12.548833ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.456 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [category=ddl] [job="ID:237, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258104725519, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:52.458 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:52.468 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=536] [neededSchemaVersion=537] ["elapsed time"=707.709s] [gotSchemaVersion=537] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:52.471 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=237] [version=537]
[2024/09/16 23:25:52.473 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=537] ["take time"=7.635ms] [job="ID:237, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.480 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=237]
[2024/09/16 23:25:52.482 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=237] [tableID=196] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:52.485 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=237] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:52.485 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=237] [conn=952108040] [job="ID:237, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:50.966 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.495 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=237]
[2024/09/16 23:25:52.496 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=537] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_segmentId_segments_id_fk` FOREIGN KEY (`segmentId`) REFERENCES `segments`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:52.497 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:52.497 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:52.501 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:238, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:52.501 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:238, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_segmentId_segments_id_fk` FOREIGN KEY (`segmentId`) REFERENCES `segments`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:52.503 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.504 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"broadcasts_segmentId_segments_id_fk\",\"L\":\"broadcasts_segmentid_segments_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"segmentId\",\"L\":\"segmentid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:52.514 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=537] [neededSchemaVersion=538] ["elapsed time"=912.5s] [gotSchemaVersion=538] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:52.516 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=538]
[2024/09/16 23:25:52.517 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=538] ["take time"=5.017541ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.520 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.532 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=538] [neededSchemaVersion=539] ["elapsed time"=1.695875ms] [gotSchemaVersion=539] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:52.536 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=539]
[2024/09/16 23:25:52.538 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=539] ["take time"=9.45275ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.543 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.555 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=539] [neededSchemaVersion=540] ["elapsed time"=826.25s] [gotSchemaVersion=540] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:52.558 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=540]
[2024/09/16 23:25:52.558 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=540] ["take time"=4.953708ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:52.562 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.563 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=238] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 23:25:52.564 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x4026519a20 0x4026519b80 0x4026519ce0 0x4026519e40 0x402699e000 0x402699e160 0x402699e2c0 0x402699e420 0x402699e580 0x402699e6e0 0x402699e840 0x402699e9a0 0x402699eb00 0x402699ec60 0x402699edc0] [0x40269a0a20 0x40269a0c60] [] [0x40262d1980] public true false 0  0 0 0 0 15 2 1 0 452599258157154318 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:52.564 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=238] [physicalTableID=196] [startKey=] [endKey=]
[2024/09/16 23:25:52.569 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=238]
[2024/09/16 23:25:52.571 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258157154328, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:52.571 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=238] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 23:25:52.576 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/238/0]
[2024/09/16 23:25:52.578 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=196] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:52.587 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=45]
[2024/09/16 23:25:52.587 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=45] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:52.606 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=44]
[2024/09/16 23:25:52.609 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:52.609 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=44]
[2024/09/16 23:25:52.615 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:53.089 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=45] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:53.089 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=45] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:53.090 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=45] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:53.091 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x4026c0fce0 0x4026c0fe40 0x4027b88000 0x4027b88160 0x4027b882c0 0x4027b88420 0x4027b88580 0x4027b886e0 0x4027b88840 0x4027b889a0 0x4027b88b00 0x4027b88c60 0x4027b88dc0 0x4027b88f20 0x4027b89080] [0x4027b8abd0 0x4027b8ae10] [] [0x4026133ec0] public true false 0  0 0 0 0 15 2 1 0 452599258157154318 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:53.091 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=45] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:53.591 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=45] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:53.797 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:53.813 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=540] [neededSchemaVersion=541] ["elapsed time"=3.040208ms] [gotSchemaVersion=541] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:53.820 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=541]
[2024/09/16 23:25:53.821 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=541] ["take time"=12.613125ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.827 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258157154328, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:53.827 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=238] [table=broadcasts] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 23:25:53.838 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=541] [neededSchemaVersion=542] ["elapsed time"=703.584s] [gotSchemaVersion=542] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:53.841 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=542]
[2024/09/16 23:25:53.842 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=542] ["take time"=5.794667ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.846 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:53.847 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=238] [physicalTableID=196] [startKey=7480000000000000c45f69ffff000000000002] [endKey=7480000000000000c45f69ffff000000000002ff]
[2024/09/16 23:25:53.855 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=238]
[2024/09/16 23:25:53.857 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258497941519, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:53.861 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258497941519, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000c45f69ffff000000000002,EndKey:7480000000000000c45f69ffff000000000002ff,First:false,PhysicalTableID:196,Ingest mode:false"]
[2024/09/16 23:25:53.862 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=196] ["start key"=7480000000000000c45f69ffff000000000002] ["end key"=7480000000000000c45f69ffff000000000002ff]
[2024/09/16 23:25:53.863 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=196] ["range start"=7480000000000000c45f69ffff000000000002] ["range end"=7480000000000000c45f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:25:53.863 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c45f69ffff000000000002] [endKey=7480000000000000c45f69ffff000000000002ff]
[2024/09/16 23:25:53.863 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=238]
[2024/09/16 23:25:53.863 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=238]
[2024/09/16 23:25:53.863 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=238]
[2024/09/16 23:25:53.864 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 196, range: [7480000000000000c45f69ffff000000000002, 7480000000000000c45f69ffff000000000002ff), jobID: 238"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c45f69ffff000000000002ff00] ["take time"=1.02975ms]
[2024/09/16 23:25:53.864 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=238]
[2024/09/16 23:25:53.864 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c45f69ffff000000000002]
[2024/09/16 23:25:53.865 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:53.876 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=542] [neededSchemaVersion=543] ["elapsed time"=951.584s] [gotSchemaVersion=543] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:53.878 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=543]
[2024/09/16 23:25:53.879 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=543] ["take time"=6.241209ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.885 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:53.897 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=543] [neededSchemaVersion=544] ["elapsed time"=799.458s] [gotSchemaVersion=544] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:53.900 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=544]
[2024/09/16 23:25:53.902 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=544] ["take time"=6.53975ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.906 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:53.920 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=544] [neededSchemaVersion=545] ["elapsed time"=861.959s] [gotSchemaVersion=545] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:53.923 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=545]
[2024/09/16 23:25:53.924 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=545] ["take time"=6.013792ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.929 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:53.943 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=545] [neededSchemaVersion=546] ["elapsed time"=1.200333ms] [gotSchemaVersion=546] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:53.946 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=546]
[2024/09/16 23:25:53.948 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=546] ["take time"=7.460708ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.954 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [category=ddl] [job="ID:238, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258497941519, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:53.958 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:53.965 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=546] [neededSchemaVersion=547] ["elapsed time"=926.75s] [gotSchemaVersion=547] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:53.967 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=238] [version=547]
[2024/09/16 23:25:53.969 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=547] ["take time"=6.173083ms] [job="ID:238, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.980 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=238]
[2024/09/16 23:25:53.985 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=238] [tableID=196] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:53.987 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=238] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:53.988 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=238] [conn=952108040] [job="ID:238, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:52.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:53.997 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=238]
[2024/09/16 23:25:53.998 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=547] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:53.999 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:53.999 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:54.004 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:239, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:54.004 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:239, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:25:54.006 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:54.007 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"broadcasts_teamId_teams_id_fk\",\"L\":\"broadcasts_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:54.017 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=547] [neededSchemaVersion=548] ["elapsed time"=931.542s] [gotSchemaVersion=548] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:54.019 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=548]
[2024/09/16 23:25:54.020 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=548] ["take time"=5.051458ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:54.024 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:54.033 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=548] [neededSchemaVersion=549] ["elapsed time"=1.035334ms] [gotSchemaVersion=549] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:54.036 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=549]
[2024/09/16 23:25:54.036 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=549] ["take time"=5.942583ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:54.041 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:54.050 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=549] [neededSchemaVersion=550] ["elapsed time"=778.291s] [gotSchemaVersion=550] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:54.052 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=550]
[2024/09/16 23:25:54.054 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=550] ["take time"=5.470292ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:54.058 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:54.059 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=239] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 23:25:54.060 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x4029206b00 0x4029206c60 0x4029206dc0 0x4029206f20 0x4029207080 0x40292071e0 0x4029207340 0x40292074a0 0x4029207600 0x4029207760 0x40292078c0 0x4029207a20 0x4029207b80 0x4029207ce0 0x4029207e40] [0x402920d320 0x402920d560 0x402920d7a0] [] [0x4028c8d680 0x4028c8d740] public true false 0  0 0 0 0 15 3 2 0 452599258550632463 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:54.060 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=239] [physicalTableID=196] [startKey=] [endKey=]
[2024/09/16 23:25:54.073 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=239]
[2024/09/16 23:25:54.075 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258550632473, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:54.076 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=239] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 23:25:54.081 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/239/0]
[2024/09/16 23:25:54.083 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=196] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:54.089 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=45]
[2024/09/16 23:25:54.091 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:54.091 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=45]
[2024/09/16 23:25:54.093 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=46]
[2024/09/16 23:25:54.094 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=46] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:54.097 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:54.598 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=46] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:54.598 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=46] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:54.601 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=46] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:54.602 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x4029a2e000 0x4029a2e160 0x4029a2e2c0 0x4029a2e420 0x4029a2e580 0x4029a2e6e0 0x4029a2e840 0x4029a2e9a0 0x4029a2eb00 0x4029a2ec60 0x4029a2edc0 0x4029a2ef20 0x4029a2f080 0x4029a2f1e0 0x4029a2f340] [0x40297ff7a0 0x40297ff9e0 0x40297ffc20] [] [0x4029a12240 0x4029a12300] public true false 0  0 0 0 0 15 3 2 0 452599258550632463 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:54.602 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=46] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:55.101 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=46] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:55.302 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:55.310 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=550] [neededSchemaVersion=551] ["elapsed time"=730.208s] [gotSchemaVersion=551] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:55.312 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=551]
[2024/09/16 23:25:55.312 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=551] ["take time"=4.133458ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.315 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258550632473, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.316 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=239] [table=broadcasts] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 23:25:55.323 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=551] [neededSchemaVersion=552] ["elapsed time"=825.375s] [gotSchemaVersion=552] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:55.325 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=552]
[2024/09/16 23:25:55.326 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=552] ["take time"=4.333834ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.329 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.330 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=239] [physicalTableID=196] [startKey=7480000000000000c45f69ffff000000000003] [endKey=7480000000000000c45f69ffff000000000003ff]
[2024/09/16 23:25:55.334 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=239]
[2024/09/16 23:25:55.336 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258890895370, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.338 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258890895370, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000000c45f69ffff000000000003,EndKey:7480000000000000c45f69ffff000000000003ff,First:false,PhysicalTableID:196,Ingest mode:false"]
[2024/09/16 23:25:55.339 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=196] ["start key"=7480000000000000c45f69ffff000000000003] ["end key"=7480000000000000c45f69ffff000000000003ff]
[2024/09/16 23:25:55.339 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=196] ["range start"=7480000000000000c45f69ffff000000000003] ["range end"=7480000000000000c45f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:25:55.339 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c45f69ffff000000000003] [endKey=7480000000000000c45f69ffff000000000003ff]
[2024/09/16 23:25:55.339 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=239]
[2024/09/16 23:25:55.339 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=239]
[2024/09/16 23:25:55.339 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=239]
[2024/09/16 23:25:55.340 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 196, range: [7480000000000000c45f69ffff000000000003, 7480000000000000c45f69ffff000000000003ff), jobID: 239"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c45f69ffff000000000003ff00] ["take time"=403.25s]
[2024/09/16 23:25:55.340 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=239]
[2024/09/16 23:25:55.340 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c45f69ffff000000000003]
[2024/09/16 23:25:55.340 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:55.346 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=552] [neededSchemaVersion=553] ["elapsed time"=686.542s] [gotSchemaVersion=553] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:55.348 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=553]
[2024/09/16 23:25:55.349 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=553] ["take time"=3.75825ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.351 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.359 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=553] [neededSchemaVersion=554] ["elapsed time"=627.75s] [gotSchemaVersion=554] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:55.360 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=554]
[2024/09/16 23:25:55.361 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=554] ["take time"=3.872084ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.364 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.372 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=554] [neededSchemaVersion=555] ["elapsed time"=624.917s] [gotSchemaVersion=555] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:55.373 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=555]
[2024/09/16 23:25:55.374 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=555] ["take time"=3.629833ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.377 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.384 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=555] [neededSchemaVersion=556] ["elapsed time"=675.708s] [gotSchemaVersion=556] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:55.385 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=556]
[2024/09/16 23:25:55.386 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=556] ["take time"=3.827042ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.389 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [category=ddl] [job="ID:239, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258890895370, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:55.391 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:55.396 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=556] [neededSchemaVersion=557] ["elapsed time"=721.333s] [gotSchemaVersion=557] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:55.398 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=239] [version=557]
[2024/09/16 23:25:55.399 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=557] ["take time"=4.511166ms] [job="ID:239, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.406 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=239]
[2024/09/16 23:25:55.407 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=239] [tableID=196] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:55.411 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=239] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:55.412 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=239] [conn=952108040] [job="ID:239, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:53.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.419 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=239]
[2024/09/16 23:25:55.420 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=557] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:55.420 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:55.420 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:55.424 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:240, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:55.425 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:240, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:55.426 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.427 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":4,\"idx_name\":{\"O\":\"broadcasts_emailContentId_emailContents_id_fk\",\"L\":\"broadcasts_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":7,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:55.433 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=557] [neededSchemaVersion=558] ["elapsed time"=724.375s] [gotSchemaVersion=558] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:55.435 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=558]
[2024/09/16 23:25:55.436 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=558] ["take time"=3.789ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.439 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.446 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=558] [neededSchemaVersion=559] ["elapsed time"=645.917s] [gotSchemaVersion=559] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:55.448 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=559]
[2024/09/16 23:25:55.449 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=559] ["take time"=4.175209ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.452 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.460 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=559] [neededSchemaVersion=560] ["elapsed time"=787.875s] [gotSchemaVersion=560] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:55.462 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=560]
[2024/09/16 23:25:55.463 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=560] ["take time"=4.499167ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:55.466 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.467 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=240] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 23:25:55.468 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x402aaa02c0 0x402aaa0420 0x402aaa0580 0x402aaa06e0 0x402aaa0840 0x402aaa09a0 0x402aaa0b00 0x402aaa0c60 0x402aaa0dc0 0x402aaa0f20 0x402aaa1080 0x402aaa11e0 0x402aaa1340 0x402aaa14a0 0x402aaa1600] [0x402ac26240 0x402ac26480 0x402ac266c0 0x402ac26900] [] [0x402a8eab40 0x402a8eac00 0x402a8eacc0] public true false 0  0 0 0 0 15 4 3 0 452599258917371934 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:55.468 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=240] [physicalTableID=196] [startKey=] [endKey=]
[2024/09/16 23:25:55.473 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=240]
[2024/09/16 23:25:55.475 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258930479105, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:55.475 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=240] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 23:25:55.480 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/240/0]
[2024/09/16 23:25:55.483 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=196] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:55.494 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=47]
[2024/09/16 23:25:55.494 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=47] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:55.519 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:25:55.595 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=46]
[2024/09/16 23:25:55.597 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:55.597 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=46]
[2024/09/16 23:25:55.603 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:56.000 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=47] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:56.001 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=47] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:56.003 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=47] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:56.005 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x402ad7fb80 0x402ad7fce0 0x402ad7fe40 0x402b302160 0x402b3022c0 0x402b302420 0x402b302580 0x402b3026e0 0x402b302840 0x402b3029a0 0x402b302b00 0x402b302c60 0x402b302dc0 0x402b302f20 0x402b303080] [0x402b14f440 0x402b14f680 0x402b14f8c0 0x402b14fb00] [] [0x402b162000 0x402b1620c0 0x402b162180] public true false 0  0 0 0 0 15 4 3 0 452599258917371934 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:56.005 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=47] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:56.499 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=47] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:56.697 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:56.706 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=560] [neededSchemaVersion=561] ["elapsed time"=1.016625ms] [gotSchemaVersion=561] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:56.708 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=561]
[2024/09/16 23:25:56.708 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=561] ["take time"=4.552583ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.712 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599258930479105, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.712 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=240] [table=broadcasts] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 23:25:56.721 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=561] [neededSchemaVersion=562] ["elapsed time"=844.333s] [gotSchemaVersion=562] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:56.723 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=562]
[2024/09/16 23:25:56.724 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=562] ["take time"=4.674333ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.727 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.728 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=240] [physicalTableID=196] [startKey=7480000000000000c45f69ffff000000000004] [endKey=7480000000000000c45f69ffff000000000004ff]
[2024/09/16 23:25:56.735 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=240]
[2024/09/16 23:25:56.736 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259258159112, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.738 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259258159112, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:4,StartKey:7480000000000000c45f69ffff000000000004,EndKey:7480000000000000c45f69ffff000000000004ff,First:false,PhysicalTableID:196,Ingest mode:false"]
[2024/09/16 23:25:56.740 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=196] ["start key"=7480000000000000c45f69ffff000000000004] ["end key"=7480000000000000c45f69ffff000000000004ff]
[2024/09/16 23:25:56.740 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=196] ["range start"=7480000000000000c45f69ffff000000000004] ["range end"=7480000000000000c45f69ffff000000000004ff] ["range count"=1]
[2024/09/16 23:25:56.740 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c45f69ffff000000000004] [endKey=7480000000000000c45f69ffff000000000004ff]
[2024/09/16 23:25:56.741 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=240]
[2024/09/16 23:25:56.741 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=240]
[2024/09/16 23:25:56.741 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=240]
[2024/09/16 23:25:56.741 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 196, range: [7480000000000000c45f69ffff000000000004, 7480000000000000c45f69ffff000000000004ff), jobID: 240"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c45f69ffff000000000004ff00] ["take time"=779.792s]
[2024/09/16 23:25:56.741 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=240]
[2024/09/16 23:25:56.742 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:4,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c45f69ffff000000000004]
[2024/09/16 23:25:56.742 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:56.749 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=562] [neededSchemaVersion=563] ["elapsed time"=932.584s] [gotSchemaVersion=563] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:56.751 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=563]
[2024/09/16 23:25:56.752 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=563] ["take time"=4.905917ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.755 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.764 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=563] [neededSchemaVersion=564] ["elapsed time"=779.334s] [gotSchemaVersion=564] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:56.766 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=564]
[2024/09/16 23:25:56.766 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=564] ["take time"=4.485833ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.769 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.780 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=564] [neededSchemaVersion=565] ["elapsed time"=854.875s] [gotSchemaVersion=565] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:56.782 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=565]
[2024/09/16 23:25:56.783 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=565] ["take time"=4.971041ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.787 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.796 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=565] [neededSchemaVersion=566] ["elapsed time"=941.917s] [gotSchemaVersion=566] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:56.798 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=566]
[2024/09/16 23:25:56.799 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=566] ["take time"=5.565417ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.805 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [category=ddl] [job="ID:240, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259258159112, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:56.808 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:56.815 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=566] [neededSchemaVersion=567] ["elapsed time"=1.186417ms] [gotSchemaVersion=567] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:56.818 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=240] [version=567]
[2024/09/16 23:25:56.819 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=567] ["take time"=5.681833ms] [job="ID:240, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.827 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=240]
[2024/09/16 23:25:56.830 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=240] [tableID=196] [indexIDs="[9223090561878065156]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:56.832 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=240] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:56.833 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=240] [conn=952108040] [job="ID:240, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:55.416 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.843 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=240]
[2024/09/16 23:25:56.844 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=567] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_winningAbTestVariantId_abTestVariants_id_fk` FOREIGN KEY (`winningAbTestVariantId`) REFERENCES `abTestVariants`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:56.844 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:56.844 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:56.850 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:241, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:56.850 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:241, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_winningAbTestVariantId_abTestVariants_id_fk` FOREIGN KEY (`winningAbTestVariantId`) REFERENCES `abTestVariants`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:56.851 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.852 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":5,\"idx_name\":{\"O\":\"broadcasts_winningAbTestVariantId_abTestVariants_id_fk\",\"L\":\"broadcasts_winningabtestvariantid_abtestvariants_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"winningAbTestVariantId\",\"L\":\"winningabtestvariantid\"},\"offset\":8,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:56.861 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=567] [neededSchemaVersion=568] ["elapsed time"=1.03575ms] [gotSchemaVersion=568] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:56.864 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=568]
[2024/09/16 23:25:56.865 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=568] ["take time"=5.390042ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.869 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.879 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=568] [neededSchemaVersion=569] ["elapsed time"=912.166s] [gotSchemaVersion=569] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:56.881 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=569]
[2024/09/16 23:25:56.882 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=569] ["take time"=5.100375ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.886 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.895 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=569] [neededSchemaVersion=570] ["elapsed time"=847.708s] [gotSchemaVersion=570] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:56.897 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=570]
[2024/09/16 23:25:56.898 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=570] ["take time"=4.913334ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:56.902 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.903 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=241] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 23:25:56.904 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x402c4dec60 0x402c4dedc0 0x402c4def20 0x402c4df080 0x402c4df1e0 0x402c4df340 0x402c4df4a0 0x402c4df600 0x402c4df760 0x402c4df8c0 0x402c4dfa20 0x402c4dfb80 0x402c4dfce0 0x402c4dfe40 0x402c730000] [0x402c725710 0x402c725950 0x402c725b90 0x402c725dd0 0x402c732090] [] [0x402c4cce40 0x402c4ccf00 0x402c4ccfc0 0x402c4cd080] public true false 0  0 0 0 0 15 5 4 0 452599259297480715 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:56.904 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=241] [physicalTableID=196] [startKey=] [endKey=]
[2024/09/16 23:25:56.910 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=241]
[2024/09/16 23:25:56.912 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259297480726, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:56.913 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=241] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 23:25:56.919 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/241/0]
[2024/09/16 23:25:56.920 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=196] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:56.932 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=48]
[2024/09/16 23:25:56.932 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=48] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:56.996 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=47]
[2024/09/16 23:25:56.998 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:56.998 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=47]
[2024/09/16 23:25:57.004 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:57.435 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=48] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:57.435 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=48] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:57.438 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=48] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:57.440 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{196 broadcasts utf8mb4 utf8mb4_bin [0x402cc3a160 0x402cc3a2c0 0x402cc3a420 0x402cc3a580 0x402cc3a6e0 0x402cc3a840 0x402cc3a9a0 0x402cc3ab00 0x402cc3ac60 0x402cc3adc0 0x402cc3af20 0x402cc3b080 0x402cc3b1e0 0x402cc3b340 0x402cc3b4a0] [0x402cb47a70 0x402cb47cb0 0x402cb47ef0 0x402cc461b0 0x402cc463f0] [] [0x402cc240c0 0x402cc24180 0x402cc24240 0x402cc24300] public true false 0  0 0 0 0 15 5 4 0 452599259297480715 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 182}"] ["table/partition ID"=196] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:57.440 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=48] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:57.944 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=48] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:58.136 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:58.176 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=570] [neededSchemaVersion=571] ["elapsed time"=805.666s] [gotSchemaVersion=571] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:58.178 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=571]
[2024/09/16 23:25:58.179 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=571] ["take time"=5.218583ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.183 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259297480726, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.184 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=241] [table=broadcasts] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 23:25:58.192 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=571] [neededSchemaVersion=572] ["elapsed time"=740.875s] [gotSchemaVersion=572] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:58.194 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=572]
[2024/09/16 23:25:58.195 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=572] ["take time"=5.050083ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.199 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.200 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=241] [physicalTableID=196] [startKey=7480000000000000c45f69ffff000000000005] [endKey=7480000000000000c45f69ffff000000000005ff]
[2024/09/16 23:25:58.205 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=241]
[2024/09/16 23:25:58.208 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259638530065, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.211 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259638530065, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:5,StartKey:7480000000000000c45f69ffff000000000005,EndKey:7480000000000000c45f69ffff000000000005ff,First:false,PhysicalTableID:196,Ingest mode:false"]
[2024/09/16 23:25:58.212 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=196] ["start key"=7480000000000000c45f69ffff000000000005] ["end key"=7480000000000000c45f69ffff000000000005ff]
[2024/09/16 23:25:58.212 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=196] ["range start"=7480000000000000c45f69ffff000000000005] ["range end"=7480000000000000c45f69ffff000000000005ff] ["range count"=1]
[2024/09/16 23:25:58.212 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c45f69ffff000000000005] [endKey=7480000000000000c45f69ffff000000000005ff]
[2024/09/16 23:25:58.212 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=241]
[2024/09/16 23:25:58.213 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=241]
[2024/09/16 23:25:58.213 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=241]
[2024/09/16 23:25:58.213 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 196, range: [7480000000000000c45f69ffff000000000005, 7480000000000000c45f69ffff000000000005ff), jobID: 241"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c45f69ffff000000000005ff00] ["take time"=901.917s]
[2024/09/16 23:25:58.213 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=241]
[2024/09/16 23:25:58.214 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:5,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c45f69ffff000000000005]
[2024/09/16 23:25:58.214 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:58.222 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=572] [neededSchemaVersion=573] ["elapsed time"=1.090959ms] [gotSchemaVersion=573] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:58.225 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=573]
[2024/09/16 23:25:58.226 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=573] ["take time"=5.216334ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.229 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.268 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=573] [neededSchemaVersion=574] ["elapsed time"=1.605333ms] [gotSchemaVersion=574] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:58.271 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=574]
[2024/09/16 23:25:58.272 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=574] ["take time"=10.033583ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.275 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.287 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=574] [neededSchemaVersion=575] ["elapsed time"=926.583s] [gotSchemaVersion=575] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:58.288 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=575]
[2024/09/16 23:25:58.289 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=575] ["take time"=4.461708ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.293 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.303 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=575] [neededSchemaVersion=576] ["elapsed time"=843.584s] [gotSchemaVersion=576] [phyTblIDs="[196]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:58.310 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=576]
[2024/09/16 23:25:58.311 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=576] ["take time"=10.622041ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.316 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [category=ddl] [job="ID:241, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259638530065, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:58.318 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:58.324 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=576] [neededSchemaVersion=577] ["elapsed time"=676.792s] [gotSchemaVersion=577] [phyTblIDs="[196]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:58.326 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=241] [version=577]
[2024/09/16 23:25:58.326 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=577] ["take time"=3.791667ms] [job="ID:241, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.333 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=241]
[2024/09/16 23:25:58.334 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=241] [tableID=196] [indexIDs="[9223090561878065157]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:58.336 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=241] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:58.337 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=241] [conn=952108040] [job="ID:241, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:196, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:56.816 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.344 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=241]
[2024/09/16 23:25:58.346 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=577] [cur_db=test] [sql="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_automationStepId_automationSteps_id_fk` FOREIGN KEY (`automationStepId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:58.346 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:58.346 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:58.350 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:242, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:58.350 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:242, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_automationStepId_automationSteps_id_fk` FOREIGN KEY (`automationStepId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:58.352 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.352 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"contactAutomationSteps_automationStepId_automationSteps_id_fk\",\"L\":\"contactautomationsteps_automationstepid_automationsteps_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"automationStepId\",\"L\":\"automationstepid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:58.359 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=577] [neededSchemaVersion=578] ["elapsed time"=614.792s] [gotSchemaVersion=578] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:58.361 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=578]
[2024/09/16 23:25:58.362 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=578] ["take time"=4.081333ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.366 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.373 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=578] [neededSchemaVersion=579] ["elapsed time"=672.042s] [gotSchemaVersion=579] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:58.375 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=579]
[2024/09/16 23:25:58.376 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=579] ["take time"=4.114708ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.379 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.387 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=579] [neededSchemaVersion=580] ["elapsed time"=629.292s] [gotSchemaVersion=580] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:58.388 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=580]
[2024/09/16 23:25:58.389 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=580] ["take time"=3.768084ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:58.392 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.393 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=242] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 23:25:58.393 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{198 contactAutomationSteps utf8mb4 utf8mb4_bin [0x402de4b1e0 0x402de4b340 0x402de4b4a0 0x402de4b600 0x402de4b760 0x402de4b8c0 0x402de4ba20 0x402de4bb80 0x402de4bce0 0x402de4be40] [0x402de593b0] [] [] public true false 0  0 0 0 0 10 1 0 0 452599259690696713 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=198] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:58.394 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=242] [physicalTableID=198] [startKey=] [endKey=]
[2024/09/16 23:25:58.398 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=242]
[2024/09/16 23:25:58.400 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259690696723, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:58.400 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=242] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 23:25:58.405 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/242/0]
[2024/09/16 23:25:58.406 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=198] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:58.421 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=49]
[2024/09/16 23:25:58.421 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=49] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:58.434 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=48]
[2024/09/16 23:25:58.446 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:58.449 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=48]
[2024/09/16 23:25:58.496 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:25:58.924 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=49] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:25:58.924 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=49] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:25:58.925 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=49] [curr-step=init] [next-step=read-index]
[2024/09/16 23:25:58.926 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{198 contactAutomationSteps utf8mb4 utf8mb4_bin [0x4057324160 0x40573242c0 0x4057324420 0x4057324580 0x40573246e0 0x4057324840 0x40573249a0 0x4057324b00 0x4057324c60 0x4057324dc0] [0x40327b3050] [] [] public true false 0  0 0 0 0 10 1 0 0 452599259690696713 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=198] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:58.926 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=49] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:25:59.426 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=49] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:25:59.624 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:59.632 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=580] [neededSchemaVersion=581] ["elapsed time"=646.416s] [gotSchemaVersion=581] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:59.634 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=581]
[2024/09/16 23:25:59.635 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=581] ["take time"=4.394084ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.638 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599259690696723, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.639 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=242] [table=contactAutomationSteps] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 23:25:59.645 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=581] [neededSchemaVersion=582] ["elapsed time"=655.417s] [gotSchemaVersion=582] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:59.647 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=582]
[2024/09/16 23:25:59.649 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=582] ["take time"=5.24ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.652 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.652 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=242] [physicalTableID=198] [startKey=7480000000000000c65f69ffff000000000001] [endKey=7480000000000000c65f69ffff000000000001ff]
[2024/09/16 23:25:59.657 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=242]
[2024/09/16 23:25:59.658 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260018114583, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.660 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260018114583, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000c65f69ffff000000000001,EndKey:7480000000000000c65f69ffff000000000001ff,First:false,PhysicalTableID:198,Ingest mode:false"]
[2024/09/16 23:25:59.661 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=198] ["start key"=7480000000000000c65f69ffff000000000001] ["end key"=7480000000000000c65f69ffff000000000001ff]
[2024/09/16 23:25:59.662 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=198] ["range start"=7480000000000000c65f69ffff000000000001] ["range end"=7480000000000000c65f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:25:59.662 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c65f69ffff000000000001] [endKey=7480000000000000c65f69ffff000000000001ff]
[2024/09/16 23:25:59.662 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=242]
[2024/09/16 23:25:59.662 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=242]
[2024/09/16 23:25:59.662 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=242]
[2024/09/16 23:25:59.662 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 198, range: [7480000000000000c65f69ffff000000000001, 7480000000000000c65f69ffff000000000001ff), jobID: 242"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c65f69ffff000000000001ff00] ["take time"=365.625s]
[2024/09/16 23:25:59.662 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=242]
[2024/09/16 23:25:59.663 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c65f69ffff000000000001]
[2024/09/16 23:25:59.663 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:25:59.669 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=582] [neededSchemaVersion=583] ["elapsed time"=621.375s] [gotSchemaVersion=583] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:59.671 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=583]
[2024/09/16 23:25:59.671 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=583] ["take time"=3.611333ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.674 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.681 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=583] [neededSchemaVersion=584] ["elapsed time"=564.792s] [gotSchemaVersion=584] [phyTblIDs="[198]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:59.683 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=584]
[2024/09/16 23:25:59.683 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=584] ["take time"=3.977417ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.686 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.694 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=584] [neededSchemaVersion=585] ["elapsed time"=595s] [gotSchemaVersion=585] [phyTblIDs="[198]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:59.696 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=585]
[2024/09/16 23:25:59.696 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=585] ["take time"=3.67ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.699 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.706 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=585] [neededSchemaVersion=586] ["elapsed time"=703.417s] [gotSchemaVersion=586] [phyTblIDs="[198]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:25:59.708 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=586]
[2024/09/16 23:25:59.709 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=586] ["take time"=4.440708ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.713 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [category=ddl] [job="ID:242, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260018114583, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:25:59.714 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:25:59.720 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=586] [neededSchemaVersion=587] ["elapsed time"=699.833s] [gotSchemaVersion=587] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:59.722 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=242] [version=587]
[2024/09/16 23:25:59.723 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=587] ["take time"=3.919167ms] [job="ID:242, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.728 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=242]
[2024/09/16 23:25:59.730 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=242] [tableID=198] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:25:59.731 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=242] [jobType="alter table multi-schema change"]
[2024/09/16 23:25:59.732 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=242] [conn=952108040] [job="ID:242, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:58.316 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.738 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=242]
[2024/09/16 23:25:59.740 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=587] [cur_db=test] [sql="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:25:59.741 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:59.741 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:25:59.745 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:243, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:25:59.745 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:243, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:25:59.746 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.747 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contactAutomationSteps_contactId_contacts_id_fk\",\"L\":\"contactautomationsteps_contactid_contacts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:25:59.753 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=587] [neededSchemaVersion=588] ["elapsed time"=663.417s] [gotSchemaVersion=588] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:59.755 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=588]
[2024/09/16 23:25:59.755 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=588] ["take time"=3.677167ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.758 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.764 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=588] [neededSchemaVersion=589] ["elapsed time"=623.125s] [gotSchemaVersion=589] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:59.766 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=589]
[2024/09/16 23:25:59.767 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=589] ["take time"=3.533583ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.769 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.776 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=589] [neededSchemaVersion=590] ["elapsed time"=581.125s] [gotSchemaVersion=590] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:25:59.777 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=590]
[2024/09/16 23:25:59.778 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=590] ["take time"=3.588458ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:25:59.780 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.781 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=243] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 23:25:59.782 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{198 contactAutomationSteps utf8mb4 utf8mb4_bin [0x4006223080 0x40062231e0 0x4006223340 0x40062234a0 0x4006223e40 0x40136a4000 0x40136a4160 0x40136a42c0 0x40136a4420 0x40136a4580] [0x4014c0e750 0x4014c0e990] [] [0x400805c000] public true false 0  0 0 0 0 10 2 1 0 452599260057698307 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=198] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:25:59.782 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=243] [physicalTableID=198] [startKey=] [endKey=]
[2024/09/16 23:25:59.786 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=243]
[2024/09/16 23:25:59.787 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260057698317, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:25:59.788 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=243] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 23:25:59.792 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/243/0]
[2024/09/16 23:25:59.796 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=198] [size=0] [error="less than 3 regions"]
[2024/09/16 23:25:59.806 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=50]
[2024/09/16 23:25:59.807 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=50] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:25:59.923 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=49]
[2024/09/16 23:25:59.926 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:25:59.926 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=49]
[2024/09/16 23:25:59.931 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:00.308 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=50] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:00.308 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=50] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:00.309 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=50] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:00.311 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{198 contactAutomationSteps utf8mb4 utf8mb4_bin [0x4005ca4160 0x4005ca42c0 0x4005ca4420 0x4005ca4580 0x4005ca46e0 0x4005ca4840 0x4005ca49a0 0x4005ca4b00 0x4005ca4c60 0x4005ca4dc0] [0x4014d7bb00 0x4014d7bd40] [] [0x402a43a0c0] public true false 0  0 0 0 0 10 2 1 0 452599260057698307 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=198] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:00.311 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=50] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:00.812 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=50] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:01.012 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:01.021 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=590] [neededSchemaVersion=591] ["elapsed time"=647.5s] [gotSchemaVersion=591] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:01.023 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=591]
[2024/09/16 23:26:01.024 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=591] ["take time"=4.566625ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.027 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260057698317, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.028 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=243] [table=contactAutomationSteps] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 23:26:01.034 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=591] [neededSchemaVersion=592] ["elapsed time"=687.542s] [gotSchemaVersion=592] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:01.036 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=592]
[2024/09/16 23:26:01.037 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=592] ["take time"=3.915916ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.040 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.041 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=243] [physicalTableID=198] [startKey=7480000000000000c65f69ffff000000000002] [endKey=7480000000000000c65f69ffff000000000002ff]
[2024/09/16 23:26:01.045 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=243]
[2024/09/16 23:26:01.047 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260385640465, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.049 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:5, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260385640465, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000c65f69ffff000000000002,EndKey:7480000000000000c65f69ffff000000000002ff,First:false,PhysicalTableID:198,Ingest mode:false"]
[2024/09/16 23:26:01.050 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=198] ["start key"=7480000000000000c65f69ffff000000000002] ["end key"=7480000000000000c65f69ffff000000000002ff]
[2024/09/16 23:26:01.050 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=198] ["range start"=7480000000000000c65f69ffff000000000002] ["range end"=7480000000000000c65f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:26:01.050 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c65f69ffff000000000002] [endKey=7480000000000000c65f69ffff000000000002ff]
[2024/09/16 23:26:01.050 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=243]
[2024/09/16 23:26:01.050 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=243]
[2024/09/16 23:26:01.050 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=243]
[2024/09/16 23:26:01.051 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 198, range: [7480000000000000c65f69ffff000000000002, 7480000000000000c65f69ffff000000000002ff), jobID: 243"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c65f69ffff000000000002ff00] ["take time"=383.625s]
[2024/09/16 23:26:01.051 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=243]
[2024/09/16 23:26:01.051 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c65f69ffff000000000002]
[2024/09/16 23:26:01.051 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:01.058 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=592] [neededSchemaVersion=593] ["elapsed time"=585.875s] [gotSchemaVersion=593] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:01.060 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=593]
[2024/09/16 23:26:01.061 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=593] ["take time"=4.03075ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.064 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.071 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=593] [neededSchemaVersion=594] ["elapsed time"=650.334s] [gotSchemaVersion=594] [phyTblIDs="[198]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:01.072 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=594]
[2024/09/16 23:26:01.073 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=594] ["take time"=3.854791ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.076 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.084 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=594] [neededSchemaVersion=595] ["elapsed time"=582.334s] [gotSchemaVersion=595] [phyTblIDs="[198]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:01.085 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=595]
[2024/09/16 23:26:01.086 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=595] ["take time"=3.880666ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.089 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.096 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=595] [neededSchemaVersion=596] ["elapsed time"=574.917s] [gotSchemaVersion=596] [phyTblIDs="[198]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:01.098 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=596]
[2024/09/16 23:26:01.098 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=596] ["take time"=3.723292ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.102 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [category=ddl] [job="ID:243, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260385640465, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:01.104 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:01.108 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=596] [neededSchemaVersion=597] ["elapsed time"=579.459s] [gotSchemaVersion=597] [phyTblIDs="[198]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:01.110 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=243] [version=597]
[2024/09/16 23:26:01.110 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=597] ["take time"=3.6315ms] [job="ID:243, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.116 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=243]
[2024/09/16 23:26:01.117 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=243] [tableID=198] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:01.120 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=243] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:01.120 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=243] [conn=952108040] [job="ID:243, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:198, RowCount:0, ArgLen:0, start time: 2024-09-16 23:25:59.716 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.127 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=243]
[2024/09/16 23:26:01.129 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=597] [cur_db=test] [sql="ALTER TABLE `contactImports` ADD CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:01.129 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactimports] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:01.129 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactimports] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:01.133 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:244, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:01.134 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:244, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactImports` ADD CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:01.135 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.136 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contactImports_audienceId_audiences_id_fk\",\"L\":\"contactimports_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:01.142 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=597] [neededSchemaVersion=598] ["elapsed time"=602.333s] [gotSchemaVersion=598] [phyTblIDs="[200]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:01.144 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=598]
[2024/09/16 23:26:01.144 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=598] ["take time"=3.60225ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.147 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.154 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=598] [neededSchemaVersion=599] ["elapsed time"=684.667s] [gotSchemaVersion=599] [phyTblIDs="[200]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:01.156 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=599]
[2024/09/16 23:26:01.157 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=599] ["take time"=3.775042ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.159 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.165 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=599] [neededSchemaVersion=600] ["elapsed time"=556.375s] [gotSchemaVersion=600] [phyTblIDs="[200]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:01.167 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=600]
[2024/09/16 23:26:01.168 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=600] ["take time"=3.399958ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:01.170 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.171 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=244] [table=contactImports] ["ingest mode"=true] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 23:26:01.172 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{200 contactImports utf8mb4 utf8mb4_bin [0x405734eb00 0x405734ec60 0x405734edc0 0x405734ef20 0x405734f080 0x405734f1e0 0x405734f340 0x405734f4a0 0x405734f600 0x405734f760] [0x400ce4b4d0 0x400ce4b710] [] [] public true false 0  0 0 0 0 10 2 0 0 452599260411330597 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=200] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:01.172 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=244] [physicalTableID=200] [startKey=] [endKey=]
[2024/09/16 23:26:01.176 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=244]
[2024/09/16 23:26:01.178 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260424699910, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:01.178 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=244] [table=contactImports] ["ingest mode"=true] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 23:26:01.182 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/244/0]
[2024/09/16 23:26:01.183 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=200] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:01.191 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=51]
[2024/09/16 23:26:01.191 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=51] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:01.308 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=50]
[2024/09/16 23:26:01.310 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:01.310 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=50]
[2024/09/16 23:26:01.315 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:01.692 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=51] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:01.692 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=51] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:01.693 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=51] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:01.694 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{200 contactImports utf8mb4 utf8mb4_bin [0x4005218160 0x40052182c0 0x4005218420 0x4005218580 0x40052186e0 0x4005218840 0x40052189a0 0x4005218b00 0x4005218c60 0x4005218dc0] [0x40137d50e0 0x40137d5320] [] [] public true false 0  0 0 0 0 10 2 0 0 452599260411330597 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=200] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:01.694 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=51] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:02.197 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=51] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:02.394 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:02.402 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=600] [neededSchemaVersion=601] ["elapsed time"=529.75s] [gotSchemaVersion=601] [phyTblIDs="[200]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:02.403 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=601]
[2024/09/16 23:26:02.404 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=601] ["take time"=3.8315ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.407 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260424699910, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.408 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=244] [table=contactImports] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 23:26:02.415 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=601] [neededSchemaVersion=602] ["elapsed time"=712.833s] [gotSchemaVersion=602] [phyTblIDs="[200]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:02.417 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=602]
[2024/09/16 23:26:02.417 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=602] ["take time"=4.008126ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.420 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.421 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=244] [physicalTableID=200] [startKey=7480000000000000c85f69ffff000000000002] [endKey=7480000000000000c85f69ffff000000000002ff]
[2024/09/16 23:26:02.426 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=244]
[2024/09/16 23:26:02.427 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260752379910, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.428 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260752379910, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000c85f69ffff000000000002,EndKey:7480000000000000c85f69ffff000000000002ff,First:false,PhysicalTableID:200,Ingest mode:false"]
[2024/09/16 23:26:02.429 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=200] ["start key"=7480000000000000c85f69ffff000000000002] ["end key"=7480000000000000c85f69ffff000000000002ff]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=200] ["range start"=7480000000000000c85f69ffff000000000002] ["range end"=7480000000000000c85f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000c85f69ffff000000000002] [endKey=7480000000000000c85f69ffff000000000002ff]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=244]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=244]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=244]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 200, range: [7480000000000000c85f69ffff000000000002, 7480000000000000c85f69ffff000000000002ff), jobID: 244"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000c85f69ffff000000000002ff00] ["take time"=339.209s]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=244]
[2024/09/16 23:26:02.430 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000c85f69ffff000000000002]
[2024/09/16 23:26:02.431 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:02.437 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=602] [neededSchemaVersion=603] ["elapsed time"=628.625s] [gotSchemaVersion=603] [phyTblIDs="[200]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:02.439 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=603]
[2024/09/16 23:26:02.440 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=603] ["take time"=3.614708ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.442 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.449 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=603] [neededSchemaVersion=604] ["elapsed time"=587.916s] [gotSchemaVersion=604] [phyTblIDs="[200]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:02.451 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=604]
[2024/09/16 23:26:02.451 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=604] ["take time"=3.634917ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.454 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.462 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=604] [neededSchemaVersion=605] ["elapsed time"=580.458s] [gotSchemaVersion=605] [phyTblIDs="[200]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:02.464 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=605]
[2024/09/16 23:26:02.464 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=605] ["take time"=3.806ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.467 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.476 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=605] [neededSchemaVersion=606] ["elapsed time"=960.208s] [gotSchemaVersion=606] [phyTblIDs="[200]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:02.478 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=606]
[2024/09/16 23:26:02.479 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=606] ["take time"=4.945625ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.484 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [category=ddl] [job="ID:244, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260752379910, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:02.486 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:02.492 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=606] [neededSchemaVersion=607] ["elapsed time"=915.583s] [gotSchemaVersion=607] [phyTblIDs="[200]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:02.494 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=244] [version=607]
[2024/09/16 23:26:02.495 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=607] ["take time"=4.572625ms] [job="ID:244, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.501 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=244]
[2024/09/16 23:26:02.502 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=244] [tableID=200] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:02.504 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=244] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:02.504 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=244] [conn=952108040] [job="ID:244, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:200, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:01.115 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.511 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=244]
[2024/09/16 23:26:02.512 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=607] [cur_db=test] [sql="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:02.513 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:02.513 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:02.517 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:245, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:02.517 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:245, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:02.518 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.519 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contacts_audienceId_audiences_id_fk\",\"L\":\"contacts_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":7,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:02.525 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=607] [neededSchemaVersion=608] ["elapsed time"=674.209s] [gotSchemaVersion=608] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:02.527 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=608]
[2024/09/16 23:26:02.527 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=608] ["take time"=3.613708ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.531 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.538 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=608] [neededSchemaVersion=609] ["elapsed time"=670.666s] [gotSchemaVersion=609] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:02.540 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=609]
[2024/09/16 23:26:02.540 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=609] ["take time"=3.775125ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.543 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.551 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=609] [neededSchemaVersion=610] ["elapsed time"=650.792s] [gotSchemaVersion=610] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:02.553 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=610]
[2024/09/16 23:26:02.553 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=610] ["take time"=4.188208ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:02.556 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.557 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=245] [table=contacts] ["ingest mode"=true] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 23:26:02.558 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{202 contacts utf8mb4 utf8mb4_bin [0x405a823080 0x405a8231e0 0x405a823340 0x405a8234a0 0x405a823600 0x405a823760 0x405a8238c0 0x405a823a20 0x405a823b80 0x405a823ce0 0x405a823e40 0x4010eee000 0x4010eee160] [0x4015aa5a70 0x4015aa5d40] [] [] public true false 0  0 0 0 0 13 2 0 0 452599260778594327 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=202] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:02.558 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=245] [physicalTableID=202] [startKey=] [endKey=]
[2024/09/16 23:26:02.562 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=245]
[2024/09/16 23:26:02.563 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260778594337, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:02.564 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=245] [table=contacts] ["ingest mode"=true] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 23:26:02.567 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/245/0]
[2024/09/16 23:26:02.568 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=202] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:02.576 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=52]
[2024/09/16 23:26:02.576 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=52] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:02.693 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=51]
[2024/09/16 23:26:02.695 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:02.695 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=51]
[2024/09/16 23:26:02.700 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:03.078 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=52] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:03.078 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=52] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:03.080 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=52] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:03.081 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{202 contacts utf8mb4 utf8mb4_bin [0x400b26c9a0 0x400b26cb00 0x400b26cc60 0x400b26cdc0 0x400b26cf20 0x400b26da20 0x400b26db80 0x400b26dce0 0x400b26de40 0x40091a6000 0x40091a6160 0x40091a62c0 0x40091a6420] [0x401c3527e0 0x401c352ab0] [] [] public true false 0  0 0 0 0 13 2 0 0 452599260778594327 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=202] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:03.082 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=52] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:03.580 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=52] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:03.783 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:03.793 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=610] [neededSchemaVersion=611] ["elapsed time"=982.75s] [gotSchemaVersion=611] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:03.795 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=611]
[2024/09/16 23:26:03.796 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=611] ["take time"=4.718209ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.799 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599260778594337, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.800 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=245] [table=contacts] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 23:26:03.806 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=611] [neededSchemaVersion=612] ["elapsed time"=599.292s] [gotSchemaVersion=612] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:03.808 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=612]
[2024/09/16 23:26:03.809 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=612] ["take time"=3.6115ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.812 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.812 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=245] [physicalTableID=202] [startKey=7480000000000000ca5f69ffff000000000002] [endKey=7480000000000000ca5f69ffff000000000002ff]
[2024/09/16 23:26:03.817 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=245]
[2024/09/16 23:26:03.818 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261106274327, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.820 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261106274327, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000ca5f69ffff000000000002,EndKey:7480000000000000ca5f69ffff000000000002ff,First:false,PhysicalTableID:202,Ingest mode:false"]
[2024/09/16 23:26:03.821 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=202] ["start key"=7480000000000000ca5f69ffff000000000002] ["end key"=7480000000000000ca5f69ffff000000000002ff]
[2024/09/16 23:26:03.821 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=202] ["range start"=7480000000000000ca5f69ffff000000000002] ["range end"=7480000000000000ca5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:26:03.821 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000ca5f69ffff000000000002] [endKey=7480000000000000ca5f69ffff000000000002ff]
[2024/09/16 23:26:03.822 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=245]
[2024/09/16 23:26:03.822 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=245]
[2024/09/16 23:26:03.822 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=245]
[2024/09/16 23:26:03.822 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 202, range: [7480000000000000ca5f69ffff000000000002, 7480000000000000ca5f69ffff000000000002ff), jobID: 245"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000ca5f69ffff000000000002ff00] ["take time"=524.333s]
[2024/09/16 23:26:03.822 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=245]
[2024/09/16 23:26:03.822 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000ca5f69ffff000000000002]
[2024/09/16 23:26:03.822 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:03.828 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=612] [neededSchemaVersion=613] ["elapsed time"=627.709s] [gotSchemaVersion=613] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:03.830 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=613]
[2024/09/16 23:26:03.831 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=613] ["take time"=3.628542ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.833 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.841 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=613] [neededSchemaVersion=614] ["elapsed time"=641.042s] [gotSchemaVersion=614] [phyTblIDs="[202]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:03.843 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=614]
[2024/09/16 23:26:03.844 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=614] ["take time"=4.175334ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.846 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.854 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=614] [neededSchemaVersion=615] ["elapsed time"=681.375s] [gotSchemaVersion=615] [phyTblIDs="[202]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:03.856 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=615]
[2024/09/16 23:26:03.857 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=615] ["take time"=3.870417ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.859 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.866 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=615] [neededSchemaVersion=616] ["elapsed time"=800.167s] [gotSchemaVersion=616] [phyTblIDs="[202]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:03.868 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=616]
[2024/09/16 23:26:03.868 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=616] ["take time"=3.8275ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.872 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [category=ddl] [job="ID:245, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261106274327, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:03.874 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:03.878 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=616] [neededSchemaVersion=617] ["elapsed time"=521.708s] [gotSchemaVersion=617] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:03.880 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=245] [version=617]
[2024/09/16 23:26:03.881 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=617] ["take time"=3.642334ms] [job="ID:245, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.887 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=245]
[2024/09/16 23:26:03.888 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=245] [tableID=202] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:03.890 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=245] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:03.890 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=245] [conn=952108040] [job="ID:245, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:02.465 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.897 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=245]
[2024/09/16 23:26:03.898 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=617] [cur_db=test] [sql="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_contactImportId_contactImports_id_fk` FOREIGN KEY (`contactImportId`) REFERENCES `contactImports`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:03.898 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:03.898 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:03.902 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:246, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:03.902 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:246, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_contactImportId_contactImports_id_fk` FOREIGN KEY (`contactImportId`) REFERENCES `contactImports`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:03.903 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.904 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"contacts_contactImportId_contactImports_id_fk\",\"L\":\"contacts_contactimportid_contactimports_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactImportId\",\"L\":\"contactimportid\"},\"offset\":10,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:03.911 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=617] [neededSchemaVersion=618] ["elapsed time"=659.25s] [gotSchemaVersion=618] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:03.913 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=618]
[2024/09/16 23:26:03.914 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=618] ["take time"=4.514083ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.918 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.925 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=618] [neededSchemaVersion=619] ["elapsed time"=656.667s] [gotSchemaVersion=619] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:03.926 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=619]
[2024/09/16 23:26:03.927 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=619] ["take time"=3.866125ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.930 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.938 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=619] [neededSchemaVersion=620] ["elapsed time"=603.25s] [gotSchemaVersion=620] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:03.939 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=620]
[2024/09/16 23:26:03.940 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=620] ["take time"=3.759375ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:03.943 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.944 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=246] [table=contacts] ["ingest mode"=true] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 23:26:03.944 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{202 contacts utf8mb4 utf8mb4_bin [0x4057425340 0x40574254a0 0x4057425600 0x400db12000 0x400db12160 0x400db122c0 0x400db12420 0x400db12580 0x400db126e0 0x400db12840 0x400db129a0 0x400db12b00 0x400db12c60] [0x4005e77cb0 0x401368e000 0x401368e240] [] [0x4001909980] public true false 0  0 0 0 0 13 3 1 0 452599261145595915 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=202] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:03.944 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=246] [physicalTableID=202] [startKey=] [endKey=]
[2024/09/16 23:26:03.949 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=246]
[2024/09/16 23:26:03.950 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261145595926, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:03.951 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=246] [table=contacts] ["ingest mode"=true] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 23:26:03.955 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/246/0]
[2024/09/16 23:26:03.959 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=202] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:03.969 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=53]
[2024/09/16 23:26:03.969 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=53] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:04.078 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=52]
[2024/09/16 23:26:04.080 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:04.080 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=52]
[2024/09/16 23:26:04.088 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:04.470 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=53] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:04.470 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=53] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:04.472 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=53] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:04.473 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{202 contacts utf8mb4 utf8mb4_bin [0x401e76b1e0 0x401e76b340 0x401e76b4a0 0x401e76b600 0x401e76b760 0x401e76b8c0 0x401e76ba20 0x401e76bb80 0x401e76bce0 0x401e76be40 0x4015d40000 0x4015d40160 0x4015d402c0] [0x401b3eb200 0x401b3eb9e0 0x4007032000] [] [0x4008c2c480] public true false 0  0 0 0 0 13 3 1 0 452599261145595915 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=202] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:04.473 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=53] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:04.971 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=53] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:05.171 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:05.179 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=620] [neededSchemaVersion=621] ["elapsed time"=639.041s] [gotSchemaVersion=621] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:05.181 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=621]
[2024/09/16 23:26:05.181 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=621] ["take time"=3.971708ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.184 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261145595926, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.185 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=246] [table=contacts] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 23:26:05.191 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=621] [neededSchemaVersion=622] ["elapsed time"=616.25s] [gotSchemaVersion=622] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:05.193 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=622]
[2024/09/16 23:26:05.193 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=622] ["take time"=3.692084ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.196 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.197 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=246] [physicalTableID=202] [startKey=7480000000000000ca5f69ffff000000000003] [endKey=7480000000000000ca5f69ffff000000000003ff]
[2024/09/16 23:26:05.202 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=246]
[2024/09/16 23:26:05.203 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261473275927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.205 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261473275927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000000ca5f69ffff000000000003,EndKey:7480000000000000ca5f69ffff000000000003ff,First:false,PhysicalTableID:202,Ingest mode:false"]
[2024/09/16 23:26:05.206 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=202] ["start key"=7480000000000000ca5f69ffff000000000003] ["end key"=7480000000000000ca5f69ffff000000000003ff]
[2024/09/16 23:26:05.206 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=202] ["range start"=7480000000000000ca5f69ffff000000000003] ["range end"=7480000000000000ca5f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:26:05.206 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000ca5f69ffff000000000003] [endKey=7480000000000000ca5f69ffff000000000003ff]
[2024/09/16 23:26:05.206 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=246]
[2024/09/16 23:26:05.206 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=246]
[2024/09/16 23:26:05.207 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=246]
[2024/09/16 23:26:05.207 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 202, range: [7480000000000000ca5f69ffff000000000003, 7480000000000000ca5f69ffff000000000003ff), jobID: 246"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000ca5f69ffff000000000003ff00] ["take time"=555.791s]
[2024/09/16 23:26:05.207 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=246]
[2024/09/16 23:26:05.207 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000ca5f69ffff000000000003]
[2024/09/16 23:26:05.207 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:05.214 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=622] [neededSchemaVersion=623] ["elapsed time"=689.417s] [gotSchemaVersion=623] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:05.215 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=623]
[2024/09/16 23:26:05.216 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=623] ["take time"=3.683292ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.219 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.226 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=623] [neededSchemaVersion=624] ["elapsed time"=602.75s] [gotSchemaVersion=624] [phyTblIDs="[202]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:05.227 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=624]
[2024/09/16 23:26:05.228 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=624] ["take time"=3.725ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.231 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.239 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=624] [neededSchemaVersion=625] ["elapsed time"=588.167s] [gotSchemaVersion=625] [phyTblIDs="[202]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:05.240 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=625]
[2024/09/16 23:26:05.241 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=625] ["take time"=3.768084ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.243 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.251 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=625] [neededSchemaVersion=626] ["elapsed time"=654.25s] [gotSchemaVersion=626] [phyTblIDs="[202]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:05.253 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=626]
[2024/09/16 23:26:05.254 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=626] ["take time"=4.21175ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.257 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [category=ddl] [job="ID:246, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261473275927, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:05.259 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:05.265 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=626] [neededSchemaVersion=627] ["elapsed time"=667.333s] [gotSchemaVersion=627] [phyTblIDs="[202]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:05.267 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=246] [version=627]
[2024/09/16 23:26:05.267 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=627] ["take time"=3.910959ms] [job="ID:246, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.273 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=246]
[2024/09/16 23:26:05.275 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=246] [tableID=202] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:05.277 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=246] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:05.277 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=246] [conn=952108040] [job="ID:246, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:202, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:03.866 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.284 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=246]
[2024/09/16 23:26:05.285 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=627] [cur_db=test] [sql="ALTER TABLE `emails` ADD CONSTRAINT `emails_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:05.285 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:05.285 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:05.289 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:247, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:05.289 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:247, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `emails` ADD CONSTRAINT `emails_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:26:05.290 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.291 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"emails_audienceId_audiences_id_fk\",\"L\":\"emails_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:05.297 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=627] [neededSchemaVersion=628] ["elapsed time"=475.333s] [gotSchemaVersion=628] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:05.299 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=628]
[2024/09/16 23:26:05.300 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=628] ["take time"=3.463416ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.302 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.309 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=628] [neededSchemaVersion=629] ["elapsed time"=521.125s] [gotSchemaVersion=629] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:05.311 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=629]
[2024/09/16 23:26:05.311 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=629] ["take time"=3.396584ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.314 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.321 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=629] [neededSchemaVersion=630] ["elapsed time"=497.417s] [gotSchemaVersion=630] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:05.322 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=630]
[2024/09/16 23:26:05.323 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=630] ["take time"=3.465292ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:05.326 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.326 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=247] [table=emails] ["ingest mode"=true] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 23:26:05.327 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{206 emails utf8mb4 utf8mb4_bin [0x400b55f4a0 0x400b55f600 0x400b55f760 0x400b55f8c0 0x400bdc2000] [0x40123b1e60] [] [] public true false 0  0 0 0 0 5 1 0 0 452599261499490345 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=206] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:05.327 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=247] [physicalTableID=206] [startKey=] [endKey=]
[2024/09/16 23:26:05.331 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=247]
[2024/09/16 23:26:05.332 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261512597512, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:05.333 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=247] [table=emails] ["ingest mode"=true] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 23:26:05.337 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/247/0]
[2024/09/16 23:26:05.338 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=206] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:05.346 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=54]
[2024/09/16 23:26:05.346 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=54] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:05.472 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=53]
[2024/09/16 23:26:05.474 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:05.474 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=53]
[2024/09/16 23:26:05.479 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:05.848 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=54] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:05.848 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=54] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:05.849 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=54] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:05.850 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{206 emails utf8mb4 utf8mb4_bin [0x400dbccb00 0x400dbccc60 0x400dbccdc0 0x400dbccf20 0x400dbcd080] [0x401528bef0] [] [] public true false 0  0 0 0 0 5 1 0 0 452599261499490345 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=206] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:05.850 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=54] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:06.352 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=54] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:06.552 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:06.560 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=630] [neededSchemaVersion=631] ["elapsed time"=468.583s] [gotSchemaVersion=631] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:06.562 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=631]
[2024/09/16 23:26:06.563 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=631] ["take time"=4.033417ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.566 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261512597512, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.566 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=247] [table=emails] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 23:26:06.572 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=631] [neededSchemaVersion=632] ["elapsed time"=579.708s] [gotSchemaVersion=632] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:06.574 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=632]
[2024/09/16 23:26:06.574 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=632] ["take time"=3.6535ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.577 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.578 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=247] [physicalTableID=206] [startKey=7480000000000000ce5f69ffff000000000001] [endKey=7480000000000000ce5f69ffff000000000001ff]
[2024/09/16 23:26:06.582 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=247]
[2024/09/16 23:26:06.583 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261840277514, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.585 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261840277514, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000ce5f69ffff000000000001,EndKey:7480000000000000ce5f69ffff000000000001ff,First:false,PhysicalTableID:206,Ingest mode:false"]
[2024/09/16 23:26:06.586 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=206] ["start key"=7480000000000000ce5f69ffff000000000001] ["end key"=7480000000000000ce5f69ffff000000000001ff]
[2024/09/16 23:26:06.586 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=206] ["range start"=7480000000000000ce5f69ffff000000000001] ["range end"=7480000000000000ce5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:26:06.586 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000ce5f69ffff000000000001] [endKey=7480000000000000ce5f69ffff000000000001ff]
[2024/09/16 23:26:06.586 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=247]
[2024/09/16 23:26:06.586 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=247]
[2024/09/16 23:26:06.586 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=247]
[2024/09/16 23:26:06.587 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 206, range: [7480000000000000ce5f69ffff000000000001, 7480000000000000ce5f69ffff000000000001ff), jobID: 247"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000ce5f69ffff000000000001ff00] ["take time"=417.833s]
[2024/09/16 23:26:06.587 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=247]
[2024/09/16 23:26:06.587 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000ce5f69ffff000000000001]
[2024/09/16 23:26:06.587 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:06.593 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=632] [neededSchemaVersion=633] ["elapsed time"=493.125s] [gotSchemaVersion=633] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:06.594 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=633]
[2024/09/16 23:26:06.595 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=633] ["take time"=3.381333ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.598 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.604 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=633] [neededSchemaVersion=634] ["elapsed time"=515.625s] [gotSchemaVersion=634] [phyTblIDs="[206]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:06.606 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=634]
[2024/09/16 23:26:06.607 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=634] ["take time"=3.8975ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.609 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.617 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=634] [neededSchemaVersion=635] ["elapsed time"=519.042s] [gotSchemaVersion=635] [phyTblIDs="[206]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:06.618 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=635]
[2024/09/16 23:26:06.619 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=635] ["take time"=3.478042ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.621 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.628 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=635] [neededSchemaVersion=636] ["elapsed time"=458.167s] [gotSchemaVersion=636] [phyTblIDs="[206]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:06.629 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=636]
[2024/09/16 23:26:06.630 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=636] ["take time"=3.171459ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.633 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [category=ddl] [job="ID:247, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261840277514, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:06.635 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:06.640 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=636] [neededSchemaVersion=637] ["elapsed time"=561.083s] [gotSchemaVersion=637] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:06.641 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=247] [version=637]
[2024/09/16 23:26:06.642 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=637] ["take time"=3.49225ms] [job="ID:247, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.646 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=247]
[2024/09/16 23:26:06.648 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=247] [tableID=206] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:06.650 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=247] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:06.650 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=247] [conn=952108040] [job="ID:247, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:05.266 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.656 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=247]
[2024/09/16 23:26:06.657 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=637] [cur_db=test] [sql="ALTER TABLE `emails` ADD CONSTRAINT `emails_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:06.657 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:06.657 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:06.661 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:248, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:06.661 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:248, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `emails` ADD CONSTRAINT `emails_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:26:06.662 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.663 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"emails_emailContentId_emailContents_id_fk\",\"L\":\"emails_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:06.670 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=637] [neededSchemaVersion=638] ["elapsed time"=539.208s] [gotSchemaVersion=638] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:06.671 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=638]
[2024/09/16 23:26:06.672 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=638] ["take time"=3.671917ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.675 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.685 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=638] [neededSchemaVersion=639] ["elapsed time"=521.5s] [gotSchemaVersion=639] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:06.687 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=639]
[2024/09/16 23:26:06.688 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=639] ["take time"=3.833583ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.690 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.697 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=639] [neededSchemaVersion=640] ["elapsed time"=557.208s] [gotSchemaVersion=640] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:06.699 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=640]
[2024/09/16 23:26:06.699 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=640] ["take time"=3.75825ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:06.702 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.702 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=248] [table=emails] ["ingest mode"=true] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 23:26:06.703 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{206 emails utf8mb4 utf8mb4_bin [0x40147cc6e0 0x40147cc840 0x40147cc9a0 0x40147ccb00 0x40147ccc60] [0x405a8534d0 0x405a853710] [] [0x400c8f9200] public true false 0  0 0 0 0 5 2 1 0 452599261866491920 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=206] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:06.703 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=248] [physicalTableID=206] [startKey=] [endKey=]
[2024/09/16 23:26:06.708 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=248]
[2024/09/16 23:26:06.709 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261866491930, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:06.709 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=248] [table=emails] ["ingest mode"=true] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 23:26:06.712 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/248/0]
[2024/09/16 23:26:06.714 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=206] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:06.721 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=55]
[2024/09/16 23:26:06.721 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=55] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:06.848 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=54]
[2024/09/16 23:26:06.850 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:06.850 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=54]
[2024/09/16 23:26:06.855 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:07.226 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=55] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:07.229 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=55] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:07.230 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=55] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:07.231 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{206 emails utf8mb4 utf8mb4_bin [0x401754c160 0x401754c2c0 0x401754c420 0x401754c580 0x401754c6e0] [0x4011aecd80 0x4011aecfc0] [] [0x400ee28000] public true false 0  0 0 0 0 5 2 1 0 452599261866491920 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=206] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:07.231 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=55] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:07.728 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=55] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:07.930 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:07.939 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=640] [neededSchemaVersion=641] ["elapsed time"=535.833s] [gotSchemaVersion=641] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:07.941 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=641]
[2024/09/16 23:26:07.941 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=641] ["take time"=4.015667ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:07.944 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599261866491930, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:07.944 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=248] [table=emails] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 23:26:07.951 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=641] [neededSchemaVersion=642] ["elapsed time"=691.541s] [gotSchemaVersion=642] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:07.952 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=642]
[2024/09/16 23:26:07.953 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=642] ["take time"=4.403499ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:07.956 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:07.957 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=248] [physicalTableID=206] [startKey=7480000000000000ce5f69ffff000000000002] [endKey=7480000000000000ce5f69ffff000000000002ff]
[2024/09/16 23:26:07.961 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=248]
[2024/09/16 23:26:07.963 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262194171928, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:07.964 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262194171928, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000ce5f69ffff000000000002,EndKey:7480000000000000ce5f69ffff000000000002ff,First:false,PhysicalTableID:206,Ingest mode:false"]
[2024/09/16 23:26:07.965 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=206] ["start key"=7480000000000000ce5f69ffff000000000002] ["end key"=7480000000000000ce5f69ffff000000000002ff]
[2024/09/16 23:26:07.966 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=206] ["range start"=7480000000000000ce5f69ffff000000000002] ["range end"=7480000000000000ce5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:26:07.966 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000ce5f69ffff000000000002] [endKey=7480000000000000ce5f69ffff000000000002ff]
[2024/09/16 23:26:07.966 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=248]
[2024/09/16 23:26:07.966 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=248]
[2024/09/16 23:26:07.966 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=248]
[2024/09/16 23:26:07.966 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 206, range: [7480000000000000ce5f69ffff000000000002, 7480000000000000ce5f69ffff000000000002ff), jobID: 248"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000ce5f69ffff000000000002ff00] ["take time"=422.459s]
[2024/09/16 23:26:07.966 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=248]
[2024/09/16 23:26:07.967 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000ce5f69ffff000000000002]
[2024/09/16 23:26:07.967 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:07.973 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=642] [neededSchemaVersion=643] ["elapsed time"=548.875s] [gotSchemaVersion=643] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:07.975 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=643]
[2024/09/16 23:26:07.976 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=643] ["take time"=3.590333ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:07.979 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:07.986 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=643] [neededSchemaVersion=644] ["elapsed time"=464.292s] [gotSchemaVersion=644] [phyTblIDs="[206]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:07.988 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=644]
[2024/09/16 23:26:07.988 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=644] ["take time"=3.259209ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:07.991 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:07.998 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=644] [neededSchemaVersion=645] ["elapsed time"=514.833s] [gotSchemaVersion=645] [phyTblIDs="[206]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:08.000 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=645]
[2024/09/16 23:26:08.000 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=645] ["take time"=3.448375ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:08.003 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:08.009 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=645] [neededSchemaVersion=646] ["elapsed time"=496.834s] [gotSchemaVersion=646] [phyTblIDs="[206]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:08.011 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=646]
[2024/09/16 23:26:08.011 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=646] ["take time"=3.364583ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:08.014 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [category=ddl] [job="ID:248, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262194171928, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:08.016 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:08.020 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=646] [neededSchemaVersion=647] ["elapsed time"=485.5s] [gotSchemaVersion=647] [phyTblIDs="[206]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:08.022 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=248] [version=647]
[2024/09/16 23:26:08.022 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=647] ["take time"=3.213791ms] [job="ID:248, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:08.027 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=248]
[2024/09/16 23:26:08.028 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=248] [tableID=206] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:08.030 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=248] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:08.030 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=248] [conn=952108040] [job="ID:248, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:206, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:06.616 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:08.035 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=248]
[2024/09/16 23:26:08.036 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=647] [cur_db=test] [sql="ALTER TABLE `segments` ADD CONSTRAINT `segments_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:08.036 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=segments] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:08.037 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=segments] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:08.040 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:249, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:08.040 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:249, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `segments` ADD CONSTRAINT `segments_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:08.041 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:08.041 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"segments_audienceId_audiences_id_fk\",\"L\":\"segments_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:08.047 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=647] [neededSchemaVersion=648] ["elapsed time"=461.458s] [gotSchemaVersion=648] [phyTblIDs="[208]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:08.048 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=648]
[2024/09/16 23:26:08.049 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=648] ["take time"=3.473083ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:08.051 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:08.057 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=648] [neededSchemaVersion=649] ["elapsed time"=502.75s] [gotSchemaVersion=649] [phyTblIDs="[208]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:08.058 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=649]
[2024/09/16 23:26:08.059 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=649] ["take time"=3.126958ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:08.061 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:08.067 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=649] [neededSchemaVersion=650] ["elapsed time"=396.125s] [gotSchemaVersion=650] [phyTblIDs="[208]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:08.068 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=650]
[2024/09/16 23:26:08.069 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=650] ["take time"=3.102333ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:08.071 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:08.071 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=249] [table=segments] ["ingest mode"=true] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 23:26:08.072 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{208 segments utf8mb4 utf8mb4_bin [0x402220a6e0 0x402220a840 0x402220a9a0 0x402220ab00] [0x40065bf170] [] [] public true false 0  0 0 0 0 4 1 0 0 452599262220386349 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=208] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:08.072 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=249] [physicalTableID=208] [startKey=] [endKey=]
[2024/09/16 23:26:08.076 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=249]
[2024/09/16 23:26:08.077 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262233231367, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:08.077 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=249] [table=segments] ["ingest mode"=true] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 23:26:08.081 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/249/0]
[2024/09/16 23:26:08.084 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=208] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:08.093 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=56]
[2024/09/16 23:26:08.093 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=56] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:08.224 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=55]
[2024/09/16 23:26:08.226 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:08.226 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=55]
[2024/09/16 23:26:08.232 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:08.597 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=56] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:08.598 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=56] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:08.600 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=56] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:08.602 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{208 segments utf8mb4 utf8mb4_bin [0x4025a38000 0x4025a38160 0x4025a382c0 0x4025a38420] [0x4012772630] [] [] public true false 0  0 0 0 0 4 1 0 0 452599262220386349 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=208] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:08.602 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=56] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:09.100 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=56] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:09.299 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:09.309 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=650] [neededSchemaVersion=651] ["elapsed time"=594.541s] [gotSchemaVersion=651] [phyTblIDs="[208]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:09.310 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=651]
[2024/09/16 23:26:09.311 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=651] ["take time"=4.170375ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.314 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262233231367, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.315 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=249] [table=segments] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 23:26:09.321 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=651] [neededSchemaVersion=652] ["elapsed time"=505.583s] [gotSchemaVersion=652] [phyTblIDs="[208]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:09.323 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=652]
[2024/09/16 23:26:09.323 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=652] ["take time"=3.329958ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.326 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.326 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=249] [physicalTableID=208] [startKey=7480000000000000d05f69ffff000000000001] [endKey=7480000000000000d05f69ffff000000000001ff]
[2024/09/16 23:26:09.331 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=249]
[2024/09/16 23:26:09.332 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262560911369, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.334 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262560911369, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000d05f69ffff000000000001,EndKey:7480000000000000d05f69ffff000000000001ff,First:false,PhysicalTableID:208,Ingest mode:false"]
[2024/09/16 23:26:09.335 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=208] ["start key"=7480000000000000d05f69ffff000000000001] ["end key"=7480000000000000d05f69ffff000000000001ff]
[2024/09/16 23:26:09.335 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=208] ["range start"=7480000000000000d05f69ffff000000000001] ["range end"=7480000000000000d05f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:26:09.335 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000d05f69ffff000000000001] [endKey=7480000000000000d05f69ffff000000000001ff]
[2024/09/16 23:26:09.335 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=249]
[2024/09/16 23:26:09.335 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=249]
[2024/09/16 23:26:09.335 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=249]
[2024/09/16 23:26:09.336 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 208, range: [7480000000000000d05f69ffff000000000001, 7480000000000000d05f69ffff000000000001ff), jobID: 249"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000d05f69ffff000000000001ff00] ["take time"=411.25s]
[2024/09/16 23:26:09.336 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=249]
[2024/09/16 23:26:09.336 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000d05f69ffff000000000001]
[2024/09/16 23:26:09.336 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:09.341 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=652] [neededSchemaVersion=653] ["elapsed time"=443.625s] [gotSchemaVersion=653] [phyTblIDs="[208]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:09.343 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=653]
[2024/09/16 23:26:09.343 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=653] ["take time"=3.247375ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.346 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.352 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=653] [neededSchemaVersion=654] ["elapsed time"=472.167s] [gotSchemaVersion=654] [phyTblIDs="[208]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:09.354 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=654]
[2024/09/16 23:26:09.354 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=654] ["take time"=3.233333ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.357 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.364 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=654] [neededSchemaVersion=655] ["elapsed time"=458.125s] [gotSchemaVersion=655] [phyTblIDs="[208]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:09.366 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=655]
[2024/09/16 23:26:09.367 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=655] ["take time"=3.538709ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.369 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.377 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=655] [neededSchemaVersion=656] ["elapsed time"=499.792s] [gotSchemaVersion=656] [phyTblIDs="[208]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:09.378 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=656]
[2024/09/16 23:26:09.379 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=656] ["take time"=3.600292ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.382 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [category=ddl] [job="ID:249, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262560911369, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:09.384 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:09.388 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=656] [neededSchemaVersion=657] ["elapsed time"=427.708s] [gotSchemaVersion=657] [phyTblIDs="[208]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:09.390 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=249] [version=657]
[2024/09/16 23:26:09.391 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=657] ["take time"=3.472375ms] [job="ID:249, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.396 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=249]
[2024/09/16 23:26:09.397 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=249] [tableID=208] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:09.399 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=249] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:09.399 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=249] [conn=952108040] [job="ID:249, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:208, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:08.016 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.405 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=249]
[2024/09/16 23:26:09.406 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=657] [cur_db=test] [sql="ALTER TABLE `sendingDomains` ADD CONSTRAINT `sendingDomains_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:09.408 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=sendingdomains] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:09.409 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=sendingdomains] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:09.417 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:250, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:09.417 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:250, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `sendingDomains` ADD CONSTRAINT `sendingDomains_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:09.418 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.419 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"sendingDomains_teamId_teams_id_fk\",\"L\":\"sendingdomains_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:09.428 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=657] [neededSchemaVersion=658] ["elapsed time"=736.083s] [gotSchemaVersion=658] [phyTblIDs="[210]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:09.430 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=658]
[2024/09/16 23:26:09.431 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=658] ["take time"=4.82875ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.437 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.450 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=658] [neededSchemaVersion=659] ["elapsed time"=622.542s] [gotSchemaVersion=659] [phyTblIDs="[210]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:09.452 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=659]
[2024/09/16 23:26:09.453 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=659] ["take time"=5.330125ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.457 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.464 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=659] [neededSchemaVersion=660] ["elapsed time"=612.375s] [gotSchemaVersion=660] [phyTblIDs="[210]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:09.466 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=660]
[2024/09/16 23:26:09.467 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=660] ["take time"=4.173917ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:09.470 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.470 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=250] [table=sendingDomains] ["ingest mode"=true] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 23:26:09.472 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{210 sendingDomains utf8mb4 utf8mb4_bin [0x402bd234a0 0x402bd23600 0x402bd23760 0x402bd238c0 0x402bd23a20 0x402bd23b80 0x402bd23ce0 0x402bd23e40 0x402be8c000 0x402be8c160] [0x4015ee4bd0] [] [] public true false 0  0 0 0 0 10 1 0 0 452599262587387924 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=210] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:09.472 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=250] [physicalTableID=210] [startKey=] [endKey=]
[2024/09/16 23:26:09.476 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=250]
[2024/09/16 23:26:09.477 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262600495109, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:09.478 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=250] [table=sendingDomains] ["ingest mode"=true] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 23:26:09.482 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/250/0]
[2024/09/16 23:26:09.483 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=210] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:09.493 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=57]
[2024/09/16 23:26:09.494 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=57] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:09.597 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=56]
[2024/09/16 23:26:09.599 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:09.599 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=56]
[2024/09/16 23:26:09.605 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:09.996 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=57] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:09.996 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=57] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:09.998 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=57] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:10.000 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{210 sendingDomains utf8mb4 utf8mb4_bin [0x402d5be2c0 0x402d5be420 0x402d5be580 0x402d5be6e0 0x402d5be840 0x402d5be9a0 0x402d5beb00 0x402d5bec60 0x402d5bedc0 0x402d5bef20] [0x40173a2630] [] [] public true false 0  0 0 0 0 10 1 0 0 452599262587387924 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=210] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:10.000 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=57] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:10.499 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=57] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:10.699 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:10.708 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=660] [neededSchemaVersion=661] ["elapsed time"=585.208s] [gotSchemaVersion=661] [phyTblIDs="[210]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:10.710 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=661]
[2024/09/16 23:26:10.711 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=661] ["take time"=4.147292ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.713 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262600495109, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.714 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=250] [table=sendingDomains] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 23:26:10.720 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=661] [neededSchemaVersion=662] ["elapsed time"=677.083s] [gotSchemaVersion=662] [phyTblIDs="[210]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:10.722 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=662]
[2024/09/16 23:26:10.723 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=662] ["take time"=3.931709ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.725 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.726 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=250] [physicalTableID=210] [startKey=7480000000000000d25f69ffff000000000001] [endKey=7480000000000000d25f69ffff000000000001ff]
[2024/09/16 23:26:10.731 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=250]
[2024/09/16 23:26:10.732 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262928437256, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.734 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262928437256, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000d25f69ffff000000000001,EndKey:7480000000000000d25f69ffff000000000001ff,First:false,PhysicalTableID:210,Ingest mode:false"]
[2024/09/16 23:26:10.735 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=210] ["start key"=7480000000000000d25f69ffff000000000001] ["end key"=7480000000000000d25f69ffff000000000001ff]
[2024/09/16 23:26:10.735 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=210] ["range start"=7480000000000000d25f69ffff000000000001] ["range end"=7480000000000000d25f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:26:10.735 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000d25f69ffff000000000001] [endKey=7480000000000000d25f69ffff000000000001ff]
[2024/09/16 23:26:10.735 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=250]
[2024/09/16 23:26:10.735 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=250]
[2024/09/16 23:26:10.735 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=250]
[2024/09/16 23:26:10.736 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 210, range: [7480000000000000d25f69ffff000000000001, 7480000000000000d25f69ffff000000000001ff), jobID: 250"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000d25f69ffff000000000001ff00] ["take time"=323.916s]
[2024/09/16 23:26:10.736 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=250]
[2024/09/16 23:26:10.736 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000d25f69ffff000000000001]
[2024/09/16 23:26:10.736 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:10.742 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=662] [neededSchemaVersion=663] ["elapsed time"=568.834s] [gotSchemaVersion=663] [phyTblIDs="[210]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:10.743 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=663]
[2024/09/16 23:26:10.744 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=663] ["take time"=3.681208ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.747 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.753 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=663] [neededSchemaVersion=664] ["elapsed time"=520.666s] [gotSchemaVersion=664] [phyTblIDs="[210]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:10.754 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=664]
[2024/09/16 23:26:10.755 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=664] ["take time"=3.502916ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.757 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.765 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=664] [neededSchemaVersion=665] ["elapsed time"=578.042s] [gotSchemaVersion=665] [phyTblIDs="[210]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:10.767 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=665]
[2024/09/16 23:26:10.767 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=665] ["take time"=3.389958ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.770 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.776 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=665] [neededSchemaVersion=666] ["elapsed time"=616.459s] [gotSchemaVersion=666] [phyTblIDs="[210]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:10.778 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=666]
[2024/09/16 23:26:10.779 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=666] ["take time"=3.661791ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.782 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [category=ddl] [job="ID:250, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262928437256, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:10.783 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:10.789 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=666] [neededSchemaVersion=667] ["elapsed time"=797.125s] [gotSchemaVersion=667] [phyTblIDs="[210]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:10.791 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=250] [version=667]
[2024/09/16 23:26:10.792 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=667] ["take time"=4.683541ms] [job="ID:250, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.798 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=250]
[2024/09/16 23:26:10.799 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=250] [tableID=210] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:10.801 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=250] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:10.802 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=250] [conn=952108040] [job="ID:250, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:210, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:09.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.809 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=250]
[2024/09/16 23:26:10.810 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=667] [cur_db=test] [sql="ALTER TABLE `tags` ADD CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:10.810 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tags] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:10.810 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tags] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:10.814 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:251, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:10.814 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:251, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `tags` ADD CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:10.815 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.816 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"tags_audienceId_audiences_id_fk\",\"L\":\"tags_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:10.822 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=667] [neededSchemaVersion=668] ["elapsed time"=459.958s] [gotSchemaVersion=668] [phyTblIDs="[214]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:10.823 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=668]
[2024/09/16 23:26:10.824 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=668] ["take time"=3.382458ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.827 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.833 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=668] [neededSchemaVersion=669] ["elapsed time"=568.25s] [gotSchemaVersion=669] [phyTblIDs="[214]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:10.836 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=669]
[2024/09/16 23:26:10.836 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=669] ["take time"=4.462375ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.839 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.845 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=669] [neededSchemaVersion=670] ["elapsed time"=548.75s] [gotSchemaVersion=670] [phyTblIDs="[214]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:10.846 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=670]
[2024/09/16 23:26:10.847 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=670] ["take time"=3.265125ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:10.849 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.850 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=251] [table=tags] ["ingest mode"=true] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 23:26:10.851 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{214 tags utf8mb4 utf8mb4_bin [0x4016162c60 0x4016162dc0 0x4016162f20 0x4013bbf080] [0x401b8a3a70 0x401b8a3d40] [] [] public true false 0  0 0 0 0 4 2 0 0 452599262954127379 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=214] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:10.851 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=251] [physicalTableID=214] [startKey=] [endKey=]
[2024/09/16 23:26:10.855 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=251]
[2024/09/16 23:26:10.856 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262954127389, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:10.857 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=251] [table=tags] ["ingest mode"=true] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 23:26:10.860 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/251/0]
[2024/09/16 23:26:10.861 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=214] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:10.872 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=58]
[2024/09/16 23:26:10.872 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=58] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:10.995 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=57]
[2024/09/16 23:26:10.998 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:10.998 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=57]
[2024/09/16 23:26:11.003 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:11.374 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=58] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:11.375 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=58] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:11.377 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=58] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:11.379 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{214 tags utf8mb4 utf8mb4_bin [0x402b54d600 0x402b54d760 0x402c0ca580 0x402c0ca6e0] [0x401c0bb4d0 0x401c0bb7a0] [] [] public true false 0  0 0 0 0 4 2 0 0 452599262954127379 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=214] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:11.379 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=58] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:11.874 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=58] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:12.074 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:12.083 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=670] [neededSchemaVersion=671] ["elapsed time"=632.625s] [gotSchemaVersion=671] [phyTblIDs="[214]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:12.085 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=671]
[2024/09/16 23:26:12.086 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=671] ["take time"=4.971209ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.089 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599262954127389, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.090 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=251] [table=tags] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 23:26:12.097 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=671] [neededSchemaVersion=672] ["elapsed time"=443.333s] [gotSchemaVersion=672] [phyTblIDs="[214]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:12.099 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=672]
[2024/09/16 23:26:12.100 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=672] ["take time"=3.734875ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.102 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.103 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=251] [physicalTableID=214] [startKey=7480000000000000d65f69ffff000000000002] [endKey=7480000000000000d65f69ffff000000000002ff]
[2024/09/16 23:26:12.107 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=251]
[2024/09/16 23:26:12.108 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263282069527, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.110 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263282069527, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000d65f69ffff000000000002,EndKey:7480000000000000d65f69ffff000000000002ff,First:false,PhysicalTableID:214,Ingest mode:false"]
[2024/09/16 23:26:12.111 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=214] ["start key"=7480000000000000d65f69ffff000000000002] ["end key"=7480000000000000d65f69ffff000000000002ff]
[2024/09/16 23:26:12.111 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=214] ["range start"=7480000000000000d65f69ffff000000000002] ["range end"=7480000000000000d65f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:26:12.111 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000d65f69ffff000000000002] [endKey=7480000000000000d65f69ffff000000000002ff]
[2024/09/16 23:26:12.112 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=251]
[2024/09/16 23:26:12.112 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=251]
[2024/09/16 23:26:12.112 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=251]
[2024/09/16 23:26:12.112 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 214, range: [7480000000000000d65f69ffff000000000002, 7480000000000000d65f69ffff000000000002ff), jobID: 251"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000d65f69ffff000000000002ff00] ["take time"=622.083s]
[2024/09/16 23:26:12.112 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=251]
[2024/09/16 23:26:12.112 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000d65f69ffff000000000002]
[2024/09/16 23:26:12.112 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:12.119 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=672] [neededSchemaVersion=673] ["elapsed time"=544.708s] [gotSchemaVersion=673] [phyTblIDs="[214]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:12.121 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=673]
[2024/09/16 23:26:12.121 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=673] ["take time"=3.967584ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.125 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.133 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=673] [neededSchemaVersion=674] ["elapsed time"=606.458s] [gotSchemaVersion=674] [phyTblIDs="[214]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:12.135 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=674]
[2024/09/16 23:26:12.136 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=674] ["take time"=4.734625ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.139 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.148 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=674] [neededSchemaVersion=675] ["elapsed time"=457.625s] [gotSchemaVersion=675] [phyTblIDs="[214]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:12.149 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=675]
[2024/09/16 23:26:12.150 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=675] ["take time"=3.840916ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.153 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.160 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=675] [neededSchemaVersion=676] ["elapsed time"=536.167s] [gotSchemaVersion=676] [phyTblIDs="[214]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:12.161 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=676]
[2024/09/16 23:26:12.162 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=676] ["take time"=3.819042ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.165 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [category=ddl] [job="ID:251, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263282069527, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:12.167 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:12.172 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=676] [neededSchemaVersion=677] ["elapsed time"=550.875s] [gotSchemaVersion=677] [phyTblIDs="[214]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:12.173 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=251] [version=677]
[2024/09/16 23:26:12.174 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=677] ["take time"=3.348625ms] [job="ID:251, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.179 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=251]
[2024/09/16 23:26:12.181 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=251] [tableID=214] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:12.183 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=251] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:12.183 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=251] [conn=952108040] [job="ID:251, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:214, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:10.765 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.189 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=251]
[2024/09/16 23:26:12.190 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=677] [cur_db=test] [sql="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:12.194 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:252, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:26:12.194 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:252, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:12.195 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=252] [conn=952108040] [category=ddl] [job="ID:252, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:26:12.202 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=677] [neededSchemaVersion=678] ["elapsed time"=489.75s] [gotSchemaVersion=678] [phyTblIDs="[216]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:12.203 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=252] [version=678]
[2024/09/16 23:26:12.204 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=678] ["take time"=3.358ms] [job="ID:252, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:26:12.207 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=252] [conn=952108040] [category=ddl] [job="ID:252, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:26:12.215 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=678] [neededSchemaVersion=679] ["elapsed time"=569.25s] [gotSchemaVersion=679] [phyTblIDs="[216]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:12.217 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=252] [version=679]
[2024/09/16 23:26:12.217 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=679] ["take time"=3.415875ms] [job="ID:252, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:26:12.220 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=252] [conn=952108040] [category=ddl] [job="ID:252, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:26:12.227 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=679] [neededSchemaVersion=680] ["elapsed time"=811.458s] [gotSchemaVersion=680] [phyTblIDs="[216]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:12.229 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=252] [version=680]
[2024/09/16 23:26:12.230 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=680] ["take time"=4.890834ms] [job="ID:252, Type:add foreign key, State:done, SchemaState:public, SchemaID:182, TableID:216, RowCount:0, ArgLen:2, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:26:12.234 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=252] [conn=952108040] [job="ID:252, Type:add foreign key, State:synced, SchemaState:public, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.166 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:26:12.239 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=252]
[2024/09/16 23:26:12.240 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=680] [cur_db=test] [sql="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:12.241 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:12.241 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:12.244 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:253, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:12.245 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:253, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:12.246 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.247 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"tagsOnContacts_contactId_contacts_id_fk\",\"L\":\"tagsoncontacts_contactid_contacts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:12.253 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=680] [neededSchemaVersion=681] ["elapsed time"=469.667s] [gotSchemaVersion=681] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:12.255 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=681]
[2024/09/16 23:26:12.256 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=681] ["take time"=3.87675ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.259 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.266 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=681] [neededSchemaVersion=682] ["elapsed time"=436.333s] [gotSchemaVersion=682] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:12.268 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=682]
[2024/09/16 23:26:12.269 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=682] ["take time"=3.731042ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.271 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.279 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=682] [neededSchemaVersion=683] ["elapsed time"=513.25s] [gotSchemaVersion=683] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:12.280 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=683]
[2024/09/16 23:26:12.281 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=683] ["take time"=3.8065ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:12.284 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.284 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=253] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 23:26:12.285 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{216 tagsOnContacts utf8mb4 utf8mb4_bin [0x4009109600 0x4009109760 0x40091098c0 0x4009109a20] [0x4021293ef0 0x402171a240] [] [0x402596b800] public true false 0  0 0 0 0 4 2 1 0 452599263334236165 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 6 182}"] ["table/partition ID"=216] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:12.285 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=253] [physicalTableID=216] [startKey=] [endKey=]
[2024/09/16 23:26:12.290 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=253]
[2024/09/16 23:26:12.291 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263334236175, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:12.292 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=253] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 23:26:12.295 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/253/0]
[2024/09/16 23:26:12.298 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=216] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:12.307 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=59]
[2024/09/16 23:26:12.307 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=59] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:12.374 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=58]
[2024/09/16 23:26:12.376 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:12.376 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=58]
[2024/09/16 23:26:12.381 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:12.809 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=59] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:12.809 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=59] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:12.810 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=59] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:12.811 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{216 tagsOnContacts utf8mb4 utf8mb4_bin [0x4009589080 0x40095891e0 0x4009589340 0x40095894a0] [0x4023965050 0x4023965320] [] [0x4027e8a240] public true false 0  0 0 0 0 4 2 1 0 452599263334236165 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 6 182}"] ["table/partition ID"=216] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:12.811 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=59] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:13.314 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=59] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:13.510 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:13.519 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=683] [neededSchemaVersion=684] ["elapsed time"=480.875s] [gotSchemaVersion=684] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:13.521 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=684]
[2024/09/16 23:26:13.522 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=684] ["take time"=3.701209ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.524 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263334236175, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.525 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=253] [table=tagsOnContacts] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 23:26:13.531 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=684] [neededSchemaVersion=685] ["elapsed time"=478.959s] [gotSchemaVersion=685] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:13.532 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=685]
[2024/09/16 23:26:13.533 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=685] ["take time"=3.493416ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.537 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.537 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=253] [physicalTableID=216] [startKey=7480000000000000d85f69ffff000000000002] [endKey=7480000000000000d85f69ffff000000000002ff]
[2024/09/16 23:26:13.542 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=253]
[2024/09/16 23:26:13.544 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263662178325, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.546 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263662178325, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000d85f69ffff000000000002,EndKey:7480000000000000d85f69ffff000000000002ff,First:false,PhysicalTableID:216,Ingest mode:false"]
[2024/09/16 23:26:13.547 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=216] ["start key"=7480000000000000d85f69ffff000000000002] ["end key"=7480000000000000d85f69ffff000000000002ff]
[2024/09/16 23:26:13.547 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=216] ["range start"=7480000000000000d85f69ffff000000000002] ["range end"=7480000000000000d85f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:26:13.547 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000d85f69ffff000000000002] [endKey=7480000000000000d85f69ffff000000000002ff]
[2024/09/16 23:26:13.547 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=253]
[2024/09/16 23:26:13.547 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=253]
[2024/09/16 23:26:13.547 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=253]
[2024/09/16 23:26:13.548 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 216, range: [7480000000000000d85f69ffff000000000002, 7480000000000000d85f69ffff000000000002ff), jobID: 253"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000d85f69ffff000000000002ff00] ["take time"=455.291s]
[2024/09/16 23:26:13.548 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=253]
[2024/09/16 23:26:13.548 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000d85f69ffff000000000002]
[2024/09/16 23:26:13.548 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:13.555 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=685] [neededSchemaVersion=686] ["elapsed time"=486.375s] [gotSchemaVersion=686] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:13.556 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=686]
[2024/09/16 23:26:13.557 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=686] ["take time"=3.381042ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.559 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.566 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=686] [neededSchemaVersion=687] ["elapsed time"=522.125s] [gotSchemaVersion=687] [phyTblIDs="[216]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:13.568 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=687]
[2024/09/16 23:26:13.569 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=687] ["take time"=4.117333ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.571 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.578 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=687] [neededSchemaVersion=688] ["elapsed time"=495.042s] [gotSchemaVersion=688] [phyTblIDs="[216]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:13.580 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=688]
[2024/09/16 23:26:13.581 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=688] ["take time"=3.347959ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.583 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.589 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=688] [neededSchemaVersion=689] ["elapsed time"=527s] [gotSchemaVersion=689] [phyTblIDs="[216]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:13.590 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=689]
[2024/09/16 23:26:13.591 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=689] ["take time"=3.166125ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.594 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [category=ddl] [job="ID:253, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263662178325, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:13.596 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:13.600 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=689] [neededSchemaVersion=690] ["elapsed time"=514.417s] [gotSchemaVersion=690] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:13.602 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=253] [version=690]
[2024/09/16 23:26:13.602 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=690] ["take time"=3.413ms] [job="ID:253, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.607 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=253]
[2024/09/16 23:26:13.609 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=253] [tableID=216] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:13.610 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=253] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:13.611 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=253] [conn=952108040] [job="ID:253, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:12.215 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.617 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=253]
[2024/09/16 23:26:13.618 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=690] [cur_db=test] [sql="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:13.619 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:13.619 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:13.623 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:254, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:13.623 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:254, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:13.625 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.625 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"teamMemberships_userId_users_id_fk\",\"L\":\"teammemberships_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:13.632 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=690] [neededSchemaVersion=691] ["elapsed time"=652.875s] [gotSchemaVersion=691] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:13.634 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=691]
[2024/09/16 23:26:13.635 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=691] ["take time"=4.415792ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.638 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.644 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=691] [neededSchemaVersion=692] ["elapsed time"=606.25s] [gotSchemaVersion=692] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:13.646 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=692]
[2024/09/16 23:26:13.647 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=692] ["take time"=3.70875ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.649 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.655 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=692] [neededSchemaVersion=693] ["elapsed time"=621.583s] [gotSchemaVersion=693] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:13.657 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=693]
[2024/09/16 23:26:13.657 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=693] ["take time"=3.452208ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:13.660 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.660 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=254] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 23:26:13.661 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{218 teamMemberships utf8mb4 utf8mb4_bin [0x400b10ec60 0x400b10edc0 0x400b10ef20 0x400b10f080 0x400b10f1e0 0x400b10f340 0x400b10f4a0 0x400b10f600] [0x40288dafc0] [] [] public true false 0  0 0 0 0 8 1 0 0 452599263688130590 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=218] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:13.661 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=254] [physicalTableID=218] [startKey=] [endKey=]
[2024/09/16 23:26:13.665 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=254]
[2024/09/16 23:26:13.666 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263688130600, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:13.667 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=254] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 23:26:13.671 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/254/0]
[2024/09/16 23:26:13.671 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=218] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:13.680 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=60]
[2024/09/16 23:26:13.680 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=60] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:13.809 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=59]
[2024/09/16 23:26:13.811 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:13.812 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=59]
[2024/09/16 23:26:13.818 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:14.182 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=60] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:14.182 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=60] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:14.183 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=60] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:14.184 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{218 teamMemberships utf8mb4 utf8mb4_bin [0x400bb82000 0x400bb82160 0x400bb822c0 0x400bb82420 0x400bb82580 0x400bb826e0 0x400bb82840 0x400bb829a0] [0x4029bfeb40] [] [] public true false 0  0 0 0 0 8 1 0 0 452599263688130590 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=218] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:14.185 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=60] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:14.687 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=60] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:14.889 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:14.897 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=693] [neededSchemaVersion=694] ["elapsed time"=585.042s] [gotSchemaVersion=694] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:14.899 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=694]
[2024/09/16 23:26:14.900 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=694] ["take time"=4.349333ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:14.903 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599263688130600, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:14.903 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=254] [table=teamMemberships] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 23:26:14.910 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=694] [neededSchemaVersion=695] ["elapsed time"=554.083s] [gotSchemaVersion=695] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:14.911 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=695]
[2024/09/16 23:26:14.912 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=695] ["take time"=3.799916ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:14.916 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:14.917 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=254] [physicalTableID=218] [startKey=7480000000000000da5f69ffff000000000001] [endKey=7480000000000000da5f69ffff000000000001ff]
[2024/09/16 23:26:14.921 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=254]
[2024/09/16 23:26:14.923 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264029179906, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:14.924 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264029179906, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000da5f69ffff000000000001,EndKey:7480000000000000da5f69ffff000000000001ff,First:false,PhysicalTableID:218,Ingest mode:false"]
[2024/09/16 23:26:14.926 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=218] ["start key"=7480000000000000da5f69ffff000000000001] ["end key"=7480000000000000da5f69ffff000000000001ff]
[2024/09/16 23:26:14.926 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=218] ["range start"=7480000000000000da5f69ffff000000000001] ["range end"=7480000000000000da5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:26:14.926 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000da5f69ffff000000000001] [endKey=7480000000000000da5f69ffff000000000001ff]
[2024/09/16 23:26:14.926 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=254]
[2024/09/16 23:26:14.926 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=254]
[2024/09/16 23:26:14.926 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=254]
[2024/09/16 23:26:14.927 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [task="taskID: 1, physicalTableID: 218, range: [7480000000000000da5f69ffff000000000001, 7480000000000000da5f69ffff000000000001ff), jobID: 254"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000da5f69ffff000000000001ff00] ["take time"=535.25s]
[2024/09/16 23:26:14.927 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=254]
[2024/09/16 23:26:14.927 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000da5f69ffff000000000001]
[2024/09/16 23:26:14.927 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:14.933 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=695] [neededSchemaVersion=696] ["elapsed time"=555.083s] [gotSchemaVersion=696] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:14.935 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=696]
[2024/09/16 23:26:14.935 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=696] ["take time"=3.560041ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:14.938 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:14.945 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=696] [neededSchemaVersion=697] ["elapsed time"=524.875s] [gotSchemaVersion=697] [phyTblIDs="[218]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:14.946 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=697]
[2024/09/16 23:26:14.947 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=697] ["take time"=3.550083ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:14.950 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:14.957 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=697] [neededSchemaVersion=698] ["elapsed time"=690.375s] [gotSchemaVersion=698] [phyTblIDs="[218]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:14.964 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=698]
[2024/09/16 23:26:14.965 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=698] ["take time"=9.192875ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:14.968 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:14.975 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=698] [neededSchemaVersion=699] ["elapsed time"=506.458s] [gotSchemaVersion=699] [phyTblIDs="[218]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:14.977 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=699]
[2024/09/16 23:26:14.977 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=699] ["take time"=3.717416ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:14.980 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [category=ddl] [job="ID:254, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264029179906, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:14.982 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:14.987 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=699] [neededSchemaVersion=700] ["elapsed time"=534.125s] [gotSchemaVersion=700] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:14.989 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=254] [version=700]
[2024/09/16 23:26:14.989 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=700] ["take time"=3.566375ms] [job="ID:254, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:14.994 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=254]
[2024/09/16 23:26:14.996 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=254] [tableID=218] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:14.998 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=254] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:14.998 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=254] [conn=952108040] [job="ID:254, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:13.615 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:15.005 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=254]
[2024/09/16 23:26:15.005 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=700] [cur_db=test] [sql="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:15.006 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:15.006 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:15.009 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:255, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:15.009 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:255, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:15.011 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:15.011 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"teamMemberships_teamId_teams_id_fk\",\"L\":\"teammemberships_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:15.017 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=700] [neededSchemaVersion=701] ["elapsed time"=498.167s] [gotSchemaVersion=701] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:15.018 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=701]
[2024/09/16 23:26:15.019 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=701] ["take time"=3.308625ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:15.022 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:15.028 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=701] [neededSchemaVersion=702] ["elapsed time"=489.166s] [gotSchemaVersion=702] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:15.029 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=702]
[2024/09/16 23:26:15.030 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=702] ["take time"=3.319709ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:15.032 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:15.040 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=702] [neededSchemaVersion=703] ["elapsed time"=505.75s] [gotSchemaVersion=703] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:15.041 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=703]
[2024/09/16 23:26:15.042 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=703] ["take time"=3.667ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:15.045 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:15.046 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=255] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 23:26:15.047 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{218 teamMemberships utf8mb4 utf8mb4_bin [0x400d246c60 0x400d246dc0 0x400d246f20 0x400d247080 0x400d2471e0 0x400d247340 0x400d2474a0 0x400d247600] [0x402c570f30 0x402c571170] [] [0x40116bd140] public true false 0  0 0 0 0 8 2 1 0 452599264055394318 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=218] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:15.047 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=255] [physicalTableID=218] [startKey=] [endKey=]
[2024/09/16 23:26:15.052 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=255]
[2024/09/16 23:26:15.053 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264055394329, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:15.053 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=255] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 23:26:15.057 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/255/0]
[2024/09/16 23:26:15.058 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=218] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:15.066 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=61]
[2024/09/16 23:26:15.066 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=61] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:15.182 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=60]
[2024/09/16 23:26:15.184 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:15.184 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=60]
[2024/09/16 23:26:15.190 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:15.568 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=61] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:15.569 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=61] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:15.571 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=61] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:15.572 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{218 teamMemberships utf8mb4 utf8mb4_bin [0x400d63e420 0x400d63e580 0x400d63e6e0 0x400d63e840 0x400d63e9a0 0x400d63eb00 0x400d63ec60 0x400d63edc0] [0x402d698510 0x402d698750] [] [0x4010afd200] public true false 0  0 0 0 0 8 2 1 0 452599264055394318 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 182}"] ["table/partition ID"=218] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:15.572 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=61] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:16.071 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=61] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:16.273 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:16.281 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=703] [neededSchemaVersion=704] ["elapsed time"=495.75s] [gotSchemaVersion=704] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:16.282 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=704]
[2024/09/16 23:26:16.283 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=704] ["take time"=3.515875ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.286 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264055394329, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.286 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=255] [table=teamMemberships] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 23:26:16.293 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=704] [neededSchemaVersion=705] ["elapsed time"=460.791s] [gotSchemaVersion=705] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:16.294 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=705]
[2024/09/16 23:26:16.295 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=705] ["take time"=3.719333ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.298 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.298 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=255] [physicalTableID=218] [startKey=7480000000000000da5f69ffff000000000002] [endKey=7480000000000000da5f69ffff000000000002ff]
[2024/09/16 23:26:16.303 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=255]
[2024/09/16 23:26:16.305 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264383074326, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.306 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264383074326, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000000da5f69ffff000000000002,EndKey:7480000000000000da5f69ffff000000000002ff,First:false,PhysicalTableID:218,Ingest mode:false"]
[2024/09/16 23:26:16.307 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=218] ["start key"=7480000000000000da5f69ffff000000000002] ["end key"=7480000000000000da5f69ffff000000000002ff]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=218] ["range start"=7480000000000000da5f69ffff000000000002] ["range end"=7480000000000000da5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000da5f69ffff000000000002] [endKey=7480000000000000da5f69ffff000000000002ff]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=255]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=255]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=255]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 218, range: [7480000000000000da5f69ffff000000000002, 7480000000000000da5f69ffff000000000002ff), jobID: 255"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000da5f69ffff000000000002ff00] ["take time"=314.291s]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=255]
[2024/09/16 23:26:16.308 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000da5f69ffff000000000002]
[2024/09/16 23:26:16.308 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:16.314 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=705] [neededSchemaVersion=706] ["elapsed time"=614.375s] [gotSchemaVersion=706] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:16.315 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=706]
[2024/09/16 23:26:16.316 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=706] ["take time"=3.75225ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.319 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.325 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=706] [neededSchemaVersion=707] ["elapsed time"=508.208s] [gotSchemaVersion=707] [phyTblIDs="[218]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:16.326 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=707]
[2024/09/16 23:26:16.327 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=707] ["take time"=3.3165ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.329 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.338 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=707] [neededSchemaVersion=708] ["elapsed time"=697.083s] [gotSchemaVersion=708] [phyTblIDs="[218]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:16.340 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=708]
[2024/09/16 23:26:16.341 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=708] ["take time"=4.40025ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.343 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.350 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=708] [neededSchemaVersion=709] ["elapsed time"=628.042s] [gotSchemaVersion=709] [phyTblIDs="[218]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:16.352 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=709]
[2024/09/16 23:26:16.352 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=709] ["take time"=3.658125ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.355 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [category=ddl] [job="ID:255, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264383074326, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:16.357 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:16.361 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=709] [neededSchemaVersion=710] ["elapsed time"=634.667s] [gotSchemaVersion=710] [phyTblIDs="[218]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:16.363 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=255] [version=710]
[2024/09/16 23:26:16.363 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=710] ["take time"=3.517958ms] [job="ID:255, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.368 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=255]
[2024/09/16 23:26:16.370 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=255] [tableID=218] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:16.372 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=255] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:16.372 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=255] [conn=952108040] [job="ID:255, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:218, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:14.965 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.378 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=255]
[2024/09/16 23:26:16.379 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=710] [cur_db=test] [sql="ALTER TABLE `teams` ADD CONSTRAINT `teams_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:16.379 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teams] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:16.379 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teams] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:16.383 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:256, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:16.383 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:256, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teams` ADD CONSTRAINT `teams_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:16.384 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.384 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"teams_userId_users_id_fk\",\"L\":\"teams_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:16.390 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=710] [neededSchemaVersion=711] ["elapsed time"=478.375s] [gotSchemaVersion=711] [phyTblIDs="[220]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:16.391 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=711]
[2024/09/16 23:26:16.392 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=711] ["take time"=3.174708ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.394 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.401 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=711] [neededSchemaVersion=712] ["elapsed time"=491.791s] [gotSchemaVersion=712] [phyTblIDs="[220]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:16.402 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=712]
[2024/09/16 23:26:16.403 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=712] ["take time"=3.184541ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.405 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.411 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=712] [neededSchemaVersion=713] ["elapsed time"=548.375s] [gotSchemaVersion=713] [phyTblIDs="[220]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:16.413 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=713]
[2024/09/16 23:26:16.413 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=713] ["take time"=3.310917ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:16.416 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.416 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=256] [table=teams] ["ingest mode"=true] [index=teams_userId_users_id_fk]
[2024/09/16 23:26:16.417 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{220 teams utf8mb4 utf8mb4_bin [0x400ecd4000 0x400ecd4160 0x400ecd42c0 0x400ecd4420 0x400ecd4580 0x400ecd46e0] [0x4018e0af30] [] [] public true false 0  0 0 0 0 6 1 0 0 452599264409288742 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=220] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:16.417 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=256] [physicalTableID=220] [startKey=] [endKey=]
[2024/09/16 23:26:16.421 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=256]
[2024/09/16 23:26:16.422 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264422395905, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:16.423 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=256] [table=teams] ["ingest mode"=true] [index=teams_userId_users_id_fk]
[2024/09/16 23:26:16.426 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/256/0]
[2024/09/16 23:26:16.428 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=220] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:16.437 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=62]
[2024/09/16 23:26:16.437 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=62] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:16.567 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=61]
[2024/09/16 23:26:16.569 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:16.569 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=61]
[2024/09/16 23:26:16.575 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:16.938 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=62] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:16.938 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=62] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:16.939 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=62] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:16.940 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{220 teams utf8mb4 utf8mb4_bin [0x400f704000 0x400f704160 0x400f7042c0 0x400f704420 0x400f704580 0x400f7046e0] [0x4015e0d710] [] [] public true false 0  0 0 0 0 6 1 0 0 452599264409288742 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=220] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:16.940 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=62] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:17.440 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=62] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:17.596 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/16 23:26:17.596 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1s]
[2024/09/16 23:26:17.598 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 23:26:17.598 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=917ns]
[2024/09/16 23:26:17.602 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452599081209692160]
[2024/09/16 23:26:17.640 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:17.647 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=713] [neededSchemaVersion=714] ["elapsed time"=585.5s] [gotSchemaVersion=714] [phyTblIDs="[220]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:17.649 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=714]
[2024/09/16 23:26:17.650 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=714] ["take time"=3.720042ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.652 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264422395905, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.653 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=256] [table=teams] [index=teams_userId_users_id_fk]
[2024/09/16 23:26:17.658 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=714] [neededSchemaVersion=715] ["elapsed time"=560.208s] [gotSchemaVersion=715] [phyTblIDs="[220]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:17.660 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=715]
[2024/09/16 23:26:17.660 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=715] ["take time"=3.307791ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.663 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.663 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=256] [physicalTableID=220] [startKey=7480000000000000dc5f69ffff000000000001] [endKey=7480000000000000dc5f69ffff000000000001ff]
[2024/09/16 23:26:17.668 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=256]
[2024/09/16 23:26:17.669 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264736706583, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.671 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264736706583, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000dc5f69ffff000000000001,EndKey:7480000000000000dc5f69ffff000000000001ff,First:false,PhysicalTableID:220,Ingest mode:false"]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=220] ["start key"=7480000000000000dc5f69ffff000000000001] ["end key"=7480000000000000dc5f69ffff000000000001ff]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=220] ["range start"=7480000000000000dc5f69ffff000000000001] ["range end"=7480000000000000dc5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000dc5f69ffff000000000001] [endKey=7480000000000000dc5f69ffff000000000001ff]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=256]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=256]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=256]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 220, range: [7480000000000000dc5f69ffff000000000001, 7480000000000000dc5f69ffff000000000001ff), jobID: 256"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000dc5f69ffff000000000001ff00] ["take time"=360.542s]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=256]
[2024/09/16 23:26:17.672 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000dc5f69ffff000000000001]
[2024/09/16 23:26:17.673 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:17.678 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=715] [neededSchemaVersion=716] ["elapsed time"=493.5s] [gotSchemaVersion=716] [phyTblIDs="[220]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:17.679 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=716]
[2024/09/16 23:26:17.680 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=716] ["take time"=3.129416ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.682 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.688 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=716] [neededSchemaVersion=717] ["elapsed time"=440.208s] [gotSchemaVersion=717] [phyTblIDs="[220]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:17.690 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=717]
[2024/09/16 23:26:17.690 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=717] ["take time"=3.072375ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.692 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.700 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=717] [neededSchemaVersion=718] ["elapsed time"=546.125s] [gotSchemaVersion=718] [phyTblIDs="[220]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:17.701 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=718]
[2024/09/16 23:26:17.702 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=718] ["take time"=3.240084ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.704 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.710 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=718] [neededSchemaVersion=719] ["elapsed time"=433.375s] [gotSchemaVersion=719] [phyTblIDs="[220]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:17.712 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=719]
[2024/09/16 23:26:17.712 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=719] ["take time"=3.150958ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.715 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [category=ddl] [job="ID:256, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264736706583, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:17.717 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:17.721 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=719] [neededSchemaVersion=720] ["elapsed time"=437.917s] [gotSchemaVersion=720] [phyTblIDs="[220]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:17.723 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=256] [version=720]
[2024/09/16 23:26:17.723 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=720] ["take time"=3.316291ms] [job="ID:256, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.728 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=256]
[2024/09/16 23:26:17.730 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=256] [tableID=220] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:17.731 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=256] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:17.732 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=256] [conn=952108040] [job="ID:256, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:220, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:16.366 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.738 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=256]
[2024/09/16 23:26:17.739 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=720] [cur_db=test] [sql="ALTER TABLE `webhooks` ADD CONSTRAINT `webhooks_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:26:17.739 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=webhooks] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:17.739 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=webhooks] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:17.743 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:257, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:17.743 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:257, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `webhooks` ADD CONSTRAINT `webhooks_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:26:17.744 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.744 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"webhooks_teamId_teams_id_fk\",\"L\":\"webhooks_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:17.751 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=720] [neededSchemaVersion=721] ["elapsed time"=526.792s] [gotSchemaVersion=721] [phyTblIDs="[224]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:17.753 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=721]
[2024/09/16 23:26:17.754 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=721] ["take time"=3.740917ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.757 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.763 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=721] [neededSchemaVersion=722] ["elapsed time"=437.417s] [gotSchemaVersion=722] [phyTblIDs="[224]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:17.764 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=722]
[2024/09/16 23:26:17.765 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=722] ["take time"=3.358333ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.767 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.773 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=722] [neededSchemaVersion=723] ["elapsed time"=445.584s] [gotSchemaVersion=723] [phyTblIDs="[224]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:17.774 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=723]
[2024/09/16 23:26:17.775 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=723] ["take time"=3.259041ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:17.777 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.778 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=257] [table=webhooks] ["ingest mode"=true] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 23:26:17.778 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{224 webhooks utf8mb4 utf8mb4_bin [0x40108ffa20 0x40108ffb80 0x40108ffce0 0x40108ffe40 0x4010ad8000] [0x4010a9db00] [] [] public true false 0  0 0 0 0 5 1 0 0 452599264776028162 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=224] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:17.778 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=257] [physicalTableID=224] [startKey=] [endKey=]
[2024/09/16 23:26:17.783 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=257]
[2024/09/16 23:26:17.784 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264776028172, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:17.784 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=257] [table=webhooks] ["ingest mode"=true] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 23:26:17.787 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/257/0]
[2024/09/16 23:26:17.789 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=224] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:17.796 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=63]
[2024/09/16 23:26:17.797 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=63] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:17.938 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=62]
[2024/09/16 23:26:17.940 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:17.940 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=62]
[2024/09/16 23:26:17.945 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:18.298 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=63] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:18.299 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=63] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:18.301 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=63] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:18.303 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{224 webhooks utf8mb4 utf8mb4_bin [0x4010933b80 0x4010933ce0 0x4010933e40 0x4011208000 0x4011208160] [0x4010fc7680] [] [] public true false 0  0 0 0 0 5 1 0 0 452599264776028162 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 182}"] ["table/partition ID"=224] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:18.303 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=63] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:18.803 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=63] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:18.999 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:19.007 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=723] [neededSchemaVersion=724] ["elapsed time"=479.875s] [gotSchemaVersion=724] [phyTblIDs="[224]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:19.009 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=724]
[2024/09/16 23:26:19.009 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=724] ["take time"=3.566542ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.012 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599264776028172, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:19.013 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=257] [table=webhooks] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 23:26:19.019 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=724] [neededSchemaVersion=725] ["elapsed time"=438.333s] [gotSchemaVersion=725] [phyTblIDs="[224]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:19.020 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=725]
[2024/09/16 23:26:19.021 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=725] ["take time"=3.470917ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.024 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:19.025 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=257] [physicalTableID=224] [startKey=7480000000000000e05f69ffff000000000001] [endKey=7480000000000000e05f69ffff000000000001ff]
[2024/09/16 23:26:19.029 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=257]
[2024/09/16 23:26:19.030 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265103970312, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:19.032 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265103970312, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000000e05f69ffff000000000001,EndKey:7480000000000000e05f69ffff000000000001ff,First:false,PhysicalTableID:224,Ingest mode:false"]
[2024/09/16 23:26:19.033 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=224] ["start key"=7480000000000000e05f69ffff000000000001] ["end key"=7480000000000000e05f69ffff000000000001ff]
[2024/09/16 23:26:19.033 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=224] ["range start"=7480000000000000e05f69ffff000000000001] ["range end"=7480000000000000e05f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:26:19.033 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000e05f69ffff000000000001] [endKey=7480000000000000e05f69ffff000000000001ff]
[2024/09/16 23:26:19.033 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=257]
[2024/09/16 23:26:19.033 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=257]
[2024/09/16 23:26:19.033 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=257]
[2024/09/16 23:26:19.034 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 224, range: [7480000000000000e05f69ffff000000000001, 7480000000000000e05f69ffff000000000001ff), jobID: 257"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000e05f69ffff000000000001ff00] ["take time"=393.125s]
[2024/09/16 23:26:19.034 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=257]
[2024/09/16 23:26:19.034 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000e05f69ffff000000000001]
[2024/09/16 23:26:19.034 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:19.041 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=725] [neededSchemaVersion=726] ["elapsed time"=420.5s] [gotSchemaVersion=726] [phyTblIDs="[224]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:19.043 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=726]
[2024/09/16 23:26:19.043 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=726] ["take time"=4.181ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.046 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:19.053 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=726] [neededSchemaVersion=727] ["elapsed time"=471.583s] [gotSchemaVersion=727] [phyTblIDs="[224]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:19.054 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=727]
[2024/09/16 23:26:19.055 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=727] ["take time"=3.422083ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.057 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add foreign key, State:running, SchemaState:write only, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:19.065 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=727] [neededSchemaVersion=728] ["elapsed time"=442.125s] [gotSchemaVersion=728] [phyTblIDs="[224]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:19.067 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=728]
[2024/09/16 23:26:19.068 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=728] ["take time"=3.49125ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.070 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:26:19.077 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=728] [neededSchemaVersion=729] ["elapsed time"=471s] [gotSchemaVersion=729] [phyTblIDs="[224]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:26:19.078 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=729]
[2024/09/16 23:26:19.079 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=729] ["take time"=3.40025ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.082 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [category=ddl] [job="ID:257, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265103970312, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:26:19.083 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:26:19.089 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=729] [neededSchemaVersion=730] ["elapsed time"=436.417s] [gotSchemaVersion=730] [phyTblIDs="[224]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:19.090 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=257] [version=730]
[2024/09/16 23:26:19.091 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=730] ["take time"=3.6535ms] [job="ID:257, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.097 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=257]
[2024/09/16 23:26:19.098 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=257] [tableID=224] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:19.100 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=257] [jobType="alter table multi-schema change"]
[2024/09/16 23:26:19.101 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=257] [conn=952108040] [job="ID:257, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:182, TableID:224, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:17.715 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.106 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=257]
[2024/09/16 23:26:19.107 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108040] [schemaVersion=730] [cur_db=test] [sql="CREATE INDEX `tagsOnContactsTagIdContactIdIdx` ON `tagsOnContacts` (`tagId`,`contactId`);"] [user=root@%]
[2024/09/16 23:26:19.107 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:26:19.111 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:258, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:6, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:26:19.111 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:258, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:6, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="CREATE INDEX `tagsOnContactsTagIdContactIdIdx` ON `tagsOnContacts` (`tagId`,`contactId`);"]
[2024/09/16 23:26:19.112 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:queueing, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.113 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:none, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"tagsOnContactsTagIdContactIdIdx\",\"L\":\"tagsoncontactstagidcontactididx\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"tagId\",\"L\":\"tagid\"},\"offset\":1,\"length\":-1},{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:26:19.118 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=730] [neededSchemaVersion=731] ["elapsed time"=444.708s] [gotSchemaVersion=731] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:19.120 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=258] [version=731]
[2024/09/16 23:26:19.121 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=731] ["take time"=3.339834ms] [job="ID:258, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.123 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:delete only, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.129 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=731] [neededSchemaVersion=732] ["elapsed time"=537.792s] [gotSchemaVersion=732] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:19.131 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=258] [version=732]
[2024/09/16 23:26:19.132 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=732] ["take time"=3.725833ms] [job="ID:258, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.134 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:write only, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.140 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=732] [neededSchemaVersion=733] ["elapsed time"=567.459s] [gotSchemaVersion=733] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:19.141 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=258] [version=733]
[2024/09/16 23:26:19.142 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=733] ["take time"=3.177166ms] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.144 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.145 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=258] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 23:26:19.146 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{216 tagsOnContacts utf8mb4 utf8mb4_bin [0x40127f18c0 0x40127f1a20 0x40127f1b80 0x40127f1ce0] [0x40129b75f0 0x40129b78c0 0x40129b7b00] [] [0x4023387980 0x4023387a40] public true false 0  0 0 0 0 4 3 2 0 452599265130184720 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 16 182}"] ["table/partition ID"=216] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:19.146 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=258] [physicalTableID=216] [startKey=] [endKey=]
[2024/09/16 23:26:19.150 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=258]
[2024/09/16 23:26:19.151 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265130184730, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:19.151 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=258] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 23:26:19.154 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/258]
[2024/09/16 23:26:19.155 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=216] [size=0] [error="less than 3 regions"]
[2024/09/16 23:26:19.163 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=64]
[2024/09/16 23:26:19.163 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=64] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:26:19.298 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=63]
[2024/09/16 23:26:19.300 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:19.300 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=63]
[2024/09/16 23:26:19.306 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:26:19.665 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=64] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:26:19.665 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=64] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:26:19.666 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=64] [curr-step=init] [next-step=read-index]
[2024/09/16 23:26:19.667 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{216 tagsOnContacts utf8mb4 utf8mb4_bin [0x40133922c0 0x4013392420 0x4013392580 0x40133926e0] [0x4013270b40 0x4013270e10 0x4013271050] [] [0x4025ab1ec0 0x4022317b00] public true false 0  0 0 0 0 4 3 2 0 452599265130184720 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 16 182}"] ["table/partition ID"=216] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:26:19.667 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=64] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:26:20.166 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=64] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:26:20.371 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:20.379 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=733] [neededSchemaVersion=734] ["elapsed time"=529.625s] [gotSchemaVersion=734] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:20.380 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=258] [version=734]
[2024/09/16 23:26:20.381 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=734] ["take time"=3.470834ms] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265130184730, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:20.383 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265130184730, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:20.384 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=258] [table=tagsOnContacts] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 23:26:20.391 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=734] [neededSchemaVersion=735] ["elapsed time"=519.25s] [gotSchemaVersion=735] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:20.393 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=258] [version=735]
[2024/09/16 23:26:20.394 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=735] ["take time"=4.232292ms] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:20.396 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:20.397 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=258] [physicalTableID=216] [startKey=7480000000000000d85f69ffff000000000003] [endKey=7480000000000000d85f69ffff000000000003ff]
[2024/09/16 23:26:20.402 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=258]
[2024/09/16 23:26:20.403 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:0, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265457602582, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:20.405 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:258, Type:add index, State:running, SchemaState:write reorganization, SchemaID:182, TableID:216, RowCount:0, ArgLen:5, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265457602582, Version: v1, UniqueWarnings:0"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000000d85f69ffff000000000003,EndKey:7480000000000000d85f69ffff000000000003ff,First:false,PhysicalTableID:216,Ingest mode:false"]
[2024/09/16 23:26:20.406 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=216] ["start key"=7480000000000000d85f69ffff000000000003] ["end key"=7480000000000000d85f69ffff000000000003ff]
[2024/09/16 23:26:20.406 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=216] ["range start"=7480000000000000d85f69ffff000000000003] ["range end"=7480000000000000d85f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:26:20.406 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000000d85f69ffff000000000003] [endKey=7480000000000000d85f69ffff000000000003ff]
[2024/09/16 23:26:20.406 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=258]
[2024/09/16 23:26:20.406 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=258]
[2024/09/16 23:26:20.406 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=258]
[2024/09/16 23:26:20.406 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 216, range: [7480000000000000d85f69ffff000000000003, 7480000000000000d85f69ffff000000000003ff), jobID: 258"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000000d85f69ffff000000000003ff00] ["take time"=366.167s]
[2024/09/16 23:26:20.407 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=258]
[2024/09/16 23:26:20.407 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000000d85f69ffff000000000003]
[2024/09/16 23:26:20.407 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:26:20.408 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=utf8mb4] [collation=utf8mb4_unicode_ci]
[2024/09/16 23:26:20.413 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=735] [neededSchemaVersion=736] ["elapsed time"=531.792s] [gotSchemaVersion=736] [phyTblIDs="[216]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:26:20.415 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=258] [version=736]
[2024/09/16 23:26:20.415 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=736] ["take time"=3.473167ms] [job="ID:258, Type:add index, State:done, SchemaState:public, SchemaID:182, TableID:216, RowCount:0, ArgLen:4, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265457602582, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:20.418 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=258] [tableID=216] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:26:20.420 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=258] [jobType="add index"]
[2024/09/16 23:26:20.420 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=258] [conn=952108040] [job="ID:258, Type:add index, State:synced, SchemaState:public, SchemaID:182, TableID:216, RowCount:0, ArgLen:4, start time: 2024-09-16 23:26:19.066 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599265457602582, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:26:20.426 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=258]
[2024/09/16 23:26:20.665 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=64]
[2024/09/16 23:26:20.667 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:26:20.667 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=64]
[2024/09/16 23:26:20.673 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:27:37.469 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:30:55.529 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:32:37.471 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:32:37.518 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=112]
[2024/09/16 23:32:37.578 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=132]
[2024/09/16 23:32:37.673 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=142]
[2024/09/16 23:32:37.715 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=144]
[2024/09/16 23:32:42.871 +00:00] [WARN] [pd.go:168] ["get timestamp too slow"] ["cost time"=41.573916ms]
[2024/09/16 23:34:37.556 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599238498713600] [concurrency=1]
[2024/09/16 23:34:37.557 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599238498713600] [concurrency=1]
[2024/09/16 23:34:37.557 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 23:34:37.572 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=15.704416ms] ["completed regions"=27]
[2024/09/16 23:34:37.573 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599238498713600] [regions=27]
[2024/09/16 23:35:37.544 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 23:35:58.526 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:36:17.591 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=21]
[2024/09/16 23:36:17.597 +00:00] [INFO] [info.go:1186] [DeleteTiFlashPlacementRules] [physicalTableIDs="[106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146]"]
[2024/09/16 23:36:17.814 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=21] ["cost time"=222.676708ms]
[2024/09/16 23:36:17.816 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 23:36:17.816 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.083s]
[2024/09/16 23:36:17.818 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452599238498713600]
[2024/09/16 23:37:37.467 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:40:58.530 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:42:12.847 +00:00] [WARN] [session.go:2162] ["run statement failed"] [conn=952108688] [session_alias=] [schemaVersion=736] [error="[table:1110]Column 'name' specified twice"] [session="{\n  \"currDBName\": \"test\",\n  \"id\": 952108688,\n  \"status\": 3,\n  \"strictMode\": true,\n  \"txn\": \"452599515131936775\",\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"192.168.65.1\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\",\n    \"AuthPlugin\": \"mysql_native_password\"\n  }\n}"]
[2024/09/16 23:42:12.849 +00:00] [INFO] [conn.go:1184] ["command dispatched failed"] [conn=952108688] [session_alias=] [connInfo="id:952108688, addr:192.168.65.1:37720 status:11, collation:utf8mb4_unicode_ci, user:root"] [command=Query] [status="inTxn:1, autocommit:1"] [sql="insert into `accessTokens` (`id`, `userId`, `teamId`, `name`, `name`, `hash`, `createdAt`, `lastUsedAt`, `expiresAt`) values (default, default, 25, default, 'qhnn711acx63lkdoe33micm3', '58e08fb02aeb512ae49e0b1f44eedca2afd1b33dd6ffa3a89cf6f476c29a58c9', default, default, '2024-09-17 16:22:12.846')"] [txn_mode=PESSIMISTIC] [timestamp=452599515131936775] [err="[table:1110]Column 'name' specified twice\ngithub.com/pingcap/errors.AddStack\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/normalize.go:175\ngithub.com/pingcap/tidb/pkg/table.CheckOnce\n\t/workspace/source/tidb/pkg/table/column.go:481\ngithub.com/pingcap/tidb/pkg/executor.(*InsertValues).initInsertColumns\n\t/workspace/source/tidb/pkg/executor/insert_common.go:163\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildInsert\n\t/workspace/source/tidb/pkg/executor/builder.go:984\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build\n\t/workspace/source/tidb/pkg/executor/builder.go:202\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\n\t/workspace/source/tidb/pkg/executor/adapter.go:1220\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/workspace/source/tidb/pkg/executor/adapter.go:563\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/workspace/source/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/workspace/source/tidb/pkg/session/session.go:2150\ngithub.com/pingcap/tidb/pkg/server.(*TiDBContext).ExecuteStmt\n\t/workspace/source/tidb/pkg/server/driver_tidb.go:291\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleStmt\n\t/workspace/source/tidb/pkg/server/conn.go:2026\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleQuery\n\t/workspace/source/tidb/pkg/server/conn.go:1779\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).dispatch\n\t/workspace/source/tidb/pkg/server/conn.go:1378\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).Run\n\t/workspace/source/tidb/pkg/server/conn.go:1147\ngithub.com/pingcap/tidb/pkg/server.(*Server).onConn\n\t/workspace/source/tidb/pkg/server/server.go:741\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1197"]
[2024/09/16 23:42:37.445 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:42:37.491 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=112]
[2024/09/16 23:42:37.505 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=132]
[2024/09/16 23:42:37.519 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=142]
[2024/09/16 23:42:37.530 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=144]
[2024/09/16 23:42:55.467 +00:00] [WARN] [session.go:2120] ["compile SQL failed"] [conn=952108690] [session_alias=] [error="[planner:1054]Unknown column 'username' in 'field list'"] [SQL="insert into `accessTokens` (`id`, `userId`, `teamId`, `name`, `username`, `hash`, `createdAt`, `lastUsedAt`, `expiresAt`) values (default, default, 26, default, 't1zfria1osl0m08wxb7i1pyc', '688c291b1d9036c158efb2747d343b040fc43ae9a2ff152087d0a029fdd4f005', default, default, '2024-09-17 16:22:55.467')"]
[2024/09/16 23:42:55.468 +00:00] [INFO] [conn.go:1184] ["command dispatched failed"] [conn=952108690] [session_alias=] [connInfo="id:952108690, addr:192.168.65.1:46623 status:11, collation:utf8mb4_unicode_ci, user:root"] [command=Query] [status="inTxn:1, autocommit:1"] [sql="insert into `accessTokens` (`id`, `userId`, `teamId`, `name`, `username`, `hash`, `createdAt`, `lastUsedAt`, `expiresAt`) values (default, default, 26, default, 't1zfria1osl0m08wxb7i1pyc', '688c291b1d9036c158efb2747d343b040fc43ae9a2ff152087d0a029fdd4f005', default, default, '2024-09-17 16:22:55.467')"] [txn_mode=PESSIMISTIC] [timestamp=452599526311854087] [err="[planner:1054]Unknown column 'username' in 'field list'\ngithub.com/pingcap/errors.AddStack\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/normalize.go:175\ngithub.com/pingcap/tidb/pkg/planner/core.(*PlanBuilder).getAffectCols\n\t/workspace/source/tidb/pkg/planner/core/planbuilder.go:3996\ngithub.com/pingcap/tidb/pkg/planner/core.(*PlanBuilder).buildValuesListOfInsert\n\t/workspace/source/tidb/pkg/planner/core/planbuilder.go:4071\ngithub.com/pingcap/tidb/pkg/planner/core.(*PlanBuilder).buildInsert\n\t/workspace/source/tidb/pkg/planner/core/planbuilder.go:3891\ngithub.com/pingcap/tidb/pkg/planner/core.(*PlanBuilder).Build\n\t/workspace/source/tidb/pkg/planner/core/planbuilder.go:519\ngithub.com/pingcap/tidb/pkg/planner.buildLogicalPlan\n\t/workspace/source/tidb/pkg/planner/optimize.go:575\ngithub.com/pingcap/tidb/pkg/planner.optimize\n\t/workspace/source/tidb/pkg/planner/optimize.go:492\ngithub.com/pingcap/tidb/pkg/planner.Optimize\n\t/workspace/source/tidb/pkg/planner/optimize.go:360\ngithub.com/pingcap/tidb/pkg/executor.(*Compiler).Compile\n\t/workspace/source/tidb/pkg/executor/compiler.go:101\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/workspace/source/tidb/pkg/session/session.go:2098\ngithub.com/pingcap/tidb/pkg/server.(*TiDBContext).ExecuteStmt\n\t/workspace/source/tidb/pkg/server/driver_tidb.go:291\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleStmt\n\t/workspace/source/tidb/pkg/server/conn.go:2026\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleQuery\n\t/workspace/source/tidb/pkg/server/conn.go:1779\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).dispatch\n\t/workspace/source/tidb/pkg/server/conn.go:1378\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).Run\n\t/workspace/source/tidb/pkg/server/conn.go:1147\ngithub.com/pingcap/tidb/pkg/server.(*Server).onConn\n\t/workspace/source/tidb/pkg/server/server.go:741\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1197"]
[2024/09/16 23:43:09.912 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108036] [schemaVersion=736] [cur_db=test] [sql="drop database test"] [user=root@%]
[2024/09/16 23:43:09.925 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:259, Type:drop schema, State:queueing, SchemaState:public, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:09.925 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:259, Type:drop schema, State:queueing, SchemaState:public, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="drop database test"]
[2024/09/16 23:43:09.927 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=259] [conn=952108036] [category=ddl] [job="ID:259, Type:drop schema, State:queueing, SchemaState:public, SchemaID:182, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:09.948 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=736] [neededSchemaVersion=737] ["elapsed time"=3.644917ms] [gotSchemaVersion=737] [phyTblIDs="[184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224]"] [actionTypes="[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]"] [diffTypes="[\"drop schema\"]"]
[2024/09/16 23:43:09.951 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=259] [version=737]
[2024/09/16 23:43:09.951 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=737] ["take time"=8.202291ms] [job="ID:259, Type:drop schema, State:running, SchemaState:write only, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:09.955 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=259] [conn=952108036] [category=ddl] [job="ID:259, Type:drop schema, State:running, SchemaState:write only, SchemaID:182, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:09.961 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=737] [neededSchemaVersion=738] ["elapsed time"=32.375s] [gotSchemaVersion=738] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"drop schema\"]"]
[2024/09/16 23:43:09.962 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=259] [version=738]
[2024/09/16 23:43:09.963 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=738] ["take time"=3.358417ms] [job="ID:259, Type:drop schema, State:running, SchemaState:delete only, SchemaID:182, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:09.966 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=259] [conn=952108036] [category=ddl] [job="ID:259, Type:drop schema, State:running, SchemaState:delete only, SchemaID:182, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:09.977 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=738] [neededSchemaVersion=739] ["elapsed time"=64.125s] [gotSchemaVersion=739] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"drop schema\"]"]
[2024/09/16 23:43:09.978 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=259] [version=739]
[2024/09/16 23:43:09.979 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=739] ["take time"=3.171333ms] [job="ID:259, Type:drop schema, State:done, SchemaState:none, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:09.982 +00:00] [INFO] [delete_range.go:467] ["insert into delete-range table"] [category=ddl] [jobID=259] [tableIDs="[184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224]"] [comment="drop schema: table IDs"]
[2024/09/16 23:43:09.990 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=259] [jobType="drop schema"]
[2024/09/16 23:43:09.990 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=259] [conn=952108036] [job="ID:259, Type:drop schema, State:synced, SchemaState:none, SchemaID:182, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:09.896 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:09.995 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=259]
[2024/09/16 23:43:13.019 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108036] [schemaVersion=739] [cur_db=] [sql="drop database test"] [user=root@%]
[2024/09/16 23:43:13.021 +00:00] [INFO] [tidb.go:276] ["rollbackTxn called due to ddl/autocommit failure"]
[2024/09/16 23:43:13.021 +00:00] [WARN] [session.go:2162] ["run statement failed"] [conn=952108036] [session_alias=] [schemaVersion=739] [error="[schema:1008]Can't drop database 'test'; database doesn't exist"] [session="{\n  \"currDBName\": \"\",\n  \"id\": 952108036,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"192.168.65.1\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\",\n    \"AuthPlugin\": \"mysql_native_password\"\n  }\n}"]
[2024/09/16 23:43:13.023 +00:00] [INFO] [conn.go:1184] ["command dispatched failed"] [conn=952108036] [session_alias=] [connInfo="id:952108036, addr:192.168.65.1:38829 status:10, collation:utf8_general_ci, user:root"] [command=Query] [status="inTxn:0, autocommit:1"] [sql="drop database test"] [txn_mode=PESSIMISTIC] [timestamp=452599530912743426] [err="[schema:1008]Can't drop database 'test'; database doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/normalize.go:175\ngithub.com/pingcap/tidb/pkg/ddl.(*executor).DropSchema\n\t/workspace/source/tidb/pkg/ddl/executor.go:745\ngithub.com/pingcap/tidb/pkg/executor.(*DDLExec).executeDropDatabase\n\t/workspace/source/tidb/pkg/executor/ddl.go:337\ngithub.com/pingcap/tidb/pkg/executor.(*DDLExec).Next\n\t/workspace/source/tidb/pkg/executor/ddl.go:169\ngithub.com/pingcap/tidb/pkg/executor/internal/exec.Next\n\t/workspace/source/tidb/pkg/executor/internal/exec/executor.go:451\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).next\n\t/workspace/source/tidb/pkg/executor/adapter.go:1259\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).handleNoDelayExecutor\n\t/workspace/source/tidb/pkg/executor/adapter.go:1008\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).handleNoDelay\n\t/workspace/source/tidb/pkg/executor/adapter.go:841\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/workspace/source/tidb/pkg/executor/adapter.go:605\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/workspace/source/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/workspace/source/tidb/pkg/session/session.go:2150\ngithub.com/pingcap/tidb/pkg/server.(*TiDBContext).ExecuteStmt\n\t/workspace/source/tidb/pkg/server/driver_tidb.go:291\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleStmt\n\t/workspace/source/tidb/pkg/server/conn.go:2026\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleQuery\n\t/workspace/source/tidb/pkg/server/conn.go:1779\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).dispatch\n\t/workspace/source/tidb/pkg/server/conn.go:1378\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).Run\n\t/workspace/source/tidb/pkg/server/conn.go:1147\ngithub.com/pingcap/tidb/pkg/server.(*Server).onConn\n\t/workspace/source/tidb/pkg/server/server.go:741\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1197"]
[2024/09/16 23:43:13.681 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108036] [schemaVersion=739] [cur_db=] [sql="drop database test"] [user=root@%]
[2024/09/16 23:43:13.682 +00:00] [INFO] [tidb.go:276] ["rollbackTxn called due to ddl/autocommit failure"]
[2024/09/16 23:43:13.683 +00:00] [WARN] [session.go:2162] ["run statement failed"] [conn=952108036] [session_alias=] [schemaVersion=739] [error="[schema:1008]Can't drop database 'test'; database doesn't exist"] [session="{\n  \"currDBName\": \"\",\n  \"id\": 952108036,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"192.168.65.1\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\",\n    \"AuthPlugin\": \"mysql_native_password\"\n  }\n}"]
[2024/09/16 23:43:13.683 +00:00] [INFO] [conn.go:1184] ["command dispatched failed"] [conn=952108036] [session_alias=] [connInfo="id:952108036, addr:192.168.65.1:38829 status:10, collation:utf8_general_ci, user:root"] [command=Query] [status="inTxn:0, autocommit:1"] [sql="drop database test"] [txn_mode=PESSIMISTIC] [timestamp=452599531083137026] [err="[schema:1008]Can't drop database 'test'; database doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/normalize.go:175\ngithub.com/pingcap/tidb/pkg/ddl.(*executor).DropSchema\n\t/workspace/source/tidb/pkg/ddl/executor.go:745\ngithub.com/pingcap/tidb/pkg/executor.(*DDLExec).executeDropDatabase\n\t/workspace/source/tidb/pkg/executor/ddl.go:337\ngithub.com/pingcap/tidb/pkg/executor.(*DDLExec).Next\n\t/workspace/source/tidb/pkg/executor/ddl.go:169\ngithub.com/pingcap/tidb/pkg/executor/internal/exec.Next\n\t/workspace/source/tidb/pkg/executor/internal/exec/executor.go:451\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).next\n\t/workspace/source/tidb/pkg/executor/adapter.go:1259\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).handleNoDelayExecutor\n\t/workspace/source/tidb/pkg/executor/adapter.go:1008\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).handleNoDelay\n\t/workspace/source/tidb/pkg/executor/adapter.go:841\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/workspace/source/tidb/pkg/executor/adapter.go:605\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/workspace/source/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/workspace/source/tidb/pkg/session/session.go:2150\ngithub.com/pingcap/tidb/pkg/server.(*TiDBContext).ExecuteStmt\n\t/workspace/source/tidb/pkg/server/driver_tidb.go:291\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleStmt\n\t/workspace/source/tidb/pkg/server/conn.go:2026\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleQuery\n\t/workspace/source/tidb/pkg/server/conn.go:1779\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).dispatch\n\t/workspace/source/tidb/pkg/server/conn.go:1378\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).Run\n\t/workspace/source/tidb/pkg/server/conn.go:1147\ngithub.com/pingcap/tidb/pkg/server.(*Server).onConn\n\t/workspace/source/tidb/pkg/server/server.go:741\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_arm64.s:1197"]
[2024/09/16 23:43:21.391 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108036] [schemaVersion=739] [cur_db=] [sql="CREATE DATABASE `test`"] [user=root@%]
[2024/09/16 23:43:21.403 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:261, Type:create schema, State:queueing, SchemaState:none, SchemaID:260, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:21.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:21.403 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:261, Type:create schema, State:queueing, SchemaState:none, SchemaID:260, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:21.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE DATABASE `test`"]
[2024/09/16 23:43:21.406 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=261] [conn=952108036] [category=ddl] [job="ID:261, Type:create schema, State:queueing, SchemaState:none, SchemaID:260, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:21.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:21.415 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=739] [neededSchemaVersion=740] ["elapsed time"=360s] [gotSchemaVersion=740] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"create schema\"]"]
[2024/09/16 23:43:21.417 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=261] [version=740]
[2024/09/16 23:43:21.417 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=740] ["take time"=4.535834ms] [job="ID:261, Type:create schema, State:done, SchemaState:public, SchemaID:260, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-16 23:43:21.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:21.421 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=261] [conn=952108036] [job="ID:261, Type:create schema, State:synced, SchemaState:public, SchemaID:260, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:21.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:21.426 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=261]
[2024/09/16 23:43:30.098 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=740] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/16 23:43:30.105 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:263, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:262, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.106 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:263, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:262, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"]
[2024/09/16 23:43:30.107 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=263] [conn=952108744] [category=ddl] [job="ID:263, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:262, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.116 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=740] [neededSchemaVersion=741] ["elapsed time"=860.375s] [gotSchemaVersion=741] [phyTblIDs="[262]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.118 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=263] [version=741]
[2024/09/16 23:43:30.119 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=741] ["take time"=4.647584ms] [job="ID:263, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:262, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.123 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=263] [conn=952108744] [job="ID:263, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:262, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.127 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=263]
[2024/09/16 23:43:30.128 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000106]
[2024/09/16 23:43:30.131 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000106] ["first new region left"="{Id:5085 StartKey:7480000000000000ffe000000000000000f8 EndKey:7480000000000001ff0600000000000000f8 RegionEpoch:{ConfVer:1 Version:106} Peers:[id:5086 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.131 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5085]"]
[2024/09/16 23:43:30.138 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=741] [cur_db=test] [sql="CREATE TABLE `abTestVariants` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`broadcastId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`weight` int NOT NULL DEFAULT 1,\n\t`sendAt` timestamp,\n\tCONSTRAINT `abTestVariants_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.138 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952108744] [session_alias=] [schemaVersion=741] [txnStartTS=452599535395143709] [txnScope=global]
[2024/09/16 23:43:30.143 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:265, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.143 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:265, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `abTestVariants` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`broadcastId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`weight` int NOT NULL DEFAULT 1,\n\t`sendAt` timestamp,\n\tCONSTRAINT `abTestVariants_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.145 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=265] [conn=952108744] [category=ddl] [job="ID:265, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.153 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=741] [neededSchemaVersion=742] ["elapsed time"=590.791s] [gotSchemaVersion=742] [phyTblIDs="[264]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.155 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=265] [version=742]
[2024/09/16 23:43:30.155 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=742] ["take time"=4.018875ms] [job="ID:265, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:264, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.159 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=265] [conn=952108744] [job="ID:265, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.163 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=265]
[2024/09/16 23:43:30.163 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000108]
[2024/09/16 23:43:30.164 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=742] [cur_db=test] [sql="CREATE TABLE `accessTokens` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`teamId` bigint unsigned,\n\t`name` varchar(32),\n\t`username` varchar(32),\n\t`hash` varchar(100) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastUsedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `accessTokens_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.165 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000108] ["first new region left"="{Id:5087 StartKey:7480000000000001ff0600000000000000f8 EndKey:7480000000000001ff0800000000000000f8 RegionEpoch:{ConfVer:1 Version:107} Peers:[id:5088 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.165 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5087]"]
[2024/09/16 23:43:30.172 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:267, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.144 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.172 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:267, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.144 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `accessTokens` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`teamId` bigint unsigned,\n\t`name` varchar(32),\n\t`username` varchar(32),\n\t`hash` varchar(100) NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`lastUsedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `accessTokens_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.173 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=267] [conn=952108744] [category=ddl] [job="ID:267, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.144 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.182 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=742] [neededSchemaVersion=743] ["elapsed time"=816.583s] [gotSchemaVersion=743] [phyTblIDs="[266]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.185 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=267] [version=743]
[2024/09/16 23:43:30.186 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=743] ["take time"=6.309084ms] [job="ID:267, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:266, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.144 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.194 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=267] [conn=952108744] [job="ID:267, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.144 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.201 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=267]
[2024/09/16 23:43:30.201 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000010a]
[2024/09/16 23:43:30.202 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=743] [cur_db=test] [sql="CREATE TABLE `audiences` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`knownAttributes` json,\n\tCONSTRAINT `audiences_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.203 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000010a] ["first new region left"="{Id:5089 StartKey:7480000000000001ff0800000000000000f8 EndKey:7480000000000001ff0a00000000000000f8 RegionEpoch:{ConfVer:1 Version:108} Peers:[id:5090 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.203 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5089]"]
[2024/09/16 23:43:30.210 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:269, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.210 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:269, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `audiences` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`knownAttributes` json,\n\tCONSTRAINT `audiences_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.212 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=269] [conn=952108744] [category=ddl] [job="ID:269, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.220 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=743] [neededSchemaVersion=744] ["elapsed time"=710.083s] [gotSchemaVersion=744] [phyTblIDs="[268]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.223 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=269] [version=744]
[2024/09/16 23:43:30.223 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=744] ["take time"=4.524333ms] [job="ID:269, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:268, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.228 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=269] [conn=952108744] [job="ID:269, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.234 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=269]
[2024/09/16 23:43:30.234 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000010c]
[2024/09/16 23:43:30.235 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=744] [cur_db=test] [sql="CREATE TABLE `automationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationId` bigint unsigned NOT NULL,\n\t`type` enum('TRIGGER','ACTION','RULE','END') NOT NULL,\n\t`status` enum('DRAFT','ACTIVE','PAUSED','ARCHIVED') NOT NULL DEFAULT 'DRAFT',\n\t`subtype` enum('TRIGGER_CONTACT_SUBSCRIBED','TRIGGER_CONTACT_UNSUBSCRIBED','TRIGGER_CONTACT_TAG_ADDED','TRIGGER_CONTACT_TAG_REMOVED','TRIGGER_API_MANUAL','ACTION_SEND_EMAIL','ACTION_ADD_TAG','ACTION_REMOVE_TAG','ACTION_SUBSCRIBE_TO_AUDIENCE','ACTION_UNSUBSCRIBE_FROM_AUDIENCE','ACTION_UPDATE_CONTACT_ATTRIBUTES','RULE_IF_ELSE','RULE_WAIT_FOR_DURATION','RULE_PERCENTAGE_SPLIT','RULE_WAIT_FOR_TRIGGER','END') NOT NULL,\n\t`parentId` bigint unsigned,\n\t`branchIndex` int,\n\t`configuration` json NOT NULL,\n\t`emailId` bigint unsigned,\n\t`tagId` bigint unsigned,\n\t`audienceId` bigint unsigned,\n\tCONSTRAINT `automationSteps_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.236 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000010c] ["first new region left"="{Id:5091 StartKey:7480000000000001ff0a00000000000000f8 EndKey:7480000000000001ff0c00000000000000f8 RegionEpoch:{ConfVer:1 Version:109} Peers:[id:5092 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.236 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5091]"]
[2024/09/16 23:43:30.245 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:271, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.245 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:271, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `automationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationId` bigint unsigned NOT NULL,\n\t`type` enum('TRIGGER','ACTION','RULE','END') NOT NULL,\n\t`status` enum('DRAFT','ACTIVE','PAUSED','ARCHIVED') NOT NULL DEFAULT 'DRAFT',\n\t`subtype` enum('TRIGGER_CONTACT_SUBSCRIBED','TRIGGER_CONTACT_UNSUBSCRIBED','TRIGGER_CONTACT_TAG_ADDED','TRIGGER_CONTACT_TAG_REMOVED','TRIGGER_API_MANUAL','ACTION_SEND_EMAIL','ACTION_ADD_TAG','ACTION_REMOVE_TAG','ACTION_SUBSCRIBE_TO_AUDIENCE','ACTION_UNSUBSCRIBE_FROM_AUDIENCE','ACTION_UPDATE_CONTACT_ATTRIBUTES','RULE_IF_ELSE','RULE_WAIT_FOR_DURATION','RULE_PERCENTAGE_SPLIT','RULE_WAIT_FOR_TRIGGER','END') NOT NULL,\n\t`parentId` bigint unsigned,\n\t`branchIndex` int,\n\t`configuration` json NOT NULL,\n\t`emailId` bigint unsigned,\n\t`tagId` bigint unsigned,\n\t`audienceId` bigint unsigned,\n\tCONSTRAINT `automationSteps_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.247 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=271] [conn=952108744] [category=ddl] [job="ID:271, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.257 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=744] [neededSchemaVersion=745] ["elapsed time"=694.084s] [gotSchemaVersion=745] [phyTblIDs="[270]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.259 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=271] [version=745]
[2024/09/16 23:43:30.260 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=745] ["take time"=5.020917ms] [job="ID:271, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:270, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.265 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=271] [conn=952108744] [job="ID:271, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.270 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=271]
[2024/09/16 23:43:30.270 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000010e]
[2024/09/16 23:43:30.271 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=745] [cur_db=test] [sql="CREATE TABLE `automations` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`description` varchar(512),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `automations_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.272 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000010e] ["first new region left"="{Id:5093 StartKey:7480000000000001ff0c00000000000000f8 EndKey:7480000000000001ff0e00000000000000f8 RegionEpoch:{ConfVer:1 Version:110} Peers:[id:5094 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.272 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5093]"]
[2024/09/16 23:43:30.279 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:273, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.279 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:273, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `automations` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`description` varchar(512),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `automations_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.280 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=273] [conn=952108744] [category=ddl] [job="ID:273, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.288 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=745] [neededSchemaVersion=746] ["elapsed time"=597.083s] [gotSchemaVersion=746] [phyTblIDs="[272]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.290 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=273] [version=746]
[2024/09/16 23:43:30.291 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=746] ["take time"=4.445208ms] [job="ID:273, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:272, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.295 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=273] [conn=952108744] [job="ID:273, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.299 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=273]
[2024/09/16 23:43:30.299 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000110]
[2024/09/16 23:43:30.300 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=746] [cur_db=test] [sql="CREATE TABLE `broadcasts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`segmentId` bigint unsigned,\n\t`teamId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`emailContentId` bigint unsigned,\n\t`winningAbTestVariantId` bigint unsigned,\n\t`waitingTimeToPickWinner` int DEFAULT 4,\n\t`status` enum('SENT','SENDING','DRAFT','QUEUED_FOR_SENDING','SENDING_FAILED','DRAFT_ARCHIVED','ARCHIVED') DEFAULT 'DRAFT',\n\t`isAbTest` boolean NOT NULL DEFAULT false,\n\t`winningCriteria` enum('OPENS','CLICKS','CONVERSIONS'),\n\t`winningWaitTime` int,\n\t`sendAt` timestamp,\n\tCONSTRAINT `broadcasts_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.301 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000110] ["first new region left"="{Id:5095 StartKey:7480000000000001ff0e00000000000000f8 EndKey:7480000000000001ff1000000000000000f8 RegionEpoch:{ConfVer:1 Version:111} Peers:[id:5096 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.301 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5095]"]
[2024/09/16 23:43:30.310 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:275, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.296 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.310 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:275, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.296 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `broadcasts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`segmentId` bigint unsigned,\n\t`teamId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`emailContentId` bigint unsigned,\n\t`winningAbTestVariantId` bigint unsigned,\n\t`waitingTimeToPickWinner` int DEFAULT 4,\n\t`status` enum('SENT','SENDING','DRAFT','QUEUED_FOR_SENDING','SENDING_FAILED','DRAFT_ARCHIVED','ARCHIVED') DEFAULT 'DRAFT',\n\t`isAbTest` boolean NOT NULL DEFAULT false,\n\t`winningCriteria` enum('OPENS','CLICKS','CONVERSIONS'),\n\t`winningWaitTime` int,\n\t`sendAt` timestamp,\n\tCONSTRAINT `broadcasts_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.312 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=275] [conn=952108744] [category=ddl] [job="ID:275, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.296 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.321 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=746] [neededSchemaVersion=747] ["elapsed time"=693.875s] [gotSchemaVersion=747] [phyTblIDs="[274]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.323 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=275] [version=747]
[2024/09/16 23:43:30.324 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=747] ["take time"=4.415458ms] [job="ID:275, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:274, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.296 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.328 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=275] [conn=952108744] [job="ID:275, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.296 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.346 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=275]
[2024/09/16 23:43:30.346 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000112]
[2024/09/16 23:43:30.356 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=747] [cur_db=test] [sql="CREATE TABLE `contactAutomationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationStepId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`status` enum('PENDING','ACTIVE','COMPLETED','FAILED','HALTED') DEFAULT 'PENDING',\n\t`haltedAt` timestamp,\n\t`failedAt` timestamp,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp,\n\t`output` json,\n\tCONSTRAINT `contactAutomationSteps_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.369 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000112] ["first new region left"="{Id:5097 StartKey:7480000000000001ff1000000000000000f8 EndKey:7480000000000001ff1200000000000000f8 RegionEpoch:{ConfVer:1 Version:112} Peers:[id:5098 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.369 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5097]"]
[2024/09/16 23:43:30.377 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:277, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.344 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.377 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:277, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.344 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contactAutomationSteps` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`automationStepId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`status` enum('PENDING','ACTIVE','COMPLETED','FAILED','HALTED') DEFAULT 'PENDING',\n\t`haltedAt` timestamp,\n\t`failedAt` timestamp,\n\t`startedAt` timestamp,\n\t`completedAt` timestamp,\n\t`createdAt` timestamp,\n\t`output` json,\n\tCONSTRAINT `contactAutomationSteps_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.379 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=277] [conn=952108744] [category=ddl] [job="ID:277, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.344 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.389 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=747] [neededSchemaVersion=748] ["elapsed time"=643.125s] [gotSchemaVersion=748] [phyTblIDs="[276]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.392 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=277] [version=748]
[2024/09/16 23:43:30.393 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=748] ["take time"=5.676208ms] [job="ID:277, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:276, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.344 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.401 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=277] [conn=952108744] [job="ID:277, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.344 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.406 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=277]
[2024/09/16 23:43:30.406 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000114]
[2024/09/16 23:43:30.407 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=748] [cur_db=test] [sql="CREATE TABLE `contactImports` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fileIdentifier` varchar(32) NOT NULL,\n\t`name` varchar(50),\n\t`audienceId` bigint unsigned NOT NULL,\n\t`url` varchar(100) NOT NULL,\n\t`status` enum('PENDING','PROCESSING','FAILED','SUCCESS'),\n\t`subscribeAllContacts` boolean DEFAULT true,\n\t`updateExistingContacts` boolean DEFAULT true,\n\t`createdAt` timestamp DEFAULT (now()),\n\t`attributesMap` json NOT NULL,\n\tCONSTRAINT `contactImports_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contactImports_fileIdentifier_unique` UNIQUE(`fileIdentifier`)\n);"] [user=root@%]
[2024/09/16 23:43:30.408 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000114] ["first new region left"="{Id:5099 StartKey:7480000000000001ff1200000000000000f8 EndKey:7480000000000001ff1400000000000000f8 RegionEpoch:{ConfVer:1 Version:113} Peers:[id:5100 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.408 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5099]"]
[2024/09/16 23:43:30.419 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:279, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.396 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.419 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:279, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.396 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contactImports` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fileIdentifier` varchar(32) NOT NULL,\n\t`name` varchar(50),\n\t`audienceId` bigint unsigned NOT NULL,\n\t`url` varchar(100) NOT NULL,\n\t`status` enum('PENDING','PROCESSING','FAILED','SUCCESS'),\n\t`subscribeAllContacts` boolean DEFAULT true,\n\t`updateExistingContacts` boolean DEFAULT true,\n\t`createdAt` timestamp DEFAULT (now()),\n\t`attributesMap` json NOT NULL,\n\tCONSTRAINT `contactImports_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contactImports_fileIdentifier_unique` UNIQUE(`fileIdentifier`)\n);"]
[2024/09/16 23:43:30.421 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=279] [conn=952108744] [category=ddl] [job="ID:279, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.396 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.429 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=748] [neededSchemaVersion=749] ["elapsed time"=610.083s] [gotSchemaVersion=749] [phyTblIDs="[278]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.431 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=279] [version=749]
[2024/09/16 23:43:30.432 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=749] ["take time"=4.321417ms] [job="ID:279, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:278, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.396 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.435 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=279] [conn=952108744] [job="ID:279, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.396 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.440 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=279]
[2024/09/16 23:43:30.440 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000116]
[2024/09/16 23:43:30.441 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=749] [cur_db=test] [sql="CREATE TABLE `contacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`firstName` varchar(50),\n\t`lastName` varchar(50),\n\t`email` varchar(80) NOT NULL,\n\t`avatarUrl` varchar(256),\n\t`subscribedAt` timestamp,\n\t`unsubscribedAt` timestamp,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailVerificationToken` varchar(100),\n\t`emailVerificationTokenExpiresAt` timestamp,\n\t`contactImportId` bigint unsigned,\n\t`attributes` json,\n\t`createdAt` timestamp DEFAULT (now()),\n\tCONSTRAINT `contacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `ContactEmailAudienceIdKey` UNIQUE(`email`,`audienceId`)\n);"] [user=root@%]
[2024/09/16 23:43:30.442 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000116] ["first new region left"="{Id:5101 StartKey:7480000000000001ff1400000000000000f8 EndKey:7480000000000001ff1600000000000000f8 RegionEpoch:{ConfVer:1 Version:114} Peers:[id:5102 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.442 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5101]"]
[2024/09/16 23:43:30.448 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:281, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.448 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:281, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `contacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`firstName` varchar(50),\n\t`lastName` varchar(50),\n\t`email` varchar(80) NOT NULL,\n\t`avatarUrl` varchar(256),\n\t`subscribedAt` timestamp,\n\t`unsubscribedAt` timestamp,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailVerificationToken` varchar(100),\n\t`emailVerificationTokenExpiresAt` timestamp,\n\t`contactImportId` bigint unsigned,\n\t`attributes` json,\n\t`createdAt` timestamp DEFAULT (now()),\n\tCONSTRAINT `contacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `ContactEmailAudienceIdKey` UNIQUE(`email`,`audienceId`)\n);"]
[2024/09/16 23:43:30.450 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=281] [conn=952108744] [category=ddl] [job="ID:281, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.458 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=749] [neededSchemaVersion=750] ["elapsed time"=686.792s] [gotSchemaVersion=750] [phyTblIDs="[280]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.460 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=281] [version=750]
[2024/09/16 23:43:30.461 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=750] ["take time"=4.396708ms] [job="ID:281, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:280, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.465 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=281] [conn=952108744] [job="ID:281, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.470 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=281]
[2024/09/16 23:43:30.471 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000118]
[2024/09/16 23:43:30.471 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=750] [cur_db=test] [sql="CREATE TABLE `emailContents` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fromName` varchar(255),\n\t`fromEmail` varchar(255),\n\t`replyToEmail` varchar(255),\n\t`replyToName` varchar(255),\n\t`contentJson` json,\n\t`contentText` text,\n\t`contentHtml` text,\n\t`subject` varchar(255),\n\t`previewText` varchar(255),\n\tCONSTRAINT `emailContents_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.472 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000118] ["first new region left"="{Id:5103 StartKey:7480000000000001ff1600000000000000f8 EndKey:7480000000000001ff1800000000000000f8 RegionEpoch:{ConfVer:1 Version:115} Peers:[id:5104 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.472 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5103]"]
[2024/09/16 23:43:30.479 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:283, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:282, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.480 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:283, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:282, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `emailContents` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`fromName` varchar(255),\n\t`fromEmail` varchar(255),\n\t`replyToEmail` varchar(255),\n\t`replyToName` varchar(255),\n\t`contentJson` json,\n\t`contentText` text,\n\t`contentHtml` text,\n\t`subject` varchar(255),\n\t`previewText` varchar(255),\n\tCONSTRAINT `emailContents_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.481 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=283] [conn=952108744] [category=ddl] [job="ID:283, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:282, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.490 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=750] [neededSchemaVersion=751] ["elapsed time"=743.5s] [gotSchemaVersion=751] [phyTblIDs="[282]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.492 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=283] [version=751]
[2024/09/16 23:43:30.494 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=751] ["take time"=5.466333ms] [job="ID:283, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:282, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.498 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=283] [conn=952108744] [job="ID:283, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:282, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.444 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.502 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=283]
[2024/09/16 23:43:30.503 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000011a]
[2024/09/16 23:43:30.503 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=751] [cur_db=test] [sql="CREATE TABLE `emails` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`type` enum('AUTOMATION','TRANSACTIONAL') NOT NULL,\n\t`title` varchar(50) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned,\n\tCONSTRAINT `emails_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.504 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000011a] ["first new region left"="{Id:5105 StartKey:7480000000000001ff1800000000000000f8 EndKey:7480000000000001ff1a00000000000000f8 RegionEpoch:{ConfVer:1 Version:116} Peers:[id:5106 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.505 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5105]"]
[2024/09/16 23:43:30.513 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:285, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.513 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:285, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `emails` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`type` enum('AUTOMATION','TRANSACTIONAL') NOT NULL,\n\t`title` varchar(50) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`emailContentId` bigint unsigned,\n\tCONSTRAINT `emails_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.515 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=285] [conn=952108744] [category=ddl] [job="ID:285, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.524 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=751] [neededSchemaVersion=752] ["elapsed time"=586.917s] [gotSchemaVersion=752] [phyTblIDs="[284]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.526 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=285] [version=752]
[2024/09/16 23:43:30.527 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=752] ["take time"=4.383958ms] [job="ID:285, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:284, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.531 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=285] [conn=952108744] [job="ID:285, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.536 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=285]
[2024/09/16 23:43:30.536 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000011c]
[2024/09/16 23:43:30.537 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=752] [cur_db=test] [sql="CREATE TABLE `segments` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`filterGroups` json NOT NULL,\n\tCONSTRAINT `segments_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.538 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000011c] ["first new region left"="{Id:5107 StartKey:7480000000000001ff1a00000000000000f8 EndKey:7480000000000001ff1c00000000000000f8 RegionEpoch:{ConfVer:1 Version:117} Peers:[id:5108 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.539 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5107]"]
[2024/09/16 23:43:30.556 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:287, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.556 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:287, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `segments` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`audienceId` bigint unsigned NOT NULL,\n\t`filterGroups` json NOT NULL,\n\tCONSTRAINT `segments_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.558 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=287] [conn=952108744] [category=ddl] [job="ID:287, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.582 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=752] [neededSchemaVersion=753] ["elapsed time"=936.291s] [gotSchemaVersion=753] [phyTblIDs="[286]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.584 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=287] [version=753]
[2024/09/16 23:43:30.585 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=753] ["take time"=4.74675ms] [job="ID:287, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:286, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.589 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=287] [conn=952108744] [job="ID:287, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.495 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.595 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=287]
[2024/09/16 23:43:30.595 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000011e]
[2024/09/16 23:43:30.596 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=753] [cur_db=test] [sql="CREATE TABLE `sendingDomains` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`dkimSubDomain` varchar(120) NOT NULL,\n\t`dkimPublicKey` text NOT NULL,\n\t`dkimPrivateKey` text NOT NULL,\n\t`returnPathSubDomain` varchar(120) NOT NULL,\n\t`returnPathDomainCnameValue` varchar(120) NOT NULL,\n\t`dkimVerifiedAt` timestamp,\n\t`returnPathDomainVerifiedAt` timestamp,\n\tCONSTRAINT `sendingDomains_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.597 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000011e] ["first new region left"="{Id:5109 StartKey:7480000000000001ff1c00000000000000f8 EndKey:7480000000000001ff1e00000000000000f8 RegionEpoch:{ConfVer:1 Version:118} Peers:[id:5110 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.597 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5109]"]
[2024/09/16 23:43:30.607 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:289, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.607 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:289, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `sendingDomains` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`dkimSubDomain` varchar(120) NOT NULL,\n\t`dkimPublicKey` text NOT NULL,\n\t`dkimPrivateKey` text NOT NULL,\n\t`returnPathSubDomain` varchar(120) NOT NULL,\n\t`returnPathDomainCnameValue` varchar(120) NOT NULL,\n\t`dkimVerifiedAt` timestamp,\n\t`returnPathDomainVerifiedAt` timestamp,\n\tCONSTRAINT `sendingDomains_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.609 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=289] [conn=952108744] [category=ddl] [job="ID:289, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.620 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=753] [neededSchemaVersion=754] ["elapsed time"=1.019667ms] [gotSchemaVersion=754] [phyTblIDs="[288]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.622 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=289] [version=754]
[2024/09/16 23:43:30.623 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=754] ["take time"=6.241625ms] [job="ID:289, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:288, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.629 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=289] [conn=952108744] [job="ID:289, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.635 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=289]
[2024/09/16 23:43:30.635 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000120]
[2024/09/16 23:43:30.636 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=754] [cur_db=test] [sql="CREATE TABLE `settings` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`url` varchar(256),\n\t`domain` varchar(50) NOT NULL,\n\t`installedSslCertificate` boolean NOT NULL DEFAULT false,\n\tCONSTRAINT `settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `settings_url_unique` UNIQUE(`url`),\n\tCONSTRAINT `settings_domain_unique` UNIQUE(`domain`)\n);"] [user=root@%]
[2024/09/16 23:43:30.638 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000120] ["first new region left"="{Id:5111 StartKey:7480000000000001ff1e00000000000000f8 EndKey:7480000000000001ff2000000000000000f8 RegionEpoch:{ConfVer:1 Version:119} Peers:[id:5112 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.638 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5111]"]
[2024/09/16 23:43:30.642 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:291, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:290, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.642 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:291, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:290, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `settings` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`url` varchar(256),\n\t`domain` varchar(50) NOT NULL,\n\t`installedSslCertificate` boolean NOT NULL DEFAULT false,\n\tCONSTRAINT `settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `settings_url_unique` UNIQUE(`url`),\n\tCONSTRAINT `settings_domain_unique` UNIQUE(`domain`)\n);"]
[2024/09/16 23:43:30.644 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=291] [conn=952108744] [category=ddl] [job="ID:291, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:290, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.652 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=754] [neededSchemaVersion=755] ["elapsed time"=562.875s] [gotSchemaVersion=755] [phyTblIDs="[290]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.654 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=291] [version=755]
[2024/09/16 23:43:30.654 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=755] ["take time"=4.172333ms] [job="ID:291, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:290, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.658 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=291] [conn=952108744] [job="ID:291, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:290, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.594 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.664 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=291]
[2024/09/16 23:43:30.664 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000122]
[2024/09/16 23:43:30.665 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=755] [cur_db=test] [sql="CREATE TABLE `tags` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(256) NOT NULL,\n\t`description` varchar(256),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `tags_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagNameAudienceIdKey` UNIQUE(`name`,`audienceId`)\n);"] [user=root@%]
[2024/09/16 23:43:30.666 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000122] ["first new region left"="{Id:5113 StartKey:7480000000000001ff2000000000000000f8 EndKey:7480000000000001ff2200000000000000f8 RegionEpoch:{ConfVer:1 Version:120} Peers:[id:5114 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.667 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5113]"]
[2024/09/16 23:43:30.670 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:293, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.670 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:293, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `tags` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(256) NOT NULL,\n\t`description` varchar(256),\n\t`audienceId` bigint unsigned NOT NULL,\n\tCONSTRAINT `tags_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagNameAudienceIdKey` UNIQUE(`name`,`audienceId`)\n);"]
[2024/09/16 23:43:30.672 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=293] [conn=952108744] [category=ddl] [job="ID:293, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.680 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=755] [neededSchemaVersion=756] ["elapsed time"=730.583s] [gotSchemaVersion=756] [phyTblIDs="[292]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.682 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=293] [version=756]
[2024/09/16 23:43:30.683 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=756] ["take time"=4.387917ms] [job="ID:293, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:292, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.686 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=293] [conn=952108744] [job="ID:293, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.691 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=293]
[2024/09/16 23:43:30.691 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000124]
[2024/09/16 23:43:30.692 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=756] [cur_db=test] [sql="CREATE TABLE `tagsOnContacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`tagId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`assignedAt` timestamp,\n\tCONSTRAINT `tagsOnContacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagsOnContactsTagIdContactIdKey` UNIQUE(`tagId`,`contactId`)\n);"] [user=root@%]
[2024/09/16 23:43:30.694 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000124] ["first new region left"="{Id:5115 StartKey:7480000000000001ff2200000000000000f8 EndKey:7480000000000001ff2400000000000000f8 RegionEpoch:{ConfVer:1 Version:121} Peers:[id:5116 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.694 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5115]"]
[2024/09/16 23:43:30.698 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:295, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.698 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:295, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `tagsOnContacts` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`tagId` bigint unsigned NOT NULL,\n\t`contactId` bigint unsigned NOT NULL,\n\t`assignedAt` timestamp,\n\tCONSTRAINT `tagsOnContacts_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `tagsOnContactsTagIdContactIdKey` UNIQUE(`tagId`,`contactId`)\n);"]
[2024/09/16 23:43:30.699 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=295] [conn=952108744] [category=ddl] [job="ID:295, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.708 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=756] [neededSchemaVersion=757] ["elapsed time"=526.167s] [gotSchemaVersion=757] [phyTblIDs="[294]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.709 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=295] [version=757]
[2024/09/16 23:43:30.710 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=757] ["take time"=3.9725ms] [job="ID:295, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.714 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=295] [conn=952108744] [job="ID:295, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.644 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.719 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=295]
[2024/09/16 23:43:30.719 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000126]
[2024/09/16 23:43:30.720 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=757] [cur_db=test] [sql="CREATE TABLE `teamMemberships` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`email` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`role` enum('ADMINISTRATOR','MANAGER','AUTHOR','GUEST'),\n\t`status` enum('PENDING','ACTIVE'),\n\t`invitedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL,\n\tCONSTRAINT `teamMemberships_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.721 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000126] ["first new region left"="{Id:5117 StartKey:7480000000000001ff2400000000000000f8 EndKey:7480000000000001ff2600000000000000f8 RegionEpoch:{ConfVer:1 Version:122} Peers:[id:5118 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.721 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5117]"]
[2024/09/16 23:43:30.728 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:297, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.728 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:297, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `teamMemberships` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`userId` bigint unsigned,\n\t`email` varchar(50) NOT NULL,\n\t`teamId` bigint unsigned NOT NULL,\n\t`role` enum('ADMINISTRATOR','MANAGER','AUTHOR','GUEST'),\n\t`status` enum('PENDING','ACTIVE'),\n\t`invitedAt` timestamp NOT NULL DEFAULT (now()),\n\t`expiresAt` timestamp NOT NULL,\n\tCONSTRAINT `teamMemberships_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.729 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=297] [conn=952108744] [category=ddl] [job="ID:297, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.739 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=757] [neededSchemaVersion=758] ["elapsed time"=649.25s] [gotSchemaVersion=758] [phyTblIDs="[296]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.741 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=297] [version=758]
[2024/09/16 23:43:30.742 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=758] ["take time"=5.206708ms] [job="ID:297, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:296, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.788 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=297] [conn=952108744] [job="ID:297, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.800 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=297]
[2024/09/16 23:43:30.800 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=748000000000000128]
[2024/09/16 23:43:30.801 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=758] [cur_db=test] [sql="CREATE TABLE `teams` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`userId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`broadcastEditor` enum('DEFAULT','MARKDOWN'),\n\tCONSTRAINT `teams_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.802 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=748000000000000128] ["first new region left"="{Id:5119 StartKey:7480000000000001ff2600000000000000f8 EndKey:7480000000000001ff2800000000000000f8 RegionEpoch:{ConfVer:1 Version:123} Peers:[id:5120 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.802 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5119]"]
[2024/09/16 23:43:30.810 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:299, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.810 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:299, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `teams` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(100) NOT NULL,\n\t`userId` bigint unsigned NOT NULL,\n\t`trackClicks` boolean,\n\t`trackOpens` boolean,\n\t`broadcastEditor` enum('DEFAULT','MARKDOWN'),\n\tCONSTRAINT `teams_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.812 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=299] [conn=952108744] [category=ddl] [job="ID:299, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.821 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=758] [neededSchemaVersion=759] ["elapsed time"=718.375s] [gotSchemaVersion=759] [phyTblIDs="[298]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.823 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=299] [version=759]
[2024/09/16 23:43:30.824 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=759] ["take time"=4.806917ms] [job="ID:299, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:298, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.828 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=299] [conn=952108744] [job="ID:299, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.833 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=299]
[2024/09/16 23:43:30.834 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000012a]
[2024/09/16 23:43:30.835 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=759] [cur_db=test] [sql="CREATE TABLE `users` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`email` varchar(80) NOT NULL,\n\t`name` varchar(80),\n\t`avatarUrl` varchar(256),\n\t`password` varchar(256) NOT NULL,\n\tCONSTRAINT `users_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `users_email_unique` UNIQUE(`email`)\n);"] [user=root@%]
[2024/09/16 23:43:30.836 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000012a] ["first new region left"="{Id:5121 StartKey:7480000000000001ff2800000000000000f8 EndKey:7480000000000001ff2a00000000000000f8 RegionEpoch:{ConfVer:1 Version:124} Peers:[id:5122 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.836 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5121]"]
[2024/09/16 23:43:30.844 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:301, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:300, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.844 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:301, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:300, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `users` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`email` varchar(80) NOT NULL,\n\t`name` varchar(80),\n\t`avatarUrl` varchar(256),\n\t`password` varchar(256) NOT NULL,\n\tCONSTRAINT `users_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `users_email_unique` UNIQUE(`email`)\n);"]
[2024/09/16 23:43:30.846 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=301] [conn=952108744] [category=ddl] [job="ID:301, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:300, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.856 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=759] [neededSchemaVersion=760] ["elapsed time"=1.36925ms] [gotSchemaVersion=760] [phyTblIDs="[300]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.859 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=301] [version=760]
[2024/09/16 23:43:30.860 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=760] ["take time"=6.460417ms] [job="ID:301, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:300, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.865 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=301] [conn=952108744] [job="ID:301, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:300, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.870 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=301]
[2024/09/16 23:43:30.871 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000012c]
[2024/09/16 23:43:30.872 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=760] [cur_db=test] [sql="CREATE TABLE `webhooks` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`url` varchar(256) NOT NULL,\n\t`webhookEvent` enum('ALL_EVENTS','CONTACT_ADDED','CONTACT_REMOVED','CONTACT_TAG_ADDED','CONTACT_TAG_REMOVED','BROADCAST_SENT','BROADCAST_PAUSED','BROADCAST_EMAIL_OPENED','BROADCAST_EMAIL_LINK_CLICKED','AUDIENCE_ADDED','TAG_ADDED','TAG_REMOVED'),\n\t`teamId` bigint unsigned NOT NULL,\n\tCONSTRAINT `webhooks_id` PRIMARY KEY(`id`)\n);"] [user=root@%]
[2024/09/16 23:43:30.873 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000012c] ["first new region left"="{Id:5123 StartKey:7480000000000001ff2a00000000000000f8 EndKey:7480000000000001ff2c00000000000000f8 RegionEpoch:{ConfVer:1 Version:125} Peers:[id:5124 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.873 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5123]"]
[2024/09/16 23:43:30.880 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:303, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.881 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:303, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="CREATE TABLE `webhooks` (\n\t`id` bigint unsigned AUTO_INCREMENT NOT NULL,\n\t`name` varchar(50) NOT NULL,\n\t`url` varchar(256) NOT NULL,\n\t`webhookEvent` enum('ALL_EVENTS','CONTACT_ADDED','CONTACT_REMOVED','CONTACT_TAG_ADDED','CONTACT_TAG_REMOVED','BROADCAST_SENT','BROADCAST_PAUSED','BROADCAST_EMAIL_OPENED','BROADCAST_EMAIL_LINK_CLICKED','AUDIENCE_ADDED','TAG_ADDED','TAG_REMOVED'),\n\t`teamId` bigint unsigned NOT NULL,\n\tCONSTRAINT `webhooks_id` PRIMARY KEY(`id`)\n);"]
[2024/09/16 23:43:30.883 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=303] [conn=952108744] [category=ddl] [job="ID:303, Type:create table, State:queueing, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.893 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=760] [neededSchemaVersion=761] ["elapsed time"=635.417s] [gotSchemaVersion=761] [phyTblIDs="[302]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/16 23:43:30.895 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=303] [version=761]
[2024/09/16 23:43:30.896 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=761] ["take time"=5.060084ms] [job="ID:303, Type:create table, State:done, SchemaState:public, SchemaID:260, TableID:302, RowCount:0, ArgLen:2, start time: 2024-09-16 23:43:30.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.900 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=303] [conn=952108744] [job="ID:303, Type:create table, State:synced, SchemaState:public, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:43:30.906 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=303]
[2024/09/16 23:43:30.906 +00:00] [INFO] [split_region.go:85] ["split batch regions request"] ["split key count"=1] ["batch count"=1] ["first batch, region ID"=5035] ["first split key"=74800000000000012e]
[2024/09/16 23:43:30.907 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=761] [cur_db=test] [sql="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_broadcastId_broadcasts_id_fk` FOREIGN KEY (`broadcastId`) REFERENCES `broadcasts`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:30.908 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:30.908 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:30.908 +00:00] [INFO] [split_region.go:187] ["batch split regions complete"] ["batch region ID"=5035] ["first at"=74800000000000012e] ["first new region left"="{Id:5125 StartKey:7480000000000001ff2c00000000000000f8 EndKey:7480000000000001ff2e00000000000000f8 RegionEpoch:{ConfVer:1 Version:126} Peers:[id:5126 store_id:1 ] EncryptionMeta:<nil> IsInFlashback:false FlashbackStartTs:0}"] ["new region count"=1]
[2024/09/16 23:43:30.908 +00:00] [INFO] [split_region.go:236] ["split regions complete"] ["region count"=1] ["region IDs"="[5125]"]
[2024/09/16 23:43:30.916 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:304, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:30.916 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:304, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_broadcastId_broadcasts_id_fk` FOREIGN KEY (`broadcastId`) REFERENCES `broadcasts`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:30.918 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:30.918 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"abTestVariants_broadcastId_broadcasts_id_fk\",\"L\":\"abtestvariants_broadcastid_broadcasts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"broadcastId\",\"L\":\"broadcastid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:30.927 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=761] [neededSchemaVersion=762] ["elapsed time"=776.083s] [gotSchemaVersion=762] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:30.929 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=762]
[2024/09/16 23:43:30.930 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=762] ["take time"=4.802ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:30.934 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:30.941 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=762] [neededSchemaVersion=763] ["elapsed time"=603.208s] [gotSchemaVersion=763] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:30.943 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=763]
[2024/09/16 23:43:30.943 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=763] ["take time"=3.740208ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:30.947 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:30.955 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=763] [neededSchemaVersion=764] ["elapsed time"=783.417s] [gotSchemaVersion=764] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:30.957 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=764]
[2024/09/16 23:43:30.958 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=764] ["take time"=4.899ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:30.962 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:30.962 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=304] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 23:43:30.963 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{264 abTestVariants utf8mb4 utf8mb4_bin [0x402a547760 0x402a5478c0 0x402a547a20 0x402a547b80 0x402a547ce0 0x402a547e40] [0x401a0af4d0] [] [] public true false 0  0 0 0 0 6 1 0 0 452599535617966081 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=264] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:30.964 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=304] [physicalTableID=264] [startKey=] [endKey=]
[2024/09/16 23:43:30.968 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=304]
[2024/09/16 23:43:30.970 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599535617966091, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:30.971 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=304] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 23:43:30.975 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/304/0]
[2024/09/16 23:43:30.978 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=264] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:30.989 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=65]
[2024/09/16 23:43:30.989 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=65] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:31.490 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=65] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:31.490 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=65] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:31.491 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=65] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:31.492 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{264 abTestVariants utf8mb4 utf8mb4_bin [0x402a2acdc0 0x402a2acf20 0x402a2ad080 0x402a2ad1e0 0x402a2ad340 0x402a2ad4a0] [0x40157e4d80] [] [] public true false 0  0 0 0 0 6 1 0 0 452599535617966081 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=264] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:31.492 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=65] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:31.842 +00:00] [INFO] [executor.go:1460] ["limit executor close takes a long time"] [elapsed=2.660291ms]
[2024/09/16 23:43:31.994 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=65] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:32.211 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:32.223 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=764] [neededSchemaVersion=765] ["elapsed time"=852.875s] [gotSchemaVersion=765] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:32.225 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=765]
[2024/09/16 23:43:32.225 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=765] ["take time"=4.5585ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.229 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599535617966091, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.230 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=304] [table=abTestVariants] [index=abTestVariants_broadcastId_broadcasts_id_fk]
[2024/09/16 23:43:32.238 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=765] [neededSchemaVersion=766] ["elapsed time"=600.042s] [gotSchemaVersion=766] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:32.241 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=766]
[2024/09/16 23:43:32.241 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=766] ["take time"=4.861208ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.245 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.246 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=304] [physicalTableID=264] [startKey=7480000000000001085f69ffff000000000001] [endKey=7480000000000001085f69ffff000000000001ff]
[2024/09/16 23:43:32.253 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=304]
[2024/09/16 23:43:32.255 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599535958753281, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.257 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599535958753281, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000001085f69ffff000000000001,EndKey:7480000000000001085f69ffff000000000001ff,First:false,PhysicalTableID:264,Ingest mode:false"]
[2024/09/16 23:43:32.279 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=264] ["start key"=7480000000000001085f69ffff000000000001] ["end key"=7480000000000001085f69ffff000000000001ff]
[2024/09/16 23:43:32.279 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=264] ["range start"=7480000000000001085f69ffff000000000001] ["range end"=7480000000000001085f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:43:32.280 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001085f69ffff000000000001] [endKey=7480000000000001085f69ffff000000000001ff]
[2024/09/16 23:43:32.280 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=304]
[2024/09/16 23:43:32.280 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=304]
[2024/09/16 23:43:32.280 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=304]
[2024/09/16 23:43:32.282 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 264, range: [7480000000000001085f69ffff000000000001, 7480000000000001085f69ffff000000000001ff), jobID: 304"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001085f69ffff000000000001ff00] ["take time"=2.084958ms]
[2024/09/16 23:43:32.282 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=304]
[2024/09/16 23:43:32.282 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001085f69ffff000000000001]
[2024/09/16 23:43:32.282 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:32.292 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=766] [neededSchemaVersion=767] ["elapsed time"=563.166s] [gotSchemaVersion=767] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:32.294 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=767]
[2024/09/16 23:43:32.295 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=767] ["take time"=4.649125ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.299 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.308 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=767] [neededSchemaVersion=768] ["elapsed time"=560.958s] [gotSchemaVersion=768] [phyTblIDs="[264]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:32.309 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=768]
[2024/09/16 23:43:32.310 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=768] ["take time"=4.398ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.314 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.324 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=768] [neededSchemaVersion=769] ["elapsed time"=615.5s] [gotSchemaVersion=769] [phyTblIDs="[264]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:32.325 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=769]
[2024/09/16 23:43:32.326 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=769] ["take time"=4.050916ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.330 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.338 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=769] [neededSchemaVersion=770] ["elapsed time"=457.625s] [gotSchemaVersion=770] [phyTblIDs="[264]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:32.339 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=770]
[2024/09/16 23:43:32.340 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=770] ["take time"=4.258583ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.345 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [category=ddl] [job="ID:304, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599535958753281, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:32.347 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:32.352 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=770] [neededSchemaVersion=771] ["elapsed time"=597.458s] [gotSchemaVersion=771] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:32.355 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=304] [version=771]
[2024/09/16 23:43:32.355 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=771] ["take time"=4.610583ms] [job="ID:304, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.362 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=304]
[2024/09/16 23:43:32.365 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=304] [tableID=264] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:32.367 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=304] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:32.368 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=304] [conn=952108744] [job="ID:304, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:30.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.379 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=304]
[2024/09/16 23:43:32.380 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=771] [cur_db=test] [sql="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:32.380 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:32.380 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=abtestvariants] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:32.385 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:305, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:32.385 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:305, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `abTestVariants` ADD CONSTRAINT `abTestVariants_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:32.387 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.388 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"abTestVariants_emailContentId_emailContents_id_fk\",\"L\":\"abtestvariants_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:32.396 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=771] [neededSchemaVersion=772] ["elapsed time"=535.708s] [gotSchemaVersion=772] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:32.398 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=772]
[2024/09/16 23:43:32.398 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=772] ["take time"=4.241209ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.402 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.410 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=772] [neededSchemaVersion=773] ["elapsed time"=636.75s] [gotSchemaVersion=773] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:32.412 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=773]
[2024/09/16 23:43:32.413 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=773] ["take time"=4.463084ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.417 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.425 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=773] [neededSchemaVersion=774] ["elapsed time"=593.5s] [gotSchemaVersion=774] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:32.427 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=774]
[2024/09/16 23:43:32.428 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=774] ["take time"=4.0815ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:32.430 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.431 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=305] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 23:43:32.432 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{264 abTestVariants utf8mb4 utf8mb4_bin [0x4012185e40 0x40105b0000 0x40105b0160 0x40105b02c0 0x40105b0dc0 0x40105b0f20] [0x40212e7170 0x40212e73b0] [] [0x400ee57980] public true false 0  0 0 0 0 6 2 1 0 452599535998074895 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=264] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:32.432 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=305] [physicalTableID=264] [startKey=] [endKey=]
[2024/09/16 23:43:32.438 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=305]
[2024/09/16 23:43:32.439 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599535998074905, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:32.440 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=305] [table=abTestVariants] ["ingest mode"=true] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 23:43:32.445 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/305/0]
[2024/09/16 23:43:32.449 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=264] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:32.459 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=66]
[2024/09/16 23:43:32.459 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=66] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:32.490 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=65]
[2024/09/16 23:43:32.492 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:32.492 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=65]
[2024/09/16 23:43:32.497 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:32.962 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=66] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:32.963 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=66] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:32.966 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=66] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:32.967 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{264 abTestVariants utf8mb4 utf8mb4_bin [0x400f676160 0x400f6762c0 0x400f676420 0x400f6771e0 0x400f677340 0x400f6774a0] [0x4019e58a20 0x4019e58c60] [] [0x4007dacb40] public true false 0  0 0 0 0 6 2 1 0 452599535998074895 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=264] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:32.967 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=66] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:33.463 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=66] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:33.662 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:33.669 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=774] [neededSchemaVersion=775] ["elapsed time"=537.708s] [gotSchemaVersion=775] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:33.671 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=775]
[2024/09/16 23:43:33.672 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=775] ["take time"=3.939334ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.675 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599535998074905, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.675 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=305] [table=abTestVariants] [index=abTestVariants_emailContentId_emailContents_id_fk]
[2024/09/16 23:43:33.681 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=775] [neededSchemaVersion=776] ["elapsed time"=523.042s] [gotSchemaVersion=776] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:33.683 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=776]
[2024/09/16 23:43:33.683 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=776] ["take time"=3.435833ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.686 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.687 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=305] [physicalTableID=264] [startKey=7480000000000001085f69ffff000000000002] [endKey=7480000000000001085f69ffff000000000002ff]
[2024/09/16 23:43:33.691 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=305]
[2024/09/16 23:43:33.692 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536325754903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.694 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536325754903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001085f69ffff000000000002,EndKey:7480000000000001085f69ffff000000000002ff,First:false,PhysicalTableID:264,Ingest mode:false"]
[2024/09/16 23:43:33.695 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=264] ["start key"=7480000000000001085f69ffff000000000002] ["end key"=7480000000000001085f69ffff000000000002ff]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=264] ["range start"=7480000000000001085f69ffff000000000002] ["range end"=7480000000000001085f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001085f69ffff000000000002] [endKey=7480000000000001085f69ffff000000000002ff]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=305]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=305]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=305]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 264, range: [7480000000000001085f69ffff000000000002, 7480000000000001085f69ffff000000000002ff), jobID: 305"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001085f69ffff000000000002ff00] ["take time"=481.166s]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=305]
[2024/09/16 23:43:33.696 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001085f69ffff000000000002]
[2024/09/16 23:43:33.696 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:33.702 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=776] [neededSchemaVersion=777] ["elapsed time"=486.25s] [gotSchemaVersion=777] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:33.704 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=777]
[2024/09/16 23:43:33.705 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=777] ["take time"=3.988667ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.707 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.715 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=777] [neededSchemaVersion=778] ["elapsed time"=700.208s] [gotSchemaVersion=778] [phyTblIDs="[264]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:33.717 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=778]
[2024/09/16 23:43:33.718 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=778] ["take time"=4.274875ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.721 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.729 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=778] [neededSchemaVersion=779] ["elapsed time"=521.208s] [gotSchemaVersion=779] [phyTblIDs="[264]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:33.731 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=779]
[2024/09/16 23:43:33.731 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=779] ["take time"=3.428292ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.734 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.740 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=779] [neededSchemaVersion=780] ["elapsed time"=643.334s] [gotSchemaVersion=780] [phyTblIDs="[264]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:33.742 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=780]
[2024/09/16 23:43:33.742 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=780] ["take time"=3.403666ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.746 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [category=ddl] [job="ID:305, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536325754903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:33.747 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:33.753 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=780] [neededSchemaVersion=781] ["elapsed time"=622.834s] [gotSchemaVersion=781] [phyTblIDs="[264]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:33.755 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=305] [version=781]
[2024/09/16 23:43:33.756 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=781] ["take time"=4.403417ms] [job="ID:305, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.761 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=305]
[2024/09/16 23:43:33.763 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=305] [tableID=264] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:33.765 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=305] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:33.765 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=305] [conn=952108744] [job="ID:305, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:264, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:32.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.771 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=305]
[2024/09/16 23:43:33.772 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=781] [cur_db=test] [sql="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:33.772 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:33.773 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:33.777 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:306, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:33.777 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:306, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:33.778 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.778 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"accessTokens_userId_users_id_fk\",\"L\":\"accesstokens_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:33.784 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=781] [neededSchemaVersion=782] ["elapsed time"=548s] [gotSchemaVersion=782] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:33.786 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=782]
[2024/09/16 23:43:33.787 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=782] ["take time"=3.563083ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.789 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.796 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=782] [neededSchemaVersion=783] ["elapsed time"=621.5s] [gotSchemaVersion=783] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:33.797 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=783]
[2024/09/16 23:43:33.798 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=783] ["take time"=3.817625ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.800 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.807 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=783] [neededSchemaVersion=784] ["elapsed time"=546.875s] [gotSchemaVersion=784] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:33.808 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=784]
[2024/09/16 23:43:33.809 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=784] ["take time"=3.4015ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:33.812 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.812 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=306] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_userId_users_id_fk]
[2024/09/16 23:43:33.813 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{266 accessTokens utf8mb4 utf8mb4_bin [0x402bc11080 0x402bc111e0 0x402bc11340 0x402bc114a0 0x402bc11600 0x400b064420 0x400b064580 0x400b065080 0x400b0651e0] [0x402d73e480] [] [] public true false 0  0 0 0 0 9 1 0 0 452599536365076485 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=266] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:33.813 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=306] [physicalTableID=266] [startKey=] [endKey=]
[2024/09/16 23:43:33.817 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=306]
[2024/09/16 23:43:33.818 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536365076495, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:33.819 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=306] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_userId_users_id_fk]
[2024/09/16 23:43:33.822 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/306/0]
[2024/09/16 23:43:33.823 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=266] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:33.831 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=67]
[2024/09/16 23:43:33.831 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=67] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:33.960 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=66]
[2024/09/16 23:43:33.962 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:33.962 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=66]
[2024/09/16 23:43:33.967 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:34.333 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=67] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:34.333 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=67] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:34.334 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=67] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:34.335 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{266 accessTokens utf8mb4 utf8mb4_bin [0x400be8ef20 0x400be8f080 0x400be8f1e0 0x400be8f340 0x400be8f4a0 0x400be8f600 0x400be8f760 0x400be8f8c0 0x400be8fa20] [0x401102fef0] [] [] public true false 0  0 0 0 0 9 1 0 0 452599536365076485 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=266] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:34.335 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=67] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:34.835 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=67] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:35.038 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:35.046 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=784] [neededSchemaVersion=785] ["elapsed time"=477.875s] [gotSchemaVersion=785] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:35.047 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=785]
[2024/09/16 23:43:35.048 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=785] ["take time"=4.201709ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.051 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536365076495, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.051 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=306] [table=accessTokens] [index=accessTokens_userId_users_id_fk]
[2024/09/16 23:43:35.057 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=785] [neededSchemaVersion=786] ["elapsed time"=551.958s] [gotSchemaVersion=786] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:35.059 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=786]
[2024/09/16 23:43:35.059 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=786] ["take time"=3.507833ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.062 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.063 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=306] [physicalTableID=266] [startKey=74800000000000010a5f69ffff000000000001] [endKey=74800000000000010a5f69ffff000000000001ff]
[2024/09/16 23:43:35.067 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=306]
[2024/09/16 23:43:35.068 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536692494351, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.070 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536692494351, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000010a5f69ffff000000000001,EndKey:74800000000000010a5f69ffff000000000001ff,First:false,PhysicalTableID:266,Ingest mode:false"]
[2024/09/16 23:43:35.071 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=266] ["start key"=74800000000000010a5f69ffff000000000001] ["end key"=74800000000000010a5f69ffff000000000001ff]
[2024/09/16 23:43:35.071 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=266] ["range start"=74800000000000010a5f69ffff000000000001] ["range end"=74800000000000010a5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:43:35.071 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010a5f69ffff000000000001] [endKey=74800000000000010a5f69ffff000000000001ff]
[2024/09/16 23:43:35.071 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=306]
[2024/09/16 23:43:35.071 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=306]
[2024/09/16 23:43:35.071 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=306]
[2024/09/16 23:43:35.072 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 266, range: [74800000000000010a5f69ffff000000000001, 74800000000000010a5f69ffff000000000001ff), jobID: 306"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010a5f69ffff000000000001ff00] ["take time"=339.958s]
[2024/09/16 23:43:35.072 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=306]
[2024/09/16 23:43:35.072 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010a5f69ffff000000000001]
[2024/09/16 23:43:35.072 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:35.077 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=786] [neededSchemaVersion=787] ["elapsed time"=535.833s] [gotSchemaVersion=787] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:35.079 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=787]
[2024/09/16 23:43:35.080 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=787] ["take time"=3.394084ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.082 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.089 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=787] [neededSchemaVersion=788] ["elapsed time"=560.458s] [gotSchemaVersion=788] [phyTblIDs="[266]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:35.090 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=788]
[2024/09/16 23:43:35.091 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=788] ["take time"=3.375ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.094 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.102 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=788] [neededSchemaVersion=789] ["elapsed time"=594.875s] [gotSchemaVersion=789] [phyTblIDs="[266]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:35.103 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=789]
[2024/09/16 23:43:35.104 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=789] ["take time"=3.645667ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.106 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.114 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=789] [neededSchemaVersion=790] ["elapsed time"=499.333s] [gotSchemaVersion=790] [phyTblIDs="[266]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:35.116 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=790]
[2024/09/16 23:43:35.116 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=790] ["take time"=3.452166ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.120 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [category=ddl] [job="ID:306, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536692494351, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:35.121 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:35.126 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=790] [neededSchemaVersion=791] ["elapsed time"=634.334s] [gotSchemaVersion=791] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:35.128 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=306] [version=791]
[2024/09/16 23:43:35.128 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=791] ["take time"=3.802083ms] [job="ID:306, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.134 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=306]
[2024/09/16 23:43:35.136 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=306] [tableID=266] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:35.138 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=306] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:35.139 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=306] [conn=952108744] [job="ID:306, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:33.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.145 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=306]
[2024/09/16 23:43:35.146 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=791] [cur_db=test] [sql="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:35.147 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:35.147 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=accesstokens] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:35.150 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:307, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:35.151 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:307, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `accessTokens` ADD CONSTRAINT `accessTokens_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:35.152 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.152 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"accessTokens_teamId_teams_id_fk\",\"L\":\"accesstokens_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:35.159 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=791] [neededSchemaVersion=792] ["elapsed time"=589.041s] [gotSchemaVersion=792] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:35.160 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=792]
[2024/09/16 23:43:35.161 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=792] ["take time"=3.752083ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.164 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.171 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=792] [neededSchemaVersion=793] ["elapsed time"=511s] [gotSchemaVersion=793] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:35.172 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=793]
[2024/09/16 23:43:35.173 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=793] ["take time"=3.37875ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.175 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.182 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=793] [neededSchemaVersion=794] ["elapsed time"=570.5s] [gotSchemaVersion=794] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:35.184 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=794]
[2024/09/16 23:43:35.184 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=794] ["take time"=3.593875ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:35.187 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.187 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=307] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 23:43:35.188 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{266 accessTokens utf8mb4 utf8mb4_bin [0x4020b358c0 0x4020b35a20 0x4020b35b80 0x4020b35ce0 0x4020b35e40 0x4015424160 0x40154242c0 0x4015424420 0x4015424580] [0x402645e360 0x402645e630] [] [0x401dfa7d40] public true false 0  0 0 0 0 9 2 1 0 452599536718970908 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=266] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:35.188 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=307] [physicalTableID=266] [startKey=] [endKey=]
[2024/09/16 23:43:35.192 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=307]
[2024/09/16 23:43:35.194 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536718970918, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:35.194 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=307] [table=accessTokens] ["ingest mode"=true] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 23:43:35.198 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/307/0]
[2024/09/16 23:43:35.201 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=266] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:35.210 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=68]
[2024/09/16 23:43:35.210 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=68] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:35.333 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=67]
[2024/09/16 23:43:35.336 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:35.336 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=67]
[2024/09/16 23:43:35.340 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:35.714 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=68] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:35.714 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=68] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:35.716 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=68] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:35.717 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{266 accessTokens utf8mb4 utf8mb4_bin [0x400c8bc000 0x400c8bc160 0x400c8bc2c0 0x400c8bc420 0x400c8bc580 0x400c8bc6e0 0x400c8bc840 0x400c8bc9a0 0x400c8bcb00] [0x402649aea0 0x402649b0e0] [] [0x401729a180] public true false 0  0 0 0 0 9 2 1 0 452599536718970908 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=266] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:35.717 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=68] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:36.217 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=68] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:36.415 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:36.423 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=794] [neededSchemaVersion=795] ["elapsed time"=754.959s] [gotSchemaVersion=795] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:36.425 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=795]
[2024/09/16 23:43:36.426 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=795] ["take time"=4.437833ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.429 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599536718970918, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.429 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=307] [table=accessTokens] [index=accessTokens_teamId_teams_id_fk]
[2024/09/16 23:43:36.436 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=795] [neededSchemaVersion=796] ["elapsed time"=649.417s] [gotSchemaVersion=796] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:36.438 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=796]
[2024/09/16 23:43:36.439 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=796] ["take time"=3.734417ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.441 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.442 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=307] [physicalTableID=266] [startKey=74800000000000010a5f69ffff000000000002] [endKey=74800000000000010a5f69ffff000000000002ff]
[2024/09/16 23:43:36.447 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=307]
[2024/09/16 23:43:36.448 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537046388759, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.450 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537046388759, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000010a5f69ffff000000000002,EndKey:74800000000000010a5f69ffff000000000002ff,First:false,PhysicalTableID:266,Ingest mode:false"]
[2024/09/16 23:43:36.451 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=266] ["start key"=74800000000000010a5f69ffff000000000002] ["end key"=74800000000000010a5f69ffff000000000002ff]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=266] ["range start"=74800000000000010a5f69ffff000000000002] ["range end"=74800000000000010a5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010a5f69ffff000000000002] [endKey=74800000000000010a5f69ffff000000000002ff]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=307]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=307]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=307]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 266, range: [74800000000000010a5f69ffff000000000002, 74800000000000010a5f69ffff000000000002ff), jobID: 307"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010a5f69ffff000000000002ff00] ["take time"=402.292s]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=307]
[2024/09/16 23:43:36.452 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010a5f69ffff000000000002]
[2024/09/16 23:43:36.452 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:36.458 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=796] [neededSchemaVersion=797] ["elapsed time"=550.083s] [gotSchemaVersion=797] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:36.460 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=797]
[2024/09/16 23:43:36.460 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=797] ["take time"=3.340167ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.463 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.469 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=797] [neededSchemaVersion=798] ["elapsed time"=605.125s] [gotSchemaVersion=798] [phyTblIDs="[266]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:36.471 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=798]
[2024/09/16 23:43:36.471 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=798] ["take time"=3.411917ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.474 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.481 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=798] [neededSchemaVersion=799] ["elapsed time"=655.833s] [gotSchemaVersion=799] [phyTblIDs="[266]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:36.483 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=799]
[2024/09/16 23:43:36.483 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=799] ["take time"=3.443958ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.486 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.492 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=799] [neededSchemaVersion=800] ["elapsed time"=521.083s] [gotSchemaVersion=800] [phyTblIDs="[266]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:36.494 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=800]
[2024/09/16 23:43:36.494 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=800] ["take time"=3.070083ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.497 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [category=ddl] [job="ID:307, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537046388759, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:36.499 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:36.503 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=800] [neededSchemaVersion=801] ["elapsed time"=540.584s] [gotSchemaVersion=801] [phyTblIDs="[266]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:36.505 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=307] [version=801]
[2024/09/16 23:43:36.505 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=801] ["take time"=3.17175ms] [job="ID:307, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.510 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=307]
[2024/09/16 23:43:36.511 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=307] [tableID=266] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:36.513 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=307] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:36.514 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=307] [conn=952108744] [job="ID:307, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:266, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:35.145 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.520 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=307]
[2024/09/16 23:43:36.521 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=801] [cur_db=test] [sql="ALTER TABLE `audiences` ADD CONSTRAINT `audiences_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:36.521 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=audiences] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:36.521 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=audiences] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:36.525 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:308, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:36.525 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:308, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `audiences` ADD CONSTRAINT `audiences_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:36.526 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.526 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"audiences_teamId_teams_id_fk\",\"L\":\"audiences_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:36.532 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=801] [neededSchemaVersion=802] ["elapsed time"=512.542s] [gotSchemaVersion=802] [phyTblIDs="[268]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:36.534 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=802]
[2024/09/16 23:43:36.534 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=802] ["take time"=3.302583ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.537 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.546 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=802] [neededSchemaVersion=803] ["elapsed time"=516.041s] [gotSchemaVersion=803] [phyTblIDs="[268]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:36.548 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=803]
[2024/09/16 23:43:36.548 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=803] ["take time"=4.126083ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.551 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.558 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=803] [neededSchemaVersion=804] ["elapsed time"=543.875s] [gotSchemaVersion=804] [phyTblIDs="[268]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:36.560 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=804]
[2024/09/16 23:43:36.561 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=804] ["take time"=4.025833ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:36.563 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.564 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=308] [table=audiences] ["ingest mode"=true] [index=audiences_teamId_teams_id_fk]
[2024/09/16 23:43:36.565 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{268 audiences utf8mb4 utf8mb4_bin [0x400d96e840 0x400d96e9a0 0x400d96eb00 0x400d96ec60] [0x402132ce10] [] [] public true false 0  0 0 0 0 4 1 0 0 452599537085972485 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=268] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:36.565 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=308] [physicalTableID=268] [startKey=] [endKey=]
[2024/09/16 23:43:36.569 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=308]
[2024/09/16 23:43:36.570 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537085972495, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:36.571 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=308] [table=audiences] ["ingest mode"=true] [index=audiences_teamId_teams_id_fk]
[2024/09/16 23:43:36.575 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/308/0]
[2024/09/16 23:43:36.576 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=268] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:36.584 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=69]
[2024/09/16 23:43:36.584 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=69] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:36.711 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=68]
[2024/09/16 23:43:36.713 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:36.713 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=68]
[2024/09/16 23:43:36.718 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:37.085 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=69] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:37.085 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=69] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:37.086 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=69] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:37.087 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{268 audiences utf8mb4 utf8mb4_bin [0x400e15a160 0x400e15a2c0 0x400e15a420 0x400e15a580] [0x40124c7c20] [] [] public true false 0  0 0 0 0 4 1 0 0 452599537085972485 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=268] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:37.087 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=69] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:37.586 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=69] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:37.789 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:37.796 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=804] [neededSchemaVersion=805] ["elapsed time"=496.709s] [gotSchemaVersion=805] [phyTblIDs="[268]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:37.798 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=805]
[2024/09/16 23:43:37.798 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=805] ["take time"=3.38125ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.801 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537085972495, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.802 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=308] [table=audiences] [index=audiences_teamId_teams_id_fk]
[2024/09/16 23:43:37.808 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=805] [neededSchemaVersion=806] ["elapsed time"=450.208s] [gotSchemaVersion=806] [phyTblIDs="[268]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:37.811 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=806]
[2024/09/16 23:43:37.812 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=806] ["take time"=4.937875ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.815 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.816 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=308] [physicalTableID=268] [startKey=74800000000000010c5f69ffff000000000001] [endKey=74800000000000010c5f69ffff000000000001ff]
[2024/09/16 23:43:37.820 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=308]
[2024/09/16 23:43:37.822 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537413652497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.823 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537413652497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000010c5f69ffff000000000001,EndKey:74800000000000010c5f69ffff000000000001ff,First:false,PhysicalTableID:268,Ingest mode:false"]
[2024/09/16 23:43:37.824 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=268] ["start key"=74800000000000010c5f69ffff000000000001] ["end key"=74800000000000010c5f69ffff000000000001ff]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=268] ["range start"=74800000000000010c5f69ffff000000000001] ["range end"=74800000000000010c5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010c5f69ffff000000000001] [endKey=74800000000000010c5f69ffff000000000001ff]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=308]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=308]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=308]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 268, range: [74800000000000010c5f69ffff000000000001, 74800000000000010c5f69ffff000000000001ff), jobID: 308"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010c5f69ffff000000000001ff00] ["take time"=358.75s]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=308]
[2024/09/16 23:43:37.825 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010c5f69ffff000000000001]
[2024/09/16 23:43:37.825 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:37.834 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=806] [neededSchemaVersion=807] ["elapsed time"=627.541s] [gotSchemaVersion=807] [phyTblIDs="[268]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:37.836 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=807]
[2024/09/16 23:43:37.837 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=807] ["take time"=4.765625ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.839 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.846 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=807] [neededSchemaVersion=808] ["elapsed time"=517.5s] [gotSchemaVersion=808] [phyTblIDs="[268]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:37.848 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=808]
[2024/09/16 23:43:37.848 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=808] ["take time"=3.523791ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.851 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.858 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=808] [neededSchemaVersion=809] ["elapsed time"=542.25s] [gotSchemaVersion=809] [phyTblIDs="[268]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:37.860 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=809]
[2024/09/16 23:43:37.860 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=809] ["take time"=3.383375ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.863 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.869 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=809] [neededSchemaVersion=810] ["elapsed time"=433.459s] [gotSchemaVersion=810] [phyTblIDs="[268]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:37.870 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=810]
[2024/09/16 23:43:37.871 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=810] ["take time"=3.233792ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.874 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [category=ddl] [job="ID:308, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537413652497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:37.876 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:37.880 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=810] [neededSchemaVersion=811] ["elapsed time"=538.458s] [gotSchemaVersion=811] [phyTblIDs="[268]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:37.882 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=308] [version=811]
[2024/09/16 23:43:37.883 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=811] ["take time"=3.596583ms] [job="ID:308, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.888 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=308]
[2024/09/16 23:43:37.889 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=308] [tableID=268] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:37.891 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=308] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:37.892 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=308] [conn=952108744] [job="ID:308, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:268, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:36.494 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.897 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=308]
[2024/09/16 23:43:37.898 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=811] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_automationId_automations_id_fk` FOREIGN KEY (`automationId`) REFERENCES `automations`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:37.898 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:37.899 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:37.902 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:309, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:37.902 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:309, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_automationId_automations_id_fk` FOREIGN KEY (`automationId`) REFERENCES `automations`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:37.903 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.903 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"automationSteps_automationId_automations_id_fk\",\"L\":\"automationsteps_automationid_automations_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"automationId\",\"L\":\"automationid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:37.910 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=811] [neededSchemaVersion=812] ["elapsed time"=514.709s] [gotSchemaVersion=812] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:37.911 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=812]
[2024/09/16 23:43:37.912 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=812] ["take time"=3.289792ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.914 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.920 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=812] [neededSchemaVersion=813] ["elapsed time"=581.667s] [gotSchemaVersion=813] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:37.922 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=813]
[2024/09/16 23:43:37.922 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=813] ["take time"=3.312917ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.925 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.931 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=813] [neededSchemaVersion=814] ["elapsed time"=486.5s] [gotSchemaVersion=814] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:37.932 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=814]
[2024/09/16 23:43:37.933 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=814] ["take time"=3.37ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:37.935 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.936 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=309] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 23:43:37.937 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x400f68e000 0x400f68e160 0x400f68e2c0 0x400f68e420 0x400f68e580 0x400f68e6e0 0x400f68e840 0x400f68e9a0 0x400f68eb00 0x400f68ec60 0x400f68edc0] [0x402b63e240] [] [] public true false 0  0 0 0 0 11 1 0 0 452599537439866910 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:37.937 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=309] [physicalTableID=270] [startKey=] [endKey=]
[2024/09/16 23:43:37.941 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=309]
[2024/09/16 23:43:37.942 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537439866920, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:37.943 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=309] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 23:43:37.946 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/309/0]
[2024/09/16 23:43:37.947 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=270] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:37.955 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=70]
[2024/09/16 23:43:37.955 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=70] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:38.085 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=69]
[2024/09/16 23:43:38.087 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:38.087 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=69]
[2024/09/16 23:43:38.093 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:38.456 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=70] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:38.456 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=70] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:38.457 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=70] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:38.458 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x400fb6a840 0x400fb6a9a0 0x400fb6ab00 0x400fb6ac60 0x400fb6adc0 0x400fb6af20 0x400fb6b080 0x400fb6b1e0 0x400fb6b340 0x400fb6b4a0 0x400fb6b600] [0x4029043170] [] [] public true false 0  0 0 0 0 11 1 0 0 452599537439866910 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:38.458 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=70] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:38.961 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=70] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:39.162 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:39.173 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=814] [neededSchemaVersion=815] ["elapsed time"=628.792s] [gotSchemaVersion=815] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:39.174 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=815]
[2024/09/16 23:43:39.175 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=815] ["take time"=4.663875ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.178 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537439866920, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.178 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=309] [table=automationSteps] [index=automationSteps_automationId_automations_id_fk]
[2024/09/16 23:43:39.184 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=815] [neededSchemaVersion=816] ["elapsed time"=544.166s] [gotSchemaVersion=816] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:39.186 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=816]
[2024/09/16 23:43:39.187 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=816] ["take time"=3.767458ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.189 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.190 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=309] [physicalTableID=270] [startKey=74800000000000010e5f69ffff000000000001] [endKey=74800000000000010e5f69ffff000000000001ff]
[2024/09/16 23:43:39.194 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=309]
[2024/09/16 23:43:39.196 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537767546904, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.197 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537767546904, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000010e5f69ffff000000000001,EndKey:74800000000000010e5f69ffff000000000001ff,First:false,PhysicalTableID:270,Ingest mode:false"]
[2024/09/16 23:43:39.198 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=270] ["start key"=74800000000000010e5f69ffff000000000001] ["end key"=74800000000000010e5f69ffff000000000001ff]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=270] ["range start"=74800000000000010e5f69ffff000000000001] ["range end"=74800000000000010e5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010e5f69ffff000000000001] [endKey=74800000000000010e5f69ffff000000000001ff]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=309]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=309]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=309]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 270, range: [74800000000000010e5f69ffff000000000001, 74800000000000010e5f69ffff000000000001ff), jobID: 309"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010e5f69ffff000000000001ff00] ["take time"=404.416s]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=309]
[2024/09/16 23:43:39.199 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010e5f69ffff000000000001]
[2024/09/16 23:43:39.199 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:39.207 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=816] [neededSchemaVersion=817] ["elapsed time"=572.375s] [gotSchemaVersion=817] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:39.209 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=817]
[2024/09/16 23:43:39.209 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=817] ["take time"=3.663416ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.212 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.218 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=817] [neededSchemaVersion=818] ["elapsed time"=582.041s] [gotSchemaVersion=818] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:39.220 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=818]
[2024/09/16 23:43:39.221 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=818] ["take time"=3.617625ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.223 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.230 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=818] [neededSchemaVersion=819] ["elapsed time"=566.291s] [gotSchemaVersion=819] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:39.232 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=819]
[2024/09/16 23:43:39.232 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=819] ["take time"=3.310167ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.235 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.241 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=819] [neededSchemaVersion=820] ["elapsed time"=570.791s] [gotSchemaVersion=820] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:39.243 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=820]
[2024/09/16 23:43:39.243 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=820] ["take time"=3.215375ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.246 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [category=ddl] [job="ID:309, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537767546904, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:39.248 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:39.253 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=820] [neededSchemaVersion=821] ["elapsed time"=685.458s] [gotSchemaVersion=821] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:39.255 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=309] [version=821]
[2024/09/16 23:43:39.255 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=821] ["take time"=4.087416ms] [job="ID:309, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.261 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=309]
[2024/09/16 23:43:39.263 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=309] [tableID=270] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:39.265 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=309] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:39.265 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=309] [conn=952108744] [job="ID:309, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:37.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.271 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=309]
[2024/09/16 23:43:39.272 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=821] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_parentId_automationSteps_id_fk` FOREIGN KEY (`parentId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:39.272 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:39.273 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:39.276 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:310, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:39.276 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:310, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_parentId_automationSteps_id_fk` FOREIGN KEY (`parentId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:39.277 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.278 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"automationSteps_parentId_automationSteps_id_fk\",\"L\":\"automationsteps_parentid_automationsteps_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"parentId\",\"L\":\"parentid\"},\"offset\":5,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:39.284 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=821] [neededSchemaVersion=822] ["elapsed time"=566.958s] [gotSchemaVersion=822] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:39.286 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=822]
[2024/09/16 23:43:39.286 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=822] ["take time"=3.313792ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.289 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.295 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=822] [neededSchemaVersion=823] ["elapsed time"=558.291s] [gotSchemaVersion=823] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:39.297 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=823]
[2024/09/16 23:43:39.297 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=823] ["take time"=3.289ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.300 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.308 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=823] [neededSchemaVersion=824] ["elapsed time"=623.375s] [gotSchemaVersion=824] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:39.309 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=824]
[2024/09/16 23:43:39.310 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=824] ["take time"=3.933416ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:39.313 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.314 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=310] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 23:43:39.314 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x401076ac60 0x401076adc0 0x401076af20 0x401076b080 0x401076b1e0 0x401076b340 0x401076b4a0 0x401076b600 0x401076b760 0x401076b8c0 0x401076ba20] [0x402169fb00 0x402169fd40] [] [0x4010766e40] public true false 0  0 0 0 0 11 2 1 0 452599537806868485 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:39.315 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=310] [physicalTableID=270] [startKey=] [endKey=]
[2024/09/16 23:43:39.319 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=310]
[2024/09/16 23:43:39.320 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537806868496, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:39.321 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=310] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 23:43:39.324 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/310/0]
[2024/09/16 23:43:39.326 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=270] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:39.334 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=71]
[2024/09/16 23:43:39.335 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=71] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:39.456 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=70]
[2024/09/16 23:43:39.458 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:39.458 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=70]
[2024/09/16 23:43:39.463 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:39.838 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=71] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:39.838 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=71] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:39.840 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=71] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:39.841 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x40118802c0 0x4011880420 0x4011880580 0x40118806e0 0x4011880840 0x40118809a0 0x4011880b00 0x4011880c60 0x4011880dc0 0x4011880f20 0x4011881080] [0x401c85d9e0 0x401c85dc20] [] [0x40116b8480] public true false 0  0 0 0 0 11 2 1 0 452599537806868485 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:39.841 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=71] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:40.341 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=71] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:40.536 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:40.543 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=824] [neededSchemaVersion=825] ["elapsed time"=640.5s] [gotSchemaVersion=825] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:40.545 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=825]
[2024/09/16 23:43:40.546 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=825] ["take time"=3.869167ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.549 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599537806868496, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.549 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=310] [table=automationSteps] [index=automationSteps_parentId_automationSteps_id_fk]
[2024/09/16 23:43:40.556 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=825] [neededSchemaVersion=826] ["elapsed time"=578.708s] [gotSchemaVersion=826] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:40.558 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=826]
[2024/09/16 23:43:40.558 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=826] ["take time"=3.8415ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.561 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.562 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=310] [physicalTableID=270] [startKey=74800000000000010e5f69ffff000000000002] [endKey=74800000000000010e5f69ffff000000000002ff]
[2024/09/16 23:43:40.566 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=310]
[2024/09/16 23:43:40.567 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538134548493, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.569 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538134548493, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000010e5f69ffff000000000002,EndKey:74800000000000010e5f69ffff000000000002ff,First:false,PhysicalTableID:270,Ingest mode:false"]
[2024/09/16 23:43:40.570 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=270] ["start key"=74800000000000010e5f69ffff000000000002] ["end key"=74800000000000010e5f69ffff000000000002ff]
[2024/09/16 23:43:40.570 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=270] ["range start"=74800000000000010e5f69ffff000000000002] ["range end"=74800000000000010e5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:43:40.571 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010e5f69ffff000000000002] [endKey=74800000000000010e5f69ffff000000000002ff]
[2024/09/16 23:43:40.571 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=310]
[2024/09/16 23:43:40.571 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=310]
[2024/09/16 23:43:40.571 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=310]
[2024/09/16 23:43:40.571 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 270, range: [74800000000000010e5f69ffff000000000002, 74800000000000010e5f69ffff000000000002ff), jobID: 310"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010e5f69ffff000000000002ff00] ["take time"=345.958s]
[2024/09/16 23:43:40.571 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=310]
[2024/09/16 23:43:40.571 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010e5f69ffff000000000002]
[2024/09/16 23:43:40.571 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:40.577 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=826] [neededSchemaVersion=827] ["elapsed time"=573.25s] [gotSchemaVersion=827] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:40.579 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=827]
[2024/09/16 23:43:40.579 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=827] ["take time"=3.641ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.582 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.589 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=827] [neededSchemaVersion=828] ["elapsed time"=582.875s] [gotSchemaVersion=828] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:40.591 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=828]
[2024/09/16 23:43:40.591 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=828] ["take time"=3.668917ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.594 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.601 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=828] [neededSchemaVersion=829] ["elapsed time"=580.875s] [gotSchemaVersion=829] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:40.603 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=829]
[2024/09/16 23:43:40.603 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=829] ["take time"=3.24675ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.606 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.612 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=829] [neededSchemaVersion=830] ["elapsed time"=585.709s] [gotSchemaVersion=830] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:40.614 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=830]
[2024/09/16 23:43:40.614 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=830] ["take time"=3.159292ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.617 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [category=ddl] [job="ID:310, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538134548493, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:40.619 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:40.623 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=830] [neededSchemaVersion=831] ["elapsed time"=633.416s] [gotSchemaVersion=831] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:40.625 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=310] [version=831]
[2024/09/16 23:43:40.625 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=831] ["take time"=3.188875ms] [job="ID:310, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.630 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=310]
[2024/09/16 23:43:40.632 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=310] [tableID=270] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:40.633 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=310] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:40.634 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=310] [conn=952108744] [job="ID:310, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:39.245 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.639 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=310]
[2024/09/16 23:43:40.640 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=831] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_emailId_emails_id_fk` FOREIGN KEY (`emailId`) REFERENCES `emails`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:40.640 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:40.641 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:40.644 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:311, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:40.644 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:311, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_emailId_emails_id_fk` FOREIGN KEY (`emailId`) REFERENCES `emails`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:40.645 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.646 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"automationSteps_emailId_emails_id_fk\",\"L\":\"automationsteps_emailid_emails_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailId\",\"L\":\"emailid\"},\"offset\":8,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:40.652 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=831] [neededSchemaVersion=832] ["elapsed time"=684.167s] [gotSchemaVersion=832] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:40.653 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=832]
[2024/09/16 23:43:40.653 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=832] ["take time"=3.291625ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.656 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.662 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=832] [neededSchemaVersion=833] ["elapsed time"=602.875s] [gotSchemaVersion=833] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:40.664 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=833]
[2024/09/16 23:43:40.664 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=833] ["take time"=3.537792ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.666 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.674 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=833] [neededSchemaVersion=834] ["elapsed time"=655.333s] [gotSchemaVersion=834] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:40.675 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=834]
[2024/09/16 23:43:40.676 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=834] ["take time"=3.837542ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:40.679 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.680 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=311] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 23:43:40.680 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x400dae8420 0x400dae8580 0x400dae86e0 0x400dae8840 0x400dae89a0 0x400dae8b00 0x400dae8c60 0x400dae8dc0 0x400dae8f20 0x400dae9080 0x400dae91e0] [0x4016596b40 0x4016596d80 0x4016596fc0] [] [0x4012da2240 0x4012da2300] public true false 0  0 0 0 0 11 3 2 0 452599538160762899 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:40.680 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=311] [physicalTableID=270] [startKey=] [endKey=]
[2024/09/16 23:43:40.684 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=311]
[2024/09/16 23:43:40.686 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538160762910, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:40.686 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=311] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 23:43:40.690 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/311/0]
[2024/09/16 23:43:40.691 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=270] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:40.699 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=72]
[2024/09/16 23:43:40.699 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=72] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:40.837 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=71]
[2024/09/16 23:43:40.838 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:40.838 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=71]
[2024/09/16 23:43:40.844 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:41.204 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=72] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:41.205 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=72] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:41.207 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=72] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:41.208 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x4012d7e2c0 0x4012d7e420 0x4012d7e580 0x4012d7e6e0 0x4012d7e840 0x4012d7e9a0 0x4012d7eb00 0x4012d7ec60 0x4012d7edc0 0x4012d7ef20 0x4012d7f080] [0x40131dc480 0x40131dc6c0 0x40131dc900] [] [0x4013175a40 0x4013175b00] public true false 0  0 0 0 0 11 3 2 0 452599538160762899 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:41.208 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=72] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:41.704 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=72] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:41.903 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:41.911 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=834] [neededSchemaVersion=835] ["elapsed time"=560.708s] [gotSchemaVersion=835] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:41.912 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=835]
[2024/09/16 23:43:41.913 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=835] ["take time"=3.54875ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:41.916 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538160762910, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:41.916 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=311] [table=automationSteps] [index=automationSteps_emailId_emails_id_fk]
[2024/09/16 23:43:41.922 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=835] [neededSchemaVersion=836] ["elapsed time"=635s] [gotSchemaVersion=836] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:41.924 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=836]
[2024/09/16 23:43:41.925 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=836] ["take time"=3.7655ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:41.927 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:41.928 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=311] [physicalTableID=270] [startKey=74800000000000010e5f69ffff000000000003] [endKey=74800000000000010e5f69ffff000000000003ff]
[2024/09/16 23:43:41.932 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=311]
[2024/09/16 23:43:41.933 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538488442903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:41.935 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538488442903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:74800000000000010e5f69ffff000000000003,EndKey:74800000000000010e5f69ffff000000000003ff,First:false,PhysicalTableID:270,Ingest mode:false"]
[2024/09/16 23:43:41.936 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=270] ["start key"=74800000000000010e5f69ffff000000000003] ["end key"=74800000000000010e5f69ffff000000000003ff]
[2024/09/16 23:43:41.936 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=270] ["range start"=74800000000000010e5f69ffff000000000003] ["range end"=74800000000000010e5f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:43:41.936 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010e5f69ffff000000000003] [endKey=74800000000000010e5f69ffff000000000003ff]
[2024/09/16 23:43:41.936 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=311]
[2024/09/16 23:43:41.936 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=311]
[2024/09/16 23:43:41.936 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=311]
[2024/09/16 23:43:41.937 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 270, range: [74800000000000010e5f69ffff000000000003, 74800000000000010e5f69ffff000000000003ff), jobID: 311"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010e5f69ffff000000000003ff00] ["take time"=344.875s]
[2024/09/16 23:43:41.937 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=311]
[2024/09/16 23:43:41.937 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010e5f69ffff000000000003]
[2024/09/16 23:43:41.937 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:41.943 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=836] [neededSchemaVersion=837] ["elapsed time"=562.166s] [gotSchemaVersion=837] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:41.944 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=837]
[2024/09/16 23:43:41.945 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=837] ["take time"=3.380542ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:41.947 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:41.954 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=837] [neededSchemaVersion=838] ["elapsed time"=636.041s] [gotSchemaVersion=838] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:41.955 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=838]
[2024/09/16 23:43:41.955 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=838] ["take time"=3.350042ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:41.958 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:41.966 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=838] [neededSchemaVersion=839] ["elapsed time"=824.125s] [gotSchemaVersion=839] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:41.967 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=839]
[2024/09/16 23:43:41.968 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=839] ["take time"=4.060166ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:41.971 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:41.978 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=839] [neededSchemaVersion=840] ["elapsed time"=628.125s] [gotSchemaVersion=840] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:41.980 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=840]
[2024/09/16 23:43:41.980 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=840] ["take time"=3.533708ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:41.984 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [category=ddl] [job="ID:311, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538488442903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:41.985 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:41.990 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=840] [neededSchemaVersion=841] ["elapsed time"=590.292s] [gotSchemaVersion=841] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:41.992 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=311] [version=841]
[2024/09/16 23:43:41.992 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=841] ["take time"=3.502958ms] [job="ID:311, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:41.997 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=311]
[2024/09/16 23:43:41.999 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=311] [tableID=270] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:42.000 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=311] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:42.001 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=311] [conn=952108744] [job="ID:311, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:40.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:42.007 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=311]
[2024/09/16 23:43:42.008 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=841] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:42.008 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:42.008 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:42.012 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:312, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:42.012 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:312, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:42.013 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:42.014 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":4,\"idx_name\":{\"O\":\"automationSteps_tagId_tags_id_fk\",\"L\":\"automationsteps_tagid_tags_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"tagId\",\"L\":\"tagid\"},\"offset\":9,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:42.022 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=841] [neededSchemaVersion=842] ["elapsed time"=655.083s] [gotSchemaVersion=842] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:42.024 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=842]
[2024/09/16 23:43:42.024 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=842] ["take time"=4.189583ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:42.027 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:42.034 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=842] [neededSchemaVersion=843] ["elapsed time"=612.875s] [gotSchemaVersion=843] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:42.036 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=843]
[2024/09/16 23:43:42.036 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=843] ["take time"=3.418416ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:42.039 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:42.046 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=843] [neededSchemaVersion=844] ["elapsed time"=638.084s] [gotSchemaVersion=844] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:42.047 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=844]
[2024/09/16 23:43:42.048 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=844] ["take time"=3.597083ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:42.050 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:42.051 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=312] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 23:43:42.051 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x40147e7080 0x40147e71e0 0x40147e7340 0x40147e74a0 0x40147e7600 0x40147e7760 0x40147e78c0 0x40147e7a20 0x40147e7b80 0x40147e7ce0 0x40147e7e40] [0x4014752900 0x4014752b40 0x4014752d80 0x4014752fc0] [] [0x40147f43c0 0x40147f4480 0x40147f4540] public true false 0  0 0 0 0 11 4 3 0 452599538514657319 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:42.051 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=312] [physicalTableID=270] [startKey=] [endKey=]
[2024/09/16 23:43:42.055 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=312]
[2024/09/16 23:43:42.057 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538527764486, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:42.057 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=312] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 23:43:42.061 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/312/0]
[2024/09/16 23:43:42.061 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=270] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:42.069 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=73]
[2024/09/16 23:43:42.069 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=73] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:42.201 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=72]
[2024/09/16 23:43:42.203 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:42.203 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=72]
[2024/09/16 23:43:42.208 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:42.571 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=73] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:42.571 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=73] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:42.572 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=73] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:42.573 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x4014e051e0 0x4014e05340 0x4014e054a0 0x4014e05600 0x4014e05760 0x4014e058c0 0x4014e05a20 0x4014e05b80 0x4014e05ce0 0x4014e05e40 0x4015036000] [0x40150343f0 0x4015034630 0x4015034870 0x4015034ab0] [] [0x401502c180 0x401502c240 0x401502c300] public true false 0  0 0 0 0 11 4 3 0 452599538514657319 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:42.573 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=73] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:43.076 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=73] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:43.277 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:43.285 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=844] [neededSchemaVersion=845] ["elapsed time"=668.375s] [gotSchemaVersion=845] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:43.287 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=845]
[2024/09/16 23:43:43.288 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=845] ["take time"=4.215ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.290 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538527764486, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.291 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=312] [table=automationSteps] [index=automationSteps_tagId_tags_id_fk]
[2024/09/16 23:43:43.297 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=845] [neededSchemaVersion=846] ["elapsed time"=583.166s] [gotSchemaVersion=846] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:43.299 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=846]
[2024/09/16 23:43:43.299 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=846] ["take time"=3.312792ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.302 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.303 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=312] [physicalTableID=270] [startKey=74800000000000010e5f69ffff000000000004] [endKey=74800000000000010e5f69ffff000000000004ff]
[2024/09/16 23:43:43.307 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=312]
[2024/09/16 23:43:43.308 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538855444488, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.310 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538855444488, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:4,StartKey:74800000000000010e5f69ffff000000000004,EndKey:74800000000000010e5f69ffff000000000004ff,First:false,PhysicalTableID:270,Ingest mode:false"]
[2024/09/16 23:43:43.311 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=270] ["start key"=74800000000000010e5f69ffff000000000004] ["end key"=74800000000000010e5f69ffff000000000004ff]
[2024/09/16 23:43:43.311 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=270] ["range start"=74800000000000010e5f69ffff000000000004] ["range end"=74800000000000010e5f69ffff000000000004ff] ["range count"=1]
[2024/09/16 23:43:43.311 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010e5f69ffff000000000004] [endKey=74800000000000010e5f69ffff000000000004ff]
[2024/09/16 23:43:43.311 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=312]
[2024/09/16 23:43:43.311 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=312]
[2024/09/16 23:43:43.311 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=312]
[2024/09/16 23:43:43.312 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 270, range: [74800000000000010e5f69ffff000000000004, 74800000000000010e5f69ffff000000000004ff), jobID: 312"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010e5f69ffff000000000004ff00] ["take time"=353.5s]
[2024/09/16 23:43:43.312 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=312]
[2024/09/16 23:43:43.312 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:4,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010e5f69ffff000000000004]
[2024/09/16 23:43:43.312 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:43.317 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=846] [neededSchemaVersion=847] ["elapsed time"=610.584s] [gotSchemaVersion=847] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:43.319 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=847]
[2024/09/16 23:43:43.320 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=847] ["take time"=3.412667ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.322 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.328 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=847] [neededSchemaVersion=848] ["elapsed time"=631.666s] [gotSchemaVersion=848] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:43.330 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=848]
[2024/09/16 23:43:43.330 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=848] ["take time"=3.389667ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.332 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.340 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=848] [neededSchemaVersion=849] ["elapsed time"=611.875s] [gotSchemaVersion=849] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:43.341 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=849]
[2024/09/16 23:43:43.342 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=849] ["take time"=3.105ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.344 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.351 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=849] [neededSchemaVersion=850] ["elapsed time"=549.375s] [gotSchemaVersion=850] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:43.352 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=850]
[2024/09/16 23:43:43.353 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=850] ["take time"=3.364917ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.356 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [category=ddl] [job="ID:312, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538855444488, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:43.358 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:43.362 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=850] [neededSchemaVersion=851] ["elapsed time"=645.958s] [gotSchemaVersion=851] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:43.364 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=312] [version=851]
[2024/09/16 23:43:43.364 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=851] ["take time"=3.281917ms] [job="ID:312, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.370 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=312]
[2024/09/16 23:43:43.371 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=312] [tableID=270] [indexIDs="[9223090561878065156]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:43.373 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=312] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:43.373 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=312] [conn=952108744] [job="ID:312, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:41.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.380 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=312]
[2024/09/16 23:43:43.381 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=851] [cur_db=test] [sql="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:43.381 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:43.381 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:43.384 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:313, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:43.384 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:313, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automationSteps` ADD CONSTRAINT `automationSteps_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:43.385 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.386 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":5,\"idx_name\":{\"O\":\"automationSteps_audienceId_audiences_id_fk\",\"L\":\"automationsteps_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":10,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:43.393 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=851] [neededSchemaVersion=852] ["elapsed time"=581.375s] [gotSchemaVersion=852] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:43.394 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=852]
[2024/09/16 23:43:43.395 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=852] ["take time"=3.709542ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.398 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.404 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=852] [neededSchemaVersion=853] ["elapsed time"=618.958s] [gotSchemaVersion=853] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:43.406 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=853]
[2024/09/16 23:43:43.406 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=853] ["take time"=3.234625ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.408 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.415 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=853] [neededSchemaVersion=854] ["elapsed time"=696.25s] [gotSchemaVersion=854] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:43.417 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=854]
[2024/09/16 23:43:43.418 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=854] ["take time"=3.684875ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:43.420 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.421 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=313] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 23:43:43.422 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x401666a000 0x401666a160 0x401666a2c0 0x401666a420 0x401666a580 0x401666a6e0 0x401666a840 0x401666a9a0 0x401666ab00 0x401666ac60 0x401666adc0] [0x4016653320 0x4016653560 0x40166537a0 0x40166539e0 0x4016653c20] [] [0x4016610780 0x4016610840 0x4016610900 0x40166109c0] public true false 0  0 0 0 0 11 5 4 0 452599538881658892 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:43.422 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=313] [physicalTableID=270] [startKey=] [endKey=]
[2024/09/16 23:43:43.426 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=313]
[2024/09/16 23:43:43.427 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538881658902, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:43.428 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=313] [table=automationSteps] ["ingest mode"=true] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 23:43:43.432 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/313/0]
[2024/09/16 23:43:43.435 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=270] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:43.442 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=74]
[2024/09/16 23:43:43.442 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=74] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:43.571 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=73]
[2024/09/16 23:43:43.573 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:43.573 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=73]
[2024/09/16 23:43:43.578 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:43.944 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=74] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:43.944 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=74] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:43.945 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=74] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:43.946 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{270 automationSteps utf8mb4 utf8mb4_bin [0x40172c82c0 0x40172c8420 0x40172c8580 0x40172c86e0 0x40172c8840 0x40172c89a0 0x40172c8b00 0x40172c8c60 0x40172c8dc0 0x40172c8f20 0x40172c9080] [0x40172f2240 0x40172f2480 0x40172f26c0 0x40172f2900 0x40172f2b40] [] [0x40172ca300 0x40172ca3c0 0x40172ca480 0x40172ca540] public true false 0  0 0 0 0 11 5 4 0 452599538881658892 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 260}"] ["table/partition ID"=270] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:43.946 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=74] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:44.447 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=74] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:44.645 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:44.653 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=854] [neededSchemaVersion=855] ["elapsed time"=687.083s] [gotSchemaVersion=855] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:44.654 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=855]
[2024/09/16 23:43:44.655 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=855] ["take time"=3.473292ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.657 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599538881658902, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.658 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=313] [table=automationSteps] [index=automationSteps_audienceId_audiences_id_fk]
[2024/09/16 23:43:44.665 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=855] [neededSchemaVersion=856] ["elapsed time"=735.625s] [gotSchemaVersion=856] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:44.667 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=856]
[2024/09/16 23:43:44.668 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=856] ["take time"=4.332542ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.671 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.672 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=313] [physicalTableID=270] [startKey=74800000000000010e5f69ffff000000000005] [endKey=74800000000000010e5f69ffff000000000005ff]
[2024/09/16 23:43:44.676 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=313]
[2024/09/16 23:43:44.678 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539209338899, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.679 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539209338899, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:5,StartKey:74800000000000010e5f69ffff000000000005,EndKey:74800000000000010e5f69ffff000000000005ff,First:false,PhysicalTableID:270,Ingest mode:false"]
[2024/09/16 23:43:44.680 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=270] ["start key"=74800000000000010e5f69ffff000000000005] ["end key"=74800000000000010e5f69ffff000000000005ff]
[2024/09/16 23:43:44.680 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=270] ["range start"=74800000000000010e5f69ffff000000000005] ["range end"=74800000000000010e5f69ffff000000000005ff] ["range count"=1]
[2024/09/16 23:43:44.680 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000010e5f69ffff000000000005] [endKey=74800000000000010e5f69ffff000000000005ff]
[2024/09/16 23:43:44.681 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=313]
[2024/09/16 23:43:44.681 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=313]
[2024/09/16 23:43:44.681 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=313]
[2024/09/16 23:43:44.681 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 270, range: [74800000000000010e5f69ffff000000000005, 74800000000000010e5f69ffff000000000005ff), jobID: 313"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000010e5f69ffff000000000005ff00] ["take time"=421.792s]
[2024/09/16 23:43:44.681 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=313]
[2024/09/16 23:43:44.681 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:5,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000010e5f69ffff000000000005]
[2024/09/16 23:43:44.681 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:44.687 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=856] [neededSchemaVersion=857] ["elapsed time"=601.875s] [gotSchemaVersion=857] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:44.689 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=857]
[2024/09/16 23:43:44.689 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=857] ["take time"=3.358666ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.691 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.697 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=857] [neededSchemaVersion=858] ["elapsed time"=611.291s] [gotSchemaVersion=858] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:44.699 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=858]
[2024/09/16 23:43:44.699 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=858] ["take time"=3.1645ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.702 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.709 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=858] [neededSchemaVersion=859] ["elapsed time"=581.375s] [gotSchemaVersion=859] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:44.711 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=859]
[2024/09/16 23:43:44.711 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=859] ["take time"=3.166542ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.714 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.721 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=859] [neededSchemaVersion=860] ["elapsed time"=658.708s] [gotSchemaVersion=860] [phyTblIDs="[270]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:44.722 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=860]
[2024/09/16 23:43:44.723 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=860] ["take time"=3.216125ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.725 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [category=ddl] [job="ID:313, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539209338899, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:44.727 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:44.732 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=860] [neededSchemaVersion=861] ["elapsed time"=613.459s] [gotSchemaVersion=861] [phyTblIDs="[270]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:44.734 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=313] [version=861]
[2024/09/16 23:43:44.734 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=861] ["take time"=3.337917ms] [job="ID:313, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.739 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=313]
[2024/09/16 23:43:44.741 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=313] [tableID=270] [indexIDs="[9223090561878065157]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:44.742 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=313] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:44.743 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=313] [conn=952108744] [job="ID:313, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:270, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:43.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.748 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=313]
[2024/09/16 23:43:44.749 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=861] [cur_db=test] [sql="ALTER TABLE `automations` ADD CONSTRAINT `automations_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:44.749 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automations] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:44.749 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=automations] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:44.753 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:314, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:44.753 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:314, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `automations` ADD CONSTRAINT `automations_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:44.754 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.754 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"automations_audienceId_audiences_id_fk\",\"L\":\"automations_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:44.760 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=861] [neededSchemaVersion=862] ["elapsed time"=399.875s] [gotSchemaVersion=862] [phyTblIDs="[272]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:44.761 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=862]
[2024/09/16 23:43:44.762 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=862] ["take time"=3.1905ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.764 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.770 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=862] [neededSchemaVersion=863] ["elapsed time"=395.375s] [gotSchemaVersion=863] [phyTblIDs="[272]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:44.771 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=863]
[2024/09/16 23:43:44.772 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=863] ["take time"=3.023167ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.774 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.780 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=863] [neededSchemaVersion=864] ["elapsed time"=427.792s] [gotSchemaVersion=864] [phyTblIDs="[272]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:44.781 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=864]
[2024/09/16 23:43:44.782 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=864] ["take time"=3.160125ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:44.784 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.785 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=314] [table=automations] ["ingest mode"=true] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 23:43:44.785 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{272 automations utf8mb4 utf8mb4_bin [0x4018826b00 0x4018826c60 0x4018826dc0 0x4018826f20] [0x4018854990] [] [] public true false 0  0 0 0 0 4 1 0 0 452599539235553311 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=272] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:44.785 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=314] [physicalTableID=272] [startKey=] [endKey=]
[2024/09/16 23:43:44.789 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=314]
[2024/09/16 23:43:44.790 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539235553321, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:44.790 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=314] [table=automations] ["ingest mode"=true] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 23:43:44.795 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/314/0]
[2024/09/16 23:43:44.797 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=272] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:44.804 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=75]
[2024/09/16 23:43:44.804 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=75] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:44.943 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=74]
[2024/09/16 23:43:44.946 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:44.946 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=74]
[2024/09/16 23:43:44.951 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:45.307 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=75] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:45.308 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=75] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:45.310 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=75] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:45.311 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{272 automations utf8mb4 utf8mb4_bin [0x4018fc86e0 0x4018fc8840 0x4018fc89a0 0x4018fc8b00] [0x401929a240] [] [] public true false 0  0 0 0 0 4 1 0 0 452599539235553311 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=272] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:45.311 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=75] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:45.810 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=75] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:46.010 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:46.019 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=864] [neededSchemaVersion=865] ["elapsed time"=467.375s] [gotSchemaVersion=865] [phyTblIDs="[272]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:46.020 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=865]
[2024/09/16 23:43:46.021 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=865] ["take time"=3.700958ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.024 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539235553321, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.024 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=314] [table=automations] [index=automations_audienceId_audiences_id_fk]
[2024/09/16 23:43:46.030 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=865] [neededSchemaVersion=866] ["elapsed time"=440.583s] [gotSchemaVersion=866] [phyTblIDs="[272]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:46.031 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=866]
[2024/09/16 23:43:46.032 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=866] ["take time"=3.365083ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.034 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.035 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=314] [physicalTableID=272] [startKey=7480000000000001105f69ffff000000000001] [endKey=7480000000000001105f69ffff000000000001ff]
[2024/09/16 23:43:46.039 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=314]
[2024/09/16 23:43:46.040 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539563233303, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.041 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539563233303, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000001105f69ffff000000000001,EndKey:7480000000000001105f69ffff000000000001ff,First:false,PhysicalTableID:272,Ingest mode:false"]
[2024/09/16 23:43:46.042 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=272] ["start key"=7480000000000001105f69ffff000000000001] ["end key"=7480000000000001105f69ffff000000000001ff]
[2024/09/16 23:43:46.042 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=272] ["range start"=7480000000000001105f69ffff000000000001] ["range end"=7480000000000001105f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:43:46.043 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001105f69ffff000000000001] [endKey=7480000000000001105f69ffff000000000001ff]
[2024/09/16 23:43:46.043 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=314]
[2024/09/16 23:43:46.043 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=314]
[2024/09/16 23:43:46.043 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=314]
[2024/09/16 23:43:46.043 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 272, range: [7480000000000001105f69ffff000000000001, 7480000000000001105f69ffff000000000001ff), jobID: 314"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001105f69ffff000000000001ff00] ["take time"=401.583s]
[2024/09/16 23:43:46.043 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=314]
[2024/09/16 23:43:46.043 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001105f69ffff000000000001]
[2024/09/16 23:43:46.043 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:46.049 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=866] [neededSchemaVersion=867] ["elapsed time"=462.958s] [gotSchemaVersion=867] [phyTblIDs="[272]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:46.050 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=867]
[2024/09/16 23:43:46.051 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=867] ["take time"=3.110125ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.053 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.059 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=867] [neededSchemaVersion=868] ["elapsed time"=456.209s] [gotSchemaVersion=868] [phyTblIDs="[272]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:46.060 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=868]
[2024/09/16 23:43:46.061 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=868] ["take time"=3.181708ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.063 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.070 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=868] [neededSchemaVersion=869] ["elapsed time"=451.042s] [gotSchemaVersion=869] [phyTblIDs="[272]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:46.071 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=869]
[2024/09/16 23:43:46.072 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=869] ["take time"=2.996458ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.074 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.081 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=869] [neededSchemaVersion=870] ["elapsed time"=574.791s] [gotSchemaVersion=870] [phyTblIDs="[272]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:46.083 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=870]
[2024/09/16 23:43:46.083 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=870] ["take time"=3.855333ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.086 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [category=ddl] [job="ID:314, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539563233303, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:46.088 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:46.093 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=870] [neededSchemaVersion=871] ["elapsed time"=467.833s] [gotSchemaVersion=871] [phyTblIDs="[272]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:46.094 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=314] [version=871]
[2024/09/16 23:43:46.095 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=871] ["take time"=3.222833ms] [job="ID:314, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.099 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=314]
[2024/09/16 23:43:46.100 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=314] [tableID=272] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:46.102 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=314] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:46.103 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=314] [conn=952108744] [job="ID:314, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:272, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:44.745 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.108 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=314]
[2024/09/16 23:43:46.109 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=871] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:46.109 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:46.109 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:46.112 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:315, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:46.112 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:315, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:46.114 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.115 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"broadcasts_audienceId_audiences_id_fk\",\"L\":\"broadcasts_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:46.121 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=871] [neededSchemaVersion=872] ["elapsed time"=610.166s] [gotSchemaVersion=872] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:46.122 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=872]
[2024/09/16 23:43:46.122 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=872] ["take time"=3.253625ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.125 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.131 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=872] [neededSchemaVersion=873] ["elapsed time"=590.25s] [gotSchemaVersion=873] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:46.133 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=873]
[2024/09/16 23:43:46.133 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=873] ["take time"=3.48225ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.136 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.142 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=873] [neededSchemaVersion=874] ["elapsed time"=505.25s] [gotSchemaVersion=874] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:46.144 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=874]
[2024/09/16 23:43:46.144 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=874] ["take time"=3.937875ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:46.146 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.147 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=315] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 23:43:46.148 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x401a37cf20 0x401a37d080 0x401a37d1e0 0x401a37d340 0x401a37d4a0 0x401a37d600 0x401a37d760 0x401a37d8c0 0x401a37da20 0x401a37db80 0x401a37dce0 0x401a37de40 0x401a5ae000 0x401a5ae160 0x401a5ae2c0] [0x401a59fb00] [] [] public true false 0  0 0 0 0 15 1 0 0 452599539589447720 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:46.148 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=315] [physicalTableID=274] [startKey=] [endKey=]
[2024/09/16 23:43:46.152 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=315]
[2024/09/16 23:43:46.153 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539602554883, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:46.153 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=315] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 23:43:46.156 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/315/0]
[2024/09/16 23:43:46.157 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=274] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:46.164 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=76]
[2024/09/16 23:43:46.164 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=76] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:46.306 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=75]
[2024/09/16 23:43:46.308 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:46.308 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=75]
[2024/09/16 23:43:46.315 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:46.666 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=76] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:46.667 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=76] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:46.669 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=76] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:46.670 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x401b3cd4a0 0x401b3cd600 0x401b3cd760 0x401b3cd8c0 0x401b3cda20 0x401b3cdb80 0x401b3cdce0 0x401b3cde40 0x401b0d0000 0x401b0d0160 0x401b0d02c0 0x401b0d0420 0x401b0d0580 0x401b0d06e0 0x401b0d0840] [0x401b0ced80] [] [] public true false 0  0 0 0 0 15 1 0 0 452599539589447720 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:46.670 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=76] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:47.169 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=76] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:47.372 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:47.380 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=874] [neededSchemaVersion=875] ["elapsed time"=579.667s] [gotSchemaVersion=875] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:47.382 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=875]
[2024/09/16 23:43:47.382 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=875] ["take time"=3.909333ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.385 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539602554883, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.386 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=315] [table=broadcasts] [index=broadcasts_audienceId_audiences_id_fk]
[2024/09/16 23:43:47.393 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=875] [neededSchemaVersion=876] ["elapsed time"=699.125s] [gotSchemaVersion=876] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:47.394 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=876]
[2024/09/16 23:43:47.394 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=876] ["take time"=3.599ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.397 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.397 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=315] [physicalTableID=274] [startKey=7480000000000001125f69ffff000000000001] [endKey=7480000000000001125f69ffff000000000001ff]
[2024/09/16 23:43:47.401 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=315]
[2024/09/16 23:43:47.402 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539930234883, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.404 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539930234883, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000001125f69ffff000000000001,EndKey:7480000000000001125f69ffff000000000001ff,First:false,PhysicalTableID:274,Ingest mode:false"]
[2024/09/16 23:43:47.405 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=274] ["start key"=7480000000000001125f69ffff000000000001] ["end key"=7480000000000001125f69ffff000000000001ff]
[2024/09/16 23:43:47.405 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=274] ["range start"=7480000000000001125f69ffff000000000001] ["range end"=7480000000000001125f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:43:47.405 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001125f69ffff000000000001] [endKey=7480000000000001125f69ffff000000000001ff]
[2024/09/16 23:43:47.405 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=315]
[2024/09/16 23:43:47.405 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=315]
[2024/09/16 23:43:47.405 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=315]
[2024/09/16 23:43:47.406 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [task="taskID: 1, physicalTableID: 274, range: [7480000000000001125f69ffff000000000001, 7480000000000001125f69ffff000000000001ff), jobID: 315"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001125f69ffff000000000001ff00] ["take time"=356s]
[2024/09/16 23:43:47.406 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=315]
[2024/09/16 23:43:47.406 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001125f69ffff000000000001]
[2024/09/16 23:43:47.406 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:47.412 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=876] [neededSchemaVersion=877] ["elapsed time"=554.208s] [gotSchemaVersion=877] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:47.413 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=877]
[2024/09/16 23:43:47.414 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=877] ["take time"=3.405042ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.416 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.423 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=877] [neededSchemaVersion=878] ["elapsed time"=556.125s] [gotSchemaVersion=878] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:47.424 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=878]
[2024/09/16 23:43:47.425 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=878] ["take time"=3.351792ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.427 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.434 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=878] [neededSchemaVersion=879] ["elapsed time"=612.958s] [gotSchemaVersion=879] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:47.436 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=879]
[2024/09/16 23:43:47.436 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=879] ["take time"=3.270375ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.438 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.445 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=879] [neededSchemaVersion=880] ["elapsed time"=638.75s] [gotSchemaVersion=880] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:47.447 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=880]
[2024/09/16 23:43:47.447 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=880] ["take time"=3.379666ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.450 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [category=ddl] [job="ID:315, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539930234883, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:47.452 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:47.456 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=880] [neededSchemaVersion=881] ["elapsed time"=590.125s] [gotSchemaVersion=881] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:47.458 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=315] [version=881]
[2024/09/16 23:43:47.459 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=881] ["take time"=3.651291ms] [job="ID:315, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.464 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=315]
[2024/09/16 23:43:47.465 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=315] [tableID=274] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:47.466 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=315] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:47.467 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=315] [conn=952108744] [job="ID:315, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:46.095 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.474 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=315]
[2024/09/16 23:43:47.475 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=881] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_segmentId_segments_id_fk` FOREIGN KEY (`segmentId`) REFERENCES `segments`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:47.475 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:47.475 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:47.479 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:316, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:47.480 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:316, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_segmentId_segments_id_fk` FOREIGN KEY (`segmentId`) REFERENCES `segments`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:47.481 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.481 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"broadcasts_segmentId_segments_id_fk\",\"L\":\"broadcasts_segmentid_segments_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"segmentId\",\"L\":\"segmentid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:47.488 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=881] [neededSchemaVersion=882] ["elapsed time"=650.459s] [gotSchemaVersion=882] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:47.490 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=882]
[2024/09/16 23:43:47.491 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=882] ["take time"=3.683292ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.494 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.502 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=882] [neededSchemaVersion=883] ["elapsed time"=747.166s] [gotSchemaVersion=883] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:47.504 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=883]
[2024/09/16 23:43:47.504 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=883] ["take time"=4.361959ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.508 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.516 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=883] [neededSchemaVersion=884] ["elapsed time"=675.875s] [gotSchemaVersion=884] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:47.517 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=884]
[2024/09/16 23:43:47.518 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=884] ["take time"=4.65225ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:47.521 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.522 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=316] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 23:43:47.522 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x401c77d760 0x401c77d8c0 0x401c77da20 0x401c77db80 0x401c77dce0 0x401c77de40 0x401c7b4000 0x401c7b4160 0x401c7b42c0 0x401c7b4420 0x401c7b4580 0x401c7b46e0 0x401c7b4840 0x401c7b49a0 0x401c7b4b00] [0x401c7b2b40 0x401c7b2d80] [] [0x401c4abd40] public true false 0  0 0 0 0 15 2 1 0 452599539956449288 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:47.522 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=316] [physicalTableID=274] [startKey=] [endKey=]
[2024/09/16 23:43:47.527 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=316]
[2024/09/16 23:43:47.528 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539956449300, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:47.529 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=316] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 23:43:47.532 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/316/0]
[2024/09/16 23:43:47.535 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=274] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:47.543 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=77]
[2024/09/16 23:43:47.543 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=77] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:47.665 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=76]
[2024/09/16 23:43:47.667 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:47.667 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=76]
[2024/09/16 23:43:47.672 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:48.046 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=77] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:48.046 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=77] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:48.049 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=77] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:48.050 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x401d1f0000 0x401d1f0160 0x401d1f02c0 0x401d1f0420 0x401d1f0580 0x401d1f06e0 0x401d1f0840 0x401d1f09a0 0x401d1f0b00 0x401d1f0c60 0x401d1f0dc0 0x401d1f0f20 0x401d1f1080 0x401d1f11e0 0x401d1f1340] [0x401d1e3e60 0x401d1f2120] [] [0x401b0f6a80] public true false 0  0 0 0 0 15 2 1 0 452599539956449288 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:48.051 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=77] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:48.545 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=77] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:48.752 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:48.760 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=884] [neededSchemaVersion=885] ["elapsed time"=612.916s] [gotSchemaVersion=885] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:48.761 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=885]
[2024/09/16 23:43:48.762 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=885] ["take time"=3.569708ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.765 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599539956449300, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.765 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=316] [table=broadcasts] [index=broadcasts_segmentId_segments_id_fk]
[2024/09/16 23:43:48.771 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=885] [neededSchemaVersion=886] ["elapsed time"=582.125s] [gotSchemaVersion=886] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:48.773 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=886]
[2024/09/16 23:43:48.773 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=886] ["take time"=3.267416ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.776 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.776 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=316] [physicalTableID=274] [startKey=7480000000000001125f69ffff000000000002] [endKey=7480000000000001125f69ffff000000000002ff]
[2024/09/16 23:43:48.780 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=316]
[2024/09/16 23:43:48.782 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540284129302, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.783 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540284129302, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001125f69ffff000000000002,EndKey:7480000000000001125f69ffff000000000002ff,First:false,PhysicalTableID:274,Ingest mode:false"]
[2024/09/16 23:43:48.784 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=274] ["start key"=7480000000000001125f69ffff000000000002] ["end key"=7480000000000001125f69ffff000000000002ff]
[2024/09/16 23:43:48.784 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=274] ["range start"=7480000000000001125f69ffff000000000002] ["range end"=7480000000000001125f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:43:48.784 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001125f69ffff000000000002] [endKey=7480000000000001125f69ffff000000000002ff]
[2024/09/16 23:43:48.784 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=316]
[2024/09/16 23:43:48.784 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=316]
[2024/09/16 23:43:48.784 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=316]
[2024/09/16 23:43:48.785 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 274, range: [7480000000000001125f69ffff000000000002, 7480000000000001125f69ffff000000000002ff), jobID: 316"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001125f69ffff000000000002ff00] ["take time"=313.708s]
[2024/09/16 23:43:48.785 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=316]
[2024/09/16 23:43:48.785 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001125f69ffff000000000002]
[2024/09/16 23:43:48.785 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:48.791 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=886] [neededSchemaVersion=887] ["elapsed time"=598.958s] [gotSchemaVersion=887] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:48.793 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=887]
[2024/09/16 23:43:48.794 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=887] ["take time"=4.031042ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.797 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.803 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=887] [neededSchemaVersion=888] ["elapsed time"=596.167s] [gotSchemaVersion=888] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:48.805 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=888]
[2024/09/16 23:43:48.805 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=888] ["take time"=3.42875ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.808 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.815 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=888] [neededSchemaVersion=889] ["elapsed time"=573.292s] [gotSchemaVersion=889] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:48.817 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=889]
[2024/09/16 23:43:48.817 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=889] ["take time"=3.3845ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.819 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.826 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=889] [neededSchemaVersion=890] ["elapsed time"=557.208s] [gotSchemaVersion=890] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:48.827 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=890]
[2024/09/16 23:43:48.828 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=890] ["take time"=3.324917ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.831 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [category=ddl] [job="ID:316, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540284129302, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:48.832 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:48.837 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=890] [neededSchemaVersion=891] ["elapsed time"=654.875s] [gotSchemaVersion=891] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:48.838 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=316] [version=891]
[2024/09/16 23:43:48.839 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=891] ["take time"=3.252417ms] [job="ID:316, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.844 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=316]
[2024/09/16 23:43:48.845 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=316] [tableID=274] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:48.847 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=316] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:48.847 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=316] [conn=952108744] [job="ID:316, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:47.445 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.853 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=316]
[2024/09/16 23:43:48.854 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=891] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:48.854 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:48.854 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:48.857 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:317, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:48.857 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:317, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:48.859 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.859 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"broadcasts_teamId_teams_id_fk\",\"L\":\"broadcasts_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:48.865 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=891] [neededSchemaVersion=892] ["elapsed time"=564.208s] [gotSchemaVersion=892] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:48.866 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=892]
[2024/09/16 23:43:48.867 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=892] ["take time"=3.352417ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.869 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.875 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=892] [neededSchemaVersion=893] ["elapsed time"=628.917s] [gotSchemaVersion=893] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:48.876 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=893]
[2024/09/16 23:43:48.877 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=893] ["take time"=3.22825ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.879 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.885 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=893] [neededSchemaVersion=894] ["elapsed time"=566.042s] [gotSchemaVersion=894] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:48.886 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=894]
[2024/09/16 23:43:48.887 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=894] ["take time"=3.201459ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:48.889 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.890 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=317] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 23:43:48.890 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x401e7ee2c0 0x401e7ee420 0x401e7ee580 0x401e7ee6e0 0x401e7ee840 0x401e7ee9a0 0x401e7eeb00 0x401e7eec60 0x401e7eedc0 0x401e7eef20 0x401e7ef080 0x401e7ef1e0 0x401e7ef340 0x401e7ef4a0 0x401e7ef600] [0x401e7e1830 0x401e7e1a70 0x401e7e1cb0] [] [0x401e7bc0c0 0x401e7bc180] public true false 0  0 0 0 0 15 3 2 0 452599540310343716 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:48.890 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=317] [physicalTableID=274] [startKey=] [endKey=]
[2024/09/16 23:43:48.894 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=317]
[2024/09/16 23:43:48.895 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540310343726, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:48.896 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=317] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 23:43:48.899 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/317/0]
[2024/09/16 23:43:48.899 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=274] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:48.906 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=78]
[2024/09/16 23:43:48.907 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=78] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:49.044 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=77]
[2024/09/16 23:43:49.047 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:49.047 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=77]
[2024/09/16 23:43:49.054 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:49.410 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=78] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:49.411 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=78] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:49.413 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=78] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:49.414 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x401ef63760 0x401ef638c0 0x401ef63a20 0x401ef63b80 0x401ef63ce0 0x401ef63e40 0x401ef7e000 0x401ef7e160 0x401ef7e2c0 0x401ef7e420 0x401ef7e580 0x401ef7e6e0 0x401ef7e840 0x401ef7e9a0 0x401ef7eb00] [0x401f380990 0x401f380bd0 0x401f380e10] [] [0x401eec9080 0x401eec9140] public true false 0  0 0 0 0 15 3 2 0 452599540310343716 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 23 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:49.414 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=78] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:49.914 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=78] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:50.112 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:50.122 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=894] [neededSchemaVersion=895] ["elapsed time"=607.541s] [gotSchemaVersion=895] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:50.123 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=895]
[2024/09/16 23:43:50.124 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=895] ["take time"=3.852167ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.126 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540310343726, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.127 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=317] [table=broadcasts] [index=broadcasts_teamId_teams_id_fk]
[2024/09/16 23:43:50.133 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=895] [neededSchemaVersion=896] ["elapsed time"=598.167s] [gotSchemaVersion=896] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:50.134 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=896]
[2024/09/16 23:43:50.135 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=896] ["take time"=3.511ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.137 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.138 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=317] [physicalTableID=274] [startKey=7480000000000001125f69ffff000000000003] [endKey=7480000000000001125f69ffff000000000003ff]
[2024/09/16 23:43:50.142 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=317]
[2024/09/16 23:43:50.143 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540638023704, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.145 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540638023704, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000001125f69ffff000000000003,EndKey:7480000000000001125f69ffff000000000003ff,First:false,PhysicalTableID:274,Ingest mode:false"]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=274] ["start key"=7480000000000001125f69ffff000000000003] ["end key"=7480000000000001125f69ffff000000000003ff]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=274] ["range start"=7480000000000001125f69ffff000000000003] ["range end"=7480000000000001125f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001125f69ffff000000000003] [endKey=7480000000000001125f69ffff000000000003ff]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=317]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=317]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=317]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 274, range: [7480000000000001125f69ffff000000000003, 7480000000000001125f69ffff000000000003ff), jobID: 317"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001125f69ffff000000000003ff00] ["take time"=350.25s]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=317]
[2024/09/16 23:43:50.146 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001125f69ffff000000000003]
[2024/09/16 23:43:50.147 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:50.152 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=896] [neededSchemaVersion=897] ["elapsed time"=644.417s] [gotSchemaVersion=897] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:50.153 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=897]
[2024/09/16 23:43:50.154 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=897] ["take time"=3.196667ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.156 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.162 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=897] [neededSchemaVersion=898] ["elapsed time"=587.5s] [gotSchemaVersion=898] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:50.164 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=898]
[2024/09/16 23:43:50.164 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=898] ["take time"=3.303459ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.167 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.174 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=898] [neededSchemaVersion=899] ["elapsed time"=581.666s] [gotSchemaVersion=899] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:50.175 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=899]
[2024/09/16 23:43:50.176 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=899] ["take time"=3.255834ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.178 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.184 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=899] [neededSchemaVersion=900] ["elapsed time"=655.916s] [gotSchemaVersion=900] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:50.186 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=900]
[2024/09/16 23:43:50.186 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=900] ["take time"=3.27025ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.189 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [category=ddl] [job="ID:317, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540638023704, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:50.191 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:50.196 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=900] [neededSchemaVersion=901] ["elapsed time"=598.917s] [gotSchemaVersion=901] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:50.197 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=317] [version=901]
[2024/09/16 23:43:50.198 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=901] ["take time"=4.022ms] [job="ID:317, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.206 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=317]
[2024/09/16 23:43:50.208 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=317] [tableID=274] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:50.210 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=317] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:50.210 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=317] [conn=952108744] [job="ID:317, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:48.845 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.217 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=317]
[2024/09/16 23:43:50.217 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=901] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:50.218 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:50.218 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:50.222 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:318, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:50.222 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:318, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:50.223 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.223 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":4,\"idx_name\":{\"O\":\"broadcasts_emailContentId_emailContents_id_fk\",\"L\":\"broadcasts_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":7,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:50.229 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=901] [neededSchemaVersion=902] ["elapsed time"=626.583s] [gotSchemaVersion=902] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:50.231 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=902]
[2024/09/16 23:43:50.231 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=902] ["take time"=3.393791ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.234 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.240 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=902] [neededSchemaVersion=903] ["elapsed time"=667.791s] [gotSchemaVersion=903] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:50.241 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=903]
[2024/09/16 23:43:50.242 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=903] ["take time"=3.278292ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.244 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.250 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=903] [neededSchemaVersion=904] ["elapsed time"=590.333s] [gotSchemaVersion=904] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:50.252 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=904]
[2024/09/16 23:43:50.252 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=904] ["take time"=3.163917ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:50.254 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.255 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=318] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 23:43:50.256 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x4021e3f8c0 0x4021e3fa20 0x4021e3fb80 0x4021e3fce0 0x4021e3fe40 0x4021fdc000 0x4021fdc160 0x4021fdc2c0 0x4021fdc420 0x4021fdc580 0x4021fdc6e0 0x4021fdc840 0x4021fdc9a0 0x4021fdcb00 0x4021fdcc60] [0x4021fde7e0 0x4021fdea20 0x4021fdec60 0x4021fdeea0] [] [0x4021f34cc0 0x4021f34d80 0x4021f34e40] public true false 0  0 0 0 0 15 4 3 0 452599540664238123 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:50.256 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=318] [physicalTableID=274] [startKey=] [endKey=]
[2024/09/16 23:43:50.260 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=318]
[2024/09/16 23:43:50.261 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540677345289, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:50.261 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=318] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 23:43:50.264 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/318/0]
[2024/09/16 23:43:50.265 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=274] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:50.272 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=79]
[2024/09/16 23:43:50.272 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=79] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:50.408 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=78]
[2024/09/16 23:43:50.410 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:50.410 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=78]
[2024/09/16 23:43:50.417 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:50.774 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=79] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:50.774 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=79] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:50.775 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=79] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:50.776 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x4022681a20 0x4022681b80 0x4022681ce0 0x4022681e40 0x4022982000 0x4022982160 0x40229822c0 0x4022982420 0x4022982580 0x40229826e0 0x4022982840 0x40229829a0 0x4022982b00 0x4022982c60 0x4022982dc0] [0x40229842d0 0x4022984510 0x4022984750 0x4022984990] [] [0x4022527800 0x40225278c0 0x4022527980] public true false 0  0 0 0 0 15 4 3 0 452599540664238123 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 33 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:50.776 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=79] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:51.276 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=79] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:51.526 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:51.543 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=904] [neededSchemaVersion=905] ["elapsed time"=760.917s] [gotSchemaVersion=905] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:51.546 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=905]
[2024/09/16 23:43:51.547 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=905] ["take time"=7.166083ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.550 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599540677345289, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.551 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=318] [table=broadcasts] [index=broadcasts_emailContentId_emailContents_id_fk]
[2024/09/16 23:43:51.559 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=905] [neededSchemaVersion=906] ["elapsed time"=907.208s] [gotSchemaVersion=906] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:51.562 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=906]
[2024/09/16 23:43:51.563 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=906] ["take time"=6.080125ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.565 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.566 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=318] [physicalTableID=274] [startKey=7480000000000001125f69ffff000000000004] [endKey=7480000000000001125f69ffff000000000004ff]
[2024/09/16 23:43:51.571 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=318]
[2024/09/16 23:43:51.572 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541018132493, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.574 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541018132493, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:4,StartKey:7480000000000001125f69ffff000000000004,EndKey:7480000000000001125f69ffff000000000004ff,First:false,PhysicalTableID:274,Ingest mode:false"]
[2024/09/16 23:43:51.575 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=274] ["start key"=7480000000000001125f69ffff000000000004] ["end key"=7480000000000001125f69ffff000000000004ff]
[2024/09/16 23:43:51.575 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=274] ["range start"=7480000000000001125f69ffff000000000004] ["range end"=7480000000000001125f69ffff000000000004ff] ["range count"=1]
[2024/09/16 23:43:51.575 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001125f69ffff000000000004] [endKey=7480000000000001125f69ffff000000000004ff]
[2024/09/16 23:43:51.575 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=318]
[2024/09/16 23:43:51.575 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=318]
[2024/09/16 23:43:51.575 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=318]
[2024/09/16 23:43:51.576 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 274, range: [7480000000000001125f69ffff000000000004, 7480000000000001125f69ffff000000000004ff), jobID: 318"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001125f69ffff000000000004ff00] ["take time"=376.959s]
[2024/09/16 23:43:51.576 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=318]
[2024/09/16 23:43:51.576 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:4,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001125f69ffff000000000004]
[2024/09/16 23:43:51.576 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:51.582 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=906] [neededSchemaVersion=907] ["elapsed time"=577s] [gotSchemaVersion=907] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:51.584 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=907]
[2024/09/16 23:43:51.584 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=907] ["take time"=3.595125ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.587 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.594 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=907] [neededSchemaVersion=908] ["elapsed time"=563.458s] [gotSchemaVersion=908] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:51.596 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=908]
[2024/09/16 23:43:51.596 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=908] ["take time"=3.499041ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.599 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.606 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=908] [neededSchemaVersion=909] ["elapsed time"=616.458s] [gotSchemaVersion=909] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:51.607 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=909]
[2024/09/16 23:43:51.608 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=909] ["take time"=3.445292ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.610 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.617 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=909] [neededSchemaVersion=910] ["elapsed time"=627.167s] [gotSchemaVersion=910] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:51.619 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=910]
[2024/09/16 23:43:51.619 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=910] ["take time"=3.384125ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.623 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [category=ddl] [job="ID:318, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541018132493, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:51.625 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:51.631 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=910] [neededSchemaVersion=911] ["elapsed time"=706.584s] [gotSchemaVersion=911] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:51.632 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=318] [version=911]
[2024/09/16 23:43:51.633 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=911] ["take time"=3.993083ms] [job="ID:318, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.639 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=318]
[2024/09/16 23:43:51.640 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=318] [tableID=274] [indexIDs="[9223090561878065156]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:51.642 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=318] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:51.642 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=318] [conn=952108744] [job="ID:318, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:50.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.649 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=318]
[2024/09/16 23:43:51.650 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=911] [cur_db=test] [sql="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_winningAbTestVariantId_abTestVariants_id_fk` FOREIGN KEY (`winningAbTestVariantId`) REFERENCES `abTestVariants`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:51.650 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:51.650 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=broadcasts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:51.654 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:319, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:51.654 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:319, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `broadcasts` ADD CONSTRAINT `broadcasts_winningAbTestVariantId_abTestVariants_id_fk` FOREIGN KEY (`winningAbTestVariantId`) REFERENCES `abTestVariants`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:51.655 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.656 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":5,\"idx_name\":{\"O\":\"broadcasts_winningAbTestVariantId_abTestVariants_id_fk\",\"L\":\"broadcasts_winningabtestvariantid_abtestvariants_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"winningAbTestVariantId\",\"L\":\"winningabtestvariantid\"},\"offset\":8,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:51.662 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=911] [neededSchemaVersion=912] ["elapsed time"=738.125s] [gotSchemaVersion=912] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:51.664 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=912]
[2024/09/16 23:43:51.665 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=912] ["take time"=4.177083ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.668 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.674 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=912] [neededSchemaVersion=913] ["elapsed time"=623.25s] [gotSchemaVersion=913] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:51.676 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=913]
[2024/09/16 23:43:51.676 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=913] ["take time"=3.477584ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.679 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.686 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=913] [neededSchemaVersion=914] ["elapsed time"=792.209s] [gotSchemaVersion=914] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:51.687 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=914]
[2024/09/16 23:43:51.688 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=914] ["take time"=3.6045ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:51.690 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.691 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=319] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 23:43:51.691 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x4024113a20 0x4024113b80 0x4024113ce0 0x4024113e40 0x4024168000 0x4024168160 0x40241682c0 0x4024168420 0x4024168580 0x40241686e0 0x4024168840 0x40241689a0 0x4024168b00 0x4024168c60 0x4024168dc0] [0x4024159290 0x40241594d0 0x4024159710 0x4024159950 0x4024159b90] [] [0x4024058cc0 0x4024058d80 0x4024058e40 0x4024058f00] public true false 0  0 0 0 0 15 5 4 0 452599541044346912 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:51.692 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=319] [physicalTableID=274] [startKey=] [endKey=]
[2024/09/16 23:43:51.696 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=319]
[2024/09/16 23:43:51.697 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541044346922, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:51.697 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=319] [table=broadcasts] ["ingest mode"=true] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 23:43:51.701 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/319/0]
[2024/09/16 23:43:51.703 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=274] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:51.711 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=80]
[2024/09/16 23:43:51.711 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=80] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:51.774 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=79]
[2024/09/16 23:43:51.776 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:51.776 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=79]
[2024/09/16 23:43:51.781 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:52.217 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=80] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:52.218 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=80] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:52.220 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=80] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:52.221 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{274 broadcasts utf8mb4 utf8mb4_bin [0x4024872000 0x4024872160 0x40248722c0 0x4024872420 0x4024872580 0x40248726e0 0x4024872840 0x40248729a0 0x4024872b00 0x4024872c60 0x4024872dc0 0x4024872f20 0x4024873080 0x40248731e0 0x4024873340] [0x402484b9e0 0x402484bc20 0x402484be60 0x4024874120 0x4024874360] [] [0x402485e240 0x402485e300 0x402485e3c0 0x402485e480] public true false 0  0 0 0 0 15 5 4 0 452599541044346912 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 43 260}"] ["table/partition ID"=274] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:52.221 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=80] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:52.716 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=80] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:52.915 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:52.923 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=914] [neededSchemaVersion=915] ["elapsed time"=632.209s] [gotSchemaVersion=915] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:52.924 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=915]
[2024/09/16 23:43:52.925 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=915] ["take time"=3.394292ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:52.927 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541044346922, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:52.928 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=319] [table=broadcasts] [index=broadcasts_winningAbTestVariantId_abTestVariants_id_fk]
[2024/09/16 23:43:52.935 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=915] [neededSchemaVersion=916] ["elapsed time"=669.708s] [gotSchemaVersion=916] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:52.936 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=916]
[2024/09/16 23:43:52.937 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=916] ["take time"=3.513ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:52.939 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:52.940 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=319] [physicalTableID=274] [startKey=7480000000000001125f69ffff000000000005] [endKey=7480000000000001125f69ffff000000000005ff]
[2024/09/16 23:43:52.944 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=319]
[2024/09/16 23:43:52.945 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541372026903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:52.947 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541372026903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:5,StartKey:7480000000000001125f69ffff000000000005,EndKey:7480000000000001125f69ffff000000000005ff,First:false,PhysicalTableID:274,Ingest mode:false"]
[2024/09/16 23:43:52.947 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=274] ["start key"=7480000000000001125f69ffff000000000005] ["end key"=7480000000000001125f69ffff000000000005ff]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=274] ["range start"=7480000000000001125f69ffff000000000005] ["range end"=7480000000000001125f69ffff000000000005ff] ["range count"=1]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001125f69ffff000000000005] [endKey=7480000000000001125f69ffff000000000005ff]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=319]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=319]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=319]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 274, range: [7480000000000001125f69ffff000000000005, 7480000000000001125f69ffff000000000005ff), jobID: 319"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001125f69ffff000000000005ff00] ["take time"=355.834s]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=319]
[2024/09/16 23:43:52.948 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:5,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001125f69ffff000000000005]
[2024/09/16 23:43:52.949 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:52.954 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=916] [neededSchemaVersion=917] ["elapsed time"=638.291s] [gotSchemaVersion=917] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:52.956 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=917]
[2024/09/16 23:43:52.956 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=917] ["take time"=3.167292ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:52.958 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:52.965 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=917] [neededSchemaVersion=918] ["elapsed time"=695.459s] [gotSchemaVersion=918] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:52.966 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=918]
[2024/09/16 23:43:52.967 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=918] ["take time"=3.533833ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:52.969 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:52.976 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=918] [neededSchemaVersion=919] ["elapsed time"=645.541s] [gotSchemaVersion=919] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:52.978 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=919]
[2024/09/16 23:43:52.978 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=919] ["take time"=3.236166ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:52.980 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:52.987 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=919] [neededSchemaVersion=920] ["elapsed time"=681.916s] [gotSchemaVersion=920] [phyTblIDs="[274]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:52.988 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=920]
[2024/09/16 23:43:52.989 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=920] ["take time"=3.369625ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:52.992 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [category=ddl] [job="ID:319, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541372026903, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:52.994 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:52.998 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=920] [neededSchemaVersion=921] ["elapsed time"=641.959s] [gotSchemaVersion=921] [phyTblIDs="[274]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:53.000 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=319] [version=921]
[2024/09/16 23:43:53.000 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=921] ["take time"=3.286083ms] [job="ID:319, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:53.007 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=319]
[2024/09/16 23:43:53.008 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=319] [tableID=274] [indexIDs="[9223090561878065157]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:53.010 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=319] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:53.010 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=319] [conn=952108744] [job="ID:319, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:274, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:51.645 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:53.016 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=319]
[2024/09/16 23:43:53.017 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=921] [cur_db=test] [sql="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_automationStepId_automationSteps_id_fk` FOREIGN KEY (`automationStepId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:53.017 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:53.018 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:53.021 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:320, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:53.021 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:320, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_automationStepId_automationSteps_id_fk` FOREIGN KEY (`automationStepId`) REFERENCES `automationSteps`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:53.022 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:53.023 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"contactAutomationSteps_automationStepId_automationSteps_id_fk\",\"L\":\"contactautomationsteps_automationstepid_automationsteps_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"automationStepId\",\"L\":\"automationstepid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:53.029 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=921] [neededSchemaVersion=922] ["elapsed time"=524.084s] [gotSchemaVersion=922] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:53.030 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=922]
[2024/09/16 23:43:53.031 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=922] ["take time"=3.305208ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:53.033 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:53.039 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=922] [neededSchemaVersion=923] ["elapsed time"=492.375s] [gotSchemaVersion=923] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:53.041 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=923]
[2024/09/16 23:43:53.041 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=923] ["take time"=3.532792ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:53.044 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:53.052 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=923] [neededSchemaVersion=924] ["elapsed time"=529s] [gotSchemaVersion=924] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:53.053 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=924]
[2024/09/16 23:43:53.054 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=924] ["take time"=3.498083ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:53.056 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:53.057 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=320] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 23:43:53.057 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{276 contactAutomationSteps utf8mb4 utf8mb4_bin [0x402680af20 0x402680b080 0x402680b1e0 0x402680b340 0x402680b4a0 0x402680b600 0x402680b760 0x402680b8c0 0x402680ba20 0x402680bb80] [0x4026815b90] [] [] public true false 0  0 0 0 0 10 1 0 0 452599541398241325 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=276] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:53.057 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=320] [physicalTableID=276] [startKey=] [endKey=]
[2024/09/16 23:43:53.062 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=320]
[2024/09/16 23:43:53.063 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541411348489, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:53.064 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=320] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 23:43:53.067 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/320/0]
[2024/09/16 23:43:53.068 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=276] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:53.076 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=81]
[2024/09/16 23:43:53.076 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=81] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:53.213 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=80]
[2024/09/16 23:43:53.216 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:53.216 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=80]
[2024/09/16 23:43:53.221 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:53.578 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=81] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:53.578 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=81] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:53.579 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=81] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:53.581 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{276 contactAutomationSteps utf8mb4 utf8mb4_bin [0x402726c000 0x402726c160 0x402726c2c0 0x402726c420 0x402726c580 0x402726c6e0 0x402726c840 0x402726c9a0 0x402726cb00 0x402726cc60] [0x402725d170] [] [] public true false 0  0 0 0 0 10 1 0 0 452599541398241325 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=276] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:53.581 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=81] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:54.081 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=81] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:54.284 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:54.299 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=924] [neededSchemaVersion=925] ["elapsed time"=713.334s] [gotSchemaVersion=925] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:54.301 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=925]
[2024/09/16 23:43:54.303 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=925] ["take time"=6.047ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.306 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541411348489, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.307 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=320] [table=contactAutomationSteps] [index=contactAutomationSteps_automationStepId_automationSteps_id_fk]
[2024/09/16 23:43:54.317 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=925] [neededSchemaVersion=926] ["elapsed time"=822.583s] [gotSchemaVersion=926] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:54.320 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=926]
[2024/09/16 23:43:54.321 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=926] ["take time"=5.694083ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.325 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.327 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=320] [physicalTableID=276] [startKey=7480000000000001145f69ffff000000000001] [endKey=7480000000000001145f69ffff000000000001ff]
[2024/09/16 23:43:54.333 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=320]
[2024/09/16 23:43:54.335 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541739028497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.337 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541739028497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000001145f69ffff000000000001,EndKey:7480000000000001145f69ffff000000000001ff,First:false,PhysicalTableID:276,Ingest mode:false"]
[2024/09/16 23:43:54.338 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=276] ["start key"=7480000000000001145f69ffff000000000001] ["end key"=7480000000000001145f69ffff000000000001ff]
[2024/09/16 23:43:54.338 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=276] ["range start"=7480000000000001145f69ffff000000000001] ["range end"=7480000000000001145f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:43:54.338 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001145f69ffff000000000001] [endKey=7480000000000001145f69ffff000000000001ff]
[2024/09/16 23:43:54.339 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=320]
[2024/09/16 23:43:54.339 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=320]
[2024/09/16 23:43:54.339 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=320]
[2024/09/16 23:43:54.339 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 276, range: [7480000000000001145f69ffff000000000001, 7480000000000001145f69ffff000000000001ff), jobID: 320"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001145f69ffff000000000001ff00] ["take time"=355.875s]
[2024/09/16 23:43:54.339 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=320]
[2024/09/16 23:43:54.339 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001145f69ffff000000000001]
[2024/09/16 23:43:54.339 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:54.345 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=926] [neededSchemaVersion=927] ["elapsed time"=614s] [gotSchemaVersion=927] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:54.347 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=927]
[2024/09/16 23:43:54.348 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=927] ["take time"=3.704459ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.350 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.356 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=927] [neededSchemaVersion=928] ["elapsed time"=477.167s] [gotSchemaVersion=928] [phyTblIDs="[276]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:54.358 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=928]
[2024/09/16 23:43:54.358 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=928] ["take time"=3.068208ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.361 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.368 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=928] [neededSchemaVersion=929] ["elapsed time"=537.958s] [gotSchemaVersion=929] [phyTblIDs="[276]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:54.369 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=929]
[2024/09/16 23:43:54.370 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=929] ["take time"=3.300625ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.372 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.379 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=929] [neededSchemaVersion=930] ["elapsed time"=549.083s] [gotSchemaVersion=930] [phyTblIDs="[276]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:54.380 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=930]
[2024/09/16 23:43:54.380 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=930] ["take time"=3.096708ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.383 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [category=ddl] [job="ID:320, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541739028497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:54.385 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:54.389 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=930] [neededSchemaVersion=931] ["elapsed time"=499.708s] [gotSchemaVersion=931] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:54.391 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=320] [version=931]
[2024/09/16 23:43:54.391 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=931] ["take time"=3.462666ms] [job="ID:320, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.399 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=320]
[2024/09/16 23:43:54.400 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=320] [tableID=276] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:54.402 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=320] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:54.403 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=320] [conn=952108744] [job="ID:320, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:52.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.410 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=320]
[2024/09/16 23:43:54.411 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=931] [cur_db=test] [sql="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:54.411 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:54.411 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactautomationsteps] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:54.415 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:321, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:54.415 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:321, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactAutomationSteps` ADD CONSTRAINT `contactAutomationSteps_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:43:54.417 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.417 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contactAutomationSteps_contactId_contacts_id_fk\",\"L\":\"contactautomationsteps_contactid_contacts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:54.425 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=931] [neededSchemaVersion=932] ["elapsed time"=658.333s] [gotSchemaVersion=932] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:54.427 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=932]
[2024/09/16 23:43:54.428 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=932] ["take time"=4.58875ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.431 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.439 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=932] [neededSchemaVersion=933] ["elapsed time"=2.003875ms] [gotSchemaVersion=933] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:54.451 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=933]
[2024/09/16 23:43:54.452 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=933] ["take time"=15.181291ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.455 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.464 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=933] [neededSchemaVersion=934] ["elapsed time"=688.083s] [gotSchemaVersion=934] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:54.467 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=934]
[2024/09/16 23:43:54.468 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=934] ["take time"=5.4785ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:54.473 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.474 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=321] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 23:43:54.475 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{276 contactAutomationSteps utf8mb4 utf8mb4_bin [0x4028763ce0 0x4028763e40 0x402883e000 0x402883e160 0x402883e2c0 0x402883e420 0x402883e580 0x402883e6e0 0x402883e840 0x402883e9a0] [0x4028821950 0x4028821b90] [] [0x402880ecc0] public true false 0  0 0 0 0 10 2 1 0 452599541778350088 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=276] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:54.475 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=321] [physicalTableID=276] [startKey=] [endKey=]
[2024/09/16 23:43:54.480 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=321]
[2024/09/16 23:43:54.481 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541778350098, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:54.482 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=321] [table=contactAutomationSteps] ["ingest mode"=true] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 23:43:54.486 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/321/0]
[2024/09/16 23:43:54.487 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=276] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:54.496 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=82]
[2024/09/16 23:43:54.496 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=82] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:54.577 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=81]
[2024/09/16 23:43:54.578 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:54.578 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=81]
[2024/09/16 23:43:54.583 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:54.998 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=82] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:54.998 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=82] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:55.001 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=82] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:55.002 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{276 contactAutomationSteps utf8mb4 utf8mb4_bin [0x4028fba000 0x4028fba160 0x4028fba2c0 0x4028fba420 0x4028fba580 0x4028fba6e0 0x4028fba840 0x4028fba9a0 0x4028fbab00 0x4028fbac60] [0x4028f917a0 0x4028f919e0] [] [0x4028fa4180] public true false 0  0 0 0 0 10 2 1 0 452599541778350088 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=276] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:55.003 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=82] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:55.497 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=82] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:55.699 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:55.707 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=934] [neededSchemaVersion=935] ["elapsed time"=567.542s] [gotSchemaVersion=935] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:55.708 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=935]
[2024/09/16 23:43:55.709 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=935] ["take time"=3.524542ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.711 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599541778350098, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.712 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=321] [table=contactAutomationSteps] [index=contactAutomationSteps_contactId_contacts_id_fk]
[2024/09/16 23:43:55.717 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=935] [neededSchemaVersion=936] ["elapsed time"=460.25s] [gotSchemaVersion=936] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:55.719 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=936]
[2024/09/16 23:43:55.720 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=936] ["take time"=3.495958ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.722 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.723 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=321] [physicalTableID=276] [startKey=7480000000000001145f69ffff000000000002] [endKey=7480000000000001145f69ffff000000000002ff]
[2024/09/16 23:43:55.727 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=321]
[2024/09/16 23:43:55.728 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542106292246, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.730 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542106292246, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001145f69ffff000000000002,EndKey:7480000000000001145f69ffff000000000002ff,First:false,PhysicalTableID:276,Ingest mode:false"]
[2024/09/16 23:43:55.731 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=276] ["start key"=7480000000000001145f69ffff000000000002] ["end key"=7480000000000001145f69ffff000000000002ff]
[2024/09/16 23:43:55.731 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=276] ["range start"=7480000000000001145f69ffff000000000002] ["range end"=7480000000000001145f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:43:55.731 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001145f69ffff000000000002] [endKey=7480000000000001145f69ffff000000000002ff]
[2024/09/16 23:43:55.731 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=321]
[2024/09/16 23:43:55.731 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=321]
[2024/09/16 23:43:55.731 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=321]
[2024/09/16 23:43:55.732 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 276, range: [7480000000000001145f69ffff000000000002, 7480000000000001145f69ffff000000000002ff), jobID: 321"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001145f69ffff000000000002ff00] ["take time"=415.125s]
[2024/09/16 23:43:55.732 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=321]
[2024/09/16 23:43:55.732 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001145f69ffff000000000002]
[2024/09/16 23:43:55.732 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:55.738 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=936] [neededSchemaVersion=937] ["elapsed time"=554.25s] [gotSchemaVersion=937] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:55.740 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=937]
[2024/09/16 23:43:55.740 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=937] ["take time"=3.305292ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.743 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.751 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=937] [neededSchemaVersion=938] ["elapsed time"=653.5s] [gotSchemaVersion=938] [phyTblIDs="[276]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:55.753 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=938]
[2024/09/16 23:43:55.754 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=938] ["take time"=4.619083ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.757 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.767 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=938] [neededSchemaVersion=939] ["elapsed time"=886.166s] [gotSchemaVersion=939] [phyTblIDs="[276]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:55.769 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=939]
[2024/09/16 23:43:55.770 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=939] ["take time"=4.831916ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.773 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.781 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=939] [neededSchemaVersion=940] ["elapsed time"=674.959s] [gotSchemaVersion=940] [phyTblIDs="[276]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:55.783 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=940]
[2024/09/16 23:43:55.784 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=940] ["take time"=4.628708ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.788 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [category=ddl] [job="ID:321, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542106292246, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:55.791 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:55.799 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=940] [neededSchemaVersion=941] ["elapsed time"=827.583s] [gotSchemaVersion=941] [phyTblIDs="[276]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:55.801 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=321] [version=941]
[2024/09/16 23:43:55.802 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=941] ["take time"=5.233875ms] [job="ID:321, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.808 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=321]
[2024/09/16 23:43:55.810 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=321] [tableID=276] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:55.812 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=321] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:55.813 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=321] [conn=952108744] [job="ID:321, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:276, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:54.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.824 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=321]
[2024/09/16 23:43:55.825 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=941] [cur_db=test] [sql="ALTER TABLE `contactImports` ADD CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:55.826 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactimports] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:55.826 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contactimports] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:55.830 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:322, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:55.830 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:322, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contactImports` ADD CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:55.831 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.832 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contactImports_audienceId_audiences_id_fk\",\"L\":\"contactimports_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:55.839 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=941] [neededSchemaVersion=942] ["elapsed time"=867.333s] [gotSchemaVersion=942] [phyTblIDs="[278]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:55.843 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=942]
[2024/09/16 23:43:55.845 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=942] ["take time"=7.703417ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.851 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.864 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=942] [neededSchemaVersion=943] ["elapsed time"=904.042s] [gotSchemaVersion=943] [phyTblIDs="[278]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:55.868 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=943]
[2024/09/16 23:43:55.870 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=943] ["take time"=8.725209ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.875 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.886 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=943] [neededSchemaVersion=944] ["elapsed time"=678.292s] [gotSchemaVersion=944] [phyTblIDs="[278]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:55.889 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=944]
[2024/09/16 23:43:55.889 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=944] ["take time"=4.93075ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:55.893 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.893 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=322] [table=contactImports] ["ingest mode"=true] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 23:43:55.894 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{278 contactImports utf8mb4 utf8mb4_bin [0x402a992b00 0x402a992c60 0x402a992dc0 0x402a992f20 0x402a993080 0x402a9931e0 0x402a993340 0x402a9934a0 0x402a993600 0x402a993760] [0x402a9e4120 0x402a9e4360] [] [] public true false 0  0 0 0 0 10 2 0 0 452599542145351692 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=278] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:55.894 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=322] [physicalTableID=278] [startKey=] [endKey=]
[2024/09/16 23:43:55.899 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=322]
[2024/09/16 23:43:55.901 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542145351702, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:55.902 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=322] [table=contactImports] ["ingest mode"=true] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 23:43:55.907 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/322/0]
[2024/09/16 23:43:55.910 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=278] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:55.920 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=83]
[2024/09/16 23:43:55.920 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=83] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:55.997 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=82]
[2024/09/16 23:43:56.000 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:56.000 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=82]
[2024/09/16 23:43:56.007 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:56.423 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=83] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:56.423 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=83] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:56.425 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=83] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:56.427 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{278 contactImports utf8mb4 utf8mb4_bin [0x402b4be000 0x402b4be160 0x402b4be2c0 0x402b4be420 0x402b4be580 0x402b4be6e0 0x402b4be840 0x402b4be9a0 0x402b4beb00 0x402b4bec60] [0x402b2cfb90 0x402b2cfdd0] [] [] public true false 0  0 0 0 0 10 2 0 0 452599542145351692 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=278] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:56.427 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=83] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:56.927 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=83] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:57.142 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:57.155 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=944] [neededSchemaVersion=945] ["elapsed time"=930.583s] [gotSchemaVersion=945] [phyTblIDs="[278]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:57.157 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=945]
[2024/09/16 23:43:57.158 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=945] ["take time"=5.6975ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.162 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542145351702, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.165 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=322] [table=contactImports] [index=contactImports_audienceId_audiences_id_fk]
[2024/09/16 23:43:57.182 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=945] [neededSchemaVersion=946] ["elapsed time"=1.308ms] [gotSchemaVersion=946] [phyTblIDs="[278]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:57.185 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=946]
[2024/09/16 23:43:57.186 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=946] ["take time"=7.402542ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.191 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.192 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=322] [physicalTableID=278] [startKey=7480000000000001165f69ffff000000000002] [endKey=7480000000000001165f69ffff000000000002ff]
[2024/09/16 23:43:57.200 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=322]
[2024/09/16 23:43:57.204 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542486138898, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.213 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542486138898, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001165f69ffff000000000002,EndKey:7480000000000001165f69ffff000000000002ff,First:false,PhysicalTableID:278,Ingest mode:false"]
[2024/09/16 23:43:57.215 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=278] ["start key"=7480000000000001165f69ffff000000000002] ["end key"=7480000000000001165f69ffff000000000002ff]
[2024/09/16 23:43:57.216 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=278] ["range start"=7480000000000001165f69ffff000000000002] ["range end"=7480000000000001165f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:43:57.216 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001165f69ffff000000000002] [endKey=7480000000000001165f69ffff000000000002ff]
[2024/09/16 23:43:57.216 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=322]
[2024/09/16 23:43:57.216 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=322]
[2024/09/16 23:43:57.216 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=322]
[2024/09/16 23:43:57.217 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [task="taskID: 1, physicalTableID: 278, range: [7480000000000001165f69ffff000000000002, 7480000000000001165f69ffff000000000002ff), jobID: 322"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001165f69ffff000000000002ff00] ["take time"=545.542s]
[2024/09/16 23:43:57.217 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=322]
[2024/09/16 23:43:57.217 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001165f69ffff000000000002]
[2024/09/16 23:43:57.217 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:57.226 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=946] [neededSchemaVersion=947] ["elapsed time"=748.458s] [gotSchemaVersion=947] [phyTblIDs="[278]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:57.228 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=947]
[2024/09/16 23:43:57.229 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=947] ["take time"=4.866791ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.244 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.256 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=947] [neededSchemaVersion=948] ["elapsed time"=861.458s] [gotSchemaVersion=948] [phyTblIDs="[278]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:57.268 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=948]
[2024/09/16 23:43:57.270 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=948] ["take time"=15.950583ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.274 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.286 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=948] [neededSchemaVersion=949] ["elapsed time"=796.417s] [gotSchemaVersion=949] [phyTblIDs="[278]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:57.288 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=949]
[2024/09/16 23:43:57.289 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=949] ["take time"=5.084709ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.294 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.316 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=949] [neededSchemaVersion=950] ["elapsed time"=1.04575ms] [gotSchemaVersion=950] [phyTblIDs="[278]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:57.319 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=950]
[2024/09/16 23:43:57.320 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=950] ["take time"=6.334875ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.325 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [category=ddl] [job="ID:322, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542486138898, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:57.327 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:57.340 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=950] [neededSchemaVersion=951] ["elapsed time"=1.487333ms] [gotSchemaVersion=951] [phyTblIDs="[278]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:57.344 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=322] [version=951]
[2024/09/16 23:43:57.346 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=951] ["take time"=9.038417ms] [job="ID:322, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.354 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=322]
[2024/09/16 23:43:57.357 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=322] [tableID=278] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:57.360 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=322] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:57.360 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=322] [conn=952108744] [job="ID:322, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:278, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:55.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.378 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=322]
[2024/09/16 23:43:57.382 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=951] [cur_db=test] [sql="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:57.382 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:57.383 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:57.388 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:323, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:57.388 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:323, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:57.389 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.392 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"contacts_audienceId_audiences_id_fk\",\"L\":\"contacts_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":7,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:57.417 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=951] [neededSchemaVersion=952] ["elapsed time"=3.587583ms] [gotSchemaVersion=952] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:57.420 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=952]
[2024/09/16 23:43:57.421 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=952] ["take time"=10.356833ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.421 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=83]
[2024/09/16 23:43:57.425 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:57.425 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=83]
[2024/09/16 23:43:57.427 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.433 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:57.444 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=952] [neededSchemaVersion=953] ["elapsed time"=2.266792ms] [gotSchemaVersion=953] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:57.449 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=953]
[2024/09/16 23:43:57.452 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=953] ["take time"=12.719209ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.456 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.465 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=953] [neededSchemaVersion=954] ["elapsed time"=946.75s] [gotSchemaVersion=954] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:57.468 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=954]
[2024/09/16 23:43:57.469 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=954] ["take time"=6.434708ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:57.475 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.476 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=323] [table=contacts] ["ingest mode"=true] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 23:43:57.478 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{280 contacts utf8mb4 utf8mb4_bin [0x402cf558c0 0x402cf55a20 0x402cf55b80 0x402cf55ce0 0x402cf55e40 0x402d120000 0x402d120160 0x402d1202c0 0x402d120420 0x402d120580 0x402d1206e0 0x402d120840 0x402d1209a0] [0x402d180360 0x402d180630] [] [] public true false 0  0 0 0 0 13 2 0 0 452599542564782088 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=280] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:57.478 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=323] [physicalTableID=280] [startKey=] [endKey=]
[2024/09/16 23:43:57.490 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=323]
[2024/09/16 23:43:57.492 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542564782098, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:57.493 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=323] [table=contacts] ["ingest mode"=true] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 23:43:57.499 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/323/0]
[2024/09/16 23:43:57.501 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=280] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:57.528 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=84]
[2024/09/16 23:43:57.528 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=84] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:58.032 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=84] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:58.033 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=84] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:58.034 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=84] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:58.036 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{280 contacts utf8mb4 utf8mb4_bin [0x402d794000 0x402d794160 0x402d7942c0 0x402d794420 0x402d794580 0x402d7946e0 0x402d794840 0x402d7949a0 0x402d794b00 0x402d794c60 0x402d794dc0 0x402d794f20 0x402d795080] [0x402d579b00 0x402d579dd0] [] [] public true false 0  0 0 0 0 13 2 0 0 452599542564782088 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=280] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:58.036 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=84] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:58.561 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=84] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:43:58.733 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:58.745 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=954] [neededSchemaVersion=955] ["elapsed time"=1.021417ms] [gotSchemaVersion=955] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:58.748 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=955]
[2024/09/16 23:43:58.751 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=955] ["take time"=8.541792ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.760 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542564782098, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.761 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=323] [table=contacts] [index=contacts_audienceId_audiences_id_fk]
[2024/09/16 23:43:58.770 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=955] [neededSchemaVersion=956] ["elapsed time"=871.25s] [gotSchemaVersion=956] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:58.772 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=956]
[2024/09/16 23:43:58.772 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=956] ["take time"=4.861292ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.776 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.777 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=323] [physicalTableID=280] [startKey=7480000000000001185f69ffff000000000002] [endKey=7480000000000001185f69ffff000000000002ff]
[2024/09/16 23:43:58.786 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=323]
[2024/09/16 23:43:58.788 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542905569295, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.792 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542905569295, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001185f69ffff000000000002,EndKey:7480000000000001185f69ffff000000000002ff,First:false,PhysicalTableID:280,Ingest mode:false"]
[2024/09/16 23:43:58.794 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=280] ["start key"=7480000000000001185f69ffff000000000002] ["end key"=7480000000000001185f69ffff000000000002ff]
[2024/09/16 23:43:58.794 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=280] ["range start"=7480000000000001185f69ffff000000000002] ["range end"=7480000000000001185f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:43:58.794 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001185f69ffff000000000002] [endKey=7480000000000001185f69ffff000000000002ff]
[2024/09/16 23:43:58.794 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=323]
[2024/09/16 23:43:58.795 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=323]
[2024/09/16 23:43:58.794 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=323]
[2024/09/16 23:43:58.795 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 280, range: [7480000000000001185f69ffff000000000002, 7480000000000001185f69ffff000000000002ff), jobID: 323"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001185f69ffff000000000002ff00] ["take time"=646.541s]
[2024/09/16 23:43:58.795 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=323]
[2024/09/16 23:43:58.795 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001185f69ffff000000000002]
[2024/09/16 23:43:58.795 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:43:58.804 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=956] [neededSchemaVersion=957] ["elapsed time"=735.334s] [gotSchemaVersion=957] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:58.806 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=957]
[2024/09/16 23:43:58.806 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=957] ["take time"=4.49ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.810 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.822 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=957] [neededSchemaVersion=958] ["elapsed time"=1.592708ms] [gotSchemaVersion=958] [phyTblIDs="[280]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:58.825 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=958]
[2024/09/16 23:43:58.826 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=958] ["take time"=7.138125ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.829 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.841 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=958] [neededSchemaVersion=959] ["elapsed time"=1.069125ms] [gotSchemaVersion=959] [phyTblIDs="[280]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:58.843 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=959]
[2024/09/16 23:43:58.844 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=959] ["take time"=6.048417ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.850 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.862 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=959] [neededSchemaVersion=960] ["elapsed time"=828.791s] [gotSchemaVersion=960] [phyTblIDs="[280]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:43:58.864 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=960]
[2024/09/16 23:43:58.865 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=960] ["take time"=5.408041ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.870 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [category=ddl] [job="ID:323, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542905569295, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:43:58.872 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:43:58.880 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=960] [neededSchemaVersion=961] ["elapsed time"=879.292s] [gotSchemaVersion=961] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:58.882 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=323] [version=961]
[2024/09/16 23:43:58.883 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=961] ["take time"=5.958583ms] [job="ID:323, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.891 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=323]
[2024/09/16 23:43:58.893 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=323] [tableID=280] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:43:58.896 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=323] [jobType="alter table multi-schema change"]
[2024/09/16 23:43:58.897 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=323] [conn=952108744] [job="ID:323, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:57.345 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.908 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=323]
[2024/09/16 23:43:58.910 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=961] [cur_db=test] [sql="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_contactImportId_contactImports_id_fk` FOREIGN KEY (`contactImportId`) REFERENCES `contactImports`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:43:58.911 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:58.911 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=contacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:43:58.916 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:324, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:43:58.916 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:324, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `contacts` ADD CONSTRAINT `contacts_contactImportId_contactImports_id_fk` FOREIGN KEY (`contactImportId`) REFERENCES `contactImports`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:43:58.918 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.919 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"contacts_contactImportId_contactImports_id_fk\",\"L\":\"contacts_contactimportid_contactimports_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactImportId\",\"L\":\"contactimportid\"},\"offset\":10,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:43:58.926 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=961] [neededSchemaVersion=962] ["elapsed time"=776.75s] [gotSchemaVersion=962] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:58.929 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=962]
[2024/09/16 23:43:58.930 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=962] ["take time"=4.973667ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.932 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.939 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=962] [neededSchemaVersion=963] ["elapsed time"=697.083s] [gotSchemaVersion=963] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:58.941 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=963]
[2024/09/16 23:43:58.941 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=963] ["take time"=3.486583ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.944 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.950 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=963] [neededSchemaVersion=964] ["elapsed time"=617.834s] [gotSchemaVersion=964] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:43:58.952 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=964]
[2024/09/16 23:43:58.952 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=964] ["take time"=3.493417ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:43:58.955 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.956 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=324] [table=contacts] ["ingest mode"=true] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 23:43:58.956 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{280 contacts utf8mb4 utf8mb4_bin [0x4013fdd600 0x4013fdd760 0x4013fdd8c0 0x4013fdda20 0x4013fddb80 0x4013fddce0 0x4004000000 0x4004001340 0x40040014a0 0x4004001600 0x4004001760 0x40040018c0 0x4004001a20] [0x400c95b830 0x400c95bb00 0x400c95bdd0] [] [0x40132fd500] public true false 0  0 0 0 0 13 3 1 0 452599542944890912 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=280] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:58.956 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=324] [physicalTableID=280] [startKey=] [endKey=]
[2024/09/16 23:43:58.960 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=324]
[2024/09/16 23:43:58.961 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542957998089, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:43:58.962 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=324] [table=contacts] ["ingest mode"=true] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 23:43:58.966 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/324/0]
[2024/09/16 23:43:58.969 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=280] [size=0] [error="less than 3 regions"]
[2024/09/16 23:43:58.979 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=85]
[2024/09/16 23:43:58.980 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=85] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:43:59.030 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=84]
[2024/09/16 23:43:59.033 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:43:59.033 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=84]
[2024/09/16 23:43:59.039 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:43:59.488 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=85] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:43:59.489 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=85] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:43:59.508 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=85] [curr-step=init] [next-step=read-index]
[2024/09/16 23:43:59.509 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{280 contacts utf8mb4 utf8mb4_bin [0x400e195600 0x400e195760 0x400e1958c0 0x400e195a20 0x400e195b80 0x400e195ce0 0x400e195e40 0x4011b086e0 0x4011b08840 0x4011b098c0 0x4011b09a20 0x4011b09b80 0x4011b09ce0] [0x402d6a94d0 0x402d6a97a0 0x402d6a99e0] [] [0x401d4e4fc0] public true false 0  0 0 0 0 13 3 1 0 452599542944890912 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=280] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:43:59.510 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=85] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:43:59.984 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=85] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:00.183 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:00.192 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=964] [neededSchemaVersion=965] ["elapsed time"=796.584s] [gotSchemaVersion=965] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:00.194 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=965]
[2024/09/16 23:44:00.195 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=965] ["take time"=4.546208ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.199 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599542957998089, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.200 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=324] [table=contacts] [index=contacts_contactImportId_contactImports_id_fk]
[2024/09/16 23:44:00.207 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=965] [neededSchemaVersion=966] ["elapsed time"=684.5s] [gotSchemaVersion=966] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:00.209 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=966]
[2024/09/16 23:44:00.209 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=966] ["take time"=3.932416ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.212 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.213 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=324] [physicalTableID=280] [startKey=7480000000000001185f69ffff000000000003] [endKey=7480000000000001185f69ffff000000000003ff]
[2024/09/16 23:44:00.218 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=324]
[2024/09/16 23:44:00.219 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543285678093, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.221 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:5, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543285678093, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000001185f69ffff000000000003,EndKey:7480000000000001185f69ffff000000000003ff,First:false,PhysicalTableID:280,Ingest mode:false"]
[2024/09/16 23:44:00.222 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=280] ["start key"=7480000000000001185f69ffff000000000003] ["end key"=7480000000000001185f69ffff000000000003ff]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=280] ["range start"=7480000000000001185f69ffff000000000003] ["range end"=7480000000000001185f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001185f69ffff000000000003] [endKey=7480000000000001185f69ffff000000000003ff]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=324]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=324]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=324]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 280, range: [7480000000000001185f69ffff000000000003, 7480000000000001185f69ffff000000000003ff), jobID: 324"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001185f69ffff000000000003ff00] ["take time"=463.708s]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=324]
[2024/09/16 23:44:00.223 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001185f69ffff000000000003]
[2024/09/16 23:44:00.223 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:00.230 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=966] [neededSchemaVersion=967] ["elapsed time"=667.208s] [gotSchemaVersion=967] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:00.232 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=967]
[2024/09/16 23:44:00.232 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=967] ["take time"=3.661042ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.235 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.242 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=967] [neededSchemaVersion=968] ["elapsed time"=648.667s] [gotSchemaVersion=968] [phyTblIDs="[280]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:00.243 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=968]
[2024/09/16 23:44:00.244 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=968] ["take time"=3.655666ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.247 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.255 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=968] [neededSchemaVersion=969] ["elapsed time"=735.666s] [gotSchemaVersion=969] [phyTblIDs="[280]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:00.257 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=969]
[2024/09/16 23:44:00.257 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=969] ["take time"=3.738ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.260 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.268 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=969] [neededSchemaVersion=970] ["elapsed time"=738.833s] [gotSchemaVersion=970] [phyTblIDs="[280]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:00.270 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=970]
[2024/09/16 23:44:00.271 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=970] ["take time"=4.309833ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.274 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [category=ddl] [job="ID:324, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543285678093, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:00.276 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:00.282 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=970] [neededSchemaVersion=971] ["elapsed time"=664.125s] [gotSchemaVersion=971] [phyTblIDs="[280]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:00.284 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=324] [version=971]
[2024/09/16 23:44:00.284 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=971] ["take time"=4.144083ms] [job="ID:324, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.290 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=324]
[2024/09/16 23:44:00.292 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=324] [tableID=280] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:00.294 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=324] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:00.294 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=324] [conn=952108744] [job="ID:324, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:280, RowCount:0, ArgLen:0, start time: 2024-09-16 23:43:58.895 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.301 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=324]
[2024/09/16 23:44:00.302 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=971] [cur_db=test] [sql="ALTER TABLE `emails` ADD CONSTRAINT `emails_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:00.302 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:00.302 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:00.306 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:325, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:00.306 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:325, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `emails` ADD CONSTRAINT `emails_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:44:00.307 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.308 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"emails_audienceId_audiences_id_fk\",\"L\":\"emails_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:00.314 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=971] [neededSchemaVersion=972] ["elapsed time"=594.417s] [gotSchemaVersion=972] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:00.316 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=972]
[2024/09/16 23:44:00.316 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=972] ["take time"=3.738417ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.319 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.326 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=972] [neededSchemaVersion=973] ["elapsed time"=521.041s] [gotSchemaVersion=973] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:00.327 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=973]
[2024/09/16 23:44:00.328 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=973] ["take time"=3.39ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.331 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.337 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=973] [neededSchemaVersion=974] ["elapsed time"=536.542s] [gotSchemaVersion=974] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:00.339 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=974]
[2024/09/16 23:44:00.339 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=974] ["take time"=3.331916ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:00.342 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.342 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=325] [table=emails] ["ingest mode"=true] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 23:44:00.343 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{284 emails utf8mb4 utf8mb4_bin [0x4025d2bce0 0x4025d2be40 0x400da4c6e0 0x400da4c840 0x400da4c9a0] [0x4021611830] [] [] public true false 0  0 0 0 0 5 1 0 0 452599543311892513 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=284] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:00.343 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=325] [physicalTableID=284] [startKey=] [endKey=]
[2024/09/16 23:44:00.347 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=325]
[2024/09/16 23:44:00.348 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543311892523, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:00.349 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=325] [table=emails] ["ingest mode"=true] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 23:44:00.353 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/325/0]
[2024/09/16 23:44:00.354 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=284] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:00.362 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=86]
[2024/09/16 23:44:00.362 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=86] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:00.481 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=85]
[2024/09/16 23:44:00.483 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:00.483 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=85]
[2024/09/16 23:44:00.489 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:00.867 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=86] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:00.867 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=86] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:00.869 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=86] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:00.870 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{284 emails utf8mb4 utf8mb4_bin [0x400c24af20 0x400c24b080 0x400c24b1e0 0x400c24b340 0x400c24b4a0] [0x400a7666c0] [] [] public true false 0  0 0 0 0 5 1 0 0 452599543311892513 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=284] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:00.871 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=86] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:01.368 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=86] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:01.565 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:01.574 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=974] [neededSchemaVersion=975] ["elapsed time"=663.709s] [gotSchemaVersion=975] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:01.576 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=975]
[2024/09/16 23:44:01.588 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=975] ["take time"=15.691375ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.603 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543311892523, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.604 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=325] [table=emails] [index=emails_audienceId_audiences_id_fk]
[2024/09/16 23:44:01.610 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=975] [neededSchemaVersion=976] ["elapsed time"=539s] [gotSchemaVersion=976] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:01.613 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=976]
[2024/09/16 23:44:01.614 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=976] ["take time"=4.326292ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.617 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.618 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=325] [physicalTableID=284] [startKey=74800000000000011c5f69ffff000000000001] [endKey=74800000000000011c5f69ffff000000000001ff]
[2024/09/16 23:44:01.625 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=325]
[2024/09/16 23:44:01.626 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543653203980, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.628 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543653203980, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000011c5f69ffff000000000001,EndKey:74800000000000011c5f69ffff000000000001ff,First:false,PhysicalTableID:284,Ingest mode:false"]
[2024/09/16 23:44:01.630 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=284] ["start key"=74800000000000011c5f69ffff000000000001] ["end key"=74800000000000011c5f69ffff000000000001ff]
[2024/09/16 23:44:01.630 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=284] ["range start"=74800000000000011c5f69ffff000000000001] ["range end"=74800000000000011c5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:44:01.630 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000011c5f69ffff000000000001] [endKey=74800000000000011c5f69ffff000000000001ff]
[2024/09/16 23:44:01.630 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=325]
[2024/09/16 23:44:01.630 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=325]
[2024/09/16 23:44:01.630 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=325]
[2024/09/16 23:44:01.631 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [task="taskID: 1, physicalTableID: 284, range: [74800000000000011c5f69ffff000000000001, 74800000000000011c5f69ffff000000000001ff), jobID: 325"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000011c5f69ffff000000000001ff00] ["take time"=339.959s]
[2024/09/16 23:44:01.631 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=325]
[2024/09/16 23:44:01.631 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000011c5f69ffff000000000001]
[2024/09/16 23:44:01.631 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:01.637 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=976] [neededSchemaVersion=977] ["elapsed time"=532.166s] [gotSchemaVersion=977] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:01.639 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=977]
[2024/09/16 23:44:01.640 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=977] ["take time"=3.538541ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.642 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.648 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=977] [neededSchemaVersion=978] ["elapsed time"=474.458s] [gotSchemaVersion=978] [phyTblIDs="[284]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:01.650 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=978]
[2024/09/16 23:44:01.651 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=978] ["take time"=3.423542ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.653 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.661 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=978] [neededSchemaVersion=979] ["elapsed time"=550.459s] [gotSchemaVersion=979] [phyTblIDs="[284]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:01.662 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=979]
[2024/09/16 23:44:01.663 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=979] ["take time"=3.62775ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.666 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.673 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=979] [neededSchemaVersion=980] ["elapsed time"=525.583s] [gotSchemaVersion=980] [phyTblIDs="[284]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:01.675 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=980]
[2024/09/16 23:44:01.675 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=980] ["take time"=3.44875ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.678 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [category=ddl] [job="ID:325, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543653203980, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:01.681 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:01.687 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=980] [neededSchemaVersion=981] ["elapsed time"=592s] [gotSchemaVersion=981] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:01.689 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=325] [version=981]
[2024/09/16 23:44:01.689 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=981] ["take time"=4.270458ms] [job="ID:325, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.695 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=325]
[2024/09/16 23:44:01.696 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=325] [tableID=284] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:01.698 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=325] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:01.699 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=325] [conn=952108744] [job="ID:325, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:00.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.705 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=325]
[2024/09/16 23:44:01.706 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=981] [cur_db=test] [sql="ALTER TABLE `emails` ADD CONSTRAINT `emails_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:01.707 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:01.707 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=emails] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:01.710 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:326, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:01.710 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:326, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `emails` ADD CONSTRAINT `emails_emailContentId_emailContents_id_fk` FOREIGN KEY (`emailContentId`) REFERENCES `emailContents`(`id`) ON DELETE cascade ON UPDATE no action;"]
[2024/09/16 23:44:01.711 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.712 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"emails_emailContentId_emailContents_id_fk\",\"L\":\"emails_emailcontentid_emailcontents_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"emailContentId\",\"L\":\"emailcontentid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:01.719 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=981] [neededSchemaVersion=982] ["elapsed time"=588.959s] [gotSchemaVersion=982] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:01.720 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=982]
[2024/09/16 23:44:01.721 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=982] ["take time"=3.795375ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.723 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.731 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=982] [neededSchemaVersion=983] ["elapsed time"=656.583s] [gotSchemaVersion=983] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:01.733 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=983]
[2024/09/16 23:44:01.734 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=983] ["take time"=4.460792ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.738 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.746 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=983] [neededSchemaVersion=984] ["elapsed time"=882.5s] [gotSchemaVersion=984] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:01.748 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=984]
[2024/09/16 23:44:01.749 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=984] ["take time"=5.046375ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:01.753 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.753 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=326] [table=emails] ["ingest mode"=true] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 23:44:01.754 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{284 emails utf8mb4 utf8mb4_bin [0x4015a5e580 0x4015a5e6e0 0x4015a5e840 0x4015a5e9a0 0x4015a5eb00] [0x402bfee2d0 0x402bfee510] [] [0x4034f215c0] public true false 0  0 0 0 0 5 2 1 0 452599543678894117 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=284] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:01.754 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=326] [physicalTableID=284] [startKey=] [endKey=]
[2024/09/16 23:44:01.761 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=326]
[2024/09/16 23:44:01.762 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543692001286, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:01.763 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=326] [table=emails] ["ingest mode"=true] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 23:44:01.768 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/326/0]
[2024/09/16 23:44:01.769 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=284] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:01.780 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=87]
[2024/09/16 23:44:01.781 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=87] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:01.864 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=86]
[2024/09/16 23:44:01.867 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:01.867 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=86]
[2024/09/16 23:44:01.875 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:02.282 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=87] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:02.282 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=87] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:02.284 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=87] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:02.285 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{284 emails utf8mb4 utf8mb4_bin [0x40136a42c0 0x40136a4420 0x40136a4580 0x40136a46e0 0x40136a4840] [0x401a0af7a0 0x401a0af9e0] [] [0x401c8aa480] public true false 0  0 0 0 0 5 2 1 0 452599543678894117 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=284] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:02.285 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=87] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:02.788 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=87] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:02.986 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:02.995 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=984] [neededSchemaVersion=985] ["elapsed time"=793.667s] [gotSchemaVersion=985] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:02.998 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=985]
[2024/09/16 23:44:02.999 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=985] ["take time"=6.174667ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.002 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599543692001286, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.003 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=326] [table=emails] [index=emails_emailContentId_emailContents_id_fk]
[2024/09/16 23:44:03.010 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=985] [neededSchemaVersion=986] ["elapsed time"=572.125s] [gotSchemaVersion=986] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:03.011 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=986]
[2024/09/16 23:44:03.012 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=986] ["take time"=4.27025ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.016 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.017 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=326] [physicalTableID=284] [startKey=74800000000000011c5f69ffff000000000002] [endKey=74800000000000011c5f69ffff000000000002ff]
[2024/09/16 23:44:03.025 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=326]
[2024/09/16 23:44:03.027 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544019681296, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.029 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544019681296, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:74800000000000011c5f69ffff000000000002,EndKey:74800000000000011c5f69ffff000000000002ff,First:false,PhysicalTableID:284,Ingest mode:false"]
[2024/09/16 23:44:03.031 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=284] ["start key"=74800000000000011c5f69ffff000000000002] ["end key"=74800000000000011c5f69ffff000000000002ff]
[2024/09/16 23:44:03.031 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=284] ["range start"=74800000000000011c5f69ffff000000000002] ["range end"=74800000000000011c5f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:44:03.031 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000011c5f69ffff000000000002] [endKey=74800000000000011c5f69ffff000000000002ff]
[2024/09/16 23:44:03.031 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=326]
[2024/09/16 23:44:03.031 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=326]
[2024/09/16 23:44:03.031 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=326]
[2024/09/16 23:44:03.032 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 284, range: [74800000000000011c5f69ffff000000000002, 74800000000000011c5f69ffff000000000002ff), jobID: 326"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000011c5f69ffff000000000002ff00] ["take time"=437.875s]
[2024/09/16 23:44:03.032 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=326]
[2024/09/16 23:44:03.032 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000011c5f69ffff000000000002]
[2024/09/16 23:44:03.032 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:03.040 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=986] [neededSchemaVersion=987] ["elapsed time"=684.792s] [gotSchemaVersion=987] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:03.042 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=987]
[2024/09/16 23:44:03.043 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=987] ["take time"=4.412ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.046 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.107 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=987] [neededSchemaVersion=988] ["elapsed time"=28.189958ms] [gotSchemaVersion=988] [phyTblIDs="[284]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:03.147 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=988]
[2024/09/16 23:44:03.151 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=988] ["take time"=89.171292ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.165 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.178 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=988] [neededSchemaVersion=989] ["elapsed time"=603.625s] [gotSchemaVersion=989] [phyTblIDs="[284]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:03.180 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=989]
[2024/09/16 23:44:03.180 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=989] ["take time"=3.805458ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.183 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.191 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=989] [neededSchemaVersion=990] ["elapsed time"=536.125s] [gotSchemaVersion=990] [phyTblIDs="[284]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:03.193 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=990]
[2024/09/16 23:44:03.194 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=990] ["take time"=4.050042ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.197 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [category=ddl] [job="ID:326, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544019681296, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:03.199 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:03.205 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=990] [neededSchemaVersion=991] ["elapsed time"=695.875s] [gotSchemaVersion=991] [phyTblIDs="[284]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:03.206 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=326] [version=991]
[2024/09/16 23:44:03.207 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=991] ["take time"=4.441292ms] [job="ID:326, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.213 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=326]
[2024/09/16 23:44:03.214 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=326] [tableID=284] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:03.217 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=326] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:03.217 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=326] [conn=952108744] [job="ID:326, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:284, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:01.695 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.225 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=326]
[2024/09/16 23:44:03.226 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=991] [cur_db=test] [sql="ALTER TABLE `segments` ADD CONSTRAINT `segments_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:03.227 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=segments] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:03.227 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=segments] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:03.231 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:327, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:03.231 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:327, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `segments` ADD CONSTRAINT `segments_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:03.232 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.233 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"segments_audienceId_audiences_id_fk\",\"L\":\"segments_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:03.240 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=991] [neededSchemaVersion=992] ["elapsed time"=613.042s] [gotSchemaVersion=992] [phyTblIDs="[286]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:03.242 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=992]
[2024/09/16 23:44:03.243 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=992] ["take time"=3.963875ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.246 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.253 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=992] [neededSchemaVersion=993] ["elapsed time"=474.375s] [gotSchemaVersion=993] [phyTblIDs="[286]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:03.254 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=993]
[2024/09/16 23:44:03.255 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=993] ["take time"=3.419042ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.257 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.264 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=993] [neededSchemaVersion=994] ["elapsed time"=472.5s] [gotSchemaVersion=994] [phyTblIDs="[286]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:03.265 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=994]
[2024/09/16 23:44:03.266 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=994] ["take time"=3.70825ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:03.269 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.269 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=327] [table=segments] ["ingest mode"=true] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 23:44:03.270 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{286 segments utf8mb4 utf8mb4_bin [0x40137a69a0 0x40137a6b00 0x400c655760 0x400c6558c0] [0x4010b07560] [] [] public true false 0  0 0 0 0 4 1 0 0 452599544085217290 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=286] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:03.270 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=327] [physicalTableID=286] [startKey=] [endKey=]
[2024/09/16 23:44:03.274 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=327]
[2024/09/16 23:44:03.275 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544085217300, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:03.276 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=327] [table=segments] ["ingest mode"=true] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 23:44:03.279 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/327/0]
[2024/09/16 23:44:03.282 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=87]
[2024/09/16 23:44:03.283 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=286] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:03.284 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:03.284 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=87]
[2024/09/16 23:44:03.290 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:03.294 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=88]
[2024/09/16 23:44:03.294 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=88] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:03.796 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=88] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:03.797 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=88] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:03.799 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=88] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:03.801 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{286 segments utf8mb4 utf8mb4_bin [0x4007b45600 0x400c9d4000 0x400c9d4160 0x400c9d4f20] [0x4011eb4360] [] [] public true false 0  0 0 0 0 4 1 0 0 452599544085217290 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=286] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:03.801 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=88] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:04.299 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=88] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:04.495 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:04.519 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=994] [neededSchemaVersion=995] ["elapsed time"=660.416s] [gotSchemaVersion=995] [phyTblIDs="[286]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:04.521 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=995]
[2024/09/16 23:44:04.522 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=995] ["take time"=4.6535ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.526 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544085217300, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.526 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=327] [table=segments] [index=segments_audienceId_audiences_id_fk]
[2024/09/16 23:44:04.536 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=995] [neededSchemaVersion=996] ["elapsed time"=626.584s] [gotSchemaVersion=996] [phyTblIDs="[286]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:04.538 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=996]
[2024/09/16 23:44:04.538 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=996] ["take time"=4.2765ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.542 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.542 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=327] [physicalTableID=286] [startKey=74800000000000011e5f69ffff000000000001] [endKey=74800000000000011e5f69ffff000000000001ff]
[2024/09/16 23:44:04.548 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=327]
[2024/09/16 23:44:04.549 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544412897300, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.551 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544412897300, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000011e5f69ffff000000000001,EndKey:74800000000000011e5f69ffff000000000001ff,First:false,PhysicalTableID:286,Ingest mode:false"]
[2024/09/16 23:44:04.552 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=286] ["start key"=74800000000000011e5f69ffff000000000001] ["end key"=74800000000000011e5f69ffff000000000001ff]
[2024/09/16 23:44:04.553 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=286] ["range start"=74800000000000011e5f69ffff000000000001] ["range end"=74800000000000011e5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:44:04.553 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000011e5f69ffff000000000001] [endKey=74800000000000011e5f69ffff000000000001ff]
[2024/09/16 23:44:04.553 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=327]
[2024/09/16 23:44:04.553 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=327]
[2024/09/16 23:44:04.553 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=327]
[2024/09/16 23:44:04.554 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 286, range: [74800000000000011e5f69ffff000000000001, 74800000000000011e5f69ffff000000000001ff), jobID: 327"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000011e5f69ffff000000000001ff00] ["take time"=542s]
[2024/09/16 23:44:04.554 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=327]
[2024/09/16 23:44:04.554 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000011e5f69ffff000000000001]
[2024/09/16 23:44:04.554 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:04.561 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=996] [neededSchemaVersion=997] ["elapsed time"=519.292s] [gotSchemaVersion=997] [phyTblIDs="[286]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:04.562 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=997]
[2024/09/16 23:44:04.563 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=997] ["take time"=3.780125ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.565 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.572 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=997] [neededSchemaVersion=998] ["elapsed time"=527.5s] [gotSchemaVersion=998] [phyTblIDs="[286]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:04.574 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=998]
[2024/09/16 23:44:04.575 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=998] ["take time"=3.72175ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.577 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.586 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=998] [neededSchemaVersion=999] ["elapsed time"=505.25s] [gotSchemaVersion=999] [phyTblIDs="[286]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:04.588 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=999]
[2024/09/16 23:44:04.588 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=999] ["take time"=4.158167ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.591 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.597 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=999] [neededSchemaVersion=1000] ["elapsed time"=450.375s] [gotSchemaVersion=1000] [phyTblIDs="[286]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:04.599 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=1000]
[2024/09/16 23:44:04.599 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1000] ["take time"=3.1775ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.602 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [category=ddl] [job="ID:327, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544412897300, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:04.604 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:04.610 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1000] [neededSchemaVersion=1001] ["elapsed time"=561.542s] [gotSchemaVersion=1001] [phyTblIDs="[286]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:04.612 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=327] [version=1001]
[2024/09/16 23:44:04.613 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1001] ["take time"=4.3ms] [job="ID:327, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.619 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=327]
[2024/09/16 23:44:04.620 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=327] [tableID=286] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:04.622 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=327] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:04.623 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=327] [conn=952108744] [job="ID:327, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:286, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:03.195 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.629 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=327]
[2024/09/16 23:44:04.630 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1001] [cur_db=test] [sql="ALTER TABLE `sendingDomains` ADD CONSTRAINT `sendingDomains_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:04.631 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=sendingdomains] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:04.631 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=sendingdomains] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:04.635 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:328, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:04.635 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:328, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `sendingDomains` ADD CONSTRAINT `sendingDomains_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:04.636 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.636 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"sendingDomains_teamId_teams_id_fk\",\"L\":\"sendingdomains_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:04.643 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1001] [neededSchemaVersion=1002] ["elapsed time"=848.708s] [gotSchemaVersion=1002] [phyTblIDs="[288]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:04.645 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1002]
[2024/09/16 23:44:04.646 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1002] ["take time"=4.847625ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.649 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.656 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1002] [neededSchemaVersion=1003] ["elapsed time"=588.375s] [gotSchemaVersion=1003] [phyTblIDs="[288]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:04.657 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1003]
[2024/09/16 23:44:04.658 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1003] ["take time"=3.731833ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.660 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.667 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1003] [neededSchemaVersion=1004] ["elapsed time"=464.584s] [gotSchemaVersion=1004] [phyTblIDs="[288]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:04.668 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1004]
[2024/09/16 23:44:04.668 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1004] ["take time"=3.140709ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:04.671 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.671 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=328] [table=sendingDomains] ["ingest mode"=true] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 23:44:04.672 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{288 sendingDomains utf8mb4 utf8mb4_bin [0x400a050dc0 0x4013a0a000 0x4013a0a2c0 0x4013a0a420 0x4013a0a580 0x4013a0a6e0 0x4013a0a840 0x4013a0a9a0 0x4013a0ab00 0x4013a0ac60] [0x4028b85200] [] [] public true false 0  0 0 0 0 10 1 0 0 452599544452218892 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=288] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:04.672 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=328] [physicalTableID=288] [startKey=] [endKey=]
[2024/09/16 23:44:04.676 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=328]
[2024/09/16 23:44:04.677 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544452218902, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:04.678 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=328] [table=sendingDomains] ["ingest mode"=true] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 23:44:04.681 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/328/0]
[2024/09/16 23:44:04.682 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=288] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:04.690 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=89]
[2024/09/16 23:44:04.690 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=89] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:04.795 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=88]
[2024/09/16 23:44:04.797 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:04.797 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=88]
[2024/09/16 23:44:04.803 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:05.193 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=89] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:05.193 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=89] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:05.194 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=89] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:05.195 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{288 sendingDomains utf8mb4 utf8mb4_bin [0x400ef9ac60 0x400ef9adc0 0x400ef9af20 0x400ef9b080 0x400ef9b1e0 0x400ef9b340 0x400ef9b4a0 0x400ef9b600 0x400ef9b760 0x400ef9b8c0] [0x4005d083f0] [] [] public true false 0  0 0 0 0 10 1 0 0 452599544452218892 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=288] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:05.195 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=89] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:05.696 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=89] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:05.896 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:05.904 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1004] [neededSchemaVersion=1005] ["elapsed time"=728.916s] [gotSchemaVersion=1005] [phyTblIDs="[288]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:05.906 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1005]
[2024/09/16 23:44:05.906 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1005] ["take time"=4.274958ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:05.909 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544452218902, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:05.910 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=328] [table=sendingDomains] [index=sendingDomains_teamId_teams_id_fk]
[2024/09/16 23:44:05.916 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1005] [neededSchemaVersion=1006] ["elapsed time"=545.625s] [gotSchemaVersion=1006] [phyTblIDs="[288]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:05.918 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1006]
[2024/09/16 23:44:05.918 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1006] ["take time"=3.727083ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:05.921 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:05.922 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=328] [physicalTableID=288] [startKey=7480000000000001205f69ffff000000000001] [endKey=7480000000000001205f69ffff000000000001ff]
[2024/09/16 23:44:05.926 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=328]
[2024/09/16 23:44:05.928 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544779898899, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:05.929 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544779898899, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000001205f69ffff000000000001,EndKey:7480000000000001205f69ffff000000000001ff,First:false,PhysicalTableID:288,Ingest mode:false"]
[2024/09/16 23:44:05.930 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=288] ["start key"=7480000000000001205f69ffff000000000001] ["end key"=7480000000000001205f69ffff000000000001ff]
[2024/09/16 23:44:05.931 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=288] ["range start"=7480000000000001205f69ffff000000000001] ["range end"=7480000000000001205f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:44:05.931 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001205f69ffff000000000001] [endKey=7480000000000001205f69ffff000000000001ff]
[2024/09/16 23:44:05.931 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=328]
[2024/09/16 23:44:05.931 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=328]
[2024/09/16 23:44:05.931 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=328]
[2024/09/16 23:44:05.932 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 288, range: [7480000000000001205f69ffff000000000001, 7480000000000001205f69ffff000000000001ff), jobID: 328"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001205f69ffff000000000001ff00] ["take time"=488.208s]
[2024/09/16 23:44:05.932 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=328]
[2024/09/16 23:44:05.932 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001205f69ffff000000000001]
[2024/09/16 23:44:05.932 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:05.940 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1006] [neededSchemaVersion=1007] ["elapsed time"=647.833s] [gotSchemaVersion=1007] [phyTblIDs="[288]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:05.942 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1007]
[2024/09/16 23:44:05.943 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1007] ["take time"=4.454167ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:05.946 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:05.956 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1007] [neededSchemaVersion=1008] ["elapsed time"=1.586583ms] [gotSchemaVersion=1008] [phyTblIDs="[288]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:05.959 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1008]
[2024/09/16 23:44:05.959 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1008] ["take time"=5.6595ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:05.962 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:05.972 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1008] [neededSchemaVersion=1009] ["elapsed time"=556.25s] [gotSchemaVersion=1009] [phyTblIDs="[288]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:05.974 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1009]
[2024/09/16 23:44:05.974 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1009] ["take time"=4.245875ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:05.977 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:05.987 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1009] [neededSchemaVersion=1010] ["elapsed time"=614s] [gotSchemaVersion=1010] [phyTblIDs="[288]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:05.989 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1010]
[2024/09/16 23:44:05.989 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1010] ["take time"=4.188ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:05.993 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [category=ddl] [job="ID:328, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544779898899, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:05.995 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:06.001 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1010] [neededSchemaVersion=1011] ["elapsed time"=743.666s] [gotSchemaVersion=1011] [phyTblIDs="[288]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:06.003 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=328] [version=1011]
[2024/09/16 23:44:06.004 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1011] ["take time"=4.420584ms] [job="ID:328, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:06.010 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=328]
[2024/09/16 23:44:06.012 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=328] [tableID=288] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:06.014 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=328] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:06.015 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=328] [conn=952108744] [job="ID:328, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:288, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:04.595 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:06.022 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=328]
[2024/09/16 23:44:06.023 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1011] [cur_db=test] [sql="ALTER TABLE `tags` ADD CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:06.023 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tags] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:06.023 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tags] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:06.027 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:329, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:06.027 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:329, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `tags` ADD CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:06.029 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:06.029 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"tags_audienceId_audiences_id_fk\",\"L\":\"tags_audienceid_audiences_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"audienceId\",\"L\":\"audienceid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:06.035 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1011] [neededSchemaVersion=1012] ["elapsed time"=549.125s] [gotSchemaVersion=1012] [phyTblIDs="[292]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:06.037 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1012]
[2024/09/16 23:44:06.038 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1012] ["take time"=3.698958ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:06.041 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:06.047 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1012] [neededSchemaVersion=1013] ["elapsed time"=531.292s] [gotSchemaVersion=1013] [phyTblIDs="[292]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:06.049 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1013]
[2024/09/16 23:44:06.050 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1013] ["take time"=3.460166ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:06.052 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:06.058 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1013] [neededSchemaVersion=1014] ["elapsed time"=534s] [gotSchemaVersion=1014] [phyTblIDs="[292]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:06.060 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1014]
[2024/09/16 23:44:06.061 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1014] ["take time"=3.545375ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:06.063 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:06.064 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=329] [table=tags] ["ingest mode"=true] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 23:44:06.064 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{292 tags utf8mb4 utf8mb4_bin [0x400bc774a0 0x400bc77600 0x400bc77760 0x400bc778c0] [0x40160afdd0 0x401dfbe120] [] [] public true false 0  0 0 0 0 4 2 0 0 452599544819220486 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=292] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:06.065 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=329] [physicalTableID=292] [startKey=] [endKey=]
[2024/09/16 23:44:06.069 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=329]
[2024/09/16 23:44:06.070 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544819220496, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:06.071 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=329] [table=tags] ["ingest mode"=true] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 23:44:06.074 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/329/0]
[2024/09/16 23:44:06.076 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=292] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:06.084 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=90]
[2024/09/16 23:44:06.084 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=90] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:06.193 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=89]
[2024/09/16 23:44:06.195 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:06.195 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=89]
[2024/09/16 23:44:06.202 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:06.592 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=90] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:06.592 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=90] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:06.594 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=90] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:06.595 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{292 tags utf8mb4 utf8mb4_bin [0x4005ecd340 0x4005ecd4a0 0x4005ecd600 0x4005ecd760] [0x4022770870 0x4022770b40] [] [] public true false 0  0 0 0 0 4 2 0 0 452599544819220486 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=292] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:06.596 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=90] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:07.087 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=90] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:07.291 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:07.301 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1014] [neededSchemaVersion=1015] ["elapsed time"=493.708s] [gotSchemaVersion=1015] [phyTblIDs="[292]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:07.302 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1015]
[2024/09/16 23:44:07.303 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1015] ["take time"=3.706875ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.306 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599544819220496, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.307 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=329] [table=tags] [index=tags_audienceId_audiences_id_fk]
[2024/09/16 23:44:07.313 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1015] [neededSchemaVersion=1016] ["elapsed time"=423.625s] [gotSchemaVersion=1016] [phyTblIDs="[292]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:07.314 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1016]
[2024/09/16 23:44:07.315 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1016] ["take time"=3.646709ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.318 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.319 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=329] [physicalTableID=292] [startKey=7480000000000001245f69ffff000000000002] [endKey=7480000000000001245f69ffff000000000002ff]
[2024/09/16 23:44:07.323 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=329]
[2024/09/16 23:44:07.324 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545146900497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.326 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545146900497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001245f69ffff000000000002,EndKey:7480000000000001245f69ffff000000000002ff,First:false,PhysicalTableID:292,Ingest mode:false"]
[2024/09/16 23:44:07.327 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=292] ["start key"=7480000000000001245f69ffff000000000002] ["end key"=7480000000000001245f69ffff000000000002ff]
[2024/09/16 23:44:07.327 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=292] ["range start"=7480000000000001245f69ffff000000000002] ["range end"=7480000000000001245f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:44:07.328 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001245f69ffff000000000002] [endKey=7480000000000001245f69ffff000000000002ff]
[2024/09/16 23:44:07.328 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=329]
[2024/09/16 23:44:07.328 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=329]
[2024/09/16 23:44:07.328 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=329]
[2024/09/16 23:44:07.328 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 292, range: [7480000000000001245f69ffff000000000002, 7480000000000001245f69ffff000000000002ff), jobID: 329"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001245f69ffff000000000002ff00] ["take time"=409.333s]
[2024/09/16 23:44:07.328 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=329]
[2024/09/16 23:44:07.328 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001245f69ffff000000000002]
[2024/09/16 23:44:07.328 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:07.334 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1016] [neededSchemaVersion=1017] ["elapsed time"=502.667s] [gotSchemaVersion=1017] [phyTblIDs="[292]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:07.335 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1017]
[2024/09/16 23:44:07.336 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1017] ["take time"=3.303708ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.338 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.344 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1017] [neededSchemaVersion=1018] ["elapsed time"=570s] [gotSchemaVersion=1018] [phyTblIDs="[292]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:07.346 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1018]
[2024/09/16 23:44:07.347 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1018] ["take time"=3.470334ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.349 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.356 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1018] [neededSchemaVersion=1019] ["elapsed time"=535.75s] [gotSchemaVersion=1019] [phyTblIDs="[292]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:07.358 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1019]
[2024/09/16 23:44:07.358 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1019] ["take time"=3.2275ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.361 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.367 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1019] [neededSchemaVersion=1020] ["elapsed time"=497.166s] [gotSchemaVersion=1020] [phyTblIDs="[292]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:07.369 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1020]
[2024/09/16 23:44:07.369 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1020] ["take time"=3.210042ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.372 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [category=ddl] [job="ID:329, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545146900497, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:07.373 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:07.378 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1020] [neededSchemaVersion=1021] ["elapsed time"=469.625s] [gotSchemaVersion=1021] [phyTblIDs="[292]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:07.379 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=329] [version=1021]
[2024/09/16 23:44:07.380 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1021] ["take time"=3.324917ms] [job="ID:329, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.385 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=329]
[2024/09/16 23:44:07.386 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=329] [tableID=292] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:07.388 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=329] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:07.388 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=329] [conn=952108744] [job="ID:329, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:292, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:05.995 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.395 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=329]
[2024/09/16 23:44:07.396 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1021] [cur_db=test] [sql="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:07.399 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:330, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1; "] [table=true] [fast_create=false]
[2024/09/16 23:44:07.399 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:330, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"] [query="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_tagId_tags_id_fk` FOREIGN KEY (`tagId`) REFERENCES `tags`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:07.400 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=330] [conn=952108744] [category=ddl] [job="ID:330, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:44:07.406 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1021] [neededSchemaVersion=1022] ["elapsed time"=507.334s] [gotSchemaVersion=1022] [phyTblIDs="[294]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:07.408 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=330] [version=1022]
[2024/09/16 23:44:07.408 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1022] ["take time"=3.197625ms] [job="ID:330, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:44:07.411 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=330] [conn=952108744] [category=ddl] [job="ID:330, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:44:07.418 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1022] [neededSchemaVersion=1023] ["elapsed time"=522.083s] [gotSchemaVersion=1023] [phyTblIDs="[294]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:07.420 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=330] [version=1023]
[2024/09/16 23:44:07.420 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1023] ["take time"=3.409875ms] [job="ID:330, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:44:07.423 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=330] [conn=952108744] [category=ddl] [job="ID:330, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:44:07.429 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1023] [neededSchemaVersion=1024] ["elapsed time"=467.583s] [gotSchemaVersion=1024] [phyTblIDs="[294]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:07.430 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=330] [version=1024]
[2024/09/16 23:44:07.431 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1024] ["take time"=3.223375ms] [job="ID:330, Type:add foreign key, State:done, SchemaState:public, SchemaID:260, TableID:294, RowCount:0, ArgLen:2, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:44:07.434 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=330] [conn=952108744] [job="ID:330, Type:add foreign key, State:synced, SchemaState:public, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1"]
[2024/09/16 23:44:07.438 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=330]
[2024/09/16 23:44:07.439 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1024] [cur_db=test] [sql="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:07.439 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:07.439 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:07.444 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:331, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:07.444 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:331, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `tagsOnContacts` ADD CONSTRAINT `tagsOnContacts_contactId_contacts_id_fk` FOREIGN KEY (`contactId`) REFERENCES `contacts`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:07.445 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.446 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"tagsOnContacts_contactId_contacts_id_fk\",\"L\":\"tagsoncontacts_contactid_contacts_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:07.454 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1024] [neededSchemaVersion=1025] ["elapsed time"=544.125s] [gotSchemaVersion=1025] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:07.455 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1025]
[2024/09/16 23:44:07.456 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1025] ["take time"=3.690417ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.459 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.466 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1025] [neededSchemaVersion=1026] ["elapsed time"=531.625s] [gotSchemaVersion=1026] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:07.468 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1026]
[2024/09/16 23:44:07.468 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1026] ["take time"=3.556791ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.471 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.478 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1026] [neededSchemaVersion=1027] ["elapsed time"=604.916s] [gotSchemaVersion=1027] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:07.479 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1027]
[2024/09/16 23:44:07.480 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1027] ["take time"=3.549625ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:07.483 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.484 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=331] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 23:44:07.484 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{294 tagsOnContacts utf8mb4 utf8mb4_bin [0x40569f4000 0x40569f4160 0x40569f42c0 0x40569f4420] [0x40221d4870 0x40221d4d80] [] [0x402d508000] public true false 0  0 0 0 0 4 2 1 0 452599545186222102 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 6 260}"] ["table/partition ID"=294] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:07.484 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=331] [physicalTableID=294] [startKey=] [endKey=]
[2024/09/16 23:44:07.489 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=331]
[2024/09/16 23:44:07.491 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545186222115, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:07.491 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=331] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 23:44:07.495 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/331/0]
[2024/09/16 23:44:07.498 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=294] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:07.506 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=91]
[2024/09/16 23:44:07.506 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=91] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:07.585 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=90]
[2024/09/16 23:44:07.587 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:07.587 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=90]
[2024/09/16 23:44:07.592 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:08.007 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=91] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:08.007 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=91] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:08.009 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=91] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:08.010 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{294 tagsOnContacts utf8mb4 utf8mb4_bin [0x400cd11340 0x400cd114a0 0x400cd11600 0x400cd11760] [0x40132af320 0x40132af5f0] [] [0x4016a7a6c0] public true false 0  0 0 0 0 4 2 1 0 452599545186222102 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 6 260}"] ["table/partition ID"=294] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:08.010 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=91] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:08.512 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=91] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:08.714 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:08.724 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1027] [neededSchemaVersion=1028] ["elapsed time"=617.625s] [gotSchemaVersion=1028] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:08.725 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1028]
[2024/09/16 23:44:08.726 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1028] ["take time"=4.523208ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.729 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545186222115, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.730 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=331] [table=tagsOnContacts] [index=tagsOnContacts_contactId_contacts_id_fk]
[2024/09/16 23:44:08.736 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1028] [neededSchemaVersion=1029] ["elapsed time"=470.833s] [gotSchemaVersion=1029] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:08.738 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1029]
[2024/09/16 23:44:08.738 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1029] ["take time"=3.478375ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.741 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.741 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=331] [physicalTableID=294] [startKey=7480000000000001265f69ffff000000000002] [endKey=7480000000000001265f69ffff000000000002ff]
[2024/09/16 23:44:08.746 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=331]
[2024/09/16 23:44:08.747 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545513639960, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.748 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545513639960, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001265f69ffff000000000002,EndKey:7480000000000001265f69ffff000000000002ff,First:false,PhysicalTableID:294,Ingest mode:false"]
[2024/09/16 23:44:08.749 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=294] ["start key"=7480000000000001265f69ffff000000000002] ["end key"=7480000000000001265f69ffff000000000002ff]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=294] ["range start"=7480000000000001265f69ffff000000000002] ["range end"=7480000000000001265f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001265f69ffff000000000002] [endKey=7480000000000001265f69ffff000000000002ff]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=331]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=331]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=331]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 294, range: [7480000000000001265f69ffff000000000002, 7480000000000001265f69ffff000000000002ff), jobID: 331"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001265f69ffff000000000002ff00] ["take time"=404.709s]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=331]
[2024/09/16 23:44:08.750 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001265f69ffff000000000002]
[2024/09/16 23:44:08.750 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:08.757 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1029] [neededSchemaVersion=1030] ["elapsed time"=540.458s] [gotSchemaVersion=1030] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:08.758 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1030]
[2024/09/16 23:44:08.759 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1030] ["take time"=3.544041ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.761 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.768 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1030] [neededSchemaVersion=1031] ["elapsed time"=569.125s] [gotSchemaVersion=1031] [phyTblIDs="[294]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:08.769 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1031]
[2024/09/16 23:44:08.770 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1031] ["take time"=3.299084ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.772 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.780 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1031] [neededSchemaVersion=1032] ["elapsed time"=447.916s] [gotSchemaVersion=1032] [phyTblIDs="[294]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:08.781 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1032]
[2024/09/16 23:44:08.781 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1032] ["take time"=3.137958ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.784 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.790 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1032] [neededSchemaVersion=1033] ["elapsed time"=435.417s] [gotSchemaVersion=1033] [phyTblIDs="[294]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:08.792 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1033]
[2024/09/16 23:44:08.792 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1033] ["take time"=3.153375ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.795 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [category=ddl] [job="ID:331, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545513639960, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:08.797 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:08.801 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1033] [neededSchemaVersion=1034] ["elapsed time"=559.916s] [gotSchemaVersion=1034] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:08.802 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=331] [version=1034]
[2024/09/16 23:44:08.803 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1034] ["take time"=3.173833ms] [job="ID:331, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.807 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=331]
[2024/09/16 23:44:08.809 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=331] [tableID=294] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:08.811 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=331] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:08.811 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=331] [conn=952108744] [job="ID:331, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:07.395 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.816 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=331]
[2024/09/16 23:44:08.817 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1034] [cur_db=test] [sql="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:08.818 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:08.818 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:08.822 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:332, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:08.822 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:332, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:08.823 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.824 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"teamMemberships_userId_users_id_fk\",\"L\":\"teammemberships_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":1,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:08.830 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1034] [neededSchemaVersion=1035] ["elapsed time"=537.417s] [gotSchemaVersion=1035] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:08.831 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1035]
[2024/09/16 23:44:08.832 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1035] ["take time"=3.600416ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.834 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.840 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1035] [neededSchemaVersion=1036] ["elapsed time"=511.708s] [gotSchemaVersion=1036] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:08.842 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1036]
[2024/09/16 23:44:08.842 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1036] ["take time"=3.168334ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.845 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.851 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1036] [neededSchemaVersion=1037] ["elapsed time"=469.375s] [gotSchemaVersion=1037] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:08.852 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1037]
[2024/09/16 23:44:08.853 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1037] ["take time"=3.079ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:08.855 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.855 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=332] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 23:44:08.856 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{296 teamMemberships utf8mb4 utf8mb4_bin [0x400d4082c0 0x400d408420 0x400d4086e0 0x400d408840 0x400d4089a0 0x400d408b00 0x400d408c60 0x400d408dc0] [0x40227ecfc0] [] [] public true false 0  0 0 0 0 8 1 0 0 452599545540116527 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=296] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:08.856 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=332] [physicalTableID=296] [startKey=] [endKey=]
[2024/09/16 23:44:08.860 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=332]
[2024/09/16 23:44:08.861 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545553223690, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:08.861 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=332] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 23:44:08.865 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/332/0]
[2024/09/16 23:44:08.866 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=296] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:08.873 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=92]
[2024/09/16 23:44:08.874 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=92] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:09.007 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=91]
[2024/09/16 23:44:09.010 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:09.011 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=91]
[2024/09/16 23:44:09.016 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:09.378 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=92] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:09.378 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=92] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:09.380 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=92] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:09.381 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{296 teamMemberships utf8mb4 utf8mb4_bin [0x400e390c60 0x400e390dc0 0x400e390f20 0x400e391080 0x400e3911e0 0x400e391340 0x400e3914a0 0x400e391600] [0x4017bf2f30] [] [] public true false 0  0 0 0 0 8 1 0 0 452599545540116527 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=296] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:09.381 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=92] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:09.879 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=92] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:10.085 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:10.094 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1037] [neededSchemaVersion=1038] ["elapsed time"=735.916s] [gotSchemaVersion=1038] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:10.096 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1038]
[2024/09/16 23:44:10.097 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1038] ["take time"=4.751208ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.101 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545553223690, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.102 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=332] [table=teamMemberships] [index=teamMemberships_userId_users_id_fk]
[2024/09/16 23:44:10.109 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1038] [neededSchemaVersion=1039] ["elapsed time"=734.958s] [gotSchemaVersion=1039] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:10.111 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1039]
[2024/09/16 23:44:10.112 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1039] ["take time"=4.934667ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.117 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.118 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=332] [physicalTableID=296] [startKey=7480000000000001285f69ffff000000000001] [endKey=7480000000000001285f69ffff000000000001ff]
[2024/09/16 23:44:10.126 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=332]
[2024/09/16 23:44:10.128 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545880903695, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.131 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545880903695, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:7480000000000001285f69ffff000000000001,EndKey:7480000000000001285f69ffff000000000001ff,First:false,PhysicalTableID:296,Ingest mode:false"]
[2024/09/16 23:44:10.133 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=296] ["start key"=7480000000000001285f69ffff000000000001] ["end key"=7480000000000001285f69ffff000000000001ff]
[2024/09/16 23:44:10.134 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=296] ["range start"=7480000000000001285f69ffff000000000001] ["range end"=7480000000000001285f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:44:10.134 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001285f69ffff000000000001] [endKey=7480000000000001285f69ffff000000000001ff]
[2024/09/16 23:44:10.134 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=332]
[2024/09/16 23:44:10.134 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=332]
[2024/09/16 23:44:10.134 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=332]
[2024/09/16 23:44:10.134 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 296, range: [7480000000000001285f69ffff000000000001, 7480000000000001285f69ffff000000000001ff), jobID: 332"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001285f69ffff000000000001ff00] ["take time"=496.166s]
[2024/09/16 23:44:10.134 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=332]
[2024/09/16 23:44:10.135 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001285f69ffff000000000001]
[2024/09/16 23:44:10.135 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:10.143 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1039] [neededSchemaVersion=1040] ["elapsed time"=744.833s] [gotSchemaVersion=1040] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:10.146 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1040]
[2024/09/16 23:44:10.147 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1040] ["take time"=5.14575ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.152 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.232 +00:00] [WARN] [pd.go:168] ["get timestamp too slow"] ["cost time"=37.092125ms]
[2024/09/16 23:44:10.253 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1040] [neededSchemaVersion=1041] ["elapsed time"=922.041s] [gotSchemaVersion=1041] [phyTblIDs="[296]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:10.255 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1041]
[2024/09/16 23:44:10.256 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1041] ["take time"=14.495167ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.259 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.267 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1041] [neededSchemaVersion=1042] ["elapsed time"=523.542s] [gotSchemaVersion=1042] [phyTblIDs="[296]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:10.268 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1042]
[2024/09/16 23:44:10.269 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1042] ["take time"=3.177209ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.271 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.277 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1042] [neededSchemaVersion=1043] ["elapsed time"=607.792s] [gotSchemaVersion=1043] [phyTblIDs="[296]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:10.279 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1043]
[2024/09/16 23:44:10.279 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1043] ["take time"=3.361916ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.282 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [category=ddl] [job="ID:332, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545880903695, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:10.284 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:10.288 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1043] [neededSchemaVersion=1044] ["elapsed time"=503.25s] [gotSchemaVersion=1044] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:10.289 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=332] [version=1044]
[2024/09/16 23:44:10.290 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1044] ["take time"=3.25225ms] [job="ID:332, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.295 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=332]
[2024/09/16 23:44:10.297 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=332] [tableID=296] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:10.298 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=332] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:10.299 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=332] [conn=952108744] [job="ID:332, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:08.795 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.305 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=332]
[2024/09/16 23:44:10.306 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1044] [cur_db=test] [sql="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:10.306 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:10.306 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teammemberships] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:10.310 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:333, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:10.310 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:333, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teamMemberships` ADD CONSTRAINT `teamMemberships_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:10.311 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.312 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"teamMemberships_teamId_teams_id_fk\",\"L\":\"teammemberships_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":3,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:10.318 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1044] [neededSchemaVersion=1045] ["elapsed time"=692.292s] [gotSchemaVersion=1045] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:10.320 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1045]
[2024/09/16 23:44:10.320 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1045] ["take time"=3.747334ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.323 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.329 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1045] [neededSchemaVersion=1046] ["elapsed time"=549.5s] [gotSchemaVersion=1046] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:10.331 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1046]
[2024/09/16 23:44:10.331 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1046] ["take time"=3.447583ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.334 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.340 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1046] [neededSchemaVersion=1047] ["elapsed time"=604.959s] [gotSchemaVersion=1047] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:10.341 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1047]
[2024/09/16 23:44:10.342 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1047] ["take time"=3.372584ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:10.344 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.345 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=333] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 23:44:10.346 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{296 teamMemberships utf8mb4 utf8mb4_bin [0x401254e9a0 0x401254eb00 0x401254ec60 0x401254edc0 0x401254ef20 0x401254f080 0x401254f1e0 0x401254f340] [0x4025dfc1b0 0x4025dfc3f0] [] [0x40139bd080] public true false 0  0 0 0 0 8 2 1 0 452599545933332517 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=296] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:10.346 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=333] [physicalTableID=296] [startKey=] [endKey=]
[2024/09/16 23:44:10.350 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=333]
[2024/09/16 23:44:10.351 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545946177537, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:10.352 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=333] [table=teamMemberships] ["ingest mode"=true] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 23:44:10.355 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/333/0]
[2024/09/16 23:44:10.356 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=296] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:10.364 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=93]
[2024/09/16 23:44:10.364 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=93] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:10.374 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=92]
[2024/09/16 23:44:10.376 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:10.376 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=92]
[2024/09/16 23:44:10.380 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:10.868 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=93] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:10.868 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=93] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:10.870 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=93] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:10.872 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{296 teamMemberships utf8mb4 utf8mb4_bin [0x40167b0580 0x40167b06e0 0x40167b0840 0x40167b09a0 0x40167b0b00 0x40167b0c60 0x40167b0dc0 0x40167b0f20] [0x40571a9710 0x40571a9950] [] [0x40163880c0] public true false 0  0 0 0 0 8 2 1 0 452599545933332517 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 13 260}"] ["table/partition ID"=296] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:10.872 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=93] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:11.367 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=93] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:11.572 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:11.582 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1047] [neededSchemaVersion=1048] ["elapsed time"=558.166s] [gotSchemaVersion=1048] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:11.584 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1048]
[2024/09/16 23:44:11.585 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1048] ["take time"=4.826875ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.589 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599545946177537, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.590 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=333] [table=teamMemberships] [index=teamMemberships_teamId_teams_id_fk]
[2024/09/16 23:44:11.598 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1048] [neededSchemaVersion=1049] ["elapsed time"=597.458s] [gotSchemaVersion=1049] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:11.600 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1049]
[2024/09/16 23:44:11.601 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1049] ["take time"=4.424542ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.605 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.605 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=333] [physicalTableID=296] [startKey=7480000000000001285f69ffff000000000002] [endKey=7480000000000001285f69ffff000000000002ff]
[2024/09/16 23:44:11.612 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=333]
[2024/09/16 23:44:11.614 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546274119687, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.616 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546274119687, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartKey:7480000000000001285f69ffff000000000002,EndKey:7480000000000001285f69ffff000000000002ff,First:false,PhysicalTableID:296,Ingest mode:false"]
[2024/09/16 23:44:11.617 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=296] ["start key"=7480000000000001285f69ffff000000000002] ["end key"=7480000000000001285f69ffff000000000002ff]
[2024/09/16 23:44:11.618 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=296] ["range start"=7480000000000001285f69ffff000000000002] ["range end"=7480000000000001285f69ffff000000000002ff] ["range count"=1]
[2024/09/16 23:44:11.618 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001285f69ffff000000000002] [endKey=7480000000000001285f69ffff000000000002ff]
[2024/09/16 23:44:11.618 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=333]
[2024/09/16 23:44:11.618 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=333]
[2024/09/16 23:44:11.618 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=333]
[2024/09/16 23:44:11.619 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 296, range: [7480000000000001285f69ffff000000000002, 7480000000000001285f69ffff000000000002ff), jobID: 333"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001285f69ffff000000000002ff00] ["take time"=469.625s]
[2024/09/16 23:44:11.619 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=333]
[2024/09/16 23:44:11.619 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:2,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001285f69ffff000000000002]
[2024/09/16 23:44:11.619 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:11.626 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1049] [neededSchemaVersion=1050] ["elapsed time"=639.292s] [gotSchemaVersion=1050] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:11.628 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1050]
[2024/09/16 23:44:11.629 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1050] ["take time"=4.60625ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.632 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.640 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1050] [neededSchemaVersion=1051] ["elapsed time"=518s] [gotSchemaVersion=1051] [phyTblIDs="[296]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:11.641 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1051]
[2024/09/16 23:44:11.642 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1051] ["take time"=3.858667ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.645 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.654 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1051] [neededSchemaVersion=1052] ["elapsed time"=688.542s] [gotSchemaVersion=1052] [phyTblIDs="[296]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:11.656 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1052]
[2024/09/16 23:44:11.657 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1052] ["take time"=3.984708ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.659 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.667 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1052] [neededSchemaVersion=1053] ["elapsed time"=529.708s] [gotSchemaVersion=1053] [phyTblIDs="[296]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:11.668 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1053]
[2024/09/16 23:44:11.669 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1053] ["take time"=3.464875ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.672 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [category=ddl] [job="ID:333, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546274119687, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:11.674 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:11.679 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1053] [neededSchemaVersion=1054] ["elapsed time"=661.875s] [gotSchemaVersion=1054] [phyTblIDs="[296]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:11.681 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=333] [version=1054]
[2024/09/16 23:44:11.682 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1054] ["take time"=4.146375ms] [job="ID:333, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.688 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=333]
[2024/09/16 23:44:11.690 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=333] [tableID=296] [indexIDs="[9223090561878065154]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:11.692 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=333] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:11.692 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=333] [conn=952108744] [job="ID:333, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:296, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:10.295 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.699 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=333]
[2024/09/16 23:44:11.700 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1054] [cur_db=test] [sql="ALTER TABLE `teams` ADD CONSTRAINT `teams_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:11.700 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teams] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:11.700 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=teams] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:11.705 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:334, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:11.705 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:334, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `teams` ADD CONSTRAINT `teams_userId_users_id_fk` FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:11.706 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.707 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"teams_userId_users_id_fk\",\"L\":\"teams_userid_users_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"userId\",\"L\":\"userid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:11.715 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1054] [neededSchemaVersion=1055] ["elapsed time"=497.959s] [gotSchemaVersion=1055] [phyTblIDs="[298]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:11.716 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1055]
[2024/09/16 23:44:11.717 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1055] ["take time"=3.598458ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.721 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.728 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1055] [neededSchemaVersion=1056] ["elapsed time"=605.083s] [gotSchemaVersion=1056] [phyTblIDs="[298]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:11.730 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1056]
[2024/09/16 23:44:11.731 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1056] ["take time"=4.411458ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.734 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.743 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1056] [neededSchemaVersion=1057] ["elapsed time"=778.459s] [gotSchemaVersion=1057] [phyTblIDs="[298]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:11.747 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1057]
[2024/09/16 23:44:11.748 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1057] ["take time"=6.111416ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:11.751 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.752 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=334] [table=teams] ["ingest mode"=true] [index=teams_userId_users_id_fk]
[2024/09/16 23:44:11.754 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{298 teams utf8mb4 utf8mb4_bin [0x401da36580 0x401da366e0 0x401da36840 0x401da369a0 0x401da36b00 0x401da36c60] [0x40147ce5a0] [] [] public true false 0  0 0 0 0 6 1 0 0 452599546300071968 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=298] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:11.754 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=334] [physicalTableID=298] [startKey=] [endKey=]
[2024/09/16 23:44:11.759 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=334]
[2024/09/16 23:44:11.761 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546313441286, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:11.762 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=334] [table=teams] ["ingest mode"=true] [index=teams_userId_users_id_fk]
[2024/09/16 23:44:11.767 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/334/0]
[2024/09/16 23:44:11.770 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=298] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:11.782 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=94]
[2024/09/16 23:44:11.783 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=94] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:11.868 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=93]
[2024/09/16 23:44:11.873 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:11.873 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=93]
[2024/09/16 23:44:11.882 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:12.285 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=94] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:12.285 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=94] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:12.286 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=94] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:12.287 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{298 teams utf8mb4 utf8mb4_bin [0x40216d62c0 0x40216d6420 0x40216d6580 0x40216d66e0 0x40216d6840 0x40216d69a0] [0x4015c96870] [] [] public true false 0  0 0 0 0 6 1 0 0 452599546300071968 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=298] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:12.287 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=94] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:12.789 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=94] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:12.983 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:13.038 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1057] [neededSchemaVersion=1058] ["elapsed time"=857.833s] [gotSchemaVersion=1058] [phyTblIDs="[298]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:13.046 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1058]
[2024/09/16 23:44:13.050 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1058] ["take time"=15.479916ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.066 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546313441286, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.068 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=334] [table=teams] [index=teams_userId_users_id_fk]
[2024/09/16 23:44:13.106 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1058] [neededSchemaVersion=1059] ["elapsed time"=1.767375ms] [gotSchemaVersion=1059] [phyTblIDs="[298]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:13.110 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1059]
[2024/09/16 23:44:13.116 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1059] ["take time"=14.981833ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.129 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.130 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=334] [physicalTableID=298] [startKey=74800000000000012a5f69ffff000000000001] [endKey=74800000000000012a5f69ffff000000000001ff]
[2024/09/16 23:44:13.139 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=334]
[2024/09/16 23:44:13.141 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546667073544, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.146 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546667073544, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000012a5f69ffff000000000001,EndKey:74800000000000012a5f69ffff000000000001ff,First:false,PhysicalTableID:298,Ingest mode:false"]
[2024/09/16 23:44:13.148 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=298] ["start key"=74800000000000012a5f69ffff000000000001] ["end key"=74800000000000012a5f69ffff000000000001ff]
[2024/09/16 23:44:13.148 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=298] ["range start"=74800000000000012a5f69ffff000000000001] ["range end"=74800000000000012a5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:44:13.148 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000012a5f69ffff000000000001] [endKey=74800000000000012a5f69ffff000000000001ff]
[2024/09/16 23:44:13.149 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=334]
[2024/09/16 23:44:13.149 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=334]
[2024/09/16 23:44:13.149 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=334]
[2024/09/16 23:44:13.149 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [task="taskID: 1, physicalTableID: 298, range: [74800000000000012a5f69ffff000000000001, 74800000000000012a5f69ffff000000000001ff), jobID: 334"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000012a5f69ffff000000000001ff00] ["take time"=563.583s]
[2024/09/16 23:44:13.149 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=334]
[2024/09/16 23:44:13.149 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000012a5f69ffff000000000001]
[2024/09/16 23:44:13.149 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:13.163 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1059] [neededSchemaVersion=1060] ["elapsed time"=1.153708ms] [gotSchemaVersion=1060] [phyTblIDs="[298]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:13.167 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1060]
[2024/09/16 23:44:13.168 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1060] ["take time"=8.513166ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.173 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.216 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1060] [neededSchemaVersion=1061] ["elapsed time"=1.360667ms] [gotSchemaVersion=1061] [phyTblIDs="[298]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:13.220 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1061]
[2024/09/16 23:44:13.222 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1061] ["take time"=11.42375ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.236 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.277 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1061] [neededSchemaVersion=1062] ["elapsed time"=621.667s] [gotSchemaVersion=1062] [phyTblIDs="[298]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:13.279 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1062]
[2024/09/16 23:44:13.280 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1062] ["take time"=4.856042ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.283 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.283 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=94]
[2024/09/16 23:44:13.286 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:13.286 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=94]
[2024/09/16 23:44:13.292 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:13.294 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1062] [neededSchemaVersion=1063] ["elapsed time"=687s] [gotSchemaVersion=1063] [phyTblIDs="[298]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:13.296 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1063]
[2024/09/16 23:44:13.297 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1063] ["take time"=4.335041ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.301 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [category=ddl] [job="ID:334, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546667073544, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:13.304 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:13.310 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1063] [neededSchemaVersion=1064] ["elapsed time"=746.5s] [gotSchemaVersion=1064] [phyTblIDs="[298]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:13.312 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=334] [version=1064]
[2024/09/16 23:44:13.313 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1064] ["take time"=5.051041ms] [job="ID:334, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.320 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=334]
[2024/09/16 23:44:13.323 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=334] [tableID=298] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:13.326 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=334] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:13.327 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=334] [conn=952108744] [job="ID:334, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:298, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:11.694 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.341 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=334]
[2024/09/16 23:44:13.342 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1064] [cur_db=test] [sql="ALTER TABLE `webhooks` ADD CONSTRAINT `webhooks_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"] [user=root@%]
[2024/09/16 23:44:13.342 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=webhooks] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:13.342 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=webhooks] [jobType="alter table multi-schema change"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:13.348 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:335, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:13.349 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:335, Type:alter table multi-schema change, State:queueing, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="ALTER TABLE `webhooks` ADD CONSTRAINT `webhooks_teamId_teams_id_fk` FOREIGN KEY (`teamId`) REFERENCES `teams`(`id`) ON DELETE no action ON UPDATE no action;"]
[2024/09/16 23:44:13.350 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.351 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"webhooks_teamId_teams_id_fk\",\"L\":\"webhooks_teamid_teams_id_fk\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"teamId\",\"L\":\"teamid\"},\"offset\":4,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:13.361 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1064] [neededSchemaVersion=1065] ["elapsed time"=642.833s] [gotSchemaVersion=1065] [phyTblIDs="[302]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:13.363 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1065]
[2024/09/16 23:44:13.364 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1065] ["take time"=5.384ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.369 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.388 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1065] [neededSchemaVersion=1066] ["elapsed time"=8.947792ms] [gotSchemaVersion=1066] [phyTblIDs="[302]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:13.394 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1066]
[2024/09/16 23:44:13.395 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1066] ["take time"=17.621167ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.399 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.484 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1066] [neededSchemaVersion=1067] ["elapsed time"=972.917s] [gotSchemaVersion=1067] [phyTblIDs="[302]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:13.486 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1067]
[2024/09/16 23:44:13.488 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1067] ["take time"=7.007709ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:13.492 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.492 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=335] [table=webhooks] ["ingest mode"=true] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 23:44:13.494 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{302 webhooks utf8mb4 utf8mb4_bin [0x402a211b80 0x402a211ce0 0x402a211e40 0x402c03e000 0x402c03e160] [0x4019c72bd0] [] [] public true false 0  0 0 0 0 5 1 0 0 452599546745716739 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=302] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:13.494 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=335] [physicalTableID=302] [startKey=] [endKey=]
[2024/09/16 23:44:13.501 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=335]
[2024/09/16 23:44:13.502 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546759086100, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:13.503 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=335] [table=webhooks] ["ingest mode"=true] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 23:44:13.508 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/335/0]
[2024/09/16 23:44:13.510 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=302] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:13.526 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=95]
[2024/09/16 23:44:13.527 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=95] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:14.029 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=95] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:14.029 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=95] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:14.030 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=95] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:14.032 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{302 webhooks utf8mb4 utf8mb4_bin [0x402e0e3760 0x402e0e38c0 0x402e0e3a20 0x402e0e3b80 0x402e0e3ce0] [0x401bd63e60] [] [] public true false 0  0 0 0 0 5 1 0 0 452599546745716739 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 3 260}"] ["table/partition ID"=302] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:14.032 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=95] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:14.531 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=95] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:14.729 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:14.737 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1067] [neededSchemaVersion=1068] ["elapsed time"=603.208s] [gotSchemaVersion=1068] [phyTblIDs="[302]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:14.739 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1068]
[2024/09/16 23:44:14.739 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1068] ["take time"=3.755666ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.742 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599546759086100, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:14.743 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=335] [table=webhooks] [index=webhooks_teamId_teams_id_fk]
[2024/09/16 23:44:14.749 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1068] [neededSchemaVersion=1069] ["elapsed time"=464.541s] [gotSchemaVersion=1069] [phyTblIDs="[302]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:14.750 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1069]
[2024/09/16 23:44:14.751 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1069] ["take time"=3.3565ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.754 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:14.754 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=335] [physicalTableID=302] [startKey=74800000000000012e5f69ffff000000000001] [endKey=74800000000000012e5f69ffff000000000001ff]
[2024/09/16 23:44:14.759 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=335]
[2024/09/16 23:44:14.761 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547100135432, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:14.762 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547100135432, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartKey:74800000000000012e5f69ffff000000000001,EndKey:74800000000000012e5f69ffff000000000001ff,First:false,PhysicalTableID:302,Ingest mode:false"]
[2024/09/16 23:44:14.763 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=302] ["start key"=74800000000000012e5f69ffff000000000001] ["end key"=74800000000000012e5f69ffff000000000001ff]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=302] ["range start"=74800000000000012e5f69ffff000000000001] ["range end"=74800000000000012e5f69ffff000000000001ff] ["range count"=1]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=74800000000000012e5f69ffff000000000001] [endKey=74800000000000012e5f69ffff000000000001ff]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=335]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=335]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=335]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 302, range: [74800000000000012e5f69ffff000000000001, 74800000000000012e5f69ffff000000000001ff), jobID: 335"] ["added count"=0] ["scan count"=0] ["next key"=74800000000000012e5f69ffff000000000001ff00] ["take time"=339.791s]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=335]
[2024/09/16 23:44:14.764 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:1,TypeKey:_idx_] ["total added count"=0] ["start key"=74800000000000012e5f69ffff000000000001]
[2024/09/16 23:44:14.764 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:14.770 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1069] [neededSchemaVersion=1070] ["elapsed time"=513.083s] [gotSchemaVersion=1070] [phyTblIDs="[302]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:14.772 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1070]
[2024/09/16 23:44:14.773 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1070] ["take time"=3.439083ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.775 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add foreign key, State:queueing, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:14.781 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1070] [neededSchemaVersion=1071] ["elapsed time"=505.5s] [gotSchemaVersion=1071] [phyTblIDs="[302]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:14.783 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1071]
[2024/09/16 23:44:14.783 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1071] ["take time"=3.356ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.786 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add foreign key, State:running, SchemaState:write only, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:14.794 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1071] [neededSchemaVersion=1072] ["elapsed time"=598s] [gotSchemaVersion=1072] [phyTblIDs="[302]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:14.796 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1072]
[2024/09/16 23:44:14.797 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1072] ["take time"=3.931375ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.799 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add foreign key, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:true"]
[2024/09/16 23:44:14.806 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1072] [neededSchemaVersion=1073] ["elapsed time"=575.083s] [gotSchemaVersion=1073] [phyTblIDs="[302]"] [actionTypes="[9]"] [diffTypes="[\"add foreign key\"]"]
[2024/09/16 23:44:14.807 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1073]
[2024/09/16 23:44:14.808 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1073] ["take time"=3.410166ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.811 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [category=ddl] [job="ID:335, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547100135432, Version: v1, UniqueWarnings:0, Multi-Schema Change:true, Revertible:false"]
[2024/09/16 23:44:14.812 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=] [collation=]
[2024/09/16 23:44:14.818 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1073] [neededSchemaVersion=1074] ["elapsed time"=604.041s] [gotSchemaVersion=1074] [phyTblIDs="[302]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:14.819 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=335] [version=1074]
[2024/09/16 23:44:14.820 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1074] ["take time"=3.792792ms] [job="ID:335, Type:alter table multi-schema change, State:running, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.825 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=335]
[2024/09/16 23:44:14.826 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=335] [tableID=302] [indexIDs="[9223090561878065153]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:14.828 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=335] [jobType="alter table multi-schema change"]
[2024/09/16 23:44:14.828 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 11, tp add index"] [category=ddl] [jobID=335] [conn=952108744] [job="ID:335, Type:alter table multi-schema change, State:synced, SchemaState:none, SchemaID:260, TableID:302, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:13.294 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.834 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=335]
[2024/09/16 23:44:14.835 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952108744] [schemaVersion=1074] [cur_db=test] [sql="CREATE INDEX `tagsOnContactsTagIdContactIdIdx` ON `tagsOnContacts` (`tagId`,`contactId`);"] [user=root@%]
[2024/09/16 23:44:14.836 +00:00] [INFO] [executor.go:4757] ["initialize reorg meta"] [category=ddl] [jobSchema=test] [jobTable=tagsoncontacts] [jobType="add index"] [enableDistTask=true] [enableFastReorg=true] [targetScope=] [concurrency=4] [batchSize=256]
[2024/09/16 23:44:14.839 +00:00] [INFO] [job_submitter.go:135] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:336, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:6, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0; "] [table=true] [fast_create=false]
[2024/09/16 23:44:14.839 +00:00] [INFO] [executor.go:6306] ["DDL job submitted"] [category=ddl] [job="ID:336, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:6, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [query="CREATE INDEX `tagsOnContactsTagIdContactIdIdx` ON `tagsOnContacts` (`tagId`,`contactId`);"]
[2024/09/16 23:44:14.840 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:queueing, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.841 +00:00] [INFO] [index.go:706] ["run add index job"] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:none, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"tagsOnContactsTagIdContactIdIdx\",\"L\":\"tagsoncontactstagidcontactididx\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"tagId\",\"L\":\"tagid\"},\"offset\":1,\"length\":-1},{\"name\":{\"O\":\"contactId\",\"L\":\"contactid\"},\"offset\":2,\"length\":-1}],\"state\":0,\"backfill_state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false,\"mv_index\":false}"]
[2024/09/16 23:44:14.847 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1074] [neededSchemaVersion=1075] ["elapsed time"=579.375s] [gotSchemaVersion=1075] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:14.848 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=336] [version=1075]
[2024/09/16 23:44:14.849 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1075] ["take time"=3.491916ms] [job="ID:336, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.852 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:delete only, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.860 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1075] [neededSchemaVersion=1076] ["elapsed time"=563.583s] [gotSchemaVersion=1076] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:14.862 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=336] [version=1076]
[2024/09/16 23:44:14.862 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1076] ["take time"=3.962417ms] [job="ID:336, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.865 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:write only, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.871 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1076] [neededSchemaVersion=1077] ["elapsed time"=501.084s] [gotSchemaVersion=1077] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:14.872 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=336] [version=1077]
[2024/09/16 23:44:14.873 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1077] ["take time"=3.368583ms] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.876 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.877 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=336] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 23:44:14.878 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{294 tagsOnContacts utf8mb4 utf8mb4_bin [0x4010af98c0 0x4010af9a20 0x4010af9b80 0x40130d2dc0] [0x401f7cf050 0x401f7cf320 0x401f7cf560] [] [0x4027eab500 0x4027eab5c0] public true false 0  0 0 0 0 4 3 2 0 452599547125825551 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 16 260}"] ["table/partition ID"=294] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:14.878 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=336] [physicalTableID=294] [startKey=] [endKey=]
[2024/09/16 23:44:14.883 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=336]
[2024/09/16 23:44:14.884 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547125825561, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:14.885 +00:00] [INFO] [index.go:918] ["index backfill state running"] [category=ddl] ["job ID"=336] [table=tagsOnContacts] ["ingest mode"=true] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 23:44:14.888 +00:00] [INFO] [index.go:2046] ["adjusted add-index task concurrency"] [category=ddl] [worker-cnt=4] [task-concurrency=4] [task-key=ddl/backfill/336]
[2024/09/16 23:44:14.891 +00:00] [INFO] [index.go:2130] ["estimate row size"] [tableID=294] [size=0] [error="less than 3 regions"]
[2024/09/16 23:44:14.899 +00:00] [INFO] [scheduler_manager.go:355] ["task scheduler started"] [task-id=96]
[2024/09/16 23:44:14.899 +00:00] [INFO] [scheduler.go:117] ["schedule task"] [task-id=96] [task-type=backfill] [allocated-slots=true] [state=pending] [concurrency=4]
[2024/09/16 23:44:15.029 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=95]
[2024/09/16 23:44:15.032 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:15.032 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=95]
[2024/09/16 23:44:15.036 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:44:15.406 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=96] [task-type=backfill] [allocated-slots=true] [current-step=init] [next-step=read-index]
[2024/09/16 23:44:15.407 +00:00] [INFO] [scheduler.go:433] ["eligible instances"] [task-id=96] [task-type=backfill] [allocated-slots=true] [num=1]
[2024/09/16 23:44:15.410 +00:00] [INFO] [backfilling_dist_scheduler.go:95] ["on next subtasks batch"] [category=ddl] [type=backfill] [task-id=96] [curr-step=init] [next-step=read-index]
[2024/09/16 23:44:15.412 +00:00] [INFO] [reorg.go:829] ["get noop table range"] [category=ddl] [table="&{294 tagsOnContacts utf8mb4 utf8mb4_bin [0x4012c2d340 0x4012c2d4a0 0x4012c2d600 0x4012c2d760] [0x4021c34b40 0x4021c34e10 0x4021c35050] [] [0x4029f96300 0x4029f963c0] public true false 0  0 0 0 0 4 3 2 0 452599547125825551 0 0 0 0 0 0 <nil>  <nil> <nil> <nil> 5 <nil> false  disable <nil> <nil> <nil> <nil> 16 260}"] ["table/partition ID"=294] ["start key"=] ["end key"=] ["is empty table"=true]
[2024/09/16 23:44:15.412 +00:00] [INFO] [scheduler.go:459] ["schedule subtasks"] [task-id=96] [task-type=backfill] [allocated-slots=true] [state=pending] [step=read-index] [concurrency=4] [subtasks=0]
[2024/09/16 23:44:15.905 +00:00] [INFO] [scheduler.go:409] ["switch to next step"] [task-id=96] [task-type=backfill] [allocated-slots=true] [current-step=read-index] [next-step=done]
[2024/09/16 23:44:16.129 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:16.141 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1077] [neededSchemaVersion=1078] ["elapsed time"=870.083s] [gotSchemaVersion=1078] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:16.143 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=336] [version=1078]
[2024/09/16 23:44:16.145 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1078] ["take time"=5.408209ms] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547125825561, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:16.149 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547125825561, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:16.150 +00:00] [INFO] [index.go:946] ["index backfill state ready to merge"] [category=ddl] ["job ID"=336] [table=tagsOnContacts] [index=tagsOnContactsTagIdContactIdIdx]
[2024/09/16 23:44:16.159 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1078] [neededSchemaVersion=1079] ["elapsed time"=657.625s] [gotSchemaVersion=1079] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:16.161 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=336] [version=1079]
[2024/09/16 23:44:16.162 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1079] ["take time"=5.066458ms] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:16.165 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:0, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:16.166 +00:00] [INFO] [reorg.go:903] ["job get table range"] [category=ddl] [jobID=336] [physicalTableID=294] [startKey=7480000000000001265f69ffff000000000003] [endKey=7480000000000001265f69ffff000000000003ff]
[2024/09/16 23:44:16.172 +00:00] [INFO] [job_worker.go:1002] ["schema version doesn't change"] [category=ddl] [jobID=336]
[2024/09/16 23:44:16.174 +00:00] [INFO] [job_worker.go:786] ["run DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:0, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547466612749, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:16.176 +00:00] [INFO] [index.go:1894] ["start to merge temp index"] [category=ddl] [job="ID:336, Type:add index, State:running, SchemaState:write reorganization, SchemaID:260, TableID:294, RowCount:0, ArgLen:5, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547466612749, Version: v1, UniqueWarnings:0"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartKey:7480000000000001265f69ffff000000000003,EndKey:7480000000000001265f69ffff000000000003ff,First:false,PhysicalTableID:294,Ingest mode:false"]
[2024/09/16 23:44:16.177 +00:00] [INFO] [backfilling.go:481] ["load table ranges from PD"] [category=ddl] [physicalTableID=294] ["start key"=7480000000000001265f69ffff000000000003] ["end key"=7480000000000001265f69ffff000000000003ff]
[2024/09/16 23:44:16.178 +00:00] [INFO] [backfilling.go:508] ["load table ranges from PD done"] [category=ddl] [physicalTableID=294] ["range start"=7480000000000001265f69ffff000000000003] ["range end"=7480000000000001265f69ffff000000000003ff] ["range count"=1]
[2024/09/16 23:44:16.178 +00:00] [INFO] [backfilling.go:950] ["start backfill workers to reorg record"] [category=ddl] [type="merge temporary index"] [workerCnt=4] [regionCnt=1] [startKey=7480000000000001265f69ffff000000000003] [endKey=7480000000000001265f69ffff000000000003ff]
[2024/09/16 23:44:16.178 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 1, tp merge temporary index"] [jobID=336]
[2024/09/16 23:44:16.178 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 3, tp merge temporary index"] [jobID=336]
[2024/09/16 23:44:16.178 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 2, tp merge temporary index"] [jobID=336]
[2024/09/16 23:44:16.178 +00:00] [INFO] [backfilling.go:370] ["backfill worker finish task"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [task="taskID: 1, physicalTableID: 294, range: [7480000000000001265f69ffff000000000003, 7480000000000001265f69ffff000000000003ff), jobID: 336"] ["added count"=0] ["scan count"=0] ["next key"=7480000000000001265f69ffff000000000003ff00] ["take time"=551.333s]
[2024/09/16 23:44:16.179 +00:00] [INFO] [backfilling.go:409] ["backfill worker exit"] [category=ddl] [worker="backfill-worker 0, tp merge temporary index"] [jobID=336]
[2024/09/16 23:44:16.179 +00:00] [INFO] [backfilling.go:890] ["backfill workers successfully processed"] [category=ddl] [element=ID:3,TypeKey:_idx_] ["total added count"=0] ["start key"=7480000000000001265f69ffff000000000003]
[2024/09/16 23:44:16.179 +00:00] [INFO] [reorg.go:434] ["run reorg job done"] [category=ddl] ["handled rows"=0]
[2024/09/16 23:44:16.181 +00:00] [INFO] [index.go:835] ["run add index job done"] [category=ddl] [charset=utf8mb4] [collation=utf8mb4_unicode_ci]
[2024/09/16 23:44:16.188 +00:00] [INFO] [domain.go:345] ["diff load InfoSchema success"] [isV2=true] [currentSchemaVersion=1079] [neededSchemaVersion=1080] ["elapsed time"=816.791s] [gotSchemaVersion=1080] [phyTblIDs="[294]"] [actionTypes="[7]"] [diffTypes="[\"add index\"]"]
[2024/09/16 23:44:16.190 +00:00] [INFO] [domain.go:1062] ["mdl gets lock, update self version to owner"] [jobID=336] [version=1080]
[2024/09/16 23:44:16.191 +00:00] [INFO] [schema_version.go:398] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1080] ["take time"=4.949792ms] [job="ID:336, Type:add index, State:done, SchemaState:public, SchemaID:260, TableID:294, RowCount:0, ArgLen:4, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547466612749, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:16.195 +00:00] [INFO] [delete_range.go:442] ["insert into delete-range indices"] [category=ddl] [jobID=336] [tableID=294] [indexIDs="[9223090561878065155]"] [comment="add index: physical table ID(s)"]
[2024/09/16 23:44:16.197 +00:00] [INFO] [delete_range.go:113] ["add job into delete-range table"] [category=ddl] [jobID=336] [jobType="add index"]
[2024/09/16 23:44:16.198 +00:00] [INFO] [job_worker.go:378] ["finish DDL job"] [worker="worker 12, tp add index"] [category=ddl] [jobID=336] [conn=952108744] [job="ID:336, Type:add index, State:synced, SchemaState:public, SchemaID:260, TableID:294, RowCount:0, ArgLen:4, start time: 2024-09-16 23:44:14.794 +0000 UTC, Err:<nil>, ErrCount:0, SnapshotVersion:452599547466612749, Version: v1, UniqueWarnings:0"]
[2024/09/16 23:44:16.207 +00:00] [INFO] [executor.go:6426] ["DDL job is finished"] [category=ddl] [jobID=336]
[2024/09/16 23:44:16.401 +00:00] [INFO] [scheduler_manager.go:364] ["task scheduler exit"] [task-id=96]
[2024/09/16 23:44:16.403 +00:00] [INFO] [scheduler_manager.go:410] ["cleanup routine start"]
[2024/09/16 23:44:16.403 +00:00] [INFO] [scheduler_manager.go:426] ["cleanup task"] [task-id=96]
[2024/09/16 23:44:16.409 +00:00] [INFO] [scheduler_manager.go:419] ["cleanup routine success"]
[2024/09/16 23:45:37.532 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599411505627136] [concurrency=1]
[2024/09/16 23:45:37.533 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599411505627136] [concurrency=1]
[2024/09/16 23:45:37.533 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 23:45:37.557 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=24.316125ms] ["completed regions"=48]
[2024/09/16 23:45:37.558 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599411505627136] [regions=48]
[2024/09/16 23:46:01.499 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:46:37.512 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 23:47:17.582 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=32]
[2024/09/16 23:47:17.739 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=32] ["cost time"=157.031042ms]
[2024/09/16 23:47:17.740 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 23:47:17.740 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=875ns]
[2024/09/16 23:47:17.743 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452599411505627136]
[2024/09/16 23:47:37.441 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:47:37.486 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=190]
[2024/09/16 23:47:37.504 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=210]
[2024/09/16 23:47:37.520 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=220]
[2024/09/16 23:47:37.531 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=222]
[2024/09/16 23:51:01.501 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:52:37.436 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:56:01.521 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/16 23:56:32.050 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952108950] [session_alias=] [schemaVersion=1080] [txnStartTS=452599740377595908] [txnScope=global]
[2024/09/16 23:56:32.051 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952108950] [session_alias=] [schemaVersion=1080] [txnStartTS=452599740377595909] [txnScope=global]
[2024/09/16 23:56:32.052 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952108950] [session_alias=] [schemaVersion=1080] [txnStartTS=452599740377595910] [txnScope=global]
[2024/09/16 23:56:37.519 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599584519880704] [concurrency=1]
[2024/09/16 23:56:37.519 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599584519880704] [concurrency=1]
[2024/09/16 23:56:37.519 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/16 23:56:37.536 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=16.656125ms] ["completed regions"=48]
[2024/09/16 23:56:37.536 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599584519880704] [regions=48]
[2024/09/16 23:56:54.155 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952108980] ["key sample"=74800000000000010c5f7280000000000000a1] [size=11369206] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599745282310145]
[2024/09/16 23:56:54.162 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599745282310145]
[2024/09/16 23:56:54.700 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599745282310145]
[2024/09/16 23:56:55.107 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952108980] ["key sample"=7480000000000001265f69800000000000000104001a1dd76660002804001fe01bb9e000ae] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599746370469889]
[2024/09/16 23:56:55.111 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599746370469889]
[2024/09/16 23:56:55.603 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599746370469889]
[2024/09/16 23:56:58.073 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952108980] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd0400000000000000a1] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599746553708548]
[2024/09/16 23:57:37.451 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/16 23:57:37.514 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=190]
[2024/09/16 23:57:37.526 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/16 23:57:37.534 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=210]
[2024/09/16 23:57:37.547 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=220]
[2024/09/16 23:57:37.560 +00:00] [INFO] [gc.go:287] ["remove stats in GC due to dropped table"] [table_id=222]
[2024/09/16 23:58:17.602 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=53]
[2024/09/16 23:58:17.614 +00:00] [INFO] [info.go:1186] [DeleteTiFlashPlacementRules] [physicalTableIDs="[184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224]"]
[2024/09/16 23:58:18.091 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=53] ["cost time"=484.055125ms]
[2024/09/16 23:58:18.093 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/16 23:58:18.093 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1.042s]
[2024/09/16 23:58:18.096 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452599584519880704]
[2024/09/16 23:59:36.213 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109004] ["key sample"=74800000000000010c5f7280000000000000d2] [size=11369206] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599787830378497]
[2024/09/16 23:59:36.218 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599787830378497]
[2024/09/16 23:59:36.707 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599787830378497]
[2024/09/16 23:59:37.084 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109004] ["key sample"=7480000000000001265f69800000000000000104001a1dd76660004404001ff9917e80008b] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599788813418499]
[2024/09/16 23:59:37.087 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599788813418499]
[2024/09/16 23:59:37.547 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599788813418499]
[2024/09/16 23:59:39.739 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109004] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd0400000000000000d2] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599789009764355]
[2024/09/16 23:59:56.633 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109022] [session_alias=] [schemaVersion=1080] [txnStartTS=452599794003869701] [txnScope=global]
[2024/09/16 23:59:56.634 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109022] [session_alias=] [schemaVersion=1080] [txnStartTS=452599794003869702] [txnScope=global]
[2024/09/16 23:59:56.634 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109022] [session_alias=] [schemaVersion=1080] [txnStartTS=452599794003869703] [txnScope=global]
[2024/09/17 00:01:04.514 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/17 00:01:06.761 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109062] ["key sample"=74800000000000010c5f72800000000000017a] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599811504078849]
[2024/09/17 00:01:06.768 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599811504078849]
[2024/09/17 00:01:07.319 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599811504078849]
[2024/09/17 00:01:07.751 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109062] ["key sample"=7480000000000001265f69800000000000000104001c5fdb2160002b04001ffc49754000b2] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599812576509964]
[2024/09/17 00:01:07.755 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599812576509964]
[2024/09/17 00:01:08.263 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599812576509964]
[2024/09/17 00:01:10.786 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109062] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd04000000000000017a] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599812786225157]
[2024/09/17 00:01:30.293 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109080] [session_alias=] [schemaVersion=1080] [txnStartTS=452599818553655301] [txnScope=global]
[2024/09/17 00:01:30.294 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109080] [session_alias=] [schemaVersion=1080] [txnStartTS=452599818553655302] [txnScope=global]
[2024/09/17 00:01:30.294 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109080] [session_alias=] [schemaVersion=1080] [txnStartTS=452599818553655303] [txnScope=global]
[2024/09/17 00:01:45.126 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109118] ["key sample"=74800000000000010c5f728000000000000229] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599821489405956]
[2024/09/17 00:01:45.132 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599821489405956]
[2024/09/17 00:01:45.745 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599821489405956]
[2024/09/17 00:01:46.409 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109118] ["key sample"=7480000000000001265f69800000000000000104001cb76b1180002704001ffc4975402984] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599822682423298]
[2024/09/17 00:01:46.412 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599822682423298]
[2024/09/17 00:01:46.997 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599822682423298]
[2024/09/17 00:01:49.772 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109118] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000229] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599822944567300]
[2024/09/17 00:02:04.624 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109132] [session_alias=] [schemaVersion=1080] [txnStartTS=452599827558039556] [txnScope=global]
[2024/09/17 00:02:04.626 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109132] [session_alias=] [schemaVersion=1080] [txnStartTS=452599827558039557] [txnScope=global]
[2024/09/17 00:02:04.628 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109132] [session_alias=] [schemaVersion=1080] [txnStartTS=452599827558039558] [txnScope=global]
[2024/09/17 00:02:37.452 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/17 00:02:43.996 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109164] ["key sample"=74800000000000010c5f7280000000000002b7] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599837100343297]
[2024/09/17 00:02:44.000 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599837100343297]
[2024/09/17 00:02:44.525 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599837100343297]
[2024/09/17 00:02:45.140 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109164] ["key sample"=7480000000000001265f69800000000000000104001cb76b1180007304001fffafbbe0015a] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599838083121154]
[2024/09/17 00:02:45.144 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599838083121154]
[2024/09/17 00:02:45.504 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599838083121154]
[2024/09/17 00:02:48.052 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109164] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd0400000000000002b7] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599838279729158]
[2024/09/17 00:03:05.929 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109180] [session_alias=] [schemaVersion=1080] [txnStartTS=452599843627466757] [txnScope=global]
[2024/09/17 00:03:05.930 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109180] [session_alias=] [schemaVersion=1080] [txnStartTS=452599843627466758] [txnScope=global]
[2024/09/17 00:03:05.930 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109180] [session_alias=] [schemaVersion=1080] [txnStartTS=452599843627466759] [txnScope=global]
[2024/09/17 00:03:20.934 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109218] ["key sample"=74800000000000010c5f72800000000000035d] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599846668599297]
[2024/09/17 00:03:20.940 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599846668599297]
[2024/09/17 00:03:21.503 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599846668599297]
[2024/09/17 00:03:22.239 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109218] ["key sample"=7480000000000001265f69800000000000000104001cb76b118000bf04001fffafbbe02a94] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599847808663553]
[2024/09/17 00:03:22.245 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599847808663553]
[2024/09/17 00:03:22.816 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599847808663553]
[2024/09/17 00:03:25.521 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109218] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd04000000000000035d] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599848071331841]
[2024/09/17 00:03:44.132 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109238] [session_alias=] [schemaVersion=1080] [txnStartTS=452599853641629702] [txnScope=global]
[2024/09/17 00:03:44.133 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109238] [session_alias=] [schemaVersion=1080] [txnStartTS=452599853641629703] [txnScope=global]
[2024/09/17 00:03:44.134 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109238] [session_alias=] [schemaVersion=1080] [txnStartTS=452599853641629704] [txnScope=global]
[2024/09/17 00:03:57.339 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109266] ["key sample"=74800000000000010c5f728000000000000403] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599856262545409]
[2024/09/17 00:03:57.343 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599856262545409]
[2024/09/17 00:03:57.839 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599856262545409]
[2024/09/17 00:03:58.409 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109266] ["key sample"=7480000000000001265f69800000000000000104001d4364a620002904001fffafbbe053da] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599857311383553]
[2024/09/17 00:03:58.414 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599857311383553]
[2024/09/17 00:03:58.694 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599857311383553]
[2024/09/17 00:04:00.985 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109266] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000403] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599857468932099]
[2024/09/17 00:04:19.277 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109286] [session_alias=] [schemaVersion=1080] [txnStartTS=452599862855991301] [txnScope=global]
[2024/09/17 00:04:19.278 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109286] [session_alias=] [schemaVersion=1080] [txnStartTS=452599862855991302] [txnScope=global]
[2024/09/17 00:04:19.279 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109286] [session_alias=] [schemaVersion=1080] [txnStartTS=452599862855991303] [txnScope=global]
[2024/09/17 00:04:33.000 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109320] ["key sample"=74800000000000010c5f7280000000000004a9] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599865581764609]
[2024/09/17 00:04:33.005 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599865581764609]
[2024/09/17 00:04:33.660 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599865581764609]
[2024/09/17 00:04:34.355 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109320] ["key sample"=7480000000000001265f69800000000000000104001d4364a620007504001fffafbbe07f41] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599866708983810]
[2024/09/17 00:04:34.358 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599866708983810]
[2024/09/17 00:04:34.919 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599866708983810]
[2024/09/17 00:04:37.894 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109320] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd0400000000000004a9] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599866971389953]
[2024/09/17 00:04:57.606 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109336] [session_alias=] [schemaVersion=1080] [txnStartTS=452599872896106501] [txnScope=global]
[2024/09/17 00:04:57.607 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109336] [session_alias=] [schemaVersion=1080] [txnStartTS=452599872896106502] [txnScope=global]
[2024/09/17 00:04:57.608 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109336] [session_alias=] [schemaVersion=1080] [txnStartTS=452599872908689409] [txnScope=global]
[2024/09/17 00:05:11.473 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109356] ["key sample"=74800000000000010c5f728000000000000548] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599875635511297]
[2024/09/17 00:05:11.479 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599875635511297]
[2024/09/17 00:05:12.081 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599875635511297]
[2024/09/17 00:05:13.061 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109356] ["key sample"=7480000000000001265f69800000000000000104001d4364a62000b304001fffafbbe0a7c4] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599876853956610]
[2024/09/17 00:05:13.064 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599876853956610]
[2024/09/17 00:05:13.514 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599876853956610]
[2024/09/17 00:05:16.343 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109356] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000548] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599877089886210]
[2024/09/17 00:05:35.546 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109374] [session_alias=] [schemaVersion=1080] [txnStartTS=452599882843947015] [txnScope=global]
[2024/09/17 00:05:35.547 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109374] [session_alias=] [schemaVersion=1080] [txnStartTS=452599882843947016] [txnScope=global]
[2024/09/17 00:05:35.548 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109374] [session_alias=] [schemaVersion=1080] [txnStartTS=452599882843947017] [txnScope=global]
[2024/09/17 00:05:39.775 +00:00] [INFO] [executor.go:1460] ["limit executor close takes a long time"] [elapsed=1.086666ms]
[2024/09/17 00:06:04.516 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/17 00:06:37.546 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599741810475008] [concurrency=1]
[2024/09/17 00:06:37.546 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599741810475008] [concurrency=1]
[2024/09/17 00:06:37.547 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/17 00:06:37.602 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=54.784667ms] ["completed regions"=48]
[2024/09/17 00:06:37.602 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599741810475008] [regions=48]
[2024/09/17 00:07:37.461 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/17 00:07:37.532 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/17 00:07:45.123 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109416] ["key sample"=74800000000000010c5f7280000000000005f7] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452599915847876610]
[2024/09/17 00:07:45.132 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599915847876610]
[2024/09/17 00:07:45.653 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599915847876610]
[2024/09/17 00:07:46.448 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109416] ["key sample"=7480000000000001265f69800000000000000104001f5e33e340002904001fffafbbe0d10f] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452599917054001154]
[2024/09/17 00:07:46.451 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599917054001154]
[2024/09/17 00:07:46.791 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452599917054001154]
[2024/09/17 00:07:49.515 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109416] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd0400000000000005f7] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452599917276561409]
[2024/09/17 00:08:09.734 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109436] [session_alias=] [schemaVersion=1080] [txnStartTS=452599923266551813] [txnScope=global]
[2024/09/17 00:08:09.736 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109436] [session_alias=] [schemaVersion=1080] [txnStartTS=452599923266551814] [txnScope=global]
[2024/09/17 00:08:09.738 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109436] [session_alias=] [schemaVersion=1080] [txnStartTS=452599923266551815] [txnScope=global]
[2024/09/17 00:08:17.615 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/17 00:08:17.616 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=2.583s]
[2024/09/17 00:08:17.617 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/17 00:08:17.617 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=1s]
[2024/09/17 00:08:17.620 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452599741810475008]
[2024/09/17 00:08:37.246 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952109526] [schemaVersion=1080] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/17 00:11:07.514 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/17 00:12:37.469 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/17 00:13:06.190 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109650] [session_alias=] [schemaVersion=1080] [txnStartTS=452600000983072773] [txnScope=global]
[2024/09/17 00:13:06.191 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109650] [session_alias=] [schemaVersion=1080] [txnStartTS=452600000983072774] [txnScope=global]
[2024/09/17 00:13:06.192 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109650] [session_alias=] [schemaVersion=1080] [txnStartTS=452600000983072775] [txnScope=global]
[2024/09/17 00:13:34.465 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952109682] [schemaVersion=1080] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/17 00:16:07.205 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109752] [session_alias=] [schemaVersion=1080] [txnStartTS=452600048432185349] [txnScope=global]
[2024/09/17 00:16:07.206 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109752] [session_alias=] [schemaVersion=1080] [txnStartTS=452600048432185350] [txnScope=global]
[2024/09/17 00:16:07.207 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109752] [session_alias=] [schemaVersion=1080] [txnStartTS=452600048432185351] [txnScope=global]
[2024/09/17 00:16:07.527 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/17 00:16:31.150 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109782] ["key sample"=74800000000000010c5f7280000000000007d3] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452600053714386946]
[2024/09/17 00:16:31.156 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600053714386946]
[2024/09/17 00:16:31.864 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600053714386946]
[2024/09/17 00:16:33.073 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109782] ["key sample"=7480000000000001265f69800000000000000104001f5e33e34000db04001fffafbbe11ab3] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452600054946201603]
[2024/09/17 00:16:33.079 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600054946201603]
[2024/09/17 00:16:33.532 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600054946201603]
[2024/09/17 00:16:36.840 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109782] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd0400000000000007d3] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452600055418322947]
[2024/09/17 00:16:37.490 +00:00] [INFO] [tidb.go:276] ["rollbackTxn called due to ddl/autocommit failure"]
[2024/09/17 00:16:37.490 +00:00] [WARN] [session.go:2162] ["run statement failed"] [conn=952109782] [session_alias=] [schemaVersion=1080] [error="[planner:1452]Cannot add or update a child row: a foreign key constraint fails (`test`.`contactimports`, CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)"] [session="{\n  \"currDBName\": \"test\",\n  \"id\": 952109782,\n  \"lastInsertID\": 75,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"192.168.65.1\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\",\n    \"AuthPlugin\": \"mysql_native_password\"\n  }\n}"]
[2024/09/17 00:16:37.491 +00:00] [INFO] [conn.go:1184] ["command dispatched failed"] [conn=952109782] [session_alias=] [connInfo="id:952109782, addr:192.168.65.1:52095 status:10, collation:utf8mb4_unicode_ci, user:root"] [command=Query] [status="inTxn:0, autocommit:1"] [sql="insert into `contactImports` (`id`, `fileIdentifier`, `name`, `audienceId`, `url`, `status`, `subscribeAllContacts`, `updateExistingContacts`, `createdAt`, `attributesMap`) values (default, 'ffrjak1v4cb0xzelkhomposp', default, 2004, '/contacts/ffrjak1v4cb0xzelkhomposp.csv', 'PENDING', default, default, default, '{\\\"email\\\":\\\"\\\",\\\"firstName\\\":\\\"\\\",\\\"lastName\\\":\\\"\\\",\\\"attributes\\\":[\\\"Index\\\",\\\"Customer Id\\\",\\\"First Name Jefrway\\\",\\\"043-797-5229\\\",\\\"915.112.1727\\\",\\\"urangel@espinoza-francis.net\\\",\\\"2020-08-26\\\",\\\"http://www.escobar.org/\\\"],\\\"tags\\\":[],\\\"tagIds\\\":[],\\\"headers\\\":[\\\"Index\\\",\\\"Customer Id\\\",\\\"First Name Jefrway\\\",\\\"043-797-5229\\\",\\\"915.112.1727\\\",\\\"urangel@espinoza-francis.net\\\",\\\"2020-08-26\\\",\\\"http://www.escobar.org/\\\"]}')"] [txn_mode=PESSIMISTIC] [timestamp=452600056374624264] [err="[planner:1452]Cannot add or update a child row: a foreign key constraint fails (`test`.`contactimports`, CONSTRAINT `contactImports_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)"]
[2024/09/17 00:16:37.503 +00:00] [INFO] [tidb.go:276] ["rollbackTxn called due to ddl/autocommit failure"]
[2024/09/17 00:16:37.503 +00:00] [WARN] [session.go:2162] ["run statement failed"] [conn=952109782] [session_alias=] [schemaVersion=1080] [error="[planner:1452]Cannot add or update a child row: a foreign key constraint fails (`test`.`tags`, CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)"] [session="{\n  \"currDBName\": \"test\",\n  \"id\": 952109782,\n  \"lastInsertID\": 8829301226995934,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"192.168.65.1\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\",\n    \"AuthPlugin\": \"mysql_native_password\"\n  }\n}"]
[2024/09/17 00:16:37.503 +00:00] [INFO] [conn.go:1184] ["command dispatched failed"] [conn=952109782] [session_alias=] [connInfo="id:952109782, addr:192.168.65.1:52095 status:10, collation:utf8mb4_unicode_ci, user:root"] [command=Query] [status="inTxn:0, autocommit:1"] [sql="insert into `tags` (`id`, `name`, `description`, `audienceId`) values (default, 'vobis', default, 2004)"] [txn_mode=PESSIMISTIC] [timestamp=452600056374624270] [err="[planner:1452]Cannot add or update a child row: a foreign key constraint fails (`test`.`tags`, CONSTRAINT `tags_audienceId_audiences_id_fk` FOREIGN KEY (`audienceId`) REFERENCES `audiences` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)"]
[2024/09/17 00:16:37.564 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599899101855744] [concurrency=1]
[2024/09/17 00:16:37.564 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599899101855744] [concurrency=1]
[2024/09/17 00:16:37.564 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/17 00:16:37.587 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=22.22325ms] ["completed regions"=48]
[2024/09/17 00:16:37.587 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452599899101855744] [regions=48]
[2024/09/17 00:16:42.814 +00:00] [INFO] [session.go:4056] ["CRUCIAL OPERATION"] [conn=952109790] [schemaVersion=1080] [cur_db=test] [sql="\t\t\tcreate table if not exists `__drizzle_migrations` (\n\t\t\t\tid serial primary key,\n\t\t\t\thash text not null,\n\t\t\t\tcreated_at bigint\n\t\t\t)\n\t\t"] [user=root@%]
[2024/09/17 00:17:37.468 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/17 00:17:37.549 +00:00] [INFO] [gc_worker.go:374] ["there's already a gc job running, skipped"] [category="gc worker"] ["leaderTick on"=647f1bd8dc8000f]
[2024/09/17 00:17:59.167 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109862] [session_alias=] [schemaVersion=1080] [txnStartTS=452600077778944006] [txnScope=global]
[2024/09/17 00:17:59.169 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109862] [session_alias=] [schemaVersion=1080] [txnStartTS=452600077778944007] [txnScope=global]
[2024/09/17 00:17:59.170 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109862] [session_alias=] [schemaVersion=1080] [txnStartTS=452600077778944008] [txnScope=global]
[2024/09/17 00:18:17.602 +00:00] [INFO] [gc_worker.go:833] ["start delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] [ranges=0]
[2024/09/17 00:18:17.602 +00:00] [INFO] [gc_worker.go:907] ["finish delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=3.958s]
[2024/09/17 00:18:17.604 +00:00] [INFO] [gc_worker.go:957] ["start redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0]
[2024/09/17 00:18:17.604 +00:00] [INFO] [gc_worker.go:1000] ["finish redo-delete ranges"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["num of ranges"=0] ["cost time"=875ns]
[2024/09/17 00:18:17.607 +00:00] [INFO] [gc_worker.go:1264] ["sent safe point to PD"] [category="gc worker"] [uuid=647f1bd8dc8000f] ["safe point"=452599899101855744]
[2024/09/17 00:18:20.838 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109882] ["key sample"=74800000000000010c5f728000000000000858] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452600082287034369]
[2024/09/17 00:18:20.845 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600082287034369]
[2024/09/17 00:18:21.455 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600082287034369]
[2024/09/17 00:18:22.107 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109882] ["key sample"=7480000000000001265f69800000000000000104001f5e33e340010f04001fffafbbe1435f] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452600083663290369]
[2024/09/17 00:18:22.110 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600083663290369]
[2024/09/17 00:18:22.759 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600083663290369]
[2024/09/17 00:18:25.723 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109882] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000858] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452600084056768513]
[2024/09/17 00:19:22.375 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109904] ["key sample"=74800000000000010c5f728000000000000888] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452600098593177604]
[2024/09/17 00:19:22.409 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600098593177604]
[2024/09/17 00:19:23.181 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600098593177604]
[2024/09/17 00:19:24.155 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109904] ["key sample"=7480000000000001265f69800000000000000104001f5e33e340012b04001fffafbbe16bf7] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452600099943481346]
[2024/09/17 00:19:24.158 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600099943481346]
[2024/09/17 00:19:24.655 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600099943481346]
[2024/09/17 00:19:28.167 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109904] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000888] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452600100231839745]
[2024/09/17 00:21:07.529 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/17 00:22:37.465 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/17 00:22:56.613 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109908] ["key sample"=74800000000000010c5f72800000000000089b] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452600154691993601]
[2024/09/17 00:22:56.618 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600154691993601]
[2024/09/17 00:22:57.179 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600154691993601]
[2024/09/17 00:22:57.688 +00:00] [INFO] [coprocessor.go:1364] ["[TIME_COP_PROCESS] resp_time:356.363375ms txnStartTS:452600155950022657 region_id:5119 store_addr:tikv:20160 stats:Cop:{num_rpc:1, total_time:356.2ms} kv_process_ms:352 kv_wait_ms:0 kv_read_ms:0 processed_versions:0 total_versions:511898 rocksdb_delete_skipped_count:0 rocksdb_key_skipped_count:511898 rocksdb_cache_hit_count:5 rocksdb_read_count:605 rocksdb_read_byte:1369427"] [conn=952109908] [session_alias=]
[2024/09/17 00:22:58.346 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109908] ["key sample"=7480000000000001265f69800000000000000104001f5e33e340012f04001fffafbbe1930c] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452600156068249602]
[2024/09/17 00:22:58.349 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600156068249602]
[2024/09/17 00:22:58.740 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600156068249602]
[2024/09/17 00:23:02.311 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109908] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd04000000000000089b] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452600156331180035]
[2024/09/17 00:23:07.620 +00:00] [INFO] [refresher.go:116] ["Auto analyze triggered"] [category=stats] [job="NonPartitionedTableAnalysisJob:\n\tAnalyzeType: analyzeTable\n\tIndexes: \n\tSchema: test\n\tTable: contacts\n\tTableID: 280\n\tTableStatsVer: 2\n\tChangePercentage: 1.000000\n\tTableSize: 130000.00\n\tLastAnalysisDuration: 30m0s\n\tWeight: 1.282524\n"]
[2024/09/17 00:23:07.622 +00:00] [INFO] [worker.go:91] ["Job submitted"] [category=stats] [job="NonPartitionedTableAnalysisJob:\n\tAnalyzeType: analyzeTable\n\tIndexes: \n\tSchema: test\n\tTable: contacts\n\tTableID: 280\n\tTableStatsVer: 2\n\tChangePercentage: 1.000000\n\tTableSize: 130000.00\n\tLastAnalysisDuration: 30m0s\n\tWeight: 1.282524\n"]
[2024/09/17 00:23:07.702 +00:00] [INFO] [analyze.go:397] ["save analyze results in single-thread"] [buildStatsConcurrency=1] [saveStatsConcurrency=1]
[2024/09/17 00:23:07.773 +00:00] [INFO] [save.go:200] ["incrementally update modifyCount"] [category=stats] [tableID=280] [curModifyCnt=334314] [results.BaseModifyCnt=334314] [modifyCount=0]
[2024/09/17 00:23:07.773 +00:00] [INFO] [save.go:222] ["directly update count"] [category=stats] [tableID=280] [results.Count=0] [count=0]
[2024/09/17 00:23:07.875 +00:00] [INFO] [analyze.go:567] ["analyze table `test`.`contacts` has finished"] [partition=] ["job info"="auto analyze table all indexes, columns id, firstName, lastName, email, avatarUrl, subscribedAt, unsubscribedAt, audienceId, emailVerificationToken, emailVerificationTokenExpiresAt, contactImportId, createdAt with 256 buckets, 100 topn, 1 samplerate"] ["start time"=2024/09/17 00:23:07.719 +00:00] ["end time"=2024/09/17 00:23:07.871 +00:00] [cost=152.4845ms] ["sample rate reason"="use min(1, 110000/10000) as the sample-rate=1"]
[2024/09/17 00:23:25.303 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109930] [session_alias=] [schemaVersion=1080] [txnStartTS=452600163275898886] [txnScope=global]
[2024/09/17 00:23:25.305 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109930] [session_alias=] [schemaVersion=1080] [txnStartTS=452600163275898887] [txnScope=global]
[2024/09/17 00:23:25.306 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109930] [session_alias=] [schemaVersion=1080] [txnStartTS=452600163275898888] [txnScope=global]
[2024/09/17 00:24:21.889 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109964] ["key sample"=74800000000000010c5f728000000000000941] [size=11389211] [keys=160010] [puts=160007] [dels=0] [locks=3] [checks=0] [txnStartTS=452600176882221057]
[2024/09/17 00:24:21.895 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600176882221057]
[2024/09/17 00:24:22.480 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600176882221057]
[2024/09/17 00:24:23.164 +00:00] [INFO] [coprocessor.go:1364] ["[TIME_COP_PROCESS] resp_time:341.406125ms txnStartTS:452600178311168003 region_id:5119 store_addr:tikv:20160 stats:ResolveLock:{num_rpc:1, total_time:17.2s},Cop:{num_rpc:2, total_time:513.8ms} kv_process_ms:293 kv_wait_ms:0 kv_read_ms:339 processed_versions:124 total_versions:572232 rocksdb_delete_skipped_count:124 rocksdb_key_skipped_count:602231 rocksdb_cache_hit_count:709 rocksdb_read_count:60 rocksdb_read_byte:976375"] [conn=952109964] [session_alias=]
[2024/09/17 00:24:23.972 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109964] ["key sample"=7480000000000001265f69800000000000000104001f843781e0002204001fffafbbe1bc58] [size=4170000] [keys=120000] [puts=0] [dels=120000] [locks=0] [checks=0] [txnStartTS=452600178455609346]
[2024/09/17 00:24:23.979 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600178455609346]
[2024/09/17 00:24:24.617 +00:00] [INFO] [2pc.go:868] ["2PC detect large amount of mutations on a single region"] [region=5119] ["mutations count"=120000] [startTS=452600178455609346]
[2024/09/17 00:24:27.366 +00:00] [INFO] [2pc.go:692] ["[BIG_TXN]"] [session=952109964] ["key sample"=7480000000000001185f6980000000000000010161616c766172657aff406d63636c61696eff2d6d637068657273ff6f6e2e636f6d0000fd040000000000000941] [size=1452948] [keys=40000] [puts=0] [dels=40000] [locks=0] [checks=0] [txnStartTS=452600178835456005]
[2024/09/17 00:24:48.287 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109982] [session_alias=] [schemaVersion=1080] [txnStartTS=452600185035161605] [txnScope=global]
[2024/09/17 00:24:48.288 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109982] [session_alias=] [schemaVersion=1080] [txnStartTS=452600185035161606] [txnScope=global]
[2024/09/17 00:24:48.289 +00:00] [INFO] [txn.go:55] ["Try to create a new txn inside a transaction auto commit"] [conn=952109982] [session_alias=] [schemaVersion=1080] [txnStartTS=452600185035161607] [txnScope=global]
[2024/09/17 00:26:10.528 +00:00] [INFO] [refresher.go:147] ["No tables to analyze"] [category=stats] [sampled=]
[2024/09/17 00:27:37.398 +00:00] [INFO] [domain.go:3009] ["refreshServerIDTTL succeed"] [serverID=454] ["lease id"=4cf691fc6f472c41]
[2024/09/17 00:27:37.485 +00:00] [INFO] [gc_worker.go:416] ["starts the whole job"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452600072098021376] [concurrency=1]
[2024/09/17 00:27:37.485 +00:00] [INFO] [gc_worker.go:1202] ["start resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452600072098021376] [concurrency=1]
[2024/09/17 00:27:37.485 +00:00] [INFO] [range_task.go:167] ["range task started"] [name=resolve-locks-runner] [startKey=] [endKey=] [concurrency=1]
[2024/09/17 00:27:37.493 +00:00] [INFO] [range_task.go:276] ["range task finished"] [name=resolve-locks-runner] [startKey=] [endKey=] ["cost time"=7.23275ms] ["completed regions"=27]
[2024/09/17 00:27:37.493 +00:00] [INFO] [gc_worker.go:1227] ["finish resolve locks"] [category="gc worker"] [uuid=647f1bd8dc8000f] [safePoint=452600072098021376] [regions=27]
